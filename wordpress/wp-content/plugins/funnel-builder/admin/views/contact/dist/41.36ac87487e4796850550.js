(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{1170:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(124),a=n(2),l=n(25),i=n(10),o=n.n(i),s=n(9),u=n(1),b=(n(638),n(3)),f=n(7),d=n.n(f),m=n(5),p=n(341),O=n(30),j=n(32),v=n(81),y=n(271),w=n(42),_=n(325),g=n(14),h=n(435),E=n(35),S=n(49),k=n(24);function N(e,t,n,r,c,a,l){try{var i=e[a](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,c)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=function(e){var t=Object(c.useParams)(),n=t.id,a=t.builder,l=e.query,i=e.isOpen,f=e.setModalOpenState,m=e.hasCheckoutStep,w=e.funnelId,A=void 0===w?n:w,P=l.importType,I="wc_checkout"===P?"funnel":P,T=j.a.getAddStepData(),D=Object(O.a)(),F=D.addStep,B=D.addSubStep,L=D.endAddStep,z=D.updateFunnelViewLink,M=D.setCountData,R=D.fetch,U=Object(v.a)(),q=U.setActiveGroup,J=U.setActiveBuilder,Y=U.setActiveSubFilter,G=(0,Object(y.a)().getActiveGroup)(),$=Object(E.a)().getStatus,H=Object(S.a)().updateStatus,Q=$(),W=x(Object(r.useState)(null),2),K=W[0],V=W[1],Z=l.path.startsWith("/store-checkout"),X=(0,Object(k.a)().getGlobalCheckout)(),ee=("object"===C(X)?X:{}).funnel_id,te=void 0===ee?0:ee,ne=!!a||!!I,re=function(){f(!1),K&&V(null)};Object(r.useEffect)((function(){return function(){L()}}),[]),Object(r.useEffect)((function(){return T&&"type"in T&&(V(T),f(!0)),function(){re()}}),[T]);var ce=function(e,t){var n=K.is_substep,r=K.type,c=K.parent_id;e.status&&"data"in e&&(n?e.data&&(B(e.data,r,parseInt(c),!!t),Object(g.k)({},"".concat(Object(b.ib)()?"/store-checkout/bump":"/funnel-bump","/").concat(e.data.id).concat(t?"/design":"/import","&funnel_id=").concat(A))):F(e.data))},ae=x(Object(r.useState)(!1),2),le=ae[0],ie=ae[1],oe=x(Object(r.useState)(null),2),se=oe[0],ue=oe[1],be=x(Object(r.useState)(!1),2),fe=be[0],de=be[1],me=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,c,a,l,i,s,u,f,d,m,p,O,j,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!le){e.next=2;break}return e.abrupt("return");case 2:return de(!0),ie(!0),n=K.type,r=void 0===n?"":n,c=K.parent_id,a=void 0===c?0:c,l=K.is_substep,i=void 0!==l&&l,s=t.copyFrom,u=void 0===s?{}:s,f=t.title,d=void 0===f?"":f,(m=u&&u.hasOwnProperty("key")?u.key:0)<1&&(m=u&&u.hasOwnProperty("id")?u.id:0),p="",i&&parseInt(a)>0&&(p="".concat(a,"/substeps/")),Object(b.ib)()&&"wc_order_bump"===r&&(p="".concat(a,"/substeps/")),O="",O="offer"==r?"/funnel-upsell/".concat(a,"/offers"):"/funnels/".concat(A,"/steps/").concat(p),Object(b.ib)()&&(O="/store-checkout/".concat(A,"/step/").concat(p)),j={title:d,inherit_from:m,type:r},e.prev=16,e.next=19,o()({method:"POST",path:Object(b.x)(O),data:j});case 19:(v=e.sent).hasOwnProperty("status")&&v.status?ye():ue(!1),v.hasOwnProperty("status")&&v.status&&ce(v,m),z(),v.hasOwnProperty("count_data")&&M(v.count_data),p&&"wc_order_bump"===r&&!Q.is_orderbump&&H({is_orderbump:!0}),ie(!1),pe(!1),e.next=37;break;case 29:e.prev=29,e.t0=e.catch(16),console.log("Error While Creating Step: "),console.log(e.t0),ue(!1),z(),ie(!1),pe(!1);case 37:case"end":return e.stop()}}),e,null,[[16,29]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function l(e){N(a,r,c,l,i,"next",e)}function i(e){N(a,r,c,l,i,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),pe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(){V(null),L(),de(!1),ue(null),f(!1)};if(e)var n=setTimeout((function(){clearTimeout(n),t()}),2e3);else t()},Oe=(K||{}).is_substep,je=!fe&&K&&!(void 0!==Oe&&Oe)&&Object(r.createElement)(s.Button,{icon:"arrow-left-alt wffn-icon",onClick:function(){return V(null)}}),ve=Object(r.createElement)(r.Fragment,null,je,K&&"wc_order_bump"===K.type?Object(u.__)("Add Order Bump","funnel-builder"):K&&"popup_title"in K?K.popup_title:"funnel"===I?Z?Object(u.__)("Create Store Checkout","funnel-builder"):Object(u.__)("Funnel Templates","funnel-builder"):Object(u.__)("Add Step","funnel-builder"));Object(r.useEffect)((function(){K||!i&&!ne||"upsell"!==G&&(!I&&!Z||a?a||q("landing"):"step"===I?q("wc_checkout"):"funnel"===I&&q("funnel"))}),[i,ne]);var ye=function(){delete l.importType,delete l.group,J(""),q("funnel"),Y(!1),re(),Object(g.k)({},Object(g.g)(),l)};return Object(r.createElement)(r.Fragment,null,(i||ne)&&Object(r.createElement)(s.Modal,{title:ve,onRequestClose:function(){K&&pe(),ye(),Object(b.ib)()?Object(g.k)({},"/store-checkout"):Object(g.k)({},"/funnels/".concat(A))},className:d()("bwf-admin-modal",{"bwf-admin-modal-full-screen bwf-add-step-modal":!K,"bwf-admin-modal-squeezy bwf-modal-overflow-visible":K}),shouldCloseOnClickOutside:K&&!le,overlayClassName:"wffn_step_template_modal"},!fe&&!K&&I&&("funnel"===I?Object(r.createElement)(h.default,{onImportComplete:function(){ye(),Z?(R(parseInt(te)),Object(g.k)({},"/store-checkout")):(R(parseInt(A)),Object(g.k)({},"/funnels/".concat(A)))},isStoreCheckout:Z,storeCheckoutId:te}):Object(r.createElement)(_.a,{onImportComplete:function(){ye(),Z?(R(parseInt(te)),Object(g.k)({},"/store-checkout")):(R(parseInt(A)),Object(g.k)({},"/funnels/".concat(A)))},isStoreCheckout:Z,storeCheckoutId:te,hasCheckoutStep:m})),K&&Object(r.createElement)(p.a,{step:K,requestCreateStep:me,onRequestClose:re,onCreationScreen:fe,clearAndCloseEverything:pe,creationSuccess:se,isBusy:le})))},I=n(23);function T(e,t,n,r,c,a,l){try{var i=e[a](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,c)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B=function(e){var t=e.funnelId,n=void 0===t?0:t,c=Object(I.c)().showSnackbar,a=j.a.getDuplicateStepData(),l=a.step,i=a.stepPos,f=a.shouldDuplicate,d=a.substepOf,m=void 0===d?null:d,p=D(Object(r.useState)(!1),2),v=p[0],y=p[1],_=D(Object(r.useState)(null),2),g=_[0],h=_[1],E=D(Object(r.useState)(null),2),S=E[0],k=E[1],N=Object(O.a)(),C=N.addStep,x=N.addSubStep,A=N.endDuplicateStep,P=N.setCountData,F=function(){var e=setTimeout((function(){A(),clearTimeout(e)}),2e3)},B=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,r=(t=m&&"id"in m)?"".concat(m.id,"/substeps/"):"",a=Object(b.ib)()&&t?"/store-checkout/".concat(n,"/step/").concat(r):"/funnels/".concat(n,"/steps/").concat(r),"offer"===l.type&&t&&(a="/funnel-upsell/".concat(m.id,"/offers/")),e.next=8,o()({method:"POST",path:Object(b.x)(a),data:{duplicate_id:l.id,type:l.type}});case 8:"status"in(s=e.sent)&&s.status?(t?x(s.data,l.type,m.id,!0):C(s.data,i),h(null),A(),s.hasOwnProperty("count_data")&&P(s.count_data),c(Object(u.__)("Changes Saved","funnel-builder"))):(k({message:Object(u.__)("There are some technical difficulties while duplicating step. Contact Support","funnel-builder")}),h(!1)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),k(e.t0),h(!1);case 17:y(!1),F();case 19:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function l(e){T(a,r,c,l,i,"next",e)}function i(e){T(a,r,c,l,i,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){h(null),l&&B()}),[l]),f?Object(r.createElement)(s.Modal,{isDismissible:!1,title:!1===g?Object(u.__)("Failed"):"",onRequestClose:A,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header"},v&&Object(r.createElement)("div",{className:"bwf-t-center bwf-mt-10"},Object(r.createElement)(w.a,{size:"xxl"}),Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"},Object(u.__)("Please wait…","funnel-builder")),Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(u.__)("We are duplicating step in the funnel","funnel-builder"))),!v&&!0===g&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.success_check}})),!v&&!0===g&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1"}," ",Object(u.__)("Step Duplicated","funnel-builder")))),!v&&!1===g&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:""},Object(r.createElement)("div",{className:"bwf-p"},Object(u.__)("Error: ","funnel-builder")+S&&"message"in S?S.message:Object(u.__)("There are some technical difficulties while duplicating step. Please contact support","funnel-builder")))),!v&&!1===g&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-modal-action".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(s.Button,{className:"bwf-modal-confirm-btn",isPrimary:!0,onClick:A},Object(u.__)("OK","funnel-builder"))))):null},L=n(163),z=n(274),M=n(53),R=n(26),U=n(19),q={onMouseEnter:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.closest(".bwf-f-steps > .bwf-st-c-wrap:not(.bwf-st-c__lite-card)");n&&n.classList.add("is-child-hover")},onMouseLeave:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.closest(".bwf-f-steps > .bwf-st-c-wrap:not(.bwf-st-c__lite-card)");n&&n.classList.remove("is-child-hover")}};function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e.type,n=void 0===t?"upsell":t,c=e.onClick,a=e.modalContent,l=Y(Object(r.useState)(!1),2),i=l[0],s=l[1],f=(Object(O.a)().setShowAddStepModal,Object(v.a)().setActiveGroup),p=Object(R.a)().setStepPromotion;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",J({className:d()("bwf-st-c-wrap bwf-st-c__lite-card",["bwf-st-lite-".concat(n)])},q),Object(r.createElement)("div",{className:"bwf-st-c bwf-st-c-card-container is-lite-card",onClick:function(){return s(!0)}},Object(r.createElement)("span",{className:"bwf-d-icon-drag",style:{marginTop:"2px"}},Object(r.createElement)(m.a,{icon:"king",color:U.NOTICE_YELLOW,size:20})),Object(r.createElement)("div",{className:"bwf-st-c-title",style:{marginLeft:"-3px",flexDirection:"row"}},Object(r.createElement)("a",{href:"#",onClick:function(e){return e.preventDefault()}},"upsell"===n?Object(u.__)("One Click Upsell Offer","funnel-builder"):Object(u.__)("Order Bump","funnel-builder")),Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap bwf-ml-12"},Object(r.createElement)("div",{className:"bwf-st-c-head bwf-has-chart bwf-st-c-badge-small bwf-st-c-badge-green bwf-cursor-text"},Object(r.createElement)(m.a,{icon:"chart-increase",width:"14",height:"14",color:"#09B29C"}),Object(r.createElement)("span",null,Object(u.__)("Increases average order value","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("div",{className:"bwf-card-action",onClick:function(){"upsell"===n?(Object(g.k)({importType:"step"}),f("upsell")):c&&c()},role:"button",tabIndex:"-1"},Object(u.__)("View Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-card-action bwf-close-icon",onClick:function(e){var t;e.stopPropagation(),t="/".concat("upsell"===n?"remove-upsell-promotion":"remove-bump-promotion"),p("yes","upsell"===n?"upsell":"bump"),o()({path:Object(b.x)(t),method:"POST",data:{user_id:wffn.current_logged_user}}).then((function(e){e.status||console.log("Failed to remove step promotion.")})).catch((function(e){return console.log(e)}))}},Object(r.createElement)(m.a,{icon:"close",size:12}))))),i&&Object(r.createElement)(M.a,{isOpen:i,onRequestClose:function(){return s(!1)},modalContent:a}))},H=n(34),Q=n(55),W=n(74),K=n(65),V=n(420),Z=n(21),X=n(87),ee=n(135),te=n(134),ne=n(54),re=n(64),ce=n(40),ae=n(86),le=n(57),ie=(n(639),n(29)),oe={views:{label:Object(u.__)("Views","funnel-builder")},conversions:{label:Object(u.__)("Conversions","funnel-builder")},revenue:{label:Object(u.__)("Revenue","funnel-builder"),isCurrency:!0}},se=function(e){var t=e.items,n=void 0===t?["views","conversions","revenue"]:t,c=e.stats,a=void 0===c?{}:c,l=e.type,i=Object(I.b)().isProFeatureLocked,o=Object(b.z)().formatAmount,s=(0,j.a.getAnalyticsLoading)(),f=function(e){return!i&&s?Object(r.createElement)("div",{key:e,className:"bwf-funnel-step-analytics__item"},Object(r.createElement)(ie.a,{h:12,w:24,ml:"auto",mr:"auto"}),Object(r.createElement)(ie.a,{h:12,w:60,mt:4,ml:"auto",mr:"auto"})):Object(r.createElement)("div",{key:e,className:"bwf-funnel-step-analytics__item"},function(e){return i&&(a[e]=Math.floor(901*Math.random())+100),oe[e].isCurrency?o(a[e]||0):a[e]||0}(e),Object(r.createElement)("br",null),Object(r.createElement)("span",{className:"bwf-text-light bwf-text-bold"},"landing"===l&&"conversions"===e?Object(u.__)("Clicks","funnel-builder"):oe[e].label))};return Object(r.createElement)("div",{className:"bwf-funnel-step-analytics"},function(){if(i)return Object(r.createElement)("div",{className:"bwf-funnel-step-analytics__overlay"},Object(r.createElement)("a",{href:Object(b.S)(["Funnel","Steps","Cards","Analytics"]),target:"_blank",rel:"noreferrer"},Object(r.createElement)(Z.c,{content:Object(u.__)("Upgrade to PRO","funnel-builder"),type:"warning",border:!0})))}(),n.map((function(e){return f(e)})))},ue=n(63);function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var je=window.wffn.is_ab_experiment,ve=window.wffn.is_ab_experiment_support,ye={status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("Increased Conversion Rates","funnel-builder"),Object(u.__)("Greater Return on Ad Spend","funnel-builder"),Object(u.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.R)()+"AB-testing.png",proLink:Object(b.S)(["Order","Bump","AB_Test","Upgrade","Modal"])},we={type:2,status:!0,proLink:Object(b.S)(["Order","Bump","Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")},_e=function(e){var t,n,c,i=e.bump,f=i._data,p=void 0===f?{}:f,v=i.tags,y=i.experiment_status,w=(i.type,i.stats),_=e.bump,h=e.checkoutStep,E=e.checkoutPos,S=e.stepPos,k=e.view,N=e.total,C=e.onSortStart,x=p.title,A=p.status,P=Object(b.F)(),T=j.a.getFunnel(),D=_.id,F=void 0===D?"":D,B=Object(re.a)().setModalData,L=pe(Object(r.useState)(!1),2),z=L[0],R=L[1],J=pe(Object(r.useState)({}),2),Y=J[0],G=J[1],$=pe(Object(r.useState)(!1),2),ie=$[0],oe=$[1],fe=pe(Object(r.useState)(!1),2),me=fe[0],Oe=fe[1],_e=pe(Object(r.useState)(!1),2),ge=_e[0],he=_e[1],Ee=pe(Object(r.useState)(!1),2),Se=Ee[0],ke=Ee[1],Ne=pe(Object(r.useState)(!1),2),Ce=Ne[0],xe=Ne[1],Ae=pe(Object(r.useState)({}),2),Pe=Ae[0],Ie=Ae[1],Te=Object(O.a)(),De=Te.startDuplicateStep,Fe=Te.startDeleteStep,Be=Te.setStepTitle,Le=Te.setUpdateFunnel,ze=Object(ce.a)(),Me=ze.setToggleState,Re=ze.setSubStep,Ue=location&&location.search?Object(l.parse)(location.search.substring(1)):{},qe=Object(I.c)().showSnackbar,Je=Object(ae.a)().setExperimentStatus,Ye=Object(le.a)().setStepHeaderData,Ge=function(){if(_.hasOwnProperty("id")&&_.id){Be(Object(H.decodeEntities)(x)+Object(u.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(P,"/experiments/").concat(_.id);Object(b.ib)()&&(e="/store-checkout/experiments/".concat(_.id)),Object(g.k)({},e)}},$e=function(e){xe(!0);var t="/funnel-bump/save-state/".concat(_.id,"?funnel_id=").concat(P);o()({path:Object(b.x)(t),method:"POST",data:{status:!Number(A)}}).then((function(t){t.success?(Me(!Number(A)),xe(!1),ke(!1),he(!1),function(e,t){var n=Object(a.cloneDeep)(null==T?void 0:T.steps).map((function(n){return parseInt(n.id)===parseInt(h.id)&&(n.substeps.wc_order_bump=n.substeps.wc_order_bump.map((function(n){return parseInt(n.id)===parseInt(F)&&(n._data.status=0===parseInt(e)?"1":"0",n.experiment_status=t?"3":n.experiment_status),n}))),n}));T.steps=n;var r=JSON.parse(JSON.stringify(T));Le(r)}(Number(A),e),Ie({}),qe(Object(u.__)("Changes Saved","funnel-builder"))):(Me(Number(A)),xe(!1),ke(!1),he(!1))})).catch((function(e){console.log(e),Me(Number(A)),qe(Object(u.__)("Status Updation Failed","funnel-builder"))}))},He={1:Object(u.__)("A/B Test Draft","funnel-builder"),2:Object(u.__)("A/B Test Running","funnel-builder"),3:Object(u.__)("A/B Test Paused","funnel-builder")},Qe={1:"warning",2:"success",3:"default"},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Qe[e]:He[e]},Ke=function(e){if(Oe(!0),(e=e.trim())===x)oe(!1),Oe(!1);else if(x!==e.trim()){Be(e);var t='{"title":"'.concat(e,'","slug":"').concat(k.match(/([^\/]*)\/*$/)[1],'"}');o()({path:Object(b.x)("/funnel-bump/save-state/".concat(_.id,"?funnel_id=").concat(P)),data:JSON.parse(t),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);oe(!1),Oe(!1),qe(Object(u.__)("Changes Saved","funnel-builder")),function(e,t){var n=T.steps.map((function(n){if(n.id===e){var r=n.substeps.wc_order_bump.map((function(e){if(e.id===_.id){var n=de(de({},e._data),{},{title:t});return de(de({},e),{},{_data:n})}return e}));return n.substeps.wc_order_bump=r,n}return n}));T.steps=n;var r=JSON.parse(JSON.stringify(T));Le(r)}(e.step_data.checkout_id,e.step_data.title)})).catch((function(e){console.log(e.message?e.message:e),Be(x),qe(Object(u.__)("Title Updation Failed","funnel-builder"))}))}},Ve=Object(I.b)(),Ze=Ve.isExpired,Xe=Ve.isProFeatureLocked,et=Ve.isBasicFeatureLocked;return Object(r.createElement)("div",be({className:"bwf-st-c"},q),Object(r.createElement)("div",{className:"bwf-st-c-card-container"},Object(r.createElement)("span",{className:"bwf-move-icons"},Object(r.createElement)("span",{className:0===S?"is-disabled":"",onClick:function(){return C("up",S)},title:Object(u.__)("Click here to move up","funnel-builder")},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16})),Object(r.createElement)("span",{className:S===N-1?"is-disabled":"",onClick:function(){return C("down",S)},title:Object(u.__)("Click here to move down","funnel-builder")},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16}))),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8"},Object(r.createElement)("div",{className:"bwf-st-c__step-type"},Object(u.__)("Order Bump","funnel-builder")),Object(r.createElement)(r.Fragment,null,Ze?Object(r.createElement)(ue.a,{toolTipText:Object(u.__)("Because your license is expired your order bump will not appear to the customer","funnel-builder"),size:"280",textAlign:"left"},Object(r.createElement)(Z.c,{content:Object(r.createElement)("div",{className:"bwf-flex bwf--g4"},Object(u.__)("License Expired","funnel-builder"),Object(r.createElement)(m.a,{icon:"info",size:"12",color:U.DANGER_COLOR})),type:"danger"})):Object(r.createElement)(r.Fragment,null,Object(a.size)(v)>0&&Object.keys(v).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(){"no_product"!==e&&"has_rules"!==e||(Ye("bump",F,"",{title:x,view_link:k,status:1===Number(A),experiment_status:y}),Object(g.k)({},v[e].edit,Ue))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+v[e].label_class},v[e].label))})),!Object(a.isEmpty)(y)&&"4"!==y&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){je&&!Xe?ve?(Je(y),Re({step:"bump",parentId:h.id}),Ge()):R(!0):G(ye)}},Object(r.createElement)(Z.c,{content:(t=y,c="warning"===(n=We(y,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(X.a,{fill:c}),Object(r.createElement)("span",{className:"".concat(void 0!==c?"bwf-mr-4":"")},We(t)))),type:We(y,!0)})),!(A&&1===parseInt(A))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(u.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))))),Object(r.createElement)("a",{href:Object(b.Y)(P,"order_bump",h.id,_.id),onClick:function(e){e.preventDefault(),Ye("bump",F,"",{title:x,view_link:k,status:1===Number(A),experiment_status:y}),Object(g.k)({page:"bwf",path:Object(b.Y)(P,"order_bump",h.id,_.id,!1)},"/",{})}},Object(H.decodeEntities)(x))),Object(r.createElement)(se,{type:"bump",stats:w}),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{href:k,className:"bwf-list-btn is-preview",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(W.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),oe(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Edit","funnel-builder")))),!(A&&1===parseInt(A))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Ie({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object(H.decodeEntities)(x)),"funnel-builder")))}),$e()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(A)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(y)?he(!0):ke(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Draft","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){et?G(we):(t(),De(de(de({},_),{},{type:"wc_order_bump"}),0,h))}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(u.__)("Duplicate","funnel-builder")),et&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){!Xe&&je?ve?(Je(y),Re({step:"bump",parentId:h.id}),Ge()):R(!0):G(ye)}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(u.__)("A/B Test","funnel-builder")),Xe&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),B({title:x}),Fe(de(de({},_),{},{type:"wc_order_bump"}),S,de(de({},h),{},{stepPos:E}))},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Delete","funnel-builder")))))}})))),z&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return R(!1)}},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(u.__)("Oops it seems old version of Experiments is activated.","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_30"})),Y.status&&Object(r.createElement)(M.a,{isOpen:Y.status,onRequestClose:function(){return G({status:!1})},modalContent:Y,type:Y.type}),ie&&Object(r.createElement)(V.a,{renameTitle:"Edit Details",title:Object(H.decodeEntities)(x),onclose:function(){return oe(!1)},updateTitle:function(e){return Ke(e)},isLoading:me}),Se&&Object(r.createElement)(te.a,{isPublishLoading:Ce,onAction:function(){return $e()},onclose:function(){return ke(!1)}}),ge&&Object(r.createElement)(ee.a,{isPublishLoading:Ce,onAction:function(){$e(!0)},onclose:function(){return he(!1)}}),Object(r.createElement)(ne.a,{className:d()("bwf-admin-modal-squeezy",Pe.className),confirmText:Pe.confirmText,confirmButtonText:Pe.buttonConfirm,cancelButtonText:Pe.buttonCancel,onConfirm:Pe.onConfirm,isLoading:Pe.loading,successMessage:Pe.success,errorMessage:Pe.error,content:Pe.content,onRequestClose:function(){return Ie({status:!1})},modalTitle:Pe.modalTitle,isOpen:Pe.status,closeIcon:Pe.closeIcon}))},ge=n(387),he=n(342);function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ae=window.wffn.is_ab_experiment,Pe=window.wffn.is_ab_experiment_support,Ie={status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("A/B test product price, page layout, messaging, design & more. Create variants, analyze results & uncover hidden revenue.","funnel-builder")]},image:Object(b.R)()+"AB-testing.png",proLink:Object(b.S)(["Checkout","AB_Test","Upgrade","Modal"])},Te={type:2,status:!0,proLink:Object(b.S)(["Checkout","Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")},De={bump:!0},Fe=function(e){var t=e.step,n=(t=void 0===t?{}:t)._data,c=void 0===n?{}:n,i=t.tags,f=void 0===i?[]:i,p=(t.experiment,t.substeps),v=(p=void 0===p?{}:p).wc_order_bump,y=void 0===v?[]:v,w=t.id,_=void 0===w?0:w,h=t.experiment_status,E=t.type,S=t.stats,k=e.step,N=e.stepPos,C=void 0===N?0:N,x=(e.title,e.isOBFake),A=e.dragHandleController,P=Object(I.b)(),T=P.isProFeatureLocked,D=P.isBasicFeatureLocked,F=P.isLite,B=Object(I.c)().showSnackbar,L=j.a.getFunnel(),z=Object(le.a)().setStepHeaderData,R=Object(b.F)(),J=Ce(Object(r.useState)({}),2),Y=J[0],G=J[1],V=c.title,ie=c.view,oe=c.status,ue=void 0===oe?0:oe,be=Object(re.a)().setModalData,fe=Object(O.a)(),de=fe.startDuplicateStep,me=fe.startDeleteStep,pe=fe.startAddStep,Oe=fe.setShowProModal,je=fe.setShowProModalText,ve=fe.setStepTitle,ye=(fe.fetch,fe.sortSubSteps),we=fe.setUpdateFunnel,Se=Object(ce.a)(),Ne=Se.setToggleState,xe=(Se.setStepData,Object(ae.a)().setExperimentStatus),Fe=location&&location.search?Object(l.parse)(location.search.substring(1)):{},Be=Ce(Object(r.useState)(f),2),Le=Be[0],ze=Be[1],Me=Ce(Object(r.useState)(!1),2),Re=Me[0],Ue=Me[1],qe=Ce(Object(r.useState)(!1),2),Je=qe[0],Ye=qe[1],Ge=Ce(Object(r.useState)(!1),2),$e=Ge[0],He=Ge[1],Qe=Ce(Object(r.useState)(!1),2),We=Qe[0],Ke=Qe[1],Ve=Ce(Object(r.useState)(!1),2),Ze=Ve[0],Xe=Ve[1],et=Ce(Object(r.useState)(!1),2),tt=et[0],nt=et[1],rt=Ce(Object(r.useState)({}),2),ct=rt[0],at=rt[1];Object(r.useEffect)((function(){F||0!==Object(a.size)(y)||"no_bump"in f||ze(ke(ke({},Le),{},{no_bump:{label:Object(u.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[y.length]);var lt,it,ot,st=Object(b.db)("wc_order_bump"),ut={1:Object(u.__)("A/B Test Draft","funnel-builder"),2:Object(u.__)("A/B Test Running","funnel-builder"),3:Object(u.__)("A/B Test Paused","funnel-builder")},bt={1:"warning",2:"success",3:"default"},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?bt[e]:ut[e]},dt=function(e){null!==st&&pe(ke(ke({},st),{},{parent_id:parseInt(_),is_substep:!0,title:"Order Bump"})),!st&&Oe(!0),!st&&je(Object(u.__)("Order Bump is a part of Funnel Builder Pro","funnel-builder")),e.preventDefault()},mt=function(){if(_){ve(Object(H.decodeEntities)(V)+Object(u.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(R,"/experiments/").concat(_);Object(b.ib)()&&(e="/store-checkout/experiments/".concat(_)),Object(g.k)({},e)}},pt=function(e){nt(!0);var t="/funnel-".concat(E,"/save-state/").concat(_,"?funnel_id=").concat(R);o()({path:Object(b.x)(t),method:"POST",data:{status:!Number(ue)}}).then((function(t){t.success?(Ne(!Number(ue)),nt(!1),Xe(!1),Ke(!1),function(e,t){var n=null==L?void 0:L.steps.map((function(n){if(n.id===_){var r=ke(ke({},n._data),{},{status:e?"1":"0"});return ke(ke({},n),{},{_data:r,experiment_status:t?"3":n.experiment_status})}return n}));L.steps=n;var r=JSON.parse(JSON.stringify(L));we(r)}(Number(t.step_data.status),e),at({}),B(Object(u.__)("Changes Saved","funnel-builder"))):(Ne(Number(ue)),nt(!1),Xe(!1),Ke(!1))})).catch((function(e){console.log(e),Ne(Number(ue)),B("Status Updation Failed")}))},Ot=function(e,t){var n=[];"up"===e?n=ye(_,"wc_order_bump",t,t-1):"down"===e&&(n=ye(_,"wc_order_bump",t,t+1)),o()({path:Object(b.x)("/funnels/steps/order/save/".concat(_,"?type=wc_order_bump")),method:"POST",data:{order:n.map((function(e){return e.id}))}}).then((function(e){e.success||console.log(e)})).catch((function(e){console.log(e)}))},jt=function(e,t){if(He(!0),(e=e.trim())===V&&(null==c?void 0:c.post_name)===t)Ye(!1),He(!1);else{ve(e);var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');o()({path:Object(b.x)("/funnel-".concat(E,"/save-state/").concat(_,"?funnel_id=").concat(R)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);Ye(!1),He(!1),function(e,t,n){var r=L.steps.map((function(r){return r.id===Number(_)?(r._data.title=e,r._data.post_name=t,r._data.view_link=n,r):r}));L.steps=r;var c=JSON.parse(JSON.stringify(L));we(c)}(e.step_data.title,t,e.step_data.view_link),B(Object(u.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),ve(V),B(Object(u.__)("Title Updation Failed","funnel-builder"))}))}};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-card-container"},A(),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8"},Object(r.createElement)("div",{className:"bwf-st-c__step-type"},Object(b.qb)(E)),Object(r.createElement)(r.Fragment,null,Object(a.size)(f)>0&&Object.keys(Le).map((function(e){return("no_bump"!==e||!F&&0===Object(a.size)(y))&&"global_checkout"!==e&&Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_product"===e?(z("checkout",_,"",{title:V,view_link:ie,status:1===Number(ue),experiment_status:h}),Object(g.k)({},Le[e].edit,Fe)):"no_bump"===e&&(T?G(De):dt(t))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+Le[e].label_class},Le[e].label))})),!Object(a.isEmpty)(h)&&"4"!==h&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){Ae&&!T?Pe?(xe(h),mt()):Ue(!0):G(Ie)}},Object(r.createElement)(Z.c,{content:(lt=h,ot="warning"===(it=ft(h,!0))?"#B68F40":"success"===it?"#09B29C":"default"===it?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(X.a,{fill:ot}),Object(r.createElement)("span",{className:"".concat(void 0!==ot?"bwf-mr-4":"")},ft(lt)))),type:ft(h,!0)})),!(ue&&1===parseInt(ue))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(u.__)("Draft","funnel-builder"),className:"bwf-cursor-default",type:"warning"})))),Object(r.createElement)("a",{href:Object(b.Y)(R,"wc_checkout",k.id),onClick:function(e){e.preventDefault(),z("checkout",_,"",{title:V,view_link:ie,status:1===Number(ue),experiment_status:h}),Object(g.k)({page:"bwf",path:Object(b.Y)(R,"wc_checkout",k.id,"",!1)},"/",{})}},Object(H.decodeEntities)(V)," ")),Object(r.createElement)(se,{type:E,stats:S}),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{href:Object(H.decodeEntities)(ie),className:"bwf-list-btn is-preview",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(W.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),Ye(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Edit","funnel-builder")))),!(ue&&1===parseInt(ue))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{at({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object(H.decodeEntities)(V)),"funnel-builder")))}),pt()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(ue)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(h)?Ke(!0):Xe(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Draft","funnel-builder")))),!Object(b.ib)()&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){D?G(Te):(t(),de(k,C+1))}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(u.__)("Duplicate","funnel-builder")),D&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){!T&&Ae?Pe?(xe(h),mt()):Ue(!0):G(Ie)}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(u.__)("A/B Test","funnel-builder")),T&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),be({title:V}),me(k,C)},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Delete","funnel-builder")))))}})))),Y.status&&Object(r.createElement)(M.a,{isOpen:Y.status,onRequestClose:function(){return G({status:!1})},modalContent:Y,type:Y.type}),Re&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return Ue(!1)}},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(u.__)("Oops it seems old version of Experiments is activated.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-modal-content"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel.","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(s.Button,{variant:"primary",onClick:function(){return Ue(!1)}},Object(u.__)("OK","funnel-builder")))),null!==st&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(a.size)(y)>0&&y.map((function(e,t){return Object(r.createElement)(_e,{key:t,bump:e,checkoutStep:k,checkoutPos:C,stepPos:t,total:Object(a.size)(y),view:Object(H.decodeEntities)(ie),onSortStart:Ot})})),Object(r.createElement)("div",Ee({className:"bwf-st-c-sub-st-action-wrap"},q),Object(r.createElement)(s.Button,{isSecondary:!0,onClick:function(e){T?G(De):dt(e)}},T&&Object(r.createElement)(m.a,{icon:"king",color:U.NOTICE_YELLOW,size:20}),Object(u.__)("Add Order Bump","funnel-builder"))))),x&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap is-ob-fake"},Object(r.createElement)($,{type:"order_bump",onClick:function(){return Oe(!0)},modalContent:{title:Object(u.__)("Order Bump","funnel-builder"),content:{benefits:[Object(u.__)("Boost your sales effortlessly with the Order Bumps. Let users add products with just one click on checkout page.","funnel-builder")]},image:Object(b.R)()+"order-bump.png",proLink:Object(b.S)(["Order","Bump","Upgrade","Modal"])}}))),Je&&Object(r.createElement)(ge.a,{pageUrl:null==c?void 0:c.view_link,pageUrlSlug:null==c?void 0:c.post_name,renameTitle:"Step",title:Object(H.decodeEntities)(V),onclose:function(){return Ye(!1)},updateDetail:function(e,t){return jt(e,t)},isLoading:$e}),Ze&&Object(r.createElement)(te.a,{isPublishLoading:tt,onAction:function(){return pt()},onclose:function(){return Xe(!1)}}),We&&Object(r.createElement)(ee.a,{isPublishLoading:tt,onAction:function(){pt(!0)},onclose:function(){return Ke(!1)}}),Y.bump&&Object(r.createElement)(he.a,{isOpen:Y.bump,onRequestClose:function(){return G({status:!1})}}),Object(r.createElement)(ne.a,{className:d()("bwf-admin-modal-squeezy",ct.className),confirmText:ct.confirmText,confirmButtonText:ct.buttonConfirm,cancelButtonText:ct.buttonCancel,onConfirm:ct.onConfirm,isLoading:ct.loading,successMessage:ct.success,errorMessage:ct.error,content:ct.content,onRequestClose:function(){return at({status:!1})},modalTitle:ct.modalTitle,isOpen:ct.status,closeIcon:ct.closeIcon}))};function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qe=window.wffn.is_ab_experiment,Je=window.wffn.is_ab_experiment_support,Ye={status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("Increased Conversion Rates","funnel-builder"),Object(u.__)("Greater Return on Ad Spend","funnel-builder"),Object(u.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.R)()+"AB-testing.png",proLink:Object(b.S)(["Offer","AB_Test","Upgrade","Modal"])},Ge={type:2,status:!0,proLink:Object(b.S)(["Offer","Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")},$e=function(e){var t,n,c,i=e.offer,f=i._data,p=void 0===f?{}:f,v=i.tags,y=(i.experiment,i.experiment_status),w=i.stats,_=e.offer,h=e.upsellStep,E=e.upsellPos,S=e.stepPos,k=e.view,N=e.total,C=e.onSortStart,x=p.title,A=p.status,P=_.id,T=void 0===P?"":P,D=Object(b.F)(),F=j.a.getFunnel(),B=Object(re.a)().setModalData,L=Re(Object(r.useState)(!1),2),z=L[0],R=L[1],J=Re(Object(r.useState)({}),2),Y=J[0],G=J[1],$=Re(Object(r.useState)(!1),2),V=$[0],ie=$[1],oe=Re(Object(r.useState)(!1),2),be=oe[0],fe=oe[1],de=Re(Object(r.useState)(!1),2),me=de[0],pe=de[1],Oe=Re(Object(r.useState)(!1),2),je=Oe[0],ve=Oe[1],ye=Re(Object(r.useState)(!1),2),we=ye[0],_e=ye[1],he=Re(Object(r.useState)({}),2),Ee=he[0],Se=he[1],ke=Object(I.b)("ul").isExpired,Ne=Object(I.b)(),Ce=Ne.isProFeatureLocked,xe=Ne.isBasicFeatureLocked,Ae=Object(O.a)(),Pe=Ae.startDuplicateStep,Ie=Ae.startDeleteStep,Te=Ae.setStepTitle,De=Ae.setUpdateFunnel,Fe=Object(ce.a)(),Le=Fe.setToggleState,Me=Fe.setSubStep,Ue=Object(ae.a)().setExperimentStatus,$e=Object(le.a)().setStepHeaderData,He=location&&location.search?Object(l.parse)(location.search.substring(1)):{},Qe=Object(I.c)().showSnackbar,We=function(){if(_.hasOwnProperty("id")&&_.id){Te(Object(H.decodeEntities)(x)+Object(u.__)(" A/B Test"));var e="/funnels/".concat(D,"/experiments/").concat(_.id);Object(b.ib)()&&(e="/store-checkout/experiments/".concat(_.id)),Object(g.k)({},e)}},Ke={1:Object(u.__)("A/B Test Draft"),2:Object(u.__)("A/B Test Running"),3:Object(u.__)("A/B Test Paused")},Ve={1:"warning",2:"success",3:"default"},Ze=function(e){_e(!0);var t="/funnel-".concat("offer","/save-state/",_.id,"?funnel_id=").concat(D);o()({path:Object(b.x)(t),method:"POST",data:{status:!Number(A)}}).then((function(t){t.success?(Le(!Number(A)),_e(!1),ve(!1),pe(!1),function(e,t){var n=Object(a.cloneDeep)(null==F?void 0:F.steps).map((function(n){return parseInt(n.id)===parseInt(h.id)&&(n.substeps.offer=n.substeps.offer.map((function(n){return parseInt(n.id)===parseInt(T)&&(n._data.status=0===parseInt(e)?"1":"0",n.experiment_status=t?"3":n.experiment_status),n}))),n}));F.steps=n;var r=JSON.parse(JSON.stringify(F));De(r)}(Number(A),e),Se({}),Qe(Object(u.__)("Changes Saved","funnel-builder"))):(Le(Number(A)),_e(!1),ve(!1),pe(!1))})).catch((function(e){console.log(e),Le(Number(A)),Qe("Status Updation Failed")}))},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Ve[e]:Ke[e]},et=function(e,t){if(fe(!0),(e=e.trim())===x&&(null==p?void 0:p.post_name)===t)ie(!1),fe(!1);else{Te(e);var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');o()({path:Object(b.x)("/funnel-".concat("offer","/save-state/",_.id,"?funnel_id=").concat(D)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);ie(!1),fe(!1),function(e,t,n,r){var c=F.steps.map((function(c){if(c.id===Number(e)){var a=c.substeps.offer.map((function(e){if(e.id===_.id){var c=ze(ze({},e._data),{},{title:t,post_name:n,view_link:r});return ze(ze({},e),{},{_data:c})}return e}));return c.substeps.offer=a,c}return c}));F.steps=c;var a=JSON.parse(JSON.stringify(F));De(a)}(e.step_data.upsell_id,e.step_data.title,t,e.step_data.view_link),Qe(Object(u.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),Te(x),Qe("Title Updation Failed")}))}};return Object(r.createElement)("div",Be({className:"bwf-st-c"},q),Object(r.createElement)("div",{className:"bwf-st-c-card-container"},Object(r.createElement)("span",{className:"bwf-move-icons"},Object(r.createElement)("span",{className:0===S?"is-disabled":"",onClick:function(){return C("up",S)},title:"Click here to move up"},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16})),Object(r.createElement)("span",{className:S===N-1?"is-disabled":"",onClick:function(){return C("down",S)},title:"Click here to move down"},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16}))),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8"},Object(r.createElement)("div",{className:"bwf-st-c__step-type"},Object(b.qb)("offer")),Object(r.createElement)(r.Fragment,null,ke?Object(r.createElement)(ue.a,{toolTipText:Object(u.__)("Because your license is expired your upsell offers will not appear to the customer","funnel-builder"),size:"280",textAlign:"left"},Object(r.createElement)(Z.c,{content:Object(r.createElement)("div",{className:"bwf-flex bwf--g4"},Object(u.__)("License Expired","funnel-builder"),Object(r.createElement)(m.a,{icon:"info",size:"12",color:U.DANGER_COLOR})),type:"danger"})):Object(r.createElement)(r.Fragment,null,Object(a.size)(v)>0&&Object.keys(v).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(){"no_product"===e&&($e("offer",T,T,{title:x,view_link:k,status:1===Number(A),experiment_status:y}),Object(g.k)({},v[e].edit,He))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+v[e].label_class},v[e].label))})),!Object(a.isEmpty)(y)&&"4"!==y&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){qe&&!Ce?Je?(Me({step:"offer",parentId:h.id}),Ue(y),We()):R(!0):G(Ye)}},Object(r.createElement)(Z.c,{content:(t=y,c="warning"===(n=Xe(y,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(X.a,{fill:c}),Object(r.createElement)("span",{className:"".concat(void 0!==c?"bwf-mr-4":"")},Xe(t)))),type:Xe(y,!0)})),!(A&&1===parseInt(A))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(u.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))))),Object(r.createElement)("a",{href:Object(b.Y)(D,"offer",h.id,_.id),onClick:function(e){e.preventDefault(),$e("offer",T,T,{title:x,view_link:k,status:1===Number(A),experiment_status:y}),Object(g.k)({page:"bwf",path:Object(b.Y)(D,"offer",h.id,_.id,!1)},"/",{})}},Object(H.decodeEntities)(x))),Object(r.createElement)(se,{type:"offer",stats:w}),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{href:null==p?void 0:p.view,className:"bwf-list-btn is-preview",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(W.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),ie(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Edit","funnel-builder")))),!(A&&1===parseInt(A))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Se({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object(H.decodeEntities)(x)),"funnel-builder")))}),Ze()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(A)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(y)?pe(!0):ve(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Draft","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){xe?G(Ge):(t(),Pe(ze(ze({},_),{},{type:"offer"}),0,h))}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Duplicate","funnel-builder")),xe&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){!Ce&&qe?(Ue(y),Je?(Me({step:"offer",parentId:h.id}),We()):R(!0)):G(Ye)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("A/B Test","funnel-builder")),Ce&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),B({title:x}),Ie(ze(ze({},_),{},{type:"offer"}),S,ze(ze({},h),{},{stepPos:E}))},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Delete","funnel-builder")))))}})))),z&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return R(!1)}},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(u.__)("Oops it seems old version of Experiments is activated.")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel."))),Object(r.createElement)("div",{className:"bwf_clear_30"})),Y.status&&Object(r.createElement)(M.a,{isOpen:Y.status,onRequestClose:function(){return G({status:!1})},modalContent:Y,type:Y.type}),V&&Object(r.createElement)(ge.a,{pageUrl:null==p?void 0:p.view_link,pageUrlSlug:null==p?void 0:p.post_name,renameTitle:"Step",title:Object(H.decodeEntities)(x),onclose:function(){return ie(!1)},updateDetail:function(e,t){return et(e,t)},isLoading:be}),je&&Object(r.createElement)(te.a,{isPublishLoading:we,onAction:function(){return Ze()},onclose:function(){return ve(!1)}}),me&&Object(r.createElement)(ee.a,{isPublishLoading:we,onAction:function(){Ze(!0)},onclose:function(){return pe(!1)}}),Object(r.createElement)(ne.a,{className:d()("bwf-admin-modal-squeezy",Ee.className),confirmText:Ee.confirmText,confirmButtonText:Ee.buttonConfirm,cancelButtonText:Ee.buttonCancel,onConfirm:Ee.onConfirm,isLoading:Ee.loading,successMessage:Ee.success,errorMessage:Ee.error,content:Ee.content,onRequestClose:function(){return Se({status:!1})},modalTitle:Ee.modalTitle,isOpen:Ee.status,closeIcon:Ee.closeIcon}))};function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xe=window.wffn.is_ab_experiment,et=window.wffn.is_ab_experiment_support,tt=function(e){return{status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("Increased Conversion Rates","funnel-builder"),Object(u.__)("Greater Return on Ad Spend","funnel-builder"),Object(u.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.R)()+"AB-testing.png",proLink:Object(b.S)([e.replace(" ","+"),"AB_Test","Upgrade","Modal"])}},nt={status:!0,title:Object(u.__)("Add Offer","funnel-builder"),proLink:Object(b.S)(["Add","Offer","Upgrade","Modal"])},rt=function(e){return{type:2,status:!0,proLink:Object(b.S)([e.replace(" ","+"),"Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")}},ct=function(e){var t=e.step,n=(t=void 0===t?{}:t)._data,c=void 0===n?{}:n,i=t.tags,f=void 0===i?[]:i,p=t.type,y=t.substeps,w=(y=void 0===y?{}:y).offer,_=void 0===w?[]:w,h=(t.experiment,t.experiment_status),E=t.stats,S=e.stepPos,k=e.step,N=e.title,C=e.dragHandleController,x=c.title,A=c.view,P=c.status,T=Object(b.F)(),D=j.a.getFunnel(),F=Ve(Object(r.useState)(!1),2),B=F[0],L=F[1],z=Ve(Object(r.useState)(f),2),R=z[0],J=z[1],Y=Ve(Object(r.useState)(!1),2),G=Y[0],$=Y[1],ie=Ve(Object(r.useState)(!1),2),oe=ie[0],be=ie[1],fe=Ve(Object(r.useState)(!1),2),de=fe[0],me=fe[1],pe=Ve(Object(r.useState)(!1),2),Oe=pe[0],je=pe[1],ve=Ve(Object(r.useState)(!1),2),ye=ve[0],we=ve[1],_e=Ve(Object(r.useState)({}),2),he=_e[0],Ee=_e[1],Se=Ve(Object(r.useState)({}),2),ke=Se[0],Ne=Se[1],Ce=Object(I.b)(),xe=Ce.isProFeatureLocked,Ae=Ce.isBasicFeatureLocked,Pe=Object(I.b)("ul").isExpired,Ie=Object(O.a)(),Te=Ie.startDuplicateStep,De=Ie.startDeleteStep,Fe=Ie.setStepTitle,Be=Ie.sortSubSteps,Le=Ie.setUpdateFunnel,ze=Object(ce.a)().setToggleState,Me=Object(le.a)().setStepHeaderData,Re=Object(re.a)().setModalData,Ue=Object(v.a)(),qe=Ue.setActiveGroup,Je=Ue.setImportOffer,Ye=Object(ae.a)().setExperimentStatus,Ge=Object(I.c)().showSnackbar,Qe=location&&location.search?Object(l.parse)(location.search.substring(1)):{},Ke=function(){if(k&&k.hasOwnProperty("id")&&k.id){Fe(Object(H.decodeEntities)(x)+Object(u.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(T,"/experiments/").concat(k.id);Object(b.ib)()&&(e="/store-checkout/experiments/".concat(k.id)),Object(g.k)({},e)}},Ze=function(e){we(!0);var t="/funnel-".concat(p,"/save-state/").concat(k.id,"?funnel_id=").concat(T);o()({path:Object(b.x)(t),method:"POST",data:{status:!Number(P)}}).then((function(t){t.success?(ze(!Number(P)),we(!1),je(!1),me(!1),function(e,t,n){var r=null==D?void 0:D.steps.map((function(r){if(r.id===k.id){r.experiment_status=n;var c=We(We({},r._data),{},{status:e?"1":"0",experiment_status:t?"3":r.experiment_status});return We(We({},r),{},{_data:c})}return r}));D.steps=r;var c=JSON.parse(JSON.stringify(D));Le(c)}(Number(t.step_data.status),e,t.step_data.experiment_status),Ee({}),Ge(Object(u.__)("Changes Saved","funnel-builder"))):(ze(Number(P)),we(!1),je(!1),me(!1))})).catch((function(e){console.log(e),ze(P),Ge("Status Updation Failed")}))},ct={1:Object(u.__)("A/B Test Draft","funnel-builder"),2:Object(u.__)("A/B Test Running","funnel-builder"),3:Object(u.__)("A/B Test Paused","funnel-builder")},at={1:"warning",2:"success",3:"default"},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?at[e]:ct[e]};Object(r.useEffect)((function(){0!==Object(a.size)(_)||"wc_upsells"!==p||"no_offers"in f?Object(a.size)(_)>0&&J(f):J(We(We({},R),{},{no_offers:{offerlabel:Object(u.__)("No offers","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[_.length]);var it,ot,st,ut=function(e){e.preventDefault(),qe("upsell"),Je({parent_id:parseInt(k.id),parent_title:k._data.title}),Object(g.k)({importType:"step"})},bt=function(e,t){if(be(!0),(e=e.trim())!==x||(null==c?void 0:c.post_name)!==t&&"wc_upsells"!=p){Fe(e);var n='{"title":"'.concat(e,'","slug":"').concat("wc_upsells"==p?A.match(/([^\/]*)\/*$/)[1]:t,'"}');o()({path:Object(b.x)("/funnel-".concat(p,"/save-state/").concat(k.id,"?funnel_id=").concat(T)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);$(!1),be(!1),function(e,t,n){var r=D.steps.map((function(r){return r.id===Number(k.id)?(r._data.title=e,r._data.post_name=t,r._data.view_link=n,r):r}));D.steps=r;var c=JSON.parse(JSON.stringify(D));Le(c)}(e.step_data.title,t,e.step_data.view_link),Ge(Object(u.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),Fe(x),Ge("Title Updation Failed")}))}else $(!1),be(!1)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-card-container"},C(),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8"},Object(r.createElement)("div",{className:"bwf-st-c__step-type"},"wc_upsells"===p?Object(u.__)("One Click Upsell","funnel-builder"):Object(b.qb)(p)),Object(r.createElement)(r.Fragment,null,"wc_upsells"===p&&Pe&&0===Object(a.size)(_)?Object(r.createElement)(ue.a,{toolTipText:Object(u.__)("Because your license is expired your upsell offers will not appear to the customer","funnel-builder"),size:"280",textAlign:"left"},Object(r.createElement)(Z.c,{content:Object(r.createElement)("div",{className:"bwf-flex bwf--g4"},Object(u.__)("License Expired","funnel-builder"),Object(r.createElement)(m.a,{icon:"info",size:"12",color:U.DANGER_COLOR})),type:"danger"})):Object(r.createElement)(r.Fragment,null,Object(a.size)(R)>0&&Object.keys(R).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_product"===e||"has_rules"===e?(Me(Object(b.Z)(p),k.id,"",{title:x,view_link:A,status:1===Number(P),experiment_status:h}),Object(g.k)({},R[e].edit,Qe)):"no_offers"===e&&ut(t)}},Object(r.createElement)("div",{className:d()("bwf-st-c-badge-small",R[e].label_class)},R[e].hasOwnProperty("offerlabel")?R[e].offerlabel:R[e].label))})),!Object(a.isEmpty)(h)&&"4"!==h&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){!xe&&Xe?et?(Ye(h),Ke()):L(!0):Ne(tt)}},Object(r.createElement)(Z.c,{content:(it=h,st="warning"===(ot=lt(h,!0))?"#B68F40":"success"===ot?"#09B29C":"default"===ot?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(X.a,{fill:st}),Object(r.createElement)("span",{className:"".concat(void 0!==st?"bwf-mr-4":"")},lt(it)))),type:lt(h,!0)})),!(P&&1===parseInt(P))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(u.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))))),Object(r.createElement)("a",{href:Object(b.Y)(T,p,k.id),className:"bwf-card-action",onClick:function(e){e.preventDefault(),Me(Object(b.Z)(p),k.id,"",{title:x,view_link:A,status:1===Number(P),experiment_status:h}),Object(g.k)({page:"bwf",path:Object(b.Y)(T,p,k.id,"",!1)},"/",{})}},Object(H.decodeEntities)(x))),"wc_upsells"===p?Object(r.createElement)("div",null):Object(r.createElement)(se,{type:p,stats:E}),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{href:Object(H.decodeEntities)(A),className:"bwf-list-btn is-preview",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action is-ellipsis-menu"},Object(r.createElement)(W.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),$(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Edit","funnel-builder")))),!(P&&1===parseInt(P))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Ee({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object(H.decodeEntities)(x)),"funnel-builder")))}),Ze()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(P)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(h)?me(!0):je(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Draft","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){Ae?Ne(rt(N)):(t(),Te(k,S+1))}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(u.__)("Duplicate","funnel-builder")),Ae&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),"wc_upsells"!==p&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){!xe&&Xe?et?(Ke(),Ye(h)):L(!0):Ne(tt(N))}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(u.__)("A/B Test","funnel-builder")),xe&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),Re({title:x}),De(k,S)},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(u.__)("Delete","funnel-builder")))))}})))),ke.status&&Object(r.createElement)(M.a,{isOpen:ke.status,onRequestClose:function(){return Ne({status:!1})},modalContent:ke,type:ke.type}),B&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return L(!1)}},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(u.__)("Oops it seems old version of Experiments is activated."))),Object(r.createElement)("div",{className:"bwf-modal-content"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel.")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(s.Button,{variant:"primary",onClick:function(){return L(!1)}},Object(u.__)("OK")))),"wc_upsells"==p&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(a.size)(_)>0&&_.map((function(e,t){return Object(r.createElement)($e,{key:t,offer:e,upsellStep:k,upsellPos:S,stepPos:t,total:Object(a.size)(_),view:Object(H.decodeEntities)(A),onSortStart:function(e,t){return function(e,t,n){var r=[];"up"===t?r=Be(e,"offer",n,n-1):"down"===t&&(r=Be(e,"offer",n,n+1)),o()({path:Object(b.x)("/funnels/steps/order/save/".concat(e,"?type=offer")),method:"POST",data:{order:r.map((function(e){return e.id}))}}).then((function(e){e.success||console.log(e)})).catch((function(e){console.log(e)}))}(k.id,e,t)}})})),Object(r.createElement)("div",He({className:"bwf-st-c-sub-st-action-wrap"},q),Object(r.createElement)(s.Button,{isSecondary:!0,onClick:function(e){Pe?Ne(nt):ut(e)}},Pe&&Object(r.createElement)(m.a,{icon:"king",color:U.NOTICE_YELLOW,size:20}),Object(u.__)("Add Offer","funnel-builder"))))),G&&("wc_upsells"==p?Object(r.createElement)(V.a,{renameTitle:"Edit Details",title:Object(H.decodeEntities)(x),onclose:function(){return $(!1)},updateTitle:function(e){return bt(e)},isLoading:oe}):Object(r.createElement)(ge.a,{pageUrl:null==c?void 0:c.view_link,pageUrlSlug:null==c?void 0:c.post_name,renameTitle:"Step",title:Object(H.decodeEntities)(x),onclose:function(){return $(!1)},updateDetail:function(e,t){return bt(e,t)},isLoading:oe})),Oe&&Object(r.createElement)(te.a,{isPublishLoading:ye,onAction:function(){return Ze()},onclose:function(){return je(!1)}}),de&&Object(r.createElement)(ee.a,{isPublishLoading:ye,onAction:function(){Ze(!0)},onclose:function(){return me(!1)}}),Object(r.createElement)(ne.a,{className:d()("bwf-admin-modal-squeezy",he.className),confirmText:he.confirmText,confirmButtonText:he.buttonConfirm,cancelButtonText:he.buttonCancel,onConfirm:he.onConfirm,isLoading:he.loading,successMessage:he.success,errorMessage:he.error,content:he.content,onRequestClose:function(){return Ee({status:!1})},modalTitle:he.modalTitle,isOpen:he.status,closeIcon:he.closeIcon}))};function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){it(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return st(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return st(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ut=function(e){var t=e.step,n=(t=void 0===t?{}:t)._data,l=void 0===n?{}:n,i=t.tags,o=void 0===i?[]:i,f=(t.experiment,t.substeps),d=(f=void 0===f?{}:f).wc_order_bump,p=void 0===d?[]:d,j=t.id,v=void 0===j?0:j,y=(t.experiment_status,e.step),w=e.stepPos,_=void 0===w?0:w,h=(e.title,e.isOBFake),E=e.dragHandleController,S=Object(I.b)(),k=S.isProFeatureLocked,N=(S.isExpired,S.isLite),C=(Object(c.useParams)().id,l.title,l.view),x=(l.edit,l.status,Object(re.a)().setModalData,Object(O.a)()),A=x.startAddStep,P=x.setShowProModal,T=x.setShowProModalText,D=x.setShowAddStepModal,F=ot(Object(r.useState)({}),2),B=F[0],L=F[1],z=ot(Object(r.useState)(o),2),M=z[0],R=z[1];Object(r.useEffect)((function(){N||0!==Object(a.size)(p)||"no_bump"in o||R(lt(lt({},M),{},{no_bump:{label:Object(u.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[p.length]);var q=Object(b.db)("wc_order_bump");return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-card-container"},E(),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("div",{className:"bwf-st-c__step-type"},Object(u.__)("Checkout","funnel-builder")),Object(r.createElement)("span",{style:{color:"#353030"}},Object(u.__)("No Checkout Created","funnel-builder"))),Object(r.createElement)("div",null),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("span",{className:"bwf-card-action",style:{minWidth:"110px"}}),Object(r.createElement)("div",{className:"bwf-card-action"},Object(r.createElement)(s.Button,{isSecondary:!0,className:"bwf-btn-small",onClick:function(){Object(g.k)({importType:"step"}),D(!0)}},Object(u.__)("Create Checkout","funnel-builder"))))),null!==q&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(a.size)(p)>0&&p.map((function(e,t){return Object(r.createElement)(_e,{key:t,bump:e,checkoutStep:y,checkoutPos:_,stepPos:t,view:Object(H.decodeEntities)(C)})})),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-action-wrap"},Object(r.createElement)(s.Button,{isSecondary:!0,onClick:function(e){k?L({bump:!0}):function(e){null!==q&&A(lt(lt({},q),{},{parent_id:parseInt(v),is_substep:!0,title:Object(u.__)("Order Bump","funnel-builder")})),!q&&P(!0),!q&&T(Object(u.__)("Order Bump is a part of Funnel Builder Pro","funnel-builder")),e.preventDefault()}(e)}},k&&Object(r.createElement)(m.a,{icon:"king",color:U.NOTICE_YELLOW,size:20}),Object(u.__)("Add Order Bump","funnel-builder"))))),h&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap is-ob-fake"},Object(r.createElement)($,{type:"order_bump",onClick:function(){return P(!0)},modalContent:{title:Object(u.__)("Order Bump","funnel-builder"),content:{benefits:[Object(u.__)("Eye-catching bump styles","funnel-builder"),Object(u.__)("Targeted offers based on cart contents","funnel-builder"),Object(u.__)("Increased product discoverability","funnel-builder")]},image:Object(b.R)()+"order-bump.png",proLink:Object(b.S)(["Order","Bump","Upgrade","Modal"])}}))),B.bump&&Object(r.createElement)(he.a,{isOpen:B.bump,onRequestClose:function(){return L({status:!1})}}))},bt=["step","step","provided","isDragging"];function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dt(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var mt=Object(z.c)((function(){return Object(r.createElement)("span",{title:"Click here and start drag and drop",className:"bwf-d-icon-drag"},Object(r.createElement)(m.a,{icon:"rearrange",size:"16"}))})),pt=function(e){var t=e.step,n=(t=void 0===t?{}:t).type,c=t.experiment,l=void 0===c?[]:c,i=e.step,o=e.provided,s=e.isDragging,f=dt(e,bt),m=Object(b.bb)(n);if(!i)return null;var p=function(){return Object(r.createElement)(mt,{provided:o})};return Object(r.createElement)("div",ft({className:d()("bwf-st-c-wrap",{"is-dragging":s}),ref:o.innerRef},o.draggableProps),Object(r.createElement)("div",{className:"bwf-st-c"},0<Object(a.size)(l)&&Object(r.createElement)("div",{className:"bwf-ab-tag"},Object(r.createElement)("div",{className:"bwf-ab--text"},Object(u.__)("A/B","funnel-builder"))),function(){switch(n){case"wc_checkout":return Object(r.createElement)(Fe,ft({step:i,title:null==m?void 0:m.title},f,{dragHandleController:p}));case"wc_native":return Object(r.createElement)(ut,ft({step:i,title:Object(u.__)("Checkout Page","funnel-builder")},f,{dragHandleController:p}));default:return Object(r.createElement)(ct,ft({step:i,title:null==m?void 0:m.title},f,{dragHandleController:p}))}}()))},Ot=Object(z.b)(pt);function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var vt=Object(z.a)((function(e){var t=e.items,n=e.stepPromotions,c=e.provided,a=Object(I.b)().isLite,l=Object(I.b)("ul").isLite,i=!1,o=!1;return Object(r.createElement)("div",jt({className:"bwf-f-steps",ref:c.innerRef},c.droppableProps),t.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-st-c-".concat(t)},Object(r.createElement)(Ot,{key:"item-".concat(e.id),index:t,step:e,id:e.id,stepPos:t,isOBFake:!(!["wc_checkout","wc_native"].includes(e.type)||"yes"===n.bump)&&!(o||!a||Object(b.db)("wc_order_bump")||(o=!0,0))}),["wc_checkout","wc_native"].includes(e.type)&&"yes"!==n.upsell&&(!i&&l?(i=!0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)($,{modalContent:{title:Object(u.__)("One Click Upsell Offer","funnel-builder"),content:{benefits:[Object(u.__)("Grab buyer's attention and make post purchase One Click Upsells based on items purchased. Let them accept offers with a single click.","funnel-builder")]},image:Object(b.R)()+"upsell.png",proLink:Object(b.S)(["One","Click","Upsell","Upgrade","Modal"])}}))):""))})))}));function yt(e){return function(e){if(Array.isArray(e))return wt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _t=function(){var e=function(){return Object(r.createElement)("div",{className:"bwf-st-c-wrap bwf-w-full"},Object(r.createElement)("div",{className:"bwf-st-c bwf-flex bwf-w-full",style:{padding:"10px 16px"}},Object(r.createElement)("div",{className:"bwf-flex bwf--g16"},Object(r.createElement)(ie.a,{h:16,w:16}),Object(r.createElement)("div",null,Object(r.createElement)(ie.a,{h:16,w:80}),Object(r.createElement)(ie.a,{h:16,w:250,mt:6}))),Object(r.createElement)("div",{className:"bwf-flex bwf--g16",style:{marginRight:150,marginLeft:"auto"}},yt(Array(3)).map((function(e,t){return Object(r.createElement)("div",{key:"analytics-placeholder-".concat(t),style:{width:120}},Object(r.createElement)(ie.a,{h:12,w:24,ml:"auto",mr:"auto"}),Object(r.createElement)(ie.a,{h:12,w:60,mt:4,ml:"auto",mr:"auto"}))}))),Object(r.createElement)(ie.a,{h:30,w:172})))};return Object(r.createElement)("div",{className:"bwf-steps-container"},Object(r.createElement)("div",{className:"bwf-f-steps is-placeholder"},yt(Array(4)).map((function(t,n){return Object(r.createElement)(r.Fragment,{key:"step-card-".concat(n)},e())}))))},gt=n(270),ht=(n(640),n(16));function Et(e){return function(e){if(Array.isArray(e))return At(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){Nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||xt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){if(e){if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pt=function(e){var t=Ct(Object(r.useState)([]),2),n=t[0],c=t[1],l=Ct(Object(r.useState)([]),2),i=l[0],f=l[1],d=Ct(Object(r.useState)([]),2),p=d[0],v=d[1],y=Ct(Object(r.useState)(!1),2),_=y[0],g=y[1],h=Ct(Object(r.useState)(!1),2),E=h[0],S=h[1],k=Ct(Object(r.useState)(!0),2),N=k[0],C=k[1],x=Ct(Object(r.useState)([]),2),A=x[0],P=x[1],T=e.isOpen,D=e.onRequestClose,F=e.funnelID,B=(e.stepsListTypes,Object(I.c)().showSnackbar),L=j.a.getFunnel(),z=(j.a.getFunnelSteps(),Object(O.a)().setUpdateFunnel);Object(r.useEffect)((function(){var e=[];A.map((function(t){[0,"0"].includes(t.status)&&e.push({type:t.type,id:Number(t.id)}),Object(a.size)(t.subStep)&&t.subStep.map((function(n){[0,"0"].includes(n.status)&&e.push({type:n.type,id:Number(n.id),subParentId:Number(t.id)})}))})),v(e)}),[A]);Object(r.useEffect)((function(){if(Object(a.size)(L.steps)){var e=L.steps.map((function(e){var t,n,r,c,l,i,o;return{type:null==e?void 0:e.type,id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status,subStep:(r=e,"wc_checkout"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(c=r.substeps)||void 0===c||null===(l=c.wc_order_bump)||void 0===l?void 0:l.map((function(e){var t,n;return{type:"bump",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):"wc_upsells"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(i=r.substeps)||void 0===i||null===(o=i.offer)||void 0===o?void 0:o.map((function(e){var t,n;return{type:"Offer",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):[])}})).filter((function(e){var t,n=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));return[0,"0"].includes(e.status)||Object(a.size)(e.subStep)&&Object(a.size)(n)?e:void 0}));P(e)}}),[]);var M=function(e,t){c((function(e){return[].concat(Et(e),[t])}));var n="";n="/funnel-".concat(e,"/save-state/").concat(t,"?funnel_id=").concat(F),o()({path:Object(b.x)(n),method:"POST",data:{status:!0}}).then((function(e){var n,r;e.success?(c((function(e){return[e.filter((function(e){return e!==t}))]})),f((function(e){return[].concat(Et(e),[t])})),e.step_data.hasOwnProperty("upsell_id")&&(n=e.step_data.upsell_id,r="offer"),e.step_data.hasOwnProperty("checkout_id")&&(n=e.step_data.checkout_id,r="wc_order_bump"),function(e,t,n,r){var c=null==L?void 0:L.steps.map((function(c){if(n&&c.id===Number(n)){var a=c.substeps[r].map((function(e){var n=kt(kt({},e._data),{},{status:t.includes(e.id)?"1":e._data.status});return kt(kt({},e),{},{_data:n})})),l=kt(kt({},c.substeps),{},Nt({},r,a));return kt(kt({},c),{},{substeps:l})}if(t.includes(c.id)){var i=kt(kt({},c._data),{},{status:e?"1":"0"});return kt(kt({},c),{},{_data:i})}return c}));L.steps=c;var a=JSON.parse(JSON.stringify(L));z(a)}(!0,[t],n,r)):(e.message||e.msg)&&B(e.message||e.msg)})).catch((function(e){console.log(e),B(Object(u.__)("Status Updation Failed","funnel-builder"))}))},R=function(){g(!0);var e="/funnels/".concat(F,"/publish-all");o()({path:Object(b.x)(e),method:"POST",data:{steps:JSON.stringify(p)}}).then((function(e){e.status?(Object(a.size)(e.steps)&&p.map((function(e){var t=null==L?void 0:L.steps.map((function(t){if(t.id===e.subParentId){var n=t.substeps["Offer"===e.type?"offer":"wc_order_bump"].map((function(t){var n=kt(kt({},t._data),{},{status:Number(e.id)===Number(t.id)?"1":t._data.status});return kt(kt({},t),{},{_data:n})})),r=kt(kt({},t.substeps),{},Nt({},"Offer"===e.type?"offer":"wc_order_bump",n));return kt(kt({},t),{},{substeps:r})}if(Number(e.id)===Number(t.id)){var c=kt(kt({},t._data),{},{status:"1"});return kt(kt({},t),{},{_data:c})}return t}));L.steps=t;var n=JSON.parse(JSON.stringify(L));z(n)})),g(!1),S(!0)):(e.message||e.msg)&&B(e.message||e.msg)})).catch((function(e){console.log(e),B(Object(u.__)("Status Updation Failed","funnel-builder"))}))};return Object(r.useEffect)((function(){var e=0;A.map((function(t){[0,"0"].includes(t.status)&&(e+=1),t.subStep.map((function(t){[0,"0"].includes(t.status)&&(e+=1)}))})),e&&e<2&&C(!1)}),[A,L]),T&&Object(r.createElement)("div",null,Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-publish-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!0,onRequestClose:function(){return D()}},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between bwf-mb-16"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(u.__)("Publish Steps","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},!E&&N&&Object(r.createElement)("div",{className:"bwf-btn-small is-primary components-button",onClick:function(){return R()}},Object(r.createElement)("span",{style:kt({},_&&{visibility:"hidden"})},Object(u.__)("Publish All","funnel-builder")),_&&Object(r.createElement)(w.a,{color:"#ffffff",style:{position:"absolute"}})),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(u.__)("Close"),onClick:function(){return D()}},Object(r.createElement)(m.a,{icon:"close",height:20,width:20})))),Object(r.createElement)("div",{className:"bwf-info"},Object(u.__)("Following steps need to publish to make accessible to your customers:","funnel-builder")),A.map((function(e,t){var c;return Object(r.createElement)("div",{key:t,className:"bwf-draft-list"},Object(r.createElement)("div",{className:"bwf-title"},Object(H.decodeEntities)(e.title)),Object(r.createElement)(Z.c,{content:"wc_upsells"===e.type?Object(u.__)("One Click Upsell","funnel-builder"):Object(b.qb)(e.type)}),n.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-loading-btn is-secondary components-button bwf-ripple ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(w.a,{color:"#0073aa",style:{position:"absolute"}})),!n.includes(e.id)&&(E||i.includes(e.id))&&Object(r.createElement)("div",{className:"is-publish bwf-publish-btn components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(m.a,{icon:"check-circle",size:"16"}),Object(r.createElement)("span",null,Object(u.__)("Published","funnel-builder"))),!E&&!n.includes(e.id)&&!i.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-t-right is-secondary components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden"),onClick:function(){return M(e.type,e.id)}},Object(u.__)("Publish","funnel-builder")),Object(a.size)(e.subStep)&&Object(a.size)(null==e||null===(c=e.subStep)||void 0===c?void 0:c.filter((function(e){return[0,"0"].includes(e.status)})))?e.subStep.map((function(e,t){if([0,"0"].includes(e.status))return Object(r.createElement)(r.Fragment,{key:t},Object(r.createElement)("div",{className:"bwf-title bwf-sub-step"},Object(r.createElement)("span",null,Object(H.decodeEntities)(e.title))),Object(r.createElement)(Z.c,{content:Object(b.qb)(e.type)}),n.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-loading-btn is-secondary bwf-ripple components-button".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(w.a,{color:"#0073aa",style:{position:"absolute"}})),!n.includes(e.id)&&(E||i.includes(e.id))&&Object(r.createElement)("div",{className:"is-publish bwf-publish-btn components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(m.a,{icon:"check-circle",size:"16"}),Object(r.createElement)("span",null,Object(u.__)("Published","funnel-builder"))),!E&&!n.includes(e.id)&&!i.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-t-right is-secondary bwf-ripple components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden"),onClick:function(){return M(e.type,e.id)}},Object(u.__)("Publish","funnel-builder")))})):null)}))))},It=n(157),Tt=n(88),Dt=(n(641),n(84)),Ft=(n(642),n(261));function Bt(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ut(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){Mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||Ut(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ut(e,t){if(e){if("string"==typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(e,t):void 0}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jt={bump:{texts:{heading:Object(u.__)("Maximize Your Checkout Revenue with an Order Bump!","funnel-builder"),description:Object(u.__)("Increase the overall value of your checkout by offering a new products as an order bump.","funnel-builder")},actions:[{label:Object(u.__)("Add Order Bump","funnel-builder"),key:"bump"}],icon:"order-bump",link:"https://funnelkit.com/woocommerce-order-bump/"},upsell:{texts:{heading:Object(u.__)("Offer More with a One-Click Upsell!","funnel-builder"),description:Object(u.__)("Let customers buy more products after they've made their purchase.","funnel-builder")},actions:[{label:Object(u.__)("Add One Click Upsell","funnel-builder"),key:"upsell"}],icon:"upsells",link:"https://funnelkit.com/woocommerce-one-click-upsells-upstroke/"},both:{texts:{heading:Object(u.__)("Maximize Your Revenue with an Order Bump and Upsell!","funnel-builder"),description:Object(u.__)("Increase the overall value of your orders by offering new products as an order bump or upsell offer.","funnel-builder")},actions:[{label:Object(u.__)("Add One Click Upsell","funnel-builder"),key:"upsell"},{label:Object(u.__)("Add Order Bump","funnel-builder"),key:"bump"}],icon:"order-bump"}},Yt="add_bump_upsell_notice",Gt=function(e){var t=e.onRequestClose,n=e.onConfirm,c=(0,j.a.getFunnel)(),l=Rt(Object(r.useState)(null),2),i=l[0],o=l[1],b=Object(a.get)(c,"steps",[]).filter((function(e){return"wc_checkout"===e.type||"wc_native"===e.type})).map((function(e){return{label:"wc_native"===e.type?Object(u.__)("Checkout Page","funnel-builder"):Object(a.get)(e,"_data.title",""),key:e.id}})),f=Rt(Object(r.useState)(1===b.length?Object(a.get)(b,"[0].key",null):null),2),d=f[0],m=f[1];return Object(r.createElement)(s.Modal,{title:Object(u.__)("Create Order Bump","funnel-builder"),onRequestClose:t,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-create-order-bump-modal"},Object(r.createElement)(Ft.b,{label:Object(u.__)("Select Checkout","funnel-builder"),options:b,selected:d,onChange:function(e){i&&o(null),m(e)},className:"bwf-error-border",error:i}),Object(r.createElement)("div",{className:"bwf-flex bwf--justify-end bwf--g8"},Object(r.createElement)(ht.a,{onClick:t,className:"bwf-modal-cancel-btn"},Object(u.__)("Cancel","funnel-builder")),Object(r.createElement)(ht.a,{isPrimary:!0,onClick:function(){null!==d?(o(null),n(d)):o(Object(u.__)("Please select a checkout step","funnel-builder"))}},Object(u.__)("Next","funnel-builder"))))},$t=function(e){var t=e.steps,n=t.some((function(e){return"wc_checkout"===e.type||"wc_native"===e.type})),c=t.some((function(e){var t;return"wc_upsells"===e.type&&!Object(a.isEmpty)(null==e||null===(t=e.substeps)||void 0===t?void 0:t.offer)})),l=t.some((function(e){var t;return("wc_checkout"===e.type||"wc_native"===e.type)&&!Object(a.isEmpty)(null==e||null===(t=e.substeps)||void 0===t?void 0:t.wc_order_bump)})),i=n&&!l,o=n&&!c,s=Jt[i&&o?"both":i?"bump":o?"upsell":""]||Jt.both,f=s.texts,d=s.actions,p=s.icon,j=s.link,y=Rt(Object(r.useState)(!1),2),w=y[0],_=y[1],h=Object(v.a)().setActiveGroup,E=Object(O.a)().startAddStep,S=Object(b.db)("wc_order_bump"),N=Object(R.a)().setClosedNotices,C=(0,Object(k.a)().getClosedNotices)();return C.includes(Yt)||!i&&!o?null:Object(r.createElement)("div",{className:"bwf-add-bump-upsell-notice bwf-flex bwf--g16 bwf--space-between"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8  bwf--align-start"},Object(r.createElement)("div",{className:"bwf-add-bump-upsell-notice__icon"},Object(r.createElement)(m.a,{icon:p,size:32,color:U.TEXT_COLOR_2})),Object(r.createElement)("div",null,Object(r.createElement)("span",{className:"bwf-text-bold"},f.heading),Object(r.createElement)("br",null),Object(r.createElement)("span",null,f.description," ",j&&Object(r.createElement)("a",{href:j,className:"bwf-text-bold",target:"_blank",rel:"noopener noreferrer"},Object(u.__)("Learn More","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-flex bwf--g12"},d.map((function(e,t){return Object(r.createElement)(ht.a,{key:t,className:"is-black is-small",onClick:function(){return function(e){if("upsell"===e)return h("upsell"),void Object(g.k)({importType:"step"});_(!0)}(e.key)}},e.label)}))),Object(r.createElement)(ht.a,{className:"bwf-no-style-button",onClick:function(){Object(b.ob)(Yt).then((function(e){var t=[].concat(Bt(C),[Yt]);N(t)})).catch((function(e){console.log("Error deleting Notice: ",e)}))}},Object(r.createElement)(m.a,{icon:"cross",size:16}))),w&&Object(r.createElement)(Gt,{onRequestClose:function(){return _(!1)},onConfirm:function(e){E(zt(zt({},S),{},{parent_id:parseInt(e),is_substep:!0,title:"Order Bump"}))}}))};function Ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wt=function(e){e.funnelId;var t=e.steps,n=Ht(Object(r.useState)(!1),2),c=n[0],a=n[1],l=Object(I.c)().showSnackbar,i=Object(O.a)().setFunnelSteps;return Object(r.createElement)(s.Notice,{status:"info",isDismissible:!1,className:"bwf-component-notice bwf-store-checkout-header-error-notice"},Object(r.createElement)("div",{className:"bwf-flex bwf--g4 bwf--align-start"},Object(r.createElement)("span",{className:"bwf-flex"},Object(r.createElement)(m.a,{icon:"info",style:{margin:0},color:U.DANGER_COLOR})),Object(r.createElement)("p",{className:"bwf-notice-content"},Object(u.__)("Order bumps and One-click upsell offers will not work because your checkout is created using the","funnel-builder"),Object(r.createElement)("strong",null,Object(u.__)(" block editor. ","funnel-builder")),Object(u.__)("You need to create the checkout using FunnelKit.","funnel-builder"))),Object(r.createElement)(ht.a,{className:"is-danger",onClick:function(){a(!0),o()({path:Object(b.x)("/notifications/wc_block_incompat"),method:"POST"}).then((function(e){if(!e.success)throw e;var n=t.map((function(e){return"wc_native"===e.type&&(e.is_checkout_block=!1),e}));i(n),a(!1)})).catch((function(e){console.log(e),a(!1),l(e.message)}))},isBusy:c,disabled:c,isSmall:!0},Object(u.__)("Switch to Classic Checkout","funnel-builder")))};function Kt(e,t,n,r,c,a,l){try{var i=e[a](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,c)}function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){Xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(I.b)(),n=t.isProFeatureLocked,i=t.isLite,f=Object(c.useParams)(),d=f.id,p=f.builder,y=f.filter,w=e.funnelId,E=void 0===w?d:w,S=location&&location.search?Object(l.parse)(location.search.substring(1)):{},N=Object(It.a)().resetFlowData,C=Object(Tt.a)().resetCanvasData,x=S.importType,A=Object(O.a)(),T=A.fetch,D=A.sortSteps,F=A.updateFunnelViewLink,z=A.setShowProModal,M=A.setShowAddStepModal,R=A.setIsFunnelEmpty,U=A.setFunnelSteps,q=A.setLoading,J=A.setLanguageData,Y=A.fetchAnalytics,G=Object(r.useRef)(!0),$=j.a.getFunnelID,H=j.a.getFunnel,Q=j.a.getFunnelLoading,W=j.a.getFunnelError,K=j.a.getShowProModal,V=j.a.getShowAddStepModal,Z=j.a.getIsFunnelEmpty,X=j.a.getAnalyticsLoaded,ee=j.a.getIsFunnelLoading,te=$(),ne=H(),re=ee(),ce=X(),le=Q(),ie=W(),oe=K(),se=V(),ue=Z(),be=(0,Object(k.a)().getStepPromotion)(),fe=Object(ae.a)().setControlTitle,de=en(Object(r.useState)(!1),2),me=de[0],pe=de[1],Oe=Object(I.c)(),je=Oe.showSnackbar,ve=(Oe.hideSnackbar,en(Object(r.useState)(!1),2)),ye=ve[0],we=ve[1],_e=en(Object(r.useState)(!1),2),ge=_e[0],Ee=_e[1],Se=en(Object(r.useState)(""),2),ke=Se[0],Ne=Se[1],Ce=en(Object(r.useState)([]),2),xe=Ce[0],Ae=Ce[1],Pe=en(Object(r.useState)({}),2),Ie=(Pe[0],Pe[1]),Te=en(Object(r.useState)([]),2),De=Te[0],Fe=Te[1],Be=Object(b.ib)(),Le=Object(v.a)().setActiveGroup,ze=Object(r.useRef)();Object(r.useEffect)((function(){var e=JSON.stringify(null==ne?void 0:ne.steps),t=ze.current;null!=ne&&ne.steps&&t&&e!==t&&J({isLoading:!0}),ze.current=e}),[null==ne?void 0:ne.steps]),Object(r.useEffect)((function(){(parseInt(te)!==parseInt(E)||Object(a.isEmpty)(ne))&&(q(!0),T(parseInt(E)))}),[]),Object(r.useEffect)((function(){n||Object(a.isEmpty)(null==ne?void 0:ne.steps)||ce||re||Y(te)}),[re]),Object(r.useEffect)((function(){fe(null),we(!1)}),[le]);var Me=function(e,t){return e.filter((function(e){return e.type===t}))},Re=function(){var e="";if(!Be&&!le&&!me&&ne&&ne.steps&&ne.steps.length&&Array.isArray(ne.steps)){var t=Object(a.size)(Me(ne.steps,"wc_checkout")),n=Me(ne.steps,"wc_thankyou"),r=Me(ne.steps,"wc_upsells");t?t&&(function(e){for(var t=!1,n=e.length-1;n>=0;n--)"wc_upsells"===e[n].type?t=!0:"wc_checkout"===e[n].type&&(t=!1);return t}(ne.steps)||function(e){for(var t=!1,n=e.length-1;n>=0;n--)"wc_thankyou"===e[n].type?t=!0:"wc_checkout"===e[n].type&&(t=!1);return t}(ne.steps)?(Object(a.size)(n)&&Object(a.size)(r)?e="".concat(Object(u.__)("Make sure that your <strong>Thank You</strong> step and <strong>One-Click Upsell offers</strong> step are placed below the <strong>checkout</strong> step.","funnel-builder")):Object(a.size)(n)?e="".concat(Object(u.__)("Make sure that your <strong>Thank You</strong> step is placed below the <strong>checkout</strong> step.","funnel-builder")):Object(a.size)(r)&&(e="".concat(Object(u.__)("Make sure that your <strong>One-Click Upsell offers</strong> step is placed below the <strong>checkout</strong> step.","funnel-builder"))),Ne(e)):Ne("")):function(e){var t=Me(e,"wc_thankyou"),n=Me(e,"wc_upsells"),r="";Object(a.size)(t)&&Object(a.size)(n)?r="".concat(Object(u.__)("To trigger <strong>Thank You</strong> and <strong>One Click Upsell offers</strong> steps, you need to create a <strong>Checkout step</strong>.","funnel-builder")):Object(a.size)(t)&&!Object(a.size)(n)?r="".concat(Object(u.__)("To trigger <strong>Thank You</strong> step, you need to create a <strong>Checkout step</strong>.","funnel-builder")):!Object(a.size)(t)&&Object(a.size)(n)&&(r="".concat(Object(u.__)("To trigger <strong>One Click Upsell offers</strong> step, you need to create a <strong>Checkout step</strong>.","funnel-builder"))),Ne(r)}(ne.steps)}};Object(r.useEffect)((function(){"step"!==x&&Re()}),[ne,me,x]),Object(r.useEffect)((function(){return function(){ue&&R(!1)}}),[]),Object(r.useEffect)((function(){x&&!Be&&(y?Le(y):"funnel"!==x||p?"step"===x&&!p&&G.current&&Le("wc_checkout"):Le("landing")),G.current&&(G.current=!1)}),[x]);Object(r.useEffect)((function(){if(Object(a.size)(ne)){var e,t=null==ne||null===(e=ne.steps)||void 0===e?void 0:e.map((function(e){var t,n,r,c,l,i,o;return{type:null==e?void 0:e.type,id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status,subStep:(r=e,"wc_checkout"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(c=r.substeps)||void 0===c||null===(l=c.wc_order_bump)||void 0===l?void 0:l.map((function(e){var t,n;return{type:"bump",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):"wc_upsells"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(i=r.substeps)||void 0===i||null===(o=i.offer)||void 0===o?void 0:o.map((function(e){var t,n;return{type:"Offer",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):[])}})).filter((function(e){var t,n=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));return Object(a.size)(e.subStep)&&Object(a.size)(n)?e.subStep=n:[0,"0"].includes(e.status)?(e.subStep=[],e):void 0})),n=[];t.map((function(e){if("wc_checkout"===e.type&&[0,"0"].includes(e.status)&&n.push("wc_checkout"),"wc_upsells"===e.type&&[0,"0"].includes(e.status)&&n.push("wc_upsells"),"wc_checkout"===e.type&&Object(a.size)(e.subStep)){var t,r=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));Array(Object(a.size)(r)).fill("bump").forEach((function(){n.push("bump")}))}if("wc_upsells"===e.type&&Object(a.size)(e.subStep)){var c,l=null==e||null===(c=e.subStep)||void 0===c?void 0:c.filter((function(e){return[0,"0"].includes(e.status)}));Array(Object(a.size)(l)).fill("offer").forEach((function(){n.push("offer")}))}["wc_checkout","wc_upsells"].includes(e.type)||Object(a.size)(e.subStep)||n.push(e.type)}));var r=n.reduce((function(e,t){return Zt(Zt({},e),{},Xt({},t,(e[t]||0)+1))}),{});Fe(n),Ie(r),Ae(t),N(),C(),ge||U(null==ne?void 0:ne.steps)}}),[ne]);var Ue=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.oldIndex,r=t.newIndex,n!==r){e.next=3;break}return e.abrupt("return");case 3:return c=D(n,r),pe(!0),e.prev=5,e.next=8,o()({path:Object(b.x)("/funnels/".concat(E)),method:"PUT",data:{steps:JSON.stringify(c.map((function(e){return{id:e.id,type:e.type}})))}});case 8:Object(b.ib)()||F(c.length>0?c[0]._data.view:""),je(Object(u.__)("Steps Updated","funnel-builder")),setTimeout((function(){return pe(!1)}),2e3),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),D(r,n),Object(b.ib)()||F(c.length>0?c[0]._data.view:""),je(Object(u.__)("Steps Updation Failed","funnel-builder")),setTimeout((function(){return pe(!1)}),2e3);case 19:case"end":return e.stop()}}),e,null,[[5,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function l(e){Kt(a,r,c,l,i,"next",e)}function i(e){Kt(a,r,c,l,i,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}();if(x&&!Be)return Object(r.createElement)(r.Fragment,null,"funnel"===x?Object(r.createElement)(h.default,{onImportComplete:function(){T(parseInt(E)),delete S.importType,delete S.group,Object(g.k)({},"/funnels/".concat(E),S)}}):Object(r.createElement)(_.a,{onImportComplete:function(){T(parseInt(E)),delete S.importType,delete S.group,Object(g.k)({},"/funnels/".concat(E),S)}}));if(!ye&&!le&&!ue&&ie)return Object(r.createElement)(Dt.a,{errorMessage:ie.hasOwnProperty("message")?ie.message:Object(u.__)("Unable to load Funnel Steps","funnel-builder")});var qe=[{type:"icon",data:{content:Object(r.createElement)(m.a,{icon:"zero-step-alt",width:"202",height:"151"})}},{type:"content",data:{class:"bwf-zero-state-heading-1",content:Object(u.__)("Start building your funnel","funnel-builder")}},{type:"content",data:{class:"bwf-zero-state-heading-2",content:Object(u.__)("Add a new step or pick a pre-built funnel","funnel-builder")}},{type:"buttons",data:{buttons:[{text:Object(u.__)("Add New Step","funnel-builder"),proCheck:!1,onClick:function(){Object(g.k)({importType:"step"}),Le("landing"),Be&&M(!0)}},{text:Object(u.__)("View Funnels","funnel-builder"),proCheck:!1,props:{isPrimary:!1,isSecondary:!0},onClick:function(){Be?(M(!0),Object(g.k)({importType:"wc_checkout"})):Object(g.k)({importType:"funnel"})}}]}}];if(!(ne&&ne.hasOwnProperty("steps")&&Object(a.isArray)(ne.steps)&&0!==Object(a.size)(ne.steps)||le||ye))return Object(r.createElement)(gt.a,{data:qe});return Object(r.createElement)(r.Fragment,null,ye||le?Object(r.createElement)(_t,null):Object(r.createElement)(r.Fragment,null,function(){var e=null;if(Object(b.ib)()&&Object(a.some)(ne.steps,{type:"wc_native"}))if(Object(a.some)(ne.steps,(function(e){return"wc_native"===e.type&&e.is_checkout_block}))){var t=Object(a.some)(ne.steps,{type:"wc_upsells"}),n=Object(a.some)(ne.steps,(function(e){var t;return"wc_native"===e.type&&(null==e||null===(t=e.substeps)||void 0===t?void 0:t.wc_order_bump)}));(t||n)&&(e=Object(r.createElement)(Wt,{funnelId:E,steps:ne.steps}))}else e=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Notice,{status:"warning",isDismissible:!1,className:"bwf-component-notice"},Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start"},Object(r.createElement)("span",{className:"bwf-flex"},Object(r.createElement)(m.a,{icon:"shield",style:{margin:0}})),Object(r.createElement)("p",{className:"bwf-notice-content"},Object(u.__)("You are using the default WooCommerce checkout page. Order bumps, upsell & thank you pages will work with the default checkout page. However, we recommend adding an optimized checkout page from FunnelKit.","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_clear_20"}));return e}(),Object(r.createElement)("div",{className:"bwf-steps-container"},!i&&Object(r.createElement)($t,{steps:ne.steps}),Object(a.size)(ke)?Object(r.createElement)("div",{className:"bwf-publish-container bwf-no-action"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8"},Object(r.createElement)(m.a,{icon:"info",size:16}),Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:ke}}))):null,Object(r.createElement)(vt,{items:ne.steps,onSortEnd:Ue,helperClass:"bwf-steps-drag__helper",stepPromotions:be}))),Object(r.createElement)(B,{funnelId:E}),Object(r.createElement)(L.a,{funnelId:E}),oe&&Object(r.createElement)(he.a,{isOpen:oe,onRequestClose:function(){return z(!1)}}),Object(r.createElement)(P,{query:S,isOpen:se,setModalOpenState:function(e){M(e)},hasCheckoutStep:ne&&ne.steps&&Object(a.isArray)(ne.steps)&&ne.steps.some((function(e){return"wc_checkout"===e.type})),funnelId:E}),ge&&Object(r.createElement)(Pt,{isOpen:ge,stepsList:xe,funnelID:E,stepsListTypes:De,onRequestClose:function(){return Ee(!1)}}))}},270:function(e,t,n){"use strict";var r=n(0),c=n(7),a=n.n(c),l=n(2),i=n(9),o=n(55),s=(n(277),n(5));function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,c=e.className,f=e.center,d=void 0!==f&&f,m=e.isDismissive,p=void 0!==m&&m,O=e.onDismisal,j=void 0===O?function(){}:O,v=e.isProFeatureLocked;if(Object(l.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:a()("bwf-zero-state",c,{"bwf-block-t-center":d})},p&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return j()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(s.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(o.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(o.a,{key:"layout-block-"+t,className:a()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(o.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(o.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),v&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(s.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(o.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(i.Button,b({isPrimary:!e.isSecondary,key:t,onClick:e.onClick,className:a()("bwf-no-ripple",e.className,{"is-secondary":e.isSecondary})},e.props),!1!==e.proCheck&&v&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(s.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===u(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},274:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return d}));var r=n(0),c=n(265);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=function(e){return function(t){return Object(r.createElement)(c.a,{onDragEnd:function(e){var n=e.destination,r=e.source;if(n){var c=Array.from(t.items),a=l(c.splice(r.index,1),1)[0];c.splice(n.index,0,a),t.onSortEnd&&t.onSortEnd({oldIndex:r.index,newIndex:n.index,items:c})}}},Object(r.createElement)(c.c,{droppableId:"droppable"},(function(n){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(e,a({},n.droppableProps,t,{provided:n})),n.placeholder)})))}},s=["id","index"];function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var f=function(e){return function(t){var n=t.id,a=t.index,l=b(t,s);return Object(r.createElement)(c.b,{draggableId:n.toString(),index:a,key:n},(function(t,n){return Object(r.createElement)(e,u({index:a,provided:t},l,{isDragging:n.isDragging}))}))}},d=function(e){return function(t){var n;return Object(r.createElement)("div",null===(n=t.provided)||void 0===n?void 0:n.dragHandleProps,Object(r.createElement)(e,t))}}},277:function(e,t,n){},325:function(e,t,n){"use strict";var r=n(0),c=n(124),a=n(2),l=n(1),i=n(351),o=n(271),s=n(81),u=n(285);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t=Object(o.a)(),n=t.getTemplates,f=t.getBuilders,d=t.getDefaultBuilder,p=t.templateLoading,O=t.getActiveBuilder,j=t.getActiveGroup,v=t.getCurrentTemplate,y=t.getActiveStep,w=t.getActiveSubFilter,_=e.onImportComplete,g=e.isStoreCheckout,h=e.storeCheckoutId,E=(e.hasCheckoutStep,e.urlDependency),S=void 0===E||E,k=e.stepId,N=e.funnelId,C=Object(s.a)(),x=C.setActiveGroup,A=(C.setActiveSubFilter,C.setActiveBuilder),P=C.setCurrentTemplate,I=m(m({wc_checkout:Object(l.__)("Checkout","funnel-builder")},!g&&{landing:Object(l.__)("Sales","funnel-builder")}),{},{upsell:Object(l.__)("One Click Upsell Offers","funnel-builder"),wc_thankyou:Object(l.__)("Thank You","funnel-builder")},!g&&{optin:Object(l.__)("Optin","funnel-builder"),optin_ty:Object(l.__)("Optin Confirmation","funnel-builder")}),T=Object(c.useParams)(),D=T.id,F=T.filter,B=T.builder,L=T.templateId,z=b(Object(r.useState)(!1),2),M=z[0],R=z[1],U=n();Object(r.useEffect)((function(){return B&&(x(F),A(B),P({id:L})),function(){x("funnel")}}),[]);var q=function(e){return!(!e||!e.group_type)&&Object.keys(e.group_type)[0]};Object(r.useEffect)((function(){if(!Object(a.isEmpty)(U)&&!M&&B){var e=U[F][B][L];P({id:L,template:e}),R(!0)}}),[U]);var J=f(),Y=d(),G=O(),$=p(),H=j(),Q=v(),W=(y(),w()),K=function(){var e=Y;return Object(a.isEmpty)(G)||(e=G),J&&J[H]&&!J[H][e]&&(e=J[H][Y]?Y:"elementor"),e},V=function(e,t,n){return("wc_checkout"===t||"optin"===t)&&W&&G?U[t][G][e].group_type[n||W]:e},Z=function(e){return"wc_checkout"===H?W===e.no_steps:"optin"!==H||e.group.includes(W)},X=function(e,t,n){var r="";return"landing"===H?r="sp":"optin"===H?r="op":"optin_ty"===H?r="op-confirmed":"wc_checkout"===H?r="checkouts":"upsell"===H?r="offer":"wc_thankyou"===H&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===H&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},ee=g?"/store-checkout":0===D?"/templates":"/funnels/".concat(D);return Object(r.createElement)(i.a,{filters:u.e,templates:U,activeBuilder:K(),templateCards:function(){if(Object(a.isEmpty)(U)||Object(a.isEmpty)([H]))return{};var e=K(),t={};return U[H]&&U[H][e]&&(t=U[H][e]),t}(),editors:J,defaultBuilder:Y,isTemplateLoading:$,activeTemplateGroup:H,templateGroup:I,previewData:function(){if(Object(a.isEmpty)(U)||"funnel"===H)return{};var e={},t=[],n=[];try{!function(){var r=K();for(var c in t=[],U[H][r]){var a=U[H][r][c];if(!a.build_from_scratch&&Z(a)){var l={};if(l.id=c,l.funnel=a.group_type?a.group_type[Object.keys(a.group_type)[0]]:c,l.slug=c,l.name=a.name,l.thumbnail=a.thumbnail,l.template=null==Q?void 0:Q.id,l.pro=a.pro,l.group_type=a.group_type,l.type=H,l.preview=null==a?void 0:a.prevslug,t.push(l),a.group_type)Object.values(a.group_type).forEach((function(e){var t=U[H][r][e];n.push({id:null==t?void 0:t.prevslug,preview:X(0,t,r)})}));else n.push({id:null==a?void 0:a.prevslug,preview:X(0,a,r)})}}var i=U[H][r][V(null==Q?void 0:Q.id,H)];e.activeTemplate={thumbnail:V(null==Q?void 0:Q.id,H),preview:X(null==Q||Q.id,i,r),slug:V(null==Q?void 0:Q.id,H),name:null!=Q&&Q.id?U[H][r][null==Q?void 0:Q.id].name:"",pro:null!=Q&&Q.id?U[H][r][null==Q?void 0:Q.id].pro:"",tempPro:null!=Q&&Q.id?U[H][r][V(null==Q?void 0:Q.id,H,!("wc_checkout"!==H&&"optin"!==H||!q(Q.template))&&q(Q.template))].pro:"",group:H,filters:!!i.group_type&&Object.keys(i.group_type),type:H,funnelGroup:[H],prevId:i.prevslug},e.thumbnails=t,e.previews=n}()}catch(e){console.log("Failed to prepare template preview data:",e)}return e},funnelId:k&&N?N:g&&h?h:D,onImportComplete:_,templateFilterCheck:function(e,t){return"wc_checkout"===H?t===e.no_steps:"optin"!==H||(null===(n=e.group)||void 0===n?void 0:n.includes(t));var n},activeFilter:W,showDefaultEditorNotice:!1,isStoreCheckout:g,parentRoute:ee,showTemplatesNav:!(k||g&&0===D),urlDependency:S,stepId:k,importApiPrefix:g?"store-checkout":"funnels"})}},341:function(e,t,n){"use strict";var r=n(0),c=n(2),a=n(1),l=n(9),i=n(378),o=n(16),s=n(264),u=n(59),b=n(23);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=e.requestCreateStep,d=e.onRequestClose,m=e.onCreationScreen,p=e.creationSuccess,O=e.clearAndCloseEverything,j=e.isBusy,v=e.errors,y=Object(b.b)(),w=y.isProFeatureLocked,_=y.isBasic,g=Object(b.b)("ck").isProFeatureLocked,h=_&&"wc_checkout"===(null==t?void 0:t.type)?g:w,E=f(Object(r.useState)(""),2),S=E[0],k=E[1],N=f(Object(r.useState)(""),2),C=N[0],x=N[1],A=f(Object(r.useState)(null),2),P=A[0],I=A[1],T=f(Object(r.useState)(null!=v?v:{}),2),D=T[0],F=T[1],B=f(Object(r.useState)("new"),2),L=B[0],z=B[1],M=f(Object(r.useState)(!1),2),R=M[0],U=M[1];Object(r.useEffect)((function(){F(v)}),[v]),Object(r.useEffect)((function(){var e;x(null==P||null===(e=P.step)||void 0===e?void 0:e.name),"new"===L&&Object(c.isEmpty)(S.trim())||"existing"===L&&Object(c.isEmpty)(C)?U(!0):U(!1)}),[L,P,S,C]);var q=function(){if(!R){var t=e.errors;P&&P.copyFrom&&!P.step&&(t.copyFrom=Object(a.__)("Copy From: This field is required","funnel-builder")),0===Object(c.size)(t)?n({copyFrom:P&&P.hasOwnProperty("step")?P.step:null,title:"existing"===L?"".concat(C," Copy"):S}):F(t)}};return Object(r.createElement)(r.Fragment,null,D&&Object(c.size)(D)>0&&Object(r.createElement)(u.a,{status:"error",isDismissible:!0,onRemove:function(){return F({})}},Object(r.createElement)("ul",{className:"bwf-m-0"},Object.keys(D).map((function(e){return Object(r.createElement)("li",{className:"bwf-m-0",key:e},D[e])})))),j||!m||p?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("form",{method:"post",action:"",className:"bwf-funnel-add-step",onSubmit:function(e){q(),e.preventDefault()}},Object(r.createElement)(s.a,{options:[{value:"new",label:Object(a.__)("Create New","funnel-builder")},{value:"existing",label:Object(a.__)("Clone Existing","funnel-builder"),isPro:h}],selected:L,onChange:function(e){z(e)},className:"bwf-add-bump_radio-items"}),"new"===L?Object(r.createElement)(l.TextControl,{label:Object(a.__)("Name","funnel-builder"),placeholder:Object(a.__)("Enter Name","funnel-builder"),value:S,onChange:function(e){return k(e)}}):null,"existing"===L?Object(r.createElement)(i.a,{step:t,onStepSelected:function(e){return I(e)},showCheckbox:!1}):null,Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(o.a,{className:"bwf-modal-cancel-btn",onClick:d},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(o.a,{isPrimary:!0,onClick:q,disabled:R,isBusy:j,className:R?"bwf-no-ripple":""},Object(a.__)("Add","funnel-builder"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{marginTop:"-16px"}},Object(a.__)("Something went wrong, Pleas contact to support team","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(o.a,{isPrimary:!0,onClick:function(){d(),O()}},Object(a.__)("OK","funnel-builder")))))}},342:function(e,t,n){"use strict";var r=n(0),c=n(9),a=n(1),l=n(3),i=n(7),o=n.n(i),s=n(5),u=n(10),b=n.n(u),f=n(367),d=n(85);function m(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isOpen,n=e.onRequestClose,i=p(Object(r.useState)({default_css:"",skin_all:{}}),2),u=i[0],O=i[1],j=p(Object(r.useState)(!0),2),v=j[0],y=j[1];return Object(r.useEffect)((function(){b()({path:Object(l.x)("/funnel-bump/skins/preview/")}).then((function(e){e.success&&O({skin_all:e.skin_all,default_css:e.default_css}),y(!1)})).catch((function(e){y(!1),console.log(e)}))}),[]),t&&Object(r.createElement)("div",{className:"bwf-order-bum-pro-modal"},Object(r.createElement)(c.Modal,{className:"bwf-admin-modal bwf-ob-pro-modal bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()}},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-modal-custom-header"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-modal-title"},Object(a.__)("Order Bump Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g16"},Object(r.createElement)(d.a,{isPrimary:!0,proLink:Object(l.S)(["Order","Bump","Template","Modal"])}),Object(r.createElement)("button",{className:"bwf-no-style-button",onClick:n},Object(r.createElement)(s.a,{icon:"cross",size:"24"})))),Object(r.createElement)("div",{className:o()("bwf-ob-pro-modal-content",{"is-placeholder":v}),style:{paddingTop:"1px"}},v?Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap"},m(new Array(8)).map((function(e,t){return Object(r.createElement)(f.a,{index:t,key:"ob-place-".concat(t)})}))):Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap",id:"wfob_wrap"},Object(r.createElement)("style",null,u.default_css),Object.keys(u.skin_all).map((function(e){var t=u.skin_all[e];return Object(r.createElement)("div",{className:"bwf_bump_skin_preview",key:e},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.dynamic_inline_css}}),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.html}}))}))," "))))}},367:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return p}));var r=n(0),c=n(303),a=n(3),l=n(2),i=n(403),o=n(7),s=n.n(o),u={image:i.a},b=function(e,t,n,a){return e.map((function(e,i){return"richeditor"===e.type&&(e.openMergeTagModal=a,e.id="richeditor-".concat(i),e.toolbar="bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",e.quicktags=!0),Object(r.createElement)(r.Fragment,{key:i},(Object(l.isEmpty)(e.toggler)||f(t,e.toggler,e))&&Object(r.createElement)(c.a,{input:e,formProps:n(e.key),values:t,customMapField:u}))}))},f=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var c=0;c<r.length;c++)if(t.value.indexOf(r[c])>-1){n=!0;break}}else Object(a.y)(r)==Object(a.y)(t.value)&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n},d=function(e,t){if(e.selectors&&e.stylekey&&!Object(l.isEmpty)(e.value)){var n,r=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,c="".concat(e.stylekey,":").concat(e.value).concat(null!==(n=null==e?void 0:e.styleUnit)&&void 0!==n?n:"",";");-1!==t.search("".concat(r,"{"))?t=t.replace("".concat(r,"{"),"".concat(r,"{").concat(c)):t+="".concat(r,"{").concat(c,"}")}return t},m=function(e){return new Promise((function(t,n){var r="";e.forEach((function(e){switch(e.type){case"text":if(e.selectors){var t=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(t).html(e.value)}break;case"richtext":case"richeditor":case"textarea":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(n).html(e.value)}break;case"label":break;case"toggle":case"checkbox":if(e.selectors){var c=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;1==e.value||"true"==e.value?e.contentClass?jQuery(c).addClass(e.contentClass):jQuery(c).show():e.contentClass?jQuery(c).removeClass(e.contentClass):jQuery(c).hide()}break;case"select":if(e.selectors){var a=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(e.value&&Object(l.isArray)(e.allClasses)?(jQuery(a).removeClass(e.allClasses),jQuery(a).addClass(e.value)):r=d(e,r),e.classList){var i=Object.values(e.classList),o=e.classList[e.value];jQuery(a).removeClass(i).addClass(o)}}break;case"color":if(e.selectors){var s=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,u="".concat(e.stylekey,":").concat(e.value,";");r+="".concat(s,"{").concat(u,"}"),"social_proof_tooltip_bg_color"===e.key&&(r+="".concat(s,"::after{ border-top-color: ").concat(e.value,"}"))}if(e.isHover&&e.hoverSelectors){var b=Array.isArray(e.hoverSelectors)?e.hoverSelectors.toString():e.hoverSelectors,f="".concat(e.stylekey,":").concat(e.hoverVal,";");r+="".concat(b,"{").concat(f,"}")}break;case"dimension-control":if(e.selectors){var m=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,p="".concat(e.stylekey,":").concat(e.value.toString().replace(/ /g,"px ")).concat(null==e?void 0:e.styleUnit,";");r+="".concat(m,"{").concat(p,"}"),r+="".concat(m,"{").concat(p,"}")}break;case"box-shadow":if(e.selectors){var O=e.value,j=O.h_offset,v=O.v_offset,y=O.blur,w=O.spread,_=O.color,g=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(!(Object(l.isEmpty)(j)||Object(l.isEmpty)(v)||Object(l.isEmpty)(y)||Object(l.isEmpty)(w)||Object(l.isEmpty)(_))){var h="".concat(e.stylekey,":").concat(j,"px ").concat(v,"px ").concat(y,"px ").concat(w,"px ").concat(_,";");r+="".concat(g,"{").concat(h,"}")}}break;case"image":if(e.selectors){var E,S,k,N,C,x,A=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type||"custom"===e.value.type&&Object(l.isEmpty)(null==e||null===(E=e.value)||void 0===E?void 0:E.custom_url))if(jQuery(A+" img").length)jQuery(A+" img").attr("src",null==e||null===(C=e.value)||void 0===C?void 0:C.image_url);else jQuery(A).find("svg").remove(),jQuery(A).append('<img src="'+(null==e||null===(x=e.value)||void 0===x?void 0:x.image_url)+'" alt="order bump" />');else if(Object(l.isEmpty)(null==e||null===(S=e.value)||void 0===S?void 0:S.custom_url))jQuery(A+" img").attr("src","").attr("srcset","");else{var P,I;if(jQuery(A+" img").length)jQuery(A+" img").attr("src",null==e||null===(P=e.value)||void 0===P?void 0:P.custom_url).attr("srcset","");else jQuery(A).find("svg").remove(),jQuery(A).append('<img src="'+(null==e||null===(I=e.value)||void 0===I?void 0:I.custom_url)+'" alt="order bump" />').attr("srcset","")}if(e.alignmentSelectors){var T,D,F=Array.isArray(e.alignmentSelectors)?e.alignmentSelectors.toString():e.alignmentSelectors,B=null!==(T=null==e||null===(D=e.value)||void 0===D?void 0:D.position)&&void 0!==T?T:"left";if(null!=e&&e.alignmentClassList){var L=Object.values(null==e?void 0:e.alignmentClassList),z=null==e?void 0:e.alignmentClassList[B];jQuery(F).removeClass(L).addClass(z)}}var M=null!==(k=null==e||null===(N=e.value)||void 0===N?void 0:N.width)&&void 0!==k?k:"100";M&&(r+="".concat(A,"{max-width: ").concat(M,"px;}"))}break;default:r=d(e,r)}})),t(r)}))},p=function(e){var t=e.index,n=void 0===t?0:t;return Object(r.createElement)("div",{className:s()("bwf-p-20 bwf-border-1 bwf-rounded-6",{"bwf-mt-16":0!==n||1!==n}),style:{background:"#ffffff"}},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-100 "}),Object(r.createElement)("div",{className:"bwf-flex bwf--column bwf--align-start",style:{width:"100%"}},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15 bwf-mb-10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-12 bwf-mb-5"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-mt-20"})))}},387:function(e,t,n){"use strict";var r=n(0),c=n(9),a=n(1),l=n(2),i=(n(461),n(16));function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.pageUrl,n=e.onclose,s=e.title,u=e.updateDetail,b=e.isLoading,f=e.pageUrlSlug,d=o(Object(r.useState)(s),2),m=d[0],p=d[1],O=o(Object(r.useState)(f),2),j=O[0],v=O[1],y=o(Object(r.useState)(""),2),w=y[0],_=y[1],g=Object(l.isEmpty)(null==m?void 0:m.trim())||Object(l.isEmpty)(null==j?void 0:j.trim()),h=Object(r.useRef)();return Object(r.useEffect)((function(){var e,n=null==t?void 0:t.split("/");h.current=null==n||null===(e=n.slice(0,Object(l.isEmpty)(n[n.length-1])?-2:-1))||void 0===e?void 0:e.join("/"),_(t)}),[t]),Object(r.createElement)(c.Modal,{title:Object(a.__)("Edit Details","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-small bwf-edit-detail-modal",onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(a.__)("Name","funnel-builder")),Object(r.createElement)(c.TextControl,{value:m,onChange:function(e){p(e)},className:Object(l.size)(null==m?void 0:m.trim())?"":"bwf-error-border",onKeyDown:function(e){if("Enter"===e.key){if(g)return;u(m,j)}}}),Object(l.size)(null==m?void 0:m.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Name is required","funnel-builder")),Object(r.createElement)("label",{id:"required",className:"bwf-mt-16"},Object(a.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(c.TextControl,{value:j,onChange:function(e){v(e.replace(/\s+/g,"-").toLocaleLowerCase()),_(h.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},className:Object(l.size)(null==j?void 0:j.trim())?"":"bwf-error-border"}),Object(l.size)(null==j?void 0:j.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url"},Object(r.createElement)("label",{className:"bwf-url-title bwf-mt-16"},Object(a.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},w))),Object(r.createElement)("div",{className:"bwf-edit-detail-modal__actions"},Object(r.createElement)(i.a,{className:"bwf-modal-cancel-btn",onClick:n},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(i.a,{isPrimary:!0,onClick:function(){return u(m,j)},disabled:g,isBusy:b,className:g?"bwf-no-ripple":""},Object(a.__)("Update","funnel-builder"))))}},403:function(e,t,n){"use strict";var r=n(0),c=n(7),a=n.n(c),l=n(2),i=n(9),o=n(43),s=n(1),u=n(261),b=(n(421),n(5));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){i=!0,c=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=[{label:Object(s.__)("Product","funnel-builder"),value:"product"},{label:Object(s.__)("Custom","funnel-builder"),value:"custom"}];t.a=function e(t){var n,c=t.onChange,f=t.value,m=t.label,O=t.className,v=Object(o.useInstanceId)(e),y="inspector-bump-image-".concat(v),w=a()("components-bump-image",O),_=p(Object(r.useState)(f.type),2),g=_[0],h=_[1],E=p(Object(r.useState)(f.custom_url),2),S=E[0],k=E[1],N=Object(r.useRef)(document.body.classList.contains("modal-open")),C=function(e){c(e)},x=function(e,t){e.preventDefault(),n||((n=wp.media({title:"Media",library:{uploadedTo:console.log(wp.media.view.settings.post.id),type:"image"},button:{text:"Use this media"},multiple:!1})).on("select",(function(){var e=n.state().get("selection").first().toJSON();C(d(d({},f),{},{custom_url:e.url,type:"custom"})),k(e.url)})),n.on("close",(function(){N.current&&!document.body.classList.contains("modal-open")&&document.body.classList.add("modal-open")}))),n.open()};return Object(r.createElement)(i.BaseControl,{label:m,className:w,id:y},Object(r.createElement)("div",{className:"component-bump-image-wrap"},!Object(l.isEmpty)(j)&&Object(r.createElement)(i.ButtonGroup,{className:"bwf-button-group bwf-group-tab"},j.map((function(e,t){return Object(r.createElement)(i.Button,{key:t,variant:e.value===g?"primary":"",onClick:function(){h(e.value),"product"===e.value?(delete f.custom_url,C(d(d({},f),{},{type:e.value}))):Object(l.isEmpty)(S)||C(d(d({},f),{},{type:e.value,custom_url:S}))}},e.label)}))),Object(r.createElement)("div",{className:"bwf-bump-image-field"},Object(r.createElement)("div",{className:"bwf-bump-img-field-container"},"product"===g?Object(r.createElement)("img",{src:null==f?void 0:f.image_url,alt:"Product Image"}):Object(r.createElement)("div",{className:"bwf-bump-custom-img"},S?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("img",{src:S,alt:"Product Image"}),Object(r.createElement)("div",{className:"bwf-media-actions"},Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-delete",onClick:function(){k(""),C(d(d({},f),{},{type:"product",custom_url:""}))}},Object(r.createElement)(b.a,{icon:"delete",size:"16"})),Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-edit",onClick:x},Object(r.createElement)(b.a,{icon:"edit",size:"16"})))):Object(r.createElement)("div",{className:"bwf-media-uploader-wrap",onClick:x},Object(r.createElement)(b.a,{icon:"add-image",size:48}),Object(r.createElement)("div",null,Object(s.__)("Add Image","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-bump-image-attr"},Object(r.createElement)(i.TextControl,{type:"number",label:Object(s.__)("Width (px)","funnel-builder"),max:400,value:null==f?void 0:f.width,onChange:function(e){C(d(d({},f),{},{width:e}))}}),Object(r.createElement)(u.b,{label:Object(s.__)("Image Position","funnel-builder"),options:[{label:Object(s.__)("Left","funnel-builder"),key:"left",value:"left"},{label:Object(s.__)("Right","funnel-builder"),key:"right",value:"right"},{label:Object(s.__)("Top","funnel-builder"),key:"top",value:"top"}],selected:null==f?void 0:f.position,onChange:function(e){C(d(d({},f),{},{position:e}))}})))))}},421:function(e,t,n){},461:function(e,t,n){},638:function(e,t,n){},639:function(e,t,n){},640:function(e,t,n){},641:function(e,t,n){},642:function(e,t,n){}}]);