(window.webpackJsonp=window.webpackJsonp||[]).push([[21,23],{1186:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(25),a=n(2),o=n(13),l=n.n(o),i=n(1),u=n(10),s=n.n(u),f=n(9),b=n(74),p=n(65),d=n(55),m=n(54),O=n(5),g=n(8),j=n(4),h=n.n(j),y=n(33),v=n(12),w=n(18),_=n(171),E=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.setOptions(n),r.bindMethods(),r.updateResult(),r}Object(w.a)(t,e);var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},n.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,Object(g.a)({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:Object(_.b)();this.currentResult=Object(g.a)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},n.notify=function(e){var t=this;y.a.batch((function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach((function(e){e(t.currentResult)}))}))},t}(n(56).a),C=n(251);var k=n(335),P=n(3),S=n(39),A=n(49),x=n(16),N=n(80);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=function(e){var t=e.title,n=e.selectedItemsCount,c=e.onBackupChange,a=I(Object(r.useState)(!0),2),o=a[0],l=a[1];Object(r.useEffect)((function(){c(!0)}),[]);var u=Object(r.createElement)(N.a,{type:"checkbox",checked:o,onChange:function(e){l(e),c(e)},label:Object(i.__)("Download this complete funnel before deletion.","funnel-builder"),className:"bwf-mt-16"});return n?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(r.Fragment,null,Object(i.__)("You are about to delete ","funnel-builder"),Object(r.createElement)("strong",null,n)," ",Object(i._n)("funnel","funnels",n,"funnel-builder"),Object(i.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")),u):t?Object(r.createElement)(r.Fragment,null,Object(i.__)("You are about to delete ","funnel-builder"),Object(r.createElement)("strong",null,t),Object(i.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),u):Object(r.createElement)(r.Fragment,null,Object(i.__)("You are about to delete funnel. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),u)},F=n(23),D=["override_global_checkout"];function M(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function B(e,t,n,r,c,a,o){try{var l=e[a](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,c)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U=function(e){var t=e.floatingBarProps,n=void 0===t?{}:t,c=e.resetSelection,a=e.onSuccess,o=e.deleteModal,l=e.setDeleteModal,u=e.exportAction,f=e.setExportLoader,b=L(Object(r.useState)([]),2),p=b[0],d=b[1],O=L(Object(r.useState)(0),2),j=O[0],w=O[1],_=Object(r.useRef)(!0),k=Object(F.c)().showSnackbar,N=Object(A.a)().updateStatus,I=function(){c&&c(),d([]),setTimeout((function(){z.reset()}),2100)},T=(0,Object(S.a)().getModalData)(),z=function(e,t,n){var r=h.a.useRef(!1),c=h.a.useState(0)[1],a=Object(v.k)(e,t,n),o=Object(C.b)(),l=h.a.useRef();l.current?l.current.setOptions(a):l.current=new E(o,a);var i=l.current.getCurrentResult();h.a.useEffect((function(){r.current=!0;var e=l.current.subscribe(y.a.batchCalls((function(){r.current&&c((function(e){return e+1}))})));return function(){r.current=!1,e()}}),[]);var u=h.a.useCallback((function(e,t){l.current.mutate(e,t).catch(v.i)}),[]);if(i.error&&l.current.options.useErrorBoundary)throw i.error;return Object(g.a)({},i,{mutate:u,mutateAsync:i.mutate})}(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.current){e.next=4;break}return f(Object(i.sprintf)(
/* translators: %1$s: number of funnels, %2$s: 'Funnels' or 'Funnel' depending on count */
Object(i.__)("We're backing up and deleting %1$s %2$s","funnel-builder"),p.length,p.length>1?Object(i.__)("Funnels","funnel-builder"):Object(i.__)("Funnel","funnel-builder"))),e.next=4,u(p.join(","),"");case 4:return e.next=6,s()({path:Object(P.x)("/funnels"),method:"DELETE",data:t});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function o(e){B(a,r,c,o,l,"next",e)}function l(e){B(a,r,c,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(e){if(e.setup){var t=e.setup,n=(t.override_global_checkout,M(t,D));N(n)}k(Object(i.sprintf)(
/* translators: %1$s: number of funnels, %2$s: 'Funnels' or 'Funnel' depending on count */
Object(i.__)("%1$s %2$s deleted successfully","funnel-builder"),p.length,p.length>1?Object(i.__)("funnels","funnel-builder"):Object(i.__)("funnel","funnel-builder"))),I(),a&&a(),l(!1)},onError:I});Object(r.useEffect)((function(){if(o){var e=[];Object.keys(n.selected).forEach((function(t){n.selected[t]&&e.push(t)})),d(e)}}),[o]);return Object(r.useEffect)((function(){var e=n.selected,t=Object.keys(e).reduce((function(t,n){return e[n]?t+1:t}),0);w(t)}),[n]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.a,{className:"bwf-admin-modal-small",modalTitle:T&&1<T.count?Object(i.__)("Delete Funnels","funnel-builder"):Object(i.__)("Delete Funnel","funnel-builder"),content:!z.isError&&Object(r.createElement)(R,{onBackupChange:function(e){return _.current=e},selectedItemsCount:j}),cancelButtonText:Object(i.__)("Cancel","funnel-builder"),confirmButton:Object(r.createElement)(x.a,{className:"is-danger",disabled:z.isLoading,isBusy:z.isLoading,onClick:function(){var e={id:p.map((function(e){return e})).toString()};z.mutate(e)}},Object(i.__)("Delete","funnel-builder")),errorMessage:z.isError&&(z.error&&z.error.message?z.error.message:Object(i.__)("Unable to delete Funnels","funnel-builder")),onRequestClose:function(){return l(!1)},isOpen:o,confirmDescription:Object(i.__)("This action is irreversible","funnel-builder"),closeIcon:!0}))},$=n(377),q=n(162),Y=n(118),G=n(441),V=n(14),W=n(64),J=n(406),K=n(30),H=n(35),Q=n(501),X=n(21),Z=(n(912),n(435)),ee=n(129);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=function(e){var t=e.onclose,n=e.title,c=e.desc,o=e.updateFunnel,l=e.isLoading,u=e.renameTitle,s=te(Object(r.useState)(n),2),b=s[0],p=s[1],d=te(Object(r.useState)(c),2),m=d[0],O=d[1],g=Object(a.isEmpty)(b.trim());return Object(r.createElement)(f.Modal,{title:Object(i.__)("Edit ".concat(u),"funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-small bwf-rename-funnel-modal",onRequestClose:function(){return t()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(i.__)("Title","funnel-builder")),Object(r.createElement)(f.TextControl,{value:b,onChange:function(e){p(e)},onKeyDown:function(e){if("Enter"===e.key){if(g)return;o(b,m)}},className:Object(a.size)(b.trim())?"":"bwf-error-border"}),Object(a.size)(b.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(i.__)("Title is required","funnel-builder")),Object(r.createElement)(f.TextareaControl,{label:Object(i.__)("Description","funnel-builder"),className:"bwf-description bwf-mt-24",value:m,onChange:function(e){O(e)}}),Object(r.createElement)("div",{className:"bwf-rename-funnel-modal__actions bwf-mt-24"},Object(r.createElement)(x.a,{className:"bwf-modal-cancel-btn",onClick:t},Object(i.__)("Cancel","funnel-builder")),Object(r.createElement)(x.a,{isPrimary:!0,onClick:function(){return o(b,m)},disabled:g,isBusy:l,className:g?"bwf-no-ripple":""},Object(i.__)("Update","funnel-builder"))))},ce=n(29);function ae(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var le=function(){return Object(r.createElement)(d.a,null,Object(r.createElement)(d.c,{className:"bwf-w-1/3"},Object(r.createElement)(d.a,{justify:"flex-start",gap:6},Object(r.createElement)(d.c,null,Object(r.createElement)(ce.a,{h:18,w:18,br:3})),Object(r.createElement)(d.c,null,Object(r.createElement)(ce.a,{h:20,w:200}),Object(r.createElement)(ce.a,{h:16,w:240,mt:6})))),Object(r.createElement)(d.c,{className:"bwf-w-2/5"},Object(r.createElement)(d.a,{gap:2},ae(Array(4)).map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"analytics-".concat(t)},Object(r.createElement)(d.c,null,Object(r.createElement)(ce.a,{h:12,w:24,ml:"auto",mr:"auto"}),Object(r.createElement)(ce.a,{h:12,w:60,mt:4})))})))),Object(r.createElement)(d.c,null,Object(r.createElement)(d.a,{gap:3},ae(Array(2)).map((function(e,t){return Object(r.createElement)(d.c,{key:"action-btn-".concat(t)},Object(r.createElement)(ce.a,{h:30,w:0==t?94:30,br:8}))})))))},ie=n(32),ue=n(84),se=n(22),fe=n(53),be=n(40),pe=n(19),de=(n(63),["override_global_checkout"]);function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Oe(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function ge(e,t,n,r,c,a,o){try{var l=e[a](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,c)}function je(e){return function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function o(e){ge(a,r,c,o,l,"next",e)}function l(e){ge(a,r,c,o,l,"throw",e)}o(void 0)}))}}function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||_e(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(F.b)(),n=t.isBasicFeatureLocked,o=t.isProFeatureLocked,u=location&&location.search?Object(c.parse)(location.search.substring(1)):{};u.s;Object(P.l)(Object(i.__)("Funnels","funnel-builder"));var g=Object(G.a)(),j=g.fetch,h=g.setFunnelListValues,y=g.updateFunnelInList,v=g.setLoading,w=g.setSearchText,_=g.fetchAnalytics,E=Object(Y.a)(),C=E.getFunnels,x=E.getPageNumber,I=E.getPerPageCount,T=E.getTotalCount,D=E.getOffset,M=E.getLoadingStatus,B=E.getMessage,L=E.getCountData,z=E.getError,te=E.getSearch,ne=E.isLoadingAnalytics,ae=Object(K.a)().setFunnelTitle,oe=Object(F.c)().showSnackbar,ge=we(Object(r.useState)(!1),2),he=ge[0],ve=ge[1],Ee=we(Object(r.useState)(!1),2),Ce=Ee[0],ke=Ee[1],Pe=we(Object(r.useState)(!1),2),Se=Pe[0],Ae=Pe[1],xe=we(Object(r.useState)({loading:!1,status:!1}),2),Ne=xe[0],Ie=xe[1],Te=we(Object(r.useState)(!1),2),Re=Te[0],Fe=Te[1],De=we(Object(r.useState)({id:0,title:"",desc:""}),2),Me=De[0],Be=De[1],Le=we(Object(r.useState)(!1),2),ze=Le[0],Ue=Le[1],$e=we(Object(r.useState)(""),2),qe=$e[0],Ye=$e[1],Ge=Object(r.useRef)(),Ve=C(),We=D(),Je=I(),Ke=M(),He=T(),Qe=x(),Xe=(B(),L()),Ze=(ie.a.getIsFunnelLoading(),Object(be.a)().setPreviousStep),et=Object(S.a)().getPageCountData,tt=Object(W.a)().setPageCountData,nt=et(),rt=Object(P.z)(),ct=Object(F.a)({type:"funnels",fetch:function(e){return Ft({categories:e})}}),at=ct.setAssignCategoryItems,ot=ct.renderCategoryColumn,lt=ct.renderCategorySelector,it=ct.renderAssignCategoryModal,ut=ct.renderCategoryTags,st=ct.selectedCategories,ft=ct.refreshCategory,bt=ct.renderProModal,pt=ct.setShowProModal,dt=ct.renderAssignCategoryButton;Object(r.useEffect)((function(){tt(ye(ye({},nt),Xe))}),[Xe]),Object(r.useEffect)((function(){qe&&(oe(qe),Object(a.delay)(Ye,3e3,""),Ye(""))}),[qe]);var mt=we(Object(r.useState)(!1),2),Ot=mt[0],gt=mt[1],jt=Object(A.a)().updateStatus,ht=Object(H.a)(),yt=ht.getFirstFunnel,vt=ht.isStatusLoading,wt=yt(),_t=z(),Et=te(),Ct=Object(r.useRef)(!0),kt=Object(r.useRef)(new AbortController),Pt=Object(r.useRef)(new AbortController);Object(r.useEffect)((function(){wt?Ft():vt||v(!1)}),[We,Je,wt,vt]),Object(r.useEffect)((function(){var e;Ke||!wt||Object(a.isEmpty)(Ve)||_(null==Pt||null===(e=Pt.current)||void 0===e?void 0:e.signal)}),[Ke]),Object(r.useEffect)((function(){return window.scrollTo(0,0),function(){wt&&v(!0),w(null),Ze("")}}),[]);var St=function(){var e,t=null===(e=Ge.current)||void 0===e?void 0:e.getClientRects()[0].top;t&&Ge.current&&t<168.7&&window.scrollTo(0,60)},At=Object(r.useMemo)((function(){var e={};if(Array.isArray(Ve)){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_e(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}(Ve);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.id]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[Ve]),xt=Object(k.b)(At),Nt=xt.singleSelectProps,It=xt.floatingBarProps,Tt=xt.resetSelection,Rt=function(e){e!==Je&&(h("limit",e),St())},Ft=function(e){var t,n;null===(t=kt.current)||void 0===t||t.abort(),null===(n=Pt.current)||void 0===n||n.abort(),v(!0),kt.current=new AbortController,Pt.current=new AbortController,j(ye({query:u,offset:We,limit:Je,search:Et,getDraft:!0,getSteps:!1,categories:st,signal:kt.current.signal},e))},Dt=function(){var e=je(regeneratorRuntime.mark((function e(t,n){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=parseInt(t)>0?Object(P.x)("/funnels/export/?ids=".concat(t)):Object(P.x)("/funnels/export/"),e.prev=1,e.next=4,s()({path:r,method:"GET"});case 4:return c=e.sent,Array.isArray(c)&&(Object(P.q)(c,"FunnelKit-"+n),Ie({status:!1})),e.abrupt("return",c);case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(i.__)("We are exporting the funnel.","funnel-builder");Ie({status:!0,loading:!0,className:"bwf-admin-modal-no-header",content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"}," ",Object(i.__)("Please wait…","funnel-builder")),Object(r.createElement)("div",{className:"bwf-text-light"},e))})},Bt=function(){var e=je(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:0,n=r.length>1&&void 0!==r[1]?r[1]:"funnel",r.length>2&&void 0!==r[2]&&r[2]?Mt():Ie((function(e){return ye(ye({},e),{},{loadingButtonText:"",disableConfirm:!0})})),e.prev=4,e.next=7,Dt(t,n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),Ie({status:!0,error:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(){return e.apply(this,arguments)}}(),Lt=function(){var e=je(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie({status:!0,loading:!0,className:"bwf-admin-modal-no-header",content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"},Object(i.__)("Please wait…","funnel-builder")),Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(i.__)("We are duplicating the funnel.","funnel-builder")))}),e.prev=1,e.next=4,s()({path:Object(P.x)("/funnels/duplicate/".concat(t)),method:"GET"}).then((function(e){!0===e.status?(Ft({offset:0}),Ie({status:!1}),ft(!0)):Ie({status:!0,error:Object(i.__)("Something went wrong, Please check your response","funnel-builder")})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Ie({status:!0,error:e.t0.message});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),zt=function(){var e=je(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Ct.current){e.next=5;break}return Mt(Object(i.__)("We're downloading funnel before deletion","funnel-builder")),e.next=5,Dt(t,n);case 5:s()({path:Object(P.x)("/funnels"),method:"DELETE",data:{id:t.toString()}}).then((function(e){if(!0===e.status){if(Ft({offset:0}),Ie({status:!1}),e.setup){var t=e.setup,n=(t.override_global_checkout,Oe(t,de));jt(n)}Ye(Object(i.__)("Funnel deleted successfully","funnel-builder")),ft(!0)}else Ie({status:!0,error:Object(i.__)("Something went wrong.","funnel-builder")})})).catch((function(e){Ie({status:!0,error:e.message})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Ie({status:!0,error:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}();Object(q.a)("funnels",Object(i.__)("All","funnel-builder"),!1,!1,!1,ze,Ue);var Ut=[{key:"conversion",label:function(e){return Object(i._n)("Conversion","Conversions",e,"funnel-builder")}},{key:"total",label:Object(i.__)("Revenue","funnel-builder"),isCurrency:!0},{key:"bump_total",label:Object(i.__)("Order Bumps","funnel-builder"),isCurrency:!0,isPro:!0},{key:"offer_total",label:Object(i.__)("One Click Upsells","funnel-builder"),isCurrency:!0,isPro:!0}],$t=function(e,t,n){var r=Object(a.find)(Ve,{id:e}),c=Object(a.get)(r,"stats.".concat(t),0);return n?rt.formatAmount(c):c},qt=function(e){return Object(r.createElement)(d.c,{className:"bwf-funnel-list__analytics"},Ut.map((function(t,n){var c=t.key,l=t.label,i=t.isCurrency,u=t.isPro,s=$t(e.id,c,i),f=Object(a.isFunction)(l)?l($t(e.id,c)):l;return Object(r.createElement)("span",{key:"funnel-an-".concat(n)},ne?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ce.a,{h:12,w:24,ml:"auto",mr:"auto"}),Object(r.createElement)(ce.a,{h:12,w:60,mt:4})):Object(r.createElement)(r.Fragment,null,u&&o?Object(r.createElement)(O.a,{icon:"king",color:pe.NOTICE_YELLOW,size:16}):s,Object(r.createElement)("br",null),Object(r.createElement)("span",null,f)))})))},Yt=Ve?Ve.map((function(e,t){var c,l;return{content:Object(r.createElement)(d.a,{justify:"space-between",className:"bwf-flex-wrap",align:"center"},Object(r.createElement)(d.c,{className:"bwf-w-1/3"},Object(r.createElement)(d.a,{justify:"flex-start",gap:6,key:"bwf-funnel-list-".concat(t)},Object(r.createElement)(d.c,{className:"bwf-funnel-list-card__checkbox-wrap",onClick:function(e){return e.stopPropagation()}},Object(r.createElement)(N.a,me({type:"checkbox",checked:!1,onChange:function(){}},Nt[e.id]))),Object(r.createElement)(d.c,{className:"bwf-funnel-list__funnel-name-wrap"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-flex-wrap"},Object(r.createElement)(se.a,{href:Object(P.K)("/funnels/".concat(e.id)),className:"bwf-funnel-list__funnel-name"},e.title,Object(r.createElement)(X.c,{content:Object(i.sprintf)(
/* translators: %s: Step Count. */
Object(i.__)("%1$s %2$s","funnel-builder"),0===parseInt(e.steps)?"No":parseInt(e.steps),1===parseInt(e.steps)?"Step":"Steps")})),ot(e.categories),e.hasOwnProperty("draft_count")&&0!==parseInt(e.draft_count)&&Object(r.createElement)(X.c,{content:Object(i.sprintf)(
/* translators: %d: Draft Count. */
Object(i.__)("%1$d Draft","funnel-builder"),e.draft_count,e.draft_count>1?"s":""),type:"warning"})),Object(r.createElement)("div",{className:"bwf-funnel-list__funnel-desc"},e.desc),Object(r.createElement)(d.a,{justify:"flex-start",className:"bwf-funnel-list__funnel-time"},Object(r.createElement)(d.c,{title:Object(P.E)(e.date_added,!0)},Object(i.__)("Created","funnel-builder")," ",Object(P.L)(e.date_added).fromNow()),!Object(a.isEmpty)(e.last_update)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(d.c,{className:"bwf-dot"},Object(r.createElement)("svg",{width:"4",height:"4",viewBox:"0 0 4 4",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(r.createElement)("circle",{cx:"2",cy:"2",r:"2",fill:"#82838E"}))),Object(r.createElement)(d.c,{title:Object(P.E)(e.last_update,!0)},Object(i.__)("Last Edited","funnel-builder")," ",Object(P.L)(e.last_update).fromNow())))))),qt(e),Object(r.createElement)(d.c,null,(l=e,Object(r.createElement)("div",{className:"bwf-funnel-list__actions"},Object(r.createElement)(d.a,{gap:3,justify:"flex-end"},Object(r.createElement)(d.c,null,l.hasOwnProperty("view_link")&&""!==l.view_link?Object(r.createElement)("a",{href:l.view_link,target:"__blank",className:"bwf-btn-gray components-button has-icon has-text is-secondary is-small is-preview",onClick:function(e){e.stopPropagation()}},Object(r.createElement)(O.a,{color:"#353030",icon:"view",size:"16"}),Object(i.__)("Preview","funnel-builder")):Object(r.createElement)(f.Button,{isSecondary:!0,isSmall:!0,className:"bwf-btn-gray is-preview",onClick:function(e){e.stopPropagation(),Ie({status:!0,modalTitle:Object(i.__)("Alert","funnel-builder"),content:Object(i.__)("Please create steps to preview the funnel.","funnel-builder"),closeIcon:!1,buttonConfirm:Object(i.__)("Close","funnel-builder"),onConfirm:function(){return Ie({status:!1})}})}},Object(r.createElement)(O.a,{color:"#353030",icon:"view",size:"16"}),Object(i.__)("Preview","funnel-builder"))),Object(r.createElement)(d.c,null,Object(r.createElement)(b.a,{menuPosition:"bottom left",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){Be({id:l.id,title:l.title,desc:l.desc}),t()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(i.__)("Edit","funnel-builder")))),Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){n?gt(!0):(Lt(l.id),t())}},Object(r.createElement)(d.a,{justify:"space-between"},Object(r.createElement)(d.c,null,Object(i.__)("Duplicate","funnel-builder")),n&&Object(r.createElement)(d.c,null,Object(r.createElement)(X.b,null)))),dt({children:Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){o?pt(!0):(at(l.id),t())}},Object(r.createElement)(d.a,{justify:"space-between"},Object(r.createElement)(d.c,null,Object(i.__)("Assign Category","funnel-builder")),o&&Object(r.createElement)(d.c,null,Object(r.createElement)(X.b,null))))}),Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){Bt(l.id,l.title,!0),t()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(i.__)("Export","funnel-builder")))),Object(r.createElement)(p.a,{isClickable:!0,onInvoke:function(){var e={status:!0,modalTitle:Object(i.__)("Delete Funnel","funnel-builder"),content:Object(r.createElement)(R,{title:l.title,onBackupChange:function(e){Ct.current=e}}),buttonConfirm:Object(i.__)("Delete","funnel-builder"),buttonCancel:Object(i.__)("Cancel","funnel-builder"),confirmButtonClass:"is-danger"};Ie(ye(ye({},e),{},{onConfirm:function(){Ie(ye(ye({},e),{},{disableConfirm:!0})),zt(l.id,l.title)}})),t()},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(i.__)("Delete","funnel-builder")))))}}))))))),onClick:function(){ae(e.hasOwnProperty("title")?e.title:""),Object(V.k)({},"/funnels/".concat(e.id))},className:null!==(c=Nt[e.id])&&void 0!==c&&c.checked?"is-selected":""}})):[],Gt=Object.keys(It.selected).reduce((function(e,t){return It.selected[t]?e+1:e}),0);if(_t)return Object(r.createElement)(ue.a,{errorMessage:_t.hasOwnProperty("message")?_t.message:Object(i.__)("Unable to load funnels","funnel-builder")});var Vt=function(e){switch(e){case"delete":Fe(!0);break;case"assign_category":if(o)pt(!0);else{var t=[];Object.keys(It.selected).forEach((function(e){It.selected[e]&&t.push(e)})),at(1===t.length?t[0]:t)}}},Wt=function(e,t){Ie({status:!0,loading:!1,modalTitle:Object(i.__)("Export Funnels","funnel-builder"),className:"bwf-funnel-export-modal",content:Object(r.createElement)("div",null,Object(i.__)("You are about to export ","funnel-builder")," ",Object(r.createElement)("strong",null,t)," ",Object(i._n)("funnel","funnels",t,"funnel-builder"),"."),buttonConfirm:Object(i.__)("Export All","funnel-builder"),onConfirm:function(){return Bt(e,"")}})},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e&&Gt){var t=[];Object.keys(It.selected).forEach((function(e){It.selected[e]&&t.push(e)})),Wt(t.join(","),Gt)}else Wt(0,Object(i.__)("all","funnel-builder"))},Kt=(!Ke&&!vt&&!Et&&Object(a.isEmpty)(Ve),!Ke&&!vt&&!Et&&Object(a.isEmpty)(Ve)&&!wt),Ht=function(){return Object(r.createElement)(Z.default,{urlDependency:!1,onImportComplete:function(e){var t=e.funnel_id;Object(V.k)({},"/funnels/".concat(t))},hideTabs:["wc_checkout","upsell"]})};return Object(r.createElement)(r.Fragment,null,ze?Ht():Object(r.createElement)(r.Fragment,null,he&&Object(r.createElement)($.b,{onCloseModal:function(){return ve(!1)}}),Kt||he?Ht():Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Q.a,{data:Yt,query:ye(ye({},u),{},{paged:Qe,s:Et,categories:st}),onPageChange:function(e,t){h("offset",(e-1)*Je),St()},onQueryChange:function(e){return"per_page"!==e?function(){}:Rt},totalRows:He,rowsPerPage:Je,classNames:"bwf-funnel-card-list",isLoading:Ke,placeholder:Object(r.createElement)(le,null),action:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Gt?Object(r.createElement)("div",{className:"bwf-selected-count-wrap"},Gt," ",Object(i._n)("item","items",Gt,"funnel-builder"),Object(i.__)(" selected in the list","funnel-builder")," ",Object(r.createElement)(f.Button,{isLink:!0,onClick:function(){return Tt()}},Object(r.createElement)(O.a,{icon:"cross",height:"12",width:"12",color:"#0073aa"})," ",Object(i.__)("Clear All","funnel-builder"))," "):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{query:u,isLoading:Ke,totalRows:He,setSearchData:function(e){if(0!==parseInt(We))return w(e),void h("offset",0);Ft({offset:0,search:e}),St()}}),lt({disabled:Ke})),Gt>0&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(f.Button,{isSecondary:!0,className:" bwf-btn-gray bwf-export-icon",onClick:function(){Jt()},icon:Object(r.createElement)(O.a,{icon:"export",size:16}),disabled:!Yt.length,iconSize:16,isSmall:!0},Object(i.__)("Export","funnel-builder")),dt({children:Object(r.createElement)(f.Button,{isSecondary:!0,className:"bwf-btn-gray",onClick:function(){Vt("assign_category")},icon:Object(r.createElement)(O.a,{icon:"add-circle",size:16}),iconSize:16,isSmall:!0},Object(i.__)("Assign Category","funnel-builder"))}),Object(r.createElement)(f.Button,{isSecondary:!0,className:"bwf-btn-gray",onClick:function(){Vt("delete")},icon:Object(r.createElement)(O.a,{icon:"trash",size:16}),iconSize:16,isSmall:!0},Object(i.__)("Delete","funnel-builder")))),Object(r.createElement)("div",{className:"bwf-funnel-list-action-right"},Object(r.createElement)(f.Button,{isSecondary:!0,className:" bwf-btn-gray bwf-export-icon",onClick:function(){Jt(!0)},icon:Object(r.createElement)(O.a,{icon:"export",size:16}),disabled:!Yt.length,iconSize:16,isSmall:!0},Object(i.__)("Export All","funnel-builder")),Object(r.createElement)(f.Button,{isSecondary:!0,className:" bwf-btn-gray bwf-export-icon",onClick:function(){ke(!0)},icon:Object(r.createElement)(O.a,{icon:"import",size:16}),disabled:!Yt.length,iconSize:16,isSmall:!0},Object(i.__)("Import","funnel-builder")))),actionMeta:ut(),ref:Ge})),Object(r.createElement)(U,{floatingBarProps:It,resetSelection:Tt,onSuccess:function(){Ft({offset:0}),ft(!0)},deleteModal:Re,setDeleteModal:Fe,exportAction:Dt,setExportLoader:Mt}),Me.id>0&&Object(r.createElement)(re,{renameTitle:Object(i.__)("Funnel","funnel-builder"),title:Me.title,desc:Me.desc,onclose:function(){return Be({id:0})},updateFunnel:function(e,t){return function(e,t){Me.title!==e||Me.desc!==t?(Ae(!0),s()({path:Object(P.x)("/funnels/".concat(Me.id)),method:"POST",data:{title:e,description:t,funnel_id:Me.id}}).then((function(n){n.id&&y(Me.id,{title:e,desc:t,last_update:l()().format("YYYY-MM-DD HH:mm:ss")}),Be({id:0}),Ae(!1)})).catch((function(e){console.log(e),Be({id:0}),Ae(!1)}))):Be({id:0})}(e,t)},isLoading:Se}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-small "+Ne.className,confirmText:Ne.confirmText,modalTitle:Ne.modalTitle,confirmButtonText:Ne.buttonConfirm,confirmButtonClass:Ne.confirmButtonClass,cancelButtonText:Ne.buttonCancel,onConfirm:Ne.onConfirm,isLoading:Ne.loading,successMessage:Ne.success,errorMessage:Ne.error,content:Ne.content,onRequestClose:function(){return Ie({status:!1})},isOpen:Ne.status,closeIcon:!Ne.hasOwnProperty("closeIcon")||Ne.closeIcon,disableConfirm:Ne.disableConfirm}),Ce&&Object(r.createElement)(J.a,{onRequestClose:function(){return ke(!1)},onSuccess:Ft})),Object(r.createElement)(fe.a,{isOpen:!!Ot,onRequestClose:function(){return gt(!1)},modalContent:{feature:Object(i.__)("Duplicate Funnel","funnel-builder"),proLink:Object(P.S)(["Funnel","Duplicate","Upgrade","Modal"])},type:2}),it({items:Ve}),bt({proLink:Object(P.S)(["Funnel","Categories","Upgrade","Modal"])}))}},319:function(e,t,n){"use strict";var r=n(0),c=n(1),a=n(9),o=n(7),l=n.n(o),i=n(15),u=n.n(i),s=n(2),f=(n(323),n(5)),b=n(261),p=n(262);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var c=w(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=[10,25,50,75,100],E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(u,e);var t,n,o,i=h(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).state={inputValue:t.props.page},t.previousPage=t.previousPage.bind(v(t)),t.nextPage=t.nextPage.bind(v(t)),t.onInputChange=t.onInputChange.bind(v(t)),t.onInputBlur=t.onInputBlur.bind(v(t)),t.perPageChange=t.perPageChange.bind(v(t)),t.selectInputValue=t.selectInputValue.bind(v(t)),t}return t=u,(n=[{key:"getPerPageOptions",value:function(){var e=this.props.perPageOptions;return[].concat(m(void 0===e?[]:e),_).sort((function(e,t){return e-t}))}},{key:"previousPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n-1<1||r(n-1,"previous")}},{key:"nextPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n+1>this.pageCount||r(n+1,"next")}},{key:"perPageChange",value:function(e){var t=this.props,n=t.onPerPageChange,r=t.onPageChange,c=t.total,a=t.page;n(parseInt(e,10));var o=Math.ceil(c/parseInt(e,10));a>o&&r(o)}},{key:"onInputChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"onInputBlur",value:function(e){var t=this.props,n=t.onPageChange,r=t.page,c=parseInt(e.target.value,10);c!==r&&Number.isFinite(c)&&c>0&&this.pageCount&&this.pageCount>=c&&n(c,"goto")}},{key:"selectInputValue",value:function(e){e.target.select()}},{key:"renderPageArrows",value:function(){var e=this.props,t=e.page,n=e.showPageArrowsLabel;if(this.pageCount<=1)return null;var o=l()("bwf-pagination-link",{"is-active":t>1}),i=l()("bwf-pagination-link",{"is-active":t<this.pageCount});return Object(r.createElement)("div",{className:"bwf-pagination-page-arrows"},n&&Object(r.createElement)("span",{className:"bwf-pagination-page-arrows-label",role:"status","aria-live":"polite"},Object(c.sprintf)(Object(c.__)("Page %d of %d","funnel-builder"),t,this.pageCount)),Object(r.createElement)("div",{className:"bwf-pagination-page-arrows-buttons"},Object(r.createElement)(a.Button,{className:o,disabled:!(t>1),onClick:this.previousPage,label:Object(c.__)("Previous Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-left",width:16})),Object(r.createElement)(a.Button,{className:i,disabled:!(t<this.pageCount),onClick:this.nextPage,label:Object(c.__)("Next Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-right",width:16,color:"#0073AA"}))))}},{key:"renderPerPagePicker",value:function(){var e,t=this.getPerPageOptions().map((function(e){return{key:e.toString(),label:e.toString()}}));return Object(r.createElement)("div",{className:"bwf-pagination-per-page-picker"},Object(r.createElement)(b.b,{selected:null===(e=this.props.perPage)||void 0===e?void 0:e.toString(),onChange:this.perPageChange,options:t,labelPosition:"side"}),Object(r.createElement)("label",{className:"bwf-pagination-per-page-picker__label"},Object(c.__)("Per Page","funnel-builder")))}},{key:"render",value:function(){var e=this.props,t=e.total,n=e.perPage,c=e.className,a=e.showPerPagePicker;this.pageCount=Math.ceil(t/n);var o=l()("bwf-pagination",c);return this.pageCount<=1?t>this.getPerPageOptions()[0]&&Object(r.createElement)("div",{className:o},this.renderPerPagePicker())||null:Object(r.createElement)("div",{className:o},this.renderPageArrows(),a&&this.renderPerPagePicker())}}])&&g(t.prototype,n),o&&g(t,o),u}(r.Component);E.propTypes={page:u.a.number.isRequired,onPageChange:u.a.func,perPage:u.a.number.isRequired,onPerPageChange:u.a.func,total:u.a.oneOfType([u.a.number,u.a.string]).isRequired,className:u.a.string,showPagePicker:u.a.bool,showPerPagePicker:u.a.bool,showPageArrowsLabel:u.a.bool};var C={onPageChange:s.noop,onPerPageChange:s.noop,showPagePicker:!1,showPerPagePicker:!0,showPageArrowsLabel:!0};t.a=Object(p.a)(E,C)},323:function(e,t,n){},335:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return g}));var r=n(0);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e){var t=l(Object(r.useState)({}),2),n=t[0],c=t[1],i=Object.keys(n).length>0&&Object.keys(n).reduce((function(e,t){return e&&n[t]}),!0);Object(r.useEffect)((function(){var t={};if(e)for(var n in e)t[n]=!1;c(t)}),[e]);var u=Object(r.useCallback)((function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=a(a({},n),{},o({},e,t));c(r)}}),[n]),s=Object(r.useMemo)((function(){var e={};for(var t in n){var r={selected:n[t],checked:n[t],onChange:u(t)};e[t]=r}return e}),[n]),f=Object(r.useCallback)((function(){var e={};for(var t in n)e[t]=!i;c(e)}),[n,i]);return{singleSelectProps:s,selectAllProps:{selected:i,checked:i,onChange:f},floatingBarProps:{items:e,selected:n},resetSelection:Object(r.useCallback)((function(){var e={};for(var t in n)e[t]=!1;c(e)}),[n])}},s=n(9),f=n(1),b=n(5),p=(n(382),n(383),function(e){var t=e.number,n=void 0===t?0:t;return Object(r.createElement)("span",{className:"bwf-count-badge"},n)}),d=n(64);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,c=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.selected,n=void 0===t?{}:t,c=e.items,a=void 0===c?{}:c,o=e.actions,l=void 0===o?[]:o,i=e.onAction,u=m(Object(r.useState)(!1),2),O=u[0],g=u[1],j=function(e){return e.length>0?{gridTemplateColumns:e.reduce((function(e){return"".concat(e," auto")}),"")}:{}}(l),h=Object(d.a)().setModalData,y=Object.keys(n).reduce((function(e,t){return n[t]?e+1:e}),0);Object(r.useEffect)((function(){g(y>0)}),[y]);var v=Object.keys(a).filter((function(e){return n[e]})).map((function(e){return a[e]})),w=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p,{number:y}),Object(r.createElement)("b",{style:{marginLeft:"5px"}},Object(f.__)("Items Selected","funnel-builder")));return O&&Object(r.createElement)("div",{className:"bwf-floating-action-bar-outer"},Object(r.createElement)("div",{className:"bwf-floating-action-bar"},Object(r.createElement)("div",{className:"bwf-floating-action-bar-wrapper"},Object(r.createElement)("span",{className:"bwf-floating-action-bar-count"},w),Object(r.createElement)("div",{className:"bwf-floating-action-bar-actions",style:j},l.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(r.createElement)("span",{key:"bulk-action-".concat(t),title:e.hint?e.hint:"",onClick:function(){if(i){if("delete"===e.id){var t=v.length,n=1===v.length?v[0].title:"";h({title:n,count:t})}i(e.id,v)}}},Object(r.createElement)(b.a,{icon:e.icon}))}))),Object(r.createElement)(s.Button,{isSecondary:!0,onClick:function(){return g(!1)}},Object(f.__)("Close","funnel-builder")))))}},382:function(e,t,n){},383:function(e,t,n){},435:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(124),a=n(2),o=n(1),l=n(351),i=n(271),u=n(81),s=n(3),f=n(14),b=function(e){var t=Object(r.useRef)(!0),n=Object(i.a)(),c=n.getTemplates,o=n.getActiveBuilder,l=n.getActiveGroup,u=Object(a.isEmpty)(c()),s=l(),f=o();Object(r.useEffect)((function(){var n,r;t.current||!e.current||u||(r=null===(n=e.current)||void 0===n?void 0:n.getClientRects()[0].top)&&e.current&&r<252.86&&window.scrollTo(0,60)}),[u,s,f]),Object(r.useEffect)((function(){t.current&&!Object(a.isEmpty)(f)&&(window.scrollTo(0,0),t.current=!1)}),[f])},p=n(23),d=n(285);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=Object(p.b)("ul").isProFeatureLocked,n=Object(i.a)(),m=n.getTemplates,g=n.getBuilders,j=(n.getFilters,n.getDefaultBuilder),h=n.templateLoading,y=n.getActiveBuilder,v=n.getActiveSubFilter,w=n.getActiveGroup,_=n.getCurrentTemplate,E=Object(u.a)().setActiveGroup,C=e.onImportComplete,k=e.isStoreCheckout,P=void 0!==k&&k,S=e.scratchConfirmModalData,A=e.storeCheckoutId,x=e.isStoreChekoutExists,N=void 0!==x&&x,I=e.templateListNotice,T=e.showImportNotice,R=e.urlDependency,F=void 0===R||R,D=e.showEditors,M=void 0===D||D,B=e.showTemplatesNav,L=void 0===B||B,z=e.showBuildFromScratch,U=void 0===z||z,$=e.showSelectedTemplates,q=void 0!==$&&$,Y=e.previewCustomizeEnabled,G=void 0!==Y&&Y,V=e.hideTabs,W=void 0===V?[]:V,J=Object(f.i)().importType,K=m(),H=g(),Q=JSON.parse(JSON.stringify(H)),X=j(),Z=y(),ee=h(),te=v(),ne=_(),re=Object(c.useParams)(),ce=re.id,ae=void 0===ce?0:ce,oe=re.filter,le=void 0===oe?"funnel":oe,ie=re.builder,ue=re.templateId,se=re.step,fe=Object(r.useRef)();b(!Object(s.ib)()&&fe);var be,pe=F?ue:ne.id,de=F?se:ne.activeStep,me=P&&A?A:ae,Oe=w(),ge=me||P||!F?Oe:le,je={funnel:Object(o.__)("All","funnel-builder"),wc_checkout:Object(o.__)("Checkout","funnel-builder"),landing:Object(o.__)("Sales Funnels","funnel-builder"),optin:Object(o.__)("Lead Funnels","funnel-builder")};((me||N||W.includes("wc_checkout"))&&delete je.wc_checkout,N&&(je.upsell&&delete je.upsell,me||(je.wc_checkout=Object(o.__)("Checkout","funnel-builder"))),!t||me||W.includes("upsell")||(je.upsell=Object(o.__)("One Click Upsell","funnel-builder")),Q&&Q.wc_checkout&&Q.wc_checkout.customizer&&delete Q.wc_checkout.customizer,"funnel"===J)&&(null===(be=Q[ge])||void 0===be||delete be.wp_editor);Object(r.useEffect)((function(){return function(){E("funnel")}}),[]);var he=function(){var e=ie||X;return Object(a.isEmpty)(Z)||(e=Z),Q&&Q[ge]&&!Q[ge][e]&&(e=Q[ge][X]?X:"elementor"),e},ye=["1","2","3","inline","popup"],ve=function(e,t){return("wc_checkout"===t||"optin"===t)&&te&&ye.includes(te)?K[t][Z][e].group_type[te]:e},we={landing:"sp",optin:"op",optin_ty:"op-confirmed",wc_checkout:"checkouts",upsell:"offer",wc_thankyou:"order-confirmed"},_e=function(e,t,n){var r=we.hasOwnProperty(e)?we[e]:"";return"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},Ee=Object(s.ib)()?"/store-checkout":me?"/funnels/".concat(me):"/templates";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l.a,{filters:d.e,templates:K,activeBuilder:he(),templateCards:function(){if(Object(a.isEmpty)(K)||Object(a.isEmpty)([ge]))return{};var e,t=he(),n={};if("upsell"===ge)n=null===(e=K[ge])||void 0===e?void 0:e[t];else if("funnel"===ge){var r=K[ge][t];for(var c in r){var o,l=r[c];if(r[c].hasOwnProperty("group")||q&&!q.includes(l.name))if(!(l.group.includes("sales")||l.group.includes("optin")||null!==(o=r[c])&&void 0!==o&&o.build_from_scratch))continue;n[c]=r[c]}}else for(var i in K.funnel[t]){var u=K.funnel[t][i];(!q||q&&q.includes(u.name))&&("landing"===ge&&u.group.includes("sales")||"optin"===ge&&u.group.includes("optin")||"wc_checkout"===ge&&u.group.includes("wc_checkout"))&&(n[i]=u)}return n}(),editors:Q,defaultBuilder:X,isTemplateLoading:ee,activeTemplateGroup:ge,templateGroup:je,previewData:function(){if(Object(a.isEmpty)(K)||!pe)return{};var e={success:!0},t=[],n=[];try{var r=he();if("upsell"===ge){t=[];var c=r;for(var l in"oxy"===c&&(c="oxygen"),"customizer"===c&&(c="elementor"),K[ge][r]){var i=K[ge][r][l];if(!i.build_from_scratch){var u={};u.id=l,u.funnel=l,u.slug=l,u.name=i.name,u.thumbnail=i.thumbnail,u.template=pe,u.pro=i.pro,u.preview="https://templates-".concat(c,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/"),u.group_type={},u.type="upsell",t.push(u),n.push({id:l,preview:"https://templates-".concat(c,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/")})}}e.activeTemplate={id:pe,thumbnail:pe,preview:"https://templates-".concat(c,".funnelswp.com/offer/").concat(K[ge][r][pe].prevslug,"/"),slug:pe,prevId:pe,name:K[ge][r][pe].name,pro:K[ge][r][pe].pro,tempPro:K[ge][r][pe].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var s="funnel";switch(ge){case"optin":s="optin";break;case"landing":s="sales";break;case"wc_checkout":s="checkout"}var f=K.funnel[r][pe];t=f.steps?f.steps.map((function(e){var t=K[e.type][r][ve(e.slug,e.type)];if(void 0===t)throw new Error("Step template not found with slug "+ve(e.slug,e.type));var c="";switch(e.type){case"landing":c=Object(o.__)("Sales Page","funnel-builder");break;case"wc_checkout":c=Object(o.__)("Checkout Page","funnel-builder");break;case"upsell":c=Object(o.__)("One Click Upsell","funnel-builder");break;case"wc_thankyou":c=Object(o.__)("Thank You Page","funnel-builder");break;case"optin":c=Object(o.__)("Optin Page","funnel-builder");break;case"optin_ty":c=Object(o.__)("Optin Confirmation Page","funnel-builder")}t.group_type?Object.values(t.group_type).forEach((function(t){var c=K[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(c.prevslug),preview:_e(e.type,c,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:_e(e.type,t,r)});return{id:"".concat(e.type,"-").concat(pe),slug:ve(e.slug,e.type),funnel:pe,step:e.type,name:c,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:s,group_type:t.group_type||{},preview:_e(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var b=f?f.steps.filter((function(e){return e.type===de})):[],p=K[b[0].type][r][ve(b[0].slug,b[0].type)];e.activeTemplate={thumbnail:"".concat(de,"-").concat(pe),prevId:"".concat(de,"-").concat(p.prevslug),preview:_e(b[0].type,p,r),slug:pe,name:K.funnel[r][pe].name,pro:K.funnel[r][pe].pro,tempPro:K.funnel[r][pe].pro,group:"funnel",filters:!!p.group_type&&Object.keys(p.group_type),type:de,funnelGroup:f.group,filter:"wc_checkout"===de?p.no_steps:p.group?p.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:me,onImportComplete:C,templateFilterCheck:function(e){return!me||"funnel"===J||!1===te||!1===te||!(!me||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===te?"optin":te):te===e.group)},activeFilter:te,isStoreCheckout:P,parentRoute:Ee,showTemplatesNav:L,showBuildFromScratch:!!U&&("funnel"!==J||P&&!me),funnelTitleModalData:O({},P&&{title:Object(o.__)("Store Checkout","funnel-builder")}),scratchConfirmModalData:S,importApiPrefix:P?"store-checkout":"funnels",templateListNotice:I,showImportNotice:T,urlDependency:F,showEditors:M,previewCustomizeEnabled:G,listRef:fe}))}},501:function(e,t,n){"use strict";var r=n(0),c=n(7),a=n.n(c),o=n(319),l=(n(502),n(2)),i=n(5);function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=Object(r.forwardRef)((function(e,t){var n=e.data,c=e.rowsPerPage,s=void 0===c?10:c,f=e.totalRows,b=e.onQueryChange,p=e.query,d=void 0===p?{}:p,m=e.onPageChange,O=e.action,g=e.classNames,j=e.isLoading,h=e.placeholder,y=e.actionMeta,v=!(Object(l.isEmpty)(null==d?void 0:d.s)&&Object(l.isEmpty)(null==d?void 0:d.categories)||j||n.length);return Object(r.createElement)("div",{ref:t,className:a()("bwf-card-list-wrap",g,{"no-search-result":v,"is-loading":j})},O&&Object(r.createElement)("div",{className:"bwf-card-list__header"},O),y,Object(r.createElement)("div",{className:"bwf-card-list__list"},j?u(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-card-list__card",key:"bwf-card-item-".concat(t)},h)})):n.length?n.map((function(e,t){var n=e.content,c=e.onClick,o=e.className;return Object(r.createElement)("div",{className:a()("bwf-card-list__card",o,{"is-clickable":!!c}),onClick:c,key:"bwf-card-item-".concat(t)},n)})):v&&Object(r.createElement)(i.a,{icon:"no-search-result",width:"206",height:"190"})),!Object(l.isEmpty)(d)&&!j&&n.length>0&&Object(r.createElement)(o.a,{key:parseInt(d.paged,10)||1,page:parseInt(d.paged,10)||1,perPage:s,total:f,onPageChange:m,onPerPageChange:b&&b("per_page")}))}))},502:function(e,t,n){},912:function(e,t,n){}}]);