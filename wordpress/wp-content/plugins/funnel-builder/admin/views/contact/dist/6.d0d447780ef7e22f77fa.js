(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{264:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),l=n(2),c=n(7),a=n.n(c),o=n(43),i=(n(9),n(307),n(21)),u=["label","className","selected","help","onChange","hideLabelFromVision","options","disabled","orientation"];function s(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function f(e){var t=e.label,n=e.className,c=e.selected,b=e.help,p=e.onChange,m=(e.hideLabelFromVision,e.options),d=void 0===m?[]:m,O=e.disabled,j=void 0!==O&&O,v=e.orientation,y=void 0===v?"horizontal":v,_=(s(e,u),Object(o.useInstanceId)(f)),h="inspector-radio-control-".concat(_),w=function(e){return p(e.target.value)};return!Object(l.isEmpty)(d)&&Object(r.createElement)("div",{className:a()("components-base-control",n,"components-radio-control bwf-components-radio-control",y)},Object(r.createElement)("div",{className:"components-base-control__field"},t&&Object(r.createElement)("label",{className:"components-base-control__label",dangerouslySetInnerHTML:{__html:t}}),Object(r.createElement)("div",{className:"bwf-radio-control-inner"},d.map((function(e,t){return Object(r.createElement)("div",{key:"".concat(h,"-").concat(t),className:"components-radio-control__option"},Object(r.createElement)("input",{id:"".concat(h,"-").concat(t),className:"components-radio-control__input",type:"radio",name:h,value:e.value,onChange:w,checked:!j&&e.value===c,disabled:j||e.disabled||e.isPro,"aria-describedby":b?"".concat(h,"__help"):void 0}),e.isPro&&Object(r.createElement)(i.b,null),Object(r.createElement)("label",{htmlFor:"".concat(h,"-").concat(t)},e.label))})))))}},271:function(e,t,n){"use strict";var r=n(27),l=["getStateProp"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}t.a=function(){var e=Object(r.a)("templates"),t=e.getStateProp;return a(a({},i(e,l)),{},{getTemplates:function(){return t("templates")},getBuilders:function(){return t("builders")},getFilters:function(){return t("filters")},templateLoading:function(){return t("isLoading")},getDefaultBuilder:function(){return t("default_builder")},getActiveBuilder:function(){return t("active_builder")},getActiveGroup:function(){return t("active_group")},getCurrentTemplate:function(){return t("current_template")},getActiveStep:function(){return t("active_step")},getActiveSubFilter:function(){return t("active_sub_filter")},getPageBuildersTexts:function(){return t("page_builders_texts")},getPageBuildersOptions:function(){return t("page_builders_options")},getImportBtnLabel:function(){return t("import_btn_label")},getScratchTemplateType:function(){return t("scratch_template_type")},getImportOffer:function(){return t("import_offer")}})}},275:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(0),l=n(9),c=n(43),a=n(2),o=n(7),i=n.n(o),u=(n(324),n(63)),s=n(21),f=n(1);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e){var t=e.label,n=e.className,o=e.value,d=e.help,O=e.options,v=void 0===O?[]:O,y=e.onBlur,_=(void 0===y&&a.noop,e.onChange),h=void 0===_?a.noop:_,w=e.onFocus,g=(void 0===w&&a.noop,e.disabled),E=e.showtooltip,S=void 0!==E&&E,k=e.tooltipmsg,T=void 0===k?"":k,P=e.select_all,N=e.select_all_label,C=e.orientation,I=void 0===C?"vertical":C,x=m(Object(r.useState)(!0),2),A=x[0],F=x[1],L=Object(c.useInstanceId)(j);if(Object(a.isEmpty)(v))return null;var B="inspector-checklist-".concat(L);o=null!=o&&o?o:[];var R=i()("components-checklist",n),D=function(e){var t=p(o);!0===e.target.checked?o.includes(e.target.value)||t.push(e.target.value):t=o.filter((function(t){return t!==e.target.value})),h(t,{event:e}),F(!1)},G=v.map((function(e){return e.value}));return Object(r.createElement)(l.BaseControl,{label:t,id:B,help:d},Object(r.createElement)("div",{className:i()("component-checklist-option-wrap",R,I)},P&&Object(r.createElement)("div",{className:i()("bwf-checkbox-control select_all")},Object(r.createElement)("span",{className:i()("bwf-checkbox-control-inner")},Object(r.createElement)("input",{type:"checkbox",id:"checkbox_select_all",value:Object(a.isEmpty)(Object(a.difference)(G,o)),onChange:function(e){e.target.checked?h(G,{e:e}):h([],{e:e})},checked:Object(a.isEmpty)(Object(a.difference)(G,o)),className:i()({"bwf-no-animation":A})})),Object(r.createElement)("label",{htmlFor:"checkbox_select_all"},N||Object(f.__)("Select All","funnel-builder"))),v.map((function(e,t){return Object(r.createElement)(u.a,{toolTipText:e.disable&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},T),visible:S&&e.disable||!1,size:280,iconSize:"auto",key:"".concat(B,"-").concat(t),position:"bottom right"},Object(r.createElement)("div",{key:"".concat(B,"-").concat(t),className:i()("bwf-checkbox-control")},Object(r.createElement)("span",{className:i()("bwf-checkbox-control-inner",{"bwf-checkbox-disabled":e.disable})},Object(r.createElement)("input",b({id:"".concat(B,"-").concat(t),type:"checkbox",value:e.value,onChange:e.disable?function(){}:D,checked:!e.isPro&&(n=o,l=e.value,!!Array.isArray(n)&&n.includes(l)),className:i()({"bwf-no-animation":A}),"aria-describedby":d?"".concat(B,"__help"):void 0},(g||e.isPro)&&{disabled:!0}))),e.isPro&&Object(r.createElement)(s.b,null),Object(r.createElement)("label",{htmlFor:"".concat(B,"-").concat(t)},e.label)));var n,l}))))}},282:function(e,t,n){"use strict";var r=n(0),l=n(1),c=n(5);n(308);t.a=function(e){var t=e.onClose,n=e.title,a=e.isDismissible,o=void 0===a||a;return Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},n),o&&Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(l.__)("Close","funnel-builder"),onClick:function(){return t()}},Object(r.createElement)(c.a,{icon:"close",size:20})))}},285:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return O}));var r=n(0),l=n(9),c=n(1),a=n(14),o=n(3);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){return"yes"===e.pro?wffn.i18n.ribbons.pro:wffn.i18n.ribbons.lite},b=function(e){var t=e.FB_PRO_STATUS,n=e.funnelId,l=e.importType,i=e.activeTemplateGroup;return u(u({title:!1===t?Object(c.__)("Templates are a PRO Feature","funnel-builder"):Object(c.__)("Unable to Import Template","funnel-builder"),content:!1===t?Object(r.createElement)(r.Fragment,null,Object(c.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(c.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(c.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(c.__)("inactive or has expired.","funnel-builder")),Object(c.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==t&&{action:function(){return Object(a.k)({},"/settings/")}}),{},{proLink:Object(o.S)([0===n||"funnel"===l?"Template":"Step",i,"Build","From","Scratch","Upgrade","Modal"])})},p=function(e){var t=e.templateName,n=e.FB_PRO_STATUS,l=e.funnelId,i=e.activeGroup,s=e.activeStep;return u(u({title:!1===n?Object(r.createElement)(r.Fragment,null,t,Object(c.__)(" is a PRO template","funnel-builder")):Object(c.__)("Unable to Import Template","funnel-builder"),content:!1===n?Object(r.createElement)(r.Fragment,null,Object(c.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(c.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(c.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(c.__)("inactive or has expired.","funnel-builder")),Object(c.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==n&&{action:function(){return Object(a.k)({},"/settings/")}}),{},{proLink:Object(o.S)([l?"Step":"Template",l?i:"upsell"===i?"upsell":s,t,"Upgrade","Modal"])})},m=function(e){var t=e.showSnackbar,n=e.hideSnackbar,a=e.builder,o=e.defaultBuilder,i=e.onConfirm,u=e.defaultEditorLoading;o===a||u||t(Object(r.createElement)("div",null,Object(c.__)("Want to make this default page builder?","funnel-builder")," ",Object(r.createElement)(l.Button,{className:"bwf-ml-10 is-secondary-white",onClick:function(){i(a),n()}},Object(c.__)("Yes","funnel-builder")),Object(r.createElement)(l.Button,{className:"bwf-ml-10 is-secondary-white",onClick:function(){return n()}},Object(c.__)("No","funnel-builder"))),!1)},d=function(e,t){var n=e;return"upsell"===t&&"wp_editor"===e?n="custom":"wc_checkout"===t&&"wp_editor"===e?n="embed_forms":"wc_checkout"===t&&"customizer"===e&&(n="pre_built"),n},O={optin:{inline:Object(c.__)("Inline","funnel-builder"),popup:Object(c.__)("Popup","funnel-builder")},wc_checkout:{1:Object(c.__)("One","funnel-builder"),2:Object(c.__)("Two","funnel-builder"),3:Object(c.__)("Three","funnel-builder")}}},307:function(e,t,n){},308:function(e,t,n){},324:function(e,t,n){},339:function(e,t,n){"use strict";var r=n(0),l=n(9),c=n(2),a=n(1),o=(n(384),n(15)),i=n.n(o),u=n(7),s=n.n(u),f=n(5),b=n(19),p=(n(42),n(262));function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=function(e){var t=e.onSearch,n=e.isLoading,o=e.items,i=e.onItemClick,u=e.error,p=e.blurText,d=e.placeholder,O=void 0===d?Object(a.__)("Type to search","funnel-builder"):d,j=e.helpText,v=e.multiGroup,y=void 0!==v&&v,_=e.stepTitle,h=void 0===_?Object(a.__)("details","funnel-builder"):_,w=m(Object(r.useState)(""),2),g=w[0],E=w[1],S=m(Object(r.useState)(!1),2),k=S[0],T=S[1],P=Object(r.useRef)(null),N=function(e,t){i(e),T(!1),t.preventDefault()};Object(r.useEffect)((function(){p&&!k&&E(p)}),[p,k]);var C=Object(r.useRef)();return Object(r.useEffect)((function(){return jQuery("body").on("click",(function(e){jQuery(C.current).find(e.target).length>0?T(!0):T(!1)})),function(){jQuery("body").off("click")}}),[]),Object(r.createElement)("div",{className:s()("bwf-select-auto-box",{"has-help-text":j}),ref:C},Object(r.createElement)("span",{className:"bwf-select-auto-box__search-icon"},Object(r.createElement)(f.a,{icon:"search",height:"16",width:"16",color:b.TEXT_COLOR_3})),Object(r.createElement)("span",{className:"bwf-select-auto__angle-icon"},Object(r.createElement)(f.a,{icon:Object(c.isArray)(o)&&o.length>0&&k?"angle-up":"angle-down",height:"12",width:"12",color:b.TEXT_COLOR_2})),Object(r.createElement)(l.TextControl,{autoComplete:"off",value:g,onChange:function(e){return E(n=e),P.current&&clearTimeout(P.current),void(P.current=setTimeout((function(){return t(n)}),500));var n},placeholder:O}),(!Object(c.isArray)(o)||!!u)&&k&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},u),Object(c.isArray)(o)&&k&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},n?Object(r.createElement)("div",null,Object(a.__)("Fetching ".concat(h,"…"),"funnel-builder")):Object(r.createElement)("ul",null,y?o.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-suggestion-panel-".concat(t)},Object(r.createElement)("li",{className:"bwf-suggestion-panel__group"},e.name),e.steps.map((function(e){return Object(r.createElement)("li",{key:e.id,onClick:function(t){"no-data"!==e.key&&N(e,t)}},Object(r.createElement)("div",null,e.name))})))})):o.map((function(e){return Object(r.createElement)("li",{key:e.key,onClick:function(t){"no-data"!==e.key&&N(e,t)}},Object(r.createElement)("div",null,Object(a.__)(e.value,"funnel-builder")))}))))),j&&Object(r.createElement)("span",{className:"bwf-select-auto-box__helpText"},j))};O.propTypes={onSearch:i.a.func,isLoading:i.a.bool,items:i.a.oneOfType([i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,value:i.a.string.isRequired})),i.a.array]),onItemClick:i.a.func,onChange:i.a.func,error:i.a.any},t.a=Object(p.a)(O,{onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null})},351:function(e,t,n){"use strict";n.d(t,"a",(function(){return ct}));var r=n(0),l=n(2),c=n(15),a=n.n(c),o=n(124),i=n(10),u=n.n(i),s=n(1),f=n(14),b=n(7),p=n.n(b),m=n(9),d=(n(455),n(42));function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var l=S(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,e);var t,n,c,a=w(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={isLoading:!0},t.iframeRef=Object(r.createRef)(),t.setLoaded=t.setLoaded.bind(E(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){this.iframeRef.current.addEventListener("load",this.setLoaded)}},{key:"setLoaded",value:function(){var e=this.props,t=e.src,n=e.onLoad,r=void 0===n?l.noop:n;this.setState({isLoading:!1}),r(!!t)}},{key:"componentDidUpdate",value:function(e,t){this.props.src&&this.props.src!==e.src&&this.setState({isLoading:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.loadingContent,c=void 0===n?Object(r.createElement)(d.a,{size:"xl"}):n,a=e.src,o=e.title,i=this.state.isLoading,u=p()("wffn-web-preview",t,{"is-loading":i});return Object(r.createElement)("div",{className:u},(i||Object(l.isEmpty)(a))&&c,Object(r.createElement)("div",{className:"wffn-web-preview__iframe-wrapper",style:v({},Object(l.isEmpty)(a)&&{width:0})},Object(r.createElement)("iframe",{ref:this.iframeRef,title:o,src:a})))}}])&&_(t.prototype,n),c&&_(t,c),o}(r.Component);k.propTypes={className:a.a.string,loadingContent:a.a.node,onLoad:a.a.func,src:a.a.string.isRequired,title:a.a.string.isRequired};var T=k,P=n(282),N=n(85),C=n(3);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=function(e){var t={title:Object(s.__)("This is a PRO Feature!","funnel-builder"),feature:"",content:Object(s.__)("We're sorry, the {{feature_name}} is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),demoLabel:!1,proLabel:Object(s.__)("Upgrade to PRO Now","funnel-builder"),proLink:C.nb,action:!1},n=e.onRequestClose,l=void 0===n?function(){}:n,c=e.isOpen,a=void 0!==c&&c,o=e.children,i=void 0===o?null:o,u=e.className,f=e.module,b=(e.isTemplate,e.modalContent?x(x({},t),e.modalContent):t);return a?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:p()("bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",u),isDismissible:!1,onRequestClose:function(){return l()},overlayClassName:"bwf-pro-modal__overlay"},Object(r.createElement)(P.a,{title:Object(r.createElement)(r.Fragment,null,b.title),onClose:l}),Object(r.createElement)("div",{className:"bwf-modal-content"},"string"==typeof b.content?b.content.replace("{{feature_name}}",b.feature):b.content),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},b.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return l()}},b.demoLabel),!b.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return l()}},Object(s.__)("Cancel")),Object(r.createElement)(N.a,{module:f,isPrimary:!0,isTemplate:!0})),i)):null},L=n(54),B=n(271),R=(n(456),n(81)),D=n(32),G=n(285),U=(n(457),["src","onLoaded"]);function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var $=function(e){var t=e.src,n=e.onLoaded,c=void 0===n?l.noop:n,a=W(e,U),o=M(Object(r.useState)(!1),2),i=o[0],u=o[1];return Object(r.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){u(!0),c(t)},function(){e.onload=function(){}}}),[]),Object(r.createElement)(r.Fragment,null,i?Object(r.createElement)("img",z({src:t},a)):Object(r.createElement)("div",{className:"bwf-image-loader"}))},V=n(5),J=n(43),Y=n(44),H=n(385);function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e){var t=e.label,n=void 0===t?"":t,c=e.id,a=void 0===c?"":c,o=e.value,i=e.onChange,u=void 0===i?l.noop:i,s=e.className,f="inspector-color-".concat(Object(J.useInstanceId)(m.ColorPicker)),b=Q(Object(r.useState)(!1),2),d=b[0],O=b[1];return Object(r.createElement)("div",{className:p()("components-color-field",s)},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:f},n),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return O(!0)}},Object(r.createElement)(m.ColorIndicator,{colorValue:o})),Object(r.createElement)(m.TextControl,{value:o||"#ffffff",className:"indicator-text"}),d&&Object(r.createElement)(Y.a,{position:"top left",onClose:function(){return O(!1)}},Object(r.createElement)(m.ColorPicker,{color:o,onChangeComplete:function(e){u(e.hex,{id:a})},disableAlpha:!0}))))},X=function(e){var t=e.setCustomizeVisible,n=Q(Object(r.useState)(!1),2),l=n[0],c=n[1],a=Q(Object(r.useState)(""),2),o=a[0],i=a[1];return Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize"},Object(r.createElement)("div",{className:"bwf-flex bwf-template-preview-sidebar__customize-heading"},Object(r.createElement)(m.Button,{onClick:function(){return t(!1)}},Object(r.createElement)(V.a,{icon:"arrow-left",size:16})),Object(s.__)("Customize","funnel-builder")),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-subheading"},Object(s.__)("Lets customize your store checkout with your logo and brand color","funnel-builder")),l?Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-logo"},Object(r.createElement)("div",null,Object(r.createElement)("img",{src:l,alt:"logo"}),Object(r.createElement)(m.Button,{className:"bwf-delete-btn",onClick:function(){return c(!1)}},Object(r.createElement)(V.a,{icon:"trash",size:20})))):Object(r.createElement)(H.a,{onFileSelected:function(e){c(URL.createObjectURL(e))},filetypeArray:["image/png"],dropZoneContent:Object(r.createElement)(r.Fragment,null,Object(r.createElement)(V.a,{icon:"add-image",size:40}),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(s.__)("Try to use png image","funnel-builder")))}),Object(r.createElement)(Z,{label:Object(s.__)("Color","funnel-builder"),value:o,onChange:function(e){return i(e)}}),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-actions"},Object(r.createElement)(m.Button,{isPrimary:!0},Object(s.__)("Save","funnel-builder")),Object(r.createElement)(m.Button,null,Object(s.__)("Reset","funnel-builder"))))},ee=n(23),te=n(21);function ne(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e){var t=e.thumbnailsData,n=e.hasPlaceholder,c=e.funnelId,a=e.onClick,o=e.activeThumbnail,i=e.previewCustomizeEnabled,u=(e.tempPro,e.importType),f=Object(ee.b)(),b=f.isProTemplatesLocked,d=f.isBasic,O=Object(ee.b)("ck").isProTemplatesLocked,j=Object(ee.b)("ul").isProTemplatesLocked,v=re(Object(r.useState)(!1),2),y=v[0],_=v[1];return Object(l.isEmpty)(t)||n?Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},ne(new Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_template_page_options",key:"bwf-place-preview-sidebar-".concat(t)},Object(r.createElement)("div",{className:"bwf-placeholder-temp wffn_preview_thumbnail"}),Object(r.createElement)("div",{className:"bwf-flex bwf--center wffn_template_name"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-12 "})))}))):Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},y?Object(r.createElement)(X,{setCustomizeVisible:_}):t&&t.map((function(e,t){var n="step"===u?null==e?void 0:e.type:null==e?void 0:e.step,l="upsell"===n,i=["wc_checkout","wc_thankyou"].includes(n);return Object(r.createElement)("label",{key:t,className:p()("wffn_template_page_options",{active_preview:e.id==o}),onClick:function(){return a(e)}},Object(r.createElement)("div",{className:"wffn_preview_thumbnail"},c?Object(r.createElement)($,{alt:"thumbnail",src:e.thumbnail}):Object(r.createElement)("img",{alt:"thumbnail",src:e.thumbnail})),Object(r.createElement)("div",{className:"wffn_template_name"},e.name),"yes"===e.pro&&(l?j:i||d?O:b)&&Object(r.createElement)(te.b,null))})),i&&!y&&Object(r.createElement)(m.Button,{isPrimary:!0,className:"bwf-template-preview-sidebar__customize-btn",onClick:function(){return _(!0)}},Object(r.createElement)(V.a,{icon:"edit",size:20,color:"#ffffff"}),Object(s.__)("Customize","funnel-builder")))},oe=function(e){var t=e.type,n=e.filters,c=e.FB_PRO_STATUS,a=e.activeSubFilter,o=e.onClick,i=e.activeTemplateFilters,u=e.tempPro,f=e.templateType,b=e.funnelId,m=e.funnelGroup,d=e.hasPRO,O=e.importType,j=Object(ee.b)("ck").isProTemplatesLocked;if(!t)return null;var v=n[t];if(void 0===v||Object(l.isEmpty)(v))return null;if("wc_checkout"!==t&&"optin"!==t)return null;var y=[],_=function(e){i.includes(e)&&y.push(Object(r.createElement)("div",{className:p()("template-filter",{"active-filter":a==e}),onClick:function(){return o(e)},key:e,role:"button",tabIndex:"-1","aria-hidden":"true"},Object(r.createElement)("div",null,v[e]),!("wc_checkout"===f&&!j&&(!b||"step"!==O)&&m.includes("wc_checkout"))&&(d(u||"no")||["2","3"].includes(e)&&!0!==c||"popup"===e&&!0!==c)&&Object(r.createElement)(te.b,null)))};for(var h in v)_(h);return Object(r.createElement)("div",{className:"wffn_template_filer"},Object(r.createElement)("div",{className:"wffn_template_filter_container"},Object(r.createElement)("span",{className:"template-filter template-filter-head"},"wc_checkout"===t?Object(s.__)("Checkout Steps","funnel-builder"):"optin"===t?Object(s.__)("Optin Form","funnel-builder"):Object(s.__)("Type","funnel-builder"),":"),y))},ie=n(69),ue=function(e){var t=e.funnelId,n=e.activeGroup,l=e.activeSubFilter,c=e.activeStep,a=e.templateName,o=e.isTemplatePro,i=e.funnelGroup,u=e.hasPRO,f=e.importType,b=Object(ee.b)("ck").isProTemplatesLocked,p=Object(ee.b)("ul").isProTemplatesLocked,m=Object(ee.b)(),d=m.isProTemplatesLocked,O=m.isBasic,j=u("status");if("upsell"===n&&!0!==j)return p&&Object(r.createElement)(ie.a,{dismissable:!1,proLink:Object(C.S)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0});switch(t&&"step"===f?n:c){case"upsell":if(!0!==j)return p&&Object(r.createElement)(ie.a,{dismissable:!1,proLink:Object(C.S)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0});break;case"wc_checkout":if((b||t&&"step"===f||!i.includes("wc_checkout"))&&(u(o)||["2","3"].includes(l)&&!0!==j))return Object(r.createElement)(ie.a,{dismissable:!1,module:(null==i?void 0:i.includes("wc_checkout"))&&"ck",proLink:Object(C.S)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0});break;case"optin":if(u(o||"no")||"popup"===l&&!0!==j){Object(s.__)("This template is part of the pro plan. To access it, consider upgrading.","funnel-builder");return"popup"==l&&Object(r.createElement)(r.Fragment,null,Object(s.__)("Optin ","funnel-builder"),Object(r.createElement)("span",{style:{textTransform:"capitalize"}},l),Object(s.__)(" is a pro feature. To access it, consider upgrading.","funnel-builder")),Object(r.createElement)(ie.a,{dismissable:!1,proLink:Object(C.S)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0})}}var v=t&&"step"===f?n:c;return"yes"===o&&("upsell"===v?p:["wc_checkout","wc_thankyou"].includes(v)||O?b:d)?Object(r.createElement)(ie.a,{dismissable:!1,module:(null==i?void 0:i.includes("wc_checkout"))&&("wc_checkout"===v||"wc_thankyou"===v)&&"ck",proLink:Object(C.S)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0}):""},se=n(16),fe=wffn_contacts_data&&wffn_contacts_data.header_data?wffn_contacts_data.header_data:{},be=fe.logo?fe.logo:"",pe=function(e){var t,n,c=e.viewport,a=e.setviewport,o=e.templateName,i=e.isTemplatePro,u=e.onRequestClose,f=e.importing,b=e.onClick,m=e.onClickPro,d=e.activeGroup,O=e.isCheckoutPro,j=e.isOptinPro,v=e.activeStep,y=e.funnelId,_=e.importType,h=(e.templateGroup,e.hasPRO),w=e.stepId,g=Object(ee.b)("ul").isProTemplatesLocked,E=Object(B.a)().getImportBtnLabel(),S=Object(l.isEmpty)(E)?"upsell"===d||y&&"step"===_?Object(s.__)("Import This Template","funnel-builder"):Object(s.__)("Import This Funnel","funnel-builder"):E,k=h("status");return Object(r.createElement)("div",{className:"wffn_template_preview_header"},Object(r.createElement)("div",{className:"bwf_template_logo_title"},Object(r.createElement)("img",{src:be,alt:Object(s.__)("Funnel Builder for WordPress","funnel-builder"),width:148,className:"bwf-brand-logo-only"}),Object(r.createElement)("div",{className:"bwf_preview_template_title"},o)),Object(r.createElement)("div",{className:"wffn_template_viewport"},Object(r.createElement)("div",{className:"wffn_template_viewport_inner"},Object(r.createElement)("span",{className:p()("wffn_viewport_icons",{active:"desktop"===c}),onClick:function(){return a("desktop")},title:Object(s.__)("Desktop Viewport","funnel-builder")},Object(r.createElement)(V.a,{icon:"desktop",color:"desktop"===c&&"#fff"})),Object(r.createElement)("span",{className:p()("wffn_viewport_icons",{active:"tablet"===c}),onClick:function(){return a("tablet")},title:Object(s.__)("Tablet Viewport","funnel-builder")},Object(r.createElement)(V.a,{icon:"tablet",color:"tablet"===c&&"#fff"})),Object(r.createElement)("span",{className:p()("wffn_viewport_icons",{active:"mobile"===c}),onClick:function(){return a("mobile")},title:Object(s.__)("Mobile Viewport","funnel-builder")},Object(r.createElement)(V.a,{icon:"mobile",color:"mobile"===c&&"#fff"})))),Object(r.createElement)("div",{className:"bwf-t-center"},(t=(!!w||"funnel"===_)&&y&&f&&f.group===d,n=f&&f.group===d,Object(r.createElement)(r.Fragment,null,h(i||"no")||!0!==k&&(O||j||"upsell"===v)||"upsell"===v&&g?Object(r.createElement)(se.a,{disabled:n,isBusy:t,isPrimary:!0,onClick:m},S):Object(r.createElement)(se.a,{isPrimary:!0,onClick:b,disabled:n,isBusy:t},S)))),Object(r.createElement)("div",{className:"wffn_template_preview_close"},Object(r.createElement)(se.a,{onClick:u},Object(r.createElement)(V.a,{icon:"close",size:"24"}))))};function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function je(e){var t=e.isOpen,n=e.onRequestClose,c=e.activeGroup,a=e.activeEditor,i=e.importing,u=e.filters,b=e.hasPRO,d=e.previewData,O=e.isTemplateLoading,j=e.activeFilter,v=e.setPreviewErr,y=e.parentRoute,_=e.funnelId,h=e.importType,w=e.updateQueryString,g=e.previewCustomizeEnabled,E=e.urlDependency,S=e.stepId,k=e.onImport,P=e.children,I=Object(f.i)(),x=Object(ee.b)().isBasic,A=Object(ee.b)("ck").isProFeatureLocked,U=d(),z=U.thumbnails,M=U.activeTemplate,q=U.previews,W=void 0===q?[]:q,$=Object(o.useParams)().step,V=D.a.getFunnel(),J=!(!M||!M.type)&&M.type,Y=E?$:null==M?void 0:M.type;Object(r.useEffect)((function(){_||(U.success?v(!1):!1===U.success&&v(!0))}),[U.success]),Object(r.useEffect)((function(){if(J)if("wc_checkout"===J||"optin"===J){var e=!(!M||!M.filters)&&M.filters[0];I.group&&("wc_checkout"===J&&["1","2","3"].includes(I.group)||"optin"===J&&["inline","popup"].includes(I.group))?Q(I.group):(Q(e),w({group:e}))}else I.group&&(delete I.group,w({},Object(f.g)(),I))}),[I.group,J]),Object(r.useEffect)((function(){!Object(l.isEmpty)(null==V?void 0:V.steps)&&"funnel"===h&&_&&w({},"/funnels/".concat(V.id))}),[V]);var H=Object(R.a)(),Q=H.setActiveSubFilter,K=H.setCurrentTemplate,Z=(0,Object(B.a)().getCurrentTemplate)(),X=de(Object(r.useState)(!1),2),te=(X[0],X[1]),ne=b("status"),re=de(Object(r.useState)("desktop"),2),le=re[0],ce=re[1],ie=de(Object(r.useState)(!1),2),se=ie[0],fe=ie[1],be=de(Object(r.useState)(!1),2),Oe=be[0],je=be[1],ve=de(Object(r.useState)(!_),2),ye=ve[0],_e=ve[1],he=de(Object(r.useState)([]),2),we=he[0],ge=he[1];Object(r.useEffect)((function(){if(te(!1),M&&!we.includes(M.prevId)){var e=JSON.parse(JSON.stringify(we));e.push(M.prevId),ge(e)}}),[null==M?void 0:M.preview]),Object(r.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".wffn_template_page_options.active_preview");e&&e.scrollIntoView()}),100)}),[t]),Object(r.useEffect)((function(){if(z&&!_&&ye){var e=z||[],t=e.length,n=0;e.forEach((function(e){var r=new Image;r.src=e.thumbnail,r.onload=function(){++n===t&&_e(!1)}}))}}),[z]);var Ee,Se=("wc_checkout"===c||Y&&"wc_checkout"===Y)&&"1"!==j,ke=("optin"===c||Y&&"optin"===Y)&&"inline"!==j;return U?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:"bwf-admin-modal bwf-admin-modal-full-screen wffn_template_preview_modal",overlayClassName:"wffn_template_preview_overlay",isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"wffn_template_preview_wrap"},Object(r.createElement)(pe,(me(Ee={viewport:le,setviewport:ce,onRequestClose:n,importing:i,activeGroup:c,isCheckoutPro:Se,isOptinPro:ke,activeStep:Y,funnelId:_,importType:h,hasPRO:b,stepId:S,onClickPro:function(){!1===ne&&"yes"!==(null==M?void 0:M.tempPro)&&(Se||ke||"upsell"===Y)||"upsell"===Y&&x&&!A?je(!0):fe(!0)},onClick:function(){return k()}},"onRequestClose",(function(){_?w({},"".concat(y)):(w({},"".concat(y,"/").concat(c)),Q(!1)),n()})),me(Ee,"templateName",null==M?void 0:M.name),me(Ee,"isTemplatePro",null==M?void 0:M.tempPro),me(Ee,"templateGroup",null==M?void 0:M.funnelGroup),Ee)),Object(r.createElement)("div",{className:"wffn_template_preview_content"},Object(r.createElement)("div",{className:p()("wffn_template_preview_inner wffn_funnel_preview")},Object(r.createElement)(oe,{type:null==M?void 0:M.type,filters:u,FB_PRO_STATUS:ne,activeSubFilter:j,onClick:function(e){if(Q(e),w({group:e}),_){var t=Z.template,n=(t=void 0===t?{}:t).group_type;Object(l.isEmpty)(n)||K({id:n[e],template:{group_type:n},steps:z.map((function(e){return{type:e.step,slug:e.lug}}))})}},activeTemplateFilters:null==M?void 0:M.filters,hasPRO:b,tempPro:null==M?void 0:M.tempPro,templateType:null==M?void 0:M.type,funnelId:_,funnelGroup:null==M?void 0:M.funnelGroup,importType:h}),!O&&Object(r.createElement)(ue,{funnelId:_,activeGroup:c,activeSubFilter:j,activeStep:Y,hasPRO:b,templateName:null==M?void 0:M.name,isTemplatePro:null==M?void 0:M.pro,funnelGroup:null==M?void 0:M.funnelGroup,importType:h}),Object(l.isEmpty)(W)||Object(l.isEmpty)(we)?"":W.map((function(e,t){var n=(null==e?void 0:e.preview)||"",l=(null==e?void 0:e.id)||"";return Object(r.createElement)(T,{key:t,className:p()("wffn_template_preview_frame",le,{"hide-preview":e.id!==M.prevId}),title:"Funnel Template",src:we.includes(l)?n:"",onLoad:function(e){if(te(!0),e&&W[t+1]){var n=JSON.parse(JSON.stringify(we));n.push(W[t+1].id),ge(n)}}})}))),Object(r.createElement)(ae,{thumbnailsData:z,hasPlaceholder:ye,funnelId:_,previewCustomizeEnabled:g,importType:h,tempPro:null==M?void 0:M.tempPro,onClick:function(e){K({id:e.funnel,template:e,activeStep:e.step,steps:z.map((function(e){return{type:e.step,slug:e.lug}}))}),w({},_&&"step"===h?"".concat(y,"/templates/").concat(c,"/").concat(a,"/preview/").concat(e.funnel):_&&"funnel"===h?"".concat(y,"/templates/").concat(c,"/").concat(a,"/preview/").concat(e.funnel,"/").concat(e.step):"upsell"===c?"".concat(y,"/").concat(c,"/").concat(a,"/preview/").concat(e.funnel):"".concat(y,"/").concat(c,"/").concat(a,"/preview/").concat(e.funnel,"/").concat(e.step))},activeThumbnail:null==M?void 0:M.thumbnail}))),P,Object(r.createElement)(F,{isOpen:se,onRequestClose:function(){return fe(!1)},modalContent:Object(G.c)({templateName:null==M?void 0:M.name,FB_PRO_STATUS:ne,funnelId:_,activeGroup:c,activeStep:Y}),module:["wc_checkout","wc_thankyou"].includes(c)&&"ck",className:"bwf-templates-pro-modal",isTemplate:!0}),(b((null==M?void 0:M.pro)||"no")||"yes"!==(null==M?void 0:M.pro)&&(Se||ke||"upsell"===Y)||"upsell"===Y&&x&&!A)&&Object(r.createElement)(L.a,{className:"bwf-admin-modal-squeezy bwf-template-preview-pro-modal",modalTitle:Object(s.__)("Confirmation","funnel-builder"),content:Object(r.createElement)("div",{className:"bwf-template-preview-pro-modal__content"},Object(s.sprintf)(Object(s.__)("Yor are using %s Funnel. In this funnel there are some pro features like ","funnel-builder"),null==M?void 0:M.name),Object(r.createElement)("mark",null,Object(s.__)("Two Step","funnel-builder")),Object(s.__)(" and","funnel-builder")," ",Object(r.createElement)("mark",null,Object(s.__)("Three Step Checkout","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("One Click Upsell","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("Optin Popup","funnel-builder")),"."),confirmButton:Object(r.createElement)(N.a,{module:A&&["wc_checkout","wc_thankyou"].includes(c)&&"ck",isPrimary:!0}),cancelButtonText:Object(s.__)("Use Free Version","funnel-builder"),onConfirm:function(){"deactiavted"===ne?w({},"/settings/"):window.open(Object(C.S)([_?"Step":"Template",_?c:"upsell"===c?"upsell":Y,null==M?void 0:M.name,"Upgrade","Modal"]),"_blank")},onCancel:function(){S||"funnel"===h&&"wc_checkout"===h||k();var e="1";if("optin"===c||"optin"===Y?(Q("inline"),w({group:"inline"}),e="inline"):(Q("1"),w({group:"1"})),_){var t=Z.template,n=(t=void 0===t?{}:t).group_type;Object(l.isEmpty)(n)||K({id:n[e],template:{group_type:n},steps:z.map((function(e){return{type:e.step,slug:e.lug}}))})}},onRequestClose:function(){je(!1)},isOpen:Oe,confirmDescription:Object(s.__)("This action is irreversible","funnel-builder"),closeIcon:!0}))):""}n(365);var ve=n(30),ye=n(57),_e=n(377),he=n(34),we=n(378),ge=n(261),Ee=n(264),Se=(n(19),n(84));function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ie=function(e){var t,n,c,a=e.onCloseModal,o=e.onComplete,i=e.isWorking,u=e.activeTemplateGroup,f=(e.showCloneOption,e.templateGroup),b=e.className,d=e.children,O=Ne(Object(r.useState)(""),2),j=O[0],v=O[1],y=Ne(Object(r.useState)({}),2),_=(y[0],y[1]),h=Ne(Object(r.useState)(""),2),w=h[0],g=h[1],E=Ne(Object(r.useState)(null),2),S=E[0],k=E[1],T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $((function(r){return n?(delete r[t],r):Te(Te({},r),{},Pe({},e,t))}))},P=Ne(Object(r.useState)((function(){return u})),2),N=P[0],I=(P[1],D.a.getSteps()),x=Object(B.a)(),A=x.getScratchTemplateType,F=x.getCurrentTemplate,L=x.getImportOffer,R=A(),G=F(),U=L();Object(r.useEffect)((function(){_({})}),[]);var z=function(){var e;v(""),o("upsell"===N?W:"new"===R?{title:w}:{title:"".concat(null==S||null===(e=S.step)||void 0===e?void 0:e.name," Copy")},N,!(!S||!S.copyFrom)&&S.step)},M=(Object(r.useMemo)((function(){return Object.keys(f).map((function(e){return{key:e,label:f[e]}}))}),[f]),function(){return I.filter((function(e){return"wc_upsells"===e.type})).map((function(e){var t;return{key:e.id,label:Object(he.decodeEntities)(null==e||null===(t=e._data)||void 0===t?void 0:t.title)}}))}),q=Ne(Object(r.useState)(Te({type:0===M().length?"new":"existing"},!Object(l.isNull)(U)&&{title:U.parent_title,insert_into:U.parent_id})),2),W=q[0],$=q[1],V=function(){if("upsell"===N){var e,t,n,r,c,a;if("new"===R)return"existing"===W.type?Object(l.isEmpty)(null===(n=W.offer_title)||void 0===n?void 0:n.trim())||!W.insert_into:Object(l.isEmpty)(null===(e=W.title)||void 0===e?void 0:e.trim())||Object(l.isEmpty)(null===(t=W.offer_title)||void 0===t?void 0:t.trim());if("existing"===R)return"existing"===W.type?!W.insert_into||Object(l.isNull)(S):Object(l.isEmpty)(null===(r=W.title)||void 0===r?void 0:r.trim())||Object(l.isNull)(S);if(!G.isBuildFromScratch)return Object(l.isEmpty)(null===(c=W.title)||void 0===c?void 0:c.trim())||Object(l.isEmpty)(null===(a=W.offer_title)||void 0===a?void 0:a.trim())}return"new"!==R&&G.isBuildFromScratch?"existing"===R?Object(l.isNull)(S):void 0:Object(l.isEmpty)(w.trim())},J=("new"===W.type||!Object(l.isNull)(U))&&Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Type here…","funnel-builder"),label:Object(s.__)("Upsell Name","funnel-builder"),value:null!==(t=Object(he.decodeEntities)(W.title))&&void 0!==t?t:"",onChange:function(e){return T("title",e)},disabled:!Object(l.isNull)(U)||i});return Object(r.useEffect)((function(){1===M().length&&T("insert_into",M()[0].key)}),[]),Object(r.createElement)(m.Modal,{title:Object(r.createElement)(r.Fragment,null,Object(s.__)("Add New Step ","funnel-builder"),Object(r.createElement)("span",{className:"bwf-list-count bwf-ml-4"},"(",C.rb[N],")")),className:p()("bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal bwf-modal-overflow-visible",b),onRequestClose:function(){return a()},isDismissible:!0,shouldCloseOnClickOutside:!i,overlayClassName:"bwf-create-funnel-modal__overlay"},d,j&&Object(r.createElement)(Se.a,{errorMessage:j}),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"!==e.key||V()||i||z()},role:"main"},"upsell"===N&&"new"!==W.type&&!Object(l.isNull)(U)&&J,"existing"===R&&G.isBuildFromScratch&&Object(r.createElement)(we.a,{step:{type:"upsell"===N?"offer":N,title:f[N],is_substep:"upsell"===N},onStepSelected:function(e){k(e)},key:"bwf-clone-step-".concat(N)}),"upsell"===N?Object(r.createElement)(r.Fragment,null,!Object(l.isEmpty)(M())&&Object(l.isNull)(U)&&Object(r.createElement)("div",null,Object(r.createElement)("label",null,Object(s.__)("Add Offers","funnel-builder")),Object(r.createElement)(Ee.a,{options:[{value:"existing",label:Object(s.__)("To Existing Upsell","funnel-builder"),disabled:0===M().length},{value:"new",label:Object(s.__)("To New Upsell","funnel-builder")}],className:"",selected:null!==(n=W.type)&&void 0!==n?n:0===M().length?"new":"existing",onChange:function(e){T("inherit_from","",!0),T("type",e)}})),"existing"===W.type&&Object(l.isNull)(U)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ge.b,{label:Object(s.__)("Select Upsell","funnel-builder"),options:M(),selected:1===M().length?M()[0].key:W.insert_into,onChange:function(e){T("insert_into",e)}})),"new"===W.type&&Object(l.isNull)(U)&&J,"new"===R&&Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Type here…","funnel-builder"),label:Object(s.__)("Offer Name","funnel-builder"),value:null!==(c=W.offer_title)&&void 0!==c?c:"",onChange:function(e){return T("offer_title",e)},disabled:i})):"new"===R?Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Enter step name","funnel-builder"),label:Object(s.__)("Step Name","funnel-builder"),value:null!=w?w:"",onChange:function(e){return g(e)},disabled:i}):null,Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(se.a,{onClick:a,className:"bwf-modal-cancel-btn"},Object(s.__)("Cancel","funnel-builder")),Object(r.createElement)(se.a,{isPrimary:!0,disabled:V()||i,isBusy:i,onClick:z,className:V()?"bwf-no-ripple":"",name:"add-funnel"},Object(s.__)("Add","funnel-builder")))))},xe=n(55);n(458);function Ae(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Le=function(e){var t=e.showTemplatesNav,n=void 0===t||t,l=e.showEditors,c=void 0===l||l;return Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-templates-placeholder"},Object(r.createElement)("div",{className:"bwf-template-list-header"},n&&Object(r.createElement)(xe.a,{gap:6,justify:"flex-start",className:"bwf-templ-nav-placeholder"},Ae(Array(5)).map((function(e,t){return Object(r.createElement)(xe.c,{key:"bwf-templ-placeholder-nav-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder nav-placeholder-item"}))}))),c&&Object(r.createElement)(xe.a,{gap:6,justify:"flex-start"},Ae(Array(5)).map((function(e,t){return Object(r.createElement)(xe.c,{key:"bwf-templ-placeholder-editor-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder editor-placeholder-item"}))})))),Object(r.createElement)("div",{id:"wffn_tab_container"},Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:"wffn_pick_template"},Ae(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_temp_card",key:"bwf-templ-placeholder-".concat(t)},Object(r.createElement)("div",{className:"wffn_template_sec"},Object(r.createElement)("div",{className:"wffn_template_sec_design wffn-is-placeholder"})))})))))))},Be=n(49),Re=(n(35),function(e){var t=e.editorList,n=e.activeEditor,l=e.onChange;return Object(r.createElement)(xe.a,{justify:"flex-start",gap:6,className:"wffn_template_editor_selector"},Object(r.createElement)(Ee.a,{options:Object.keys(t).map((function(e){return{value:e,label:t[e]}})),selected:n,onChange:function(e){return l(e)}}))}),De=n(25),Ge=n(63),Ue=n(22),ze=["edit"];function Me(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var qe=function(e){var t=e.funnelId,n=e.disabledNavs,l=e.activeTemplateGroup,c=e.templateGroup,a=e.onClick,i=e.urlDependency,u=Object(ee.b)("ul").isProTemplatesLocked,s=Object(o.useParams)().importType,b={},m=window.location&&window.location.search?Object(De.parse)(window.location.search.substring(1)):{},d=(m.edit,Me(m,ze));for(var O in c)"funnel"===s&&"upsell"===O||(b[O]={},b[O].name=c[O],b[O].isExclusive="upsell"===O,b[O].link=decodeURIComponent(Object(f.f)({},"/templates/".concat(O),d)));return Object(r.createElement)("div",{className:"bwf-tempaltes-nav"},Object(r.createElement)(xe.a,{justify:"flex-start",gap:3,className:"bwf-flex-wrap"},Object.keys(b).map((function(e,c){var o=e===l,s=n.find((function(t){return t.key===e}));return Object(r.createElement)(xe.c,{key:"bwf-temp-nav-".concat(c)},0===t&&i?Object(r.createElement)(Ue.a,{className:p()("bwf-template-nav-item",{"is-selected":m.path==="/templates/"+e||"/templates"===m.path&&"funnel"===e}),href:b[e].link},b[e].name,b[e].isExclusive&&Object(r.createElement)(te.b,null)):Object(r.createElement)(Ge.a,{toolTipText:s&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},s.message),visible:s||!1,size:366},Object(r.createElement)("div",{className:p()("bwf-template-nav-item",{"is-selected":o&&!s},{"is-disabled":s}),onClick:function(){s||a(e)},tabIndex:"-1",role:"button"},Object(r.createElement)("div",null,b[e].name),u&&b[e].isExclusive&&Object(r.createElement)(te.b,null))))}))))},We=n(53);function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Je(e){var t=e.importBuildFromScratch,n=e.activeTemplateGroup,l=e.templateID,c=void 0===l?"scratch":l,a=e.importType,o=e.stepId,i=e.importing,u=e.allowNew,f=void 0===u||u,b=$e(Object(r.useState)({status:!1}),2),p=b[0],m=b[1],d=Object(ee.b)(),O=d.isProFeatureLocked,j=d.isBasicFeatureLocked||"upsell"===n&&O,v=Object(ee.b)("ul").isProFeatureLocked,y=Object(R.a)().setScratchTemplateType;Object(r.useEffect)((function(){return function(){y("new")}}),[]);var _;return Object(r.createElement)("div",{className:"wffn_template_sec wffn_build_from_scratch"},Object(r.createElement)("div",{className:"wffn_template_sec_design"},Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_add_tmp_se"},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)(V.a,{icon:"add-page",width:"48",height:"48",color:"#82838E"})),Object(r.createElement)("div",{className:"wffn_import_template wffn_p"},Object(r.createElement)(r.Fragment,null,(_="step"===a?Object(s.__)("You can quickly add step","funnel-builder"):Object(s.__)("You can design the funnel from blank","funnel-builder"),Object(r.createElement)("div",{className:"wffn_import_description"},_)),f?Object(r.createElement)(se.a,{isGray:!0,onClick:function(e){v&&"upsell"===n?m(He):(y("new"),t(c,e))},isBusy:!!o&&i},Object(s.__)("Start from Blank","funnel-builder"),v&&"upsell"===n&&Object(r.createElement)(te.b,null)):null,"step"===a?null:Object(r.createElement)(se.a,{isGray:!0,onClick:function(e){y("json"),t(c,e)}},Object(s.__)("Import","funnel-builder")),o?null:Object(r.createElement)(se.a,{isGray:!0,onClick:function(e){j?m(Ye):(y("existing"),t(c,e))}},Object(s.__)("Clone","funnel-builder"),j&&Object(r.createElement)(te.b,null)))))))),Object(r.createElement)(We.a,{isOpen:!!p.status,onRequestClose:function(){return m({status:!1})},modalContent:p,type:2}))}var Ye={status:!0,feature:Object(s.__)("Cloning","funnel-builder"),proLink:Object(C.S)(["Template","Clone","Upgrade","Modal"])},He={status:!0,feature:Object(s.__)("One Click Upsell Offer","funnel-builder"),proLink:Object(C.S)(["Upsell","Templates","Upgrade","Modal"])},Qe=n(366),Ke=(n(59),{optin:"Lead Generation",sales:"Sales",wc_checkout:"Checkout"}),Ze=function(e){var t=e.templateFilterCheck,n=e.templateCards,c=e.showBuildFromScratch,a=e.importBuildFromScratch,o=e.activeTemplateGroup,i=e.activeEditor,u=e.onPreview,f=e.funnelId,b=e.importType,d=e.stepId,O=e.importing,j=Object(ee.b)("ul").isProTemplatesLocked,v=Object(ee.b)(),y=v.isProTemplatesLocked,_=v.isLite,h=v.isBasic,w=Object(ee.b)("ck").isProTemplatesLocked,g=Object(R.a)().setScratchTemplateType,E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scratch",t=arguments.length>1?arguments[1]:void 0;return Object(r.createElement)(Je,{importBuildFromScratch:a,getRibbonName:G.b,activeTemplateGroup:o,templateID:e,importType:b,stepId:d,importing:O,allowNew:t})},S=[],k=function(e){var l=n[e];if(t(l,!!l.group_type&&Object.keys(l.group_type)[0])&&(!(l.build_from_scratch&&d&&l.hasOwnProperty("allow_new"))||l.allow_new)&&(c||!l.build_from_scratch)){var a,i=((null==l?void 0:l.group)||[]).includes("upsell")||"upsell"===o,f=(null==l||null===(a=l.group)||void 0===a?void 0:a.some((function(e){return"wc_checkout"===e||"wc_thankyou"===e})))||["wc_checkout","wc_thankyou"].includes(o);S.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:e},l.build_from_scratch?E(l.slug?l.slug:e,l.allow_new):Object(r.createElement)("div",{className:"wffn_template_sec"},"yes"===l.pro&&(i?j:f||h?w:y)&&Object(r.createElement)(te.b,null),Object(r.createElement)("div",{className:l.is_pro?"wffn_template_sec_design_pro":"wffn_template_sec_design"},l.thumbnail&&Object(r.createElement)($,{src:l.thumbnail,className:"wffn_img_temp",alt:"thumbnail"}),Object(r.createElement)("div",{className:"wffn_temp_overlay"})),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn_pro_template"},Object(r.createElement)(m.Button,{onClick:function(t){g("new"),u(t,e,l)},isPrimary:!0,role:"button",tabIndex:"-1","aria-hidden":"true",className:"bwf-template-action-btn bwf-no-ripple"},Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"wffn_template_meta_left"},Object(r.createElement)("div",{className:"wffn_template_sec_meta_name"},l.name),"funnel"===o&&Object(r.createElement)("div",{className:"wffn_template_sec_meta_group"},Ke[null==l?void 0:l.group[0]]&&Ke[null==l?void 0:l.group[0]]," ","Funnel")),Object(r.createElement)("div",{className:"wffn_template_meta_right"},l.steps?Object(r.createElement)(r.Fragment,null,Object(s.sprintf)(Object(s._n)("%s step","%s steps",l.steps.length,"funel-builder"),l.steps.length)):null)))))}};for(var T in n)k(T);return"wp_editor"===i&&Object(l.isEmpty)(S)&&S.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:"custom-wp_editor"},E("upsell"===o?"wfocu-custom-empty":"wp_editor_1"))),"wp_editor"===i&&S.push(Object(r.createElement)(Qe.a,{key:"other-builder-notice",type:o})),!_||h||"wp_editor"===i&&!f&&"funnel"!==b||S.push(Object(r.createElement)("div",{className:"bwf-templates-upgrde-pro-notice",key:"upgrade-pro-notice"},Object(r.createElement)("div",null,Object(r.createElement)("strong",null,Object(s.__)("Browse our library of ready-made templates","funnel-builder")),Object(r.createElement)("br",null),Object(r.createElement)("span",null,Object(s.__)("Never start from scratch again! While Funnelkit Lite lets you create any template, save even more time with Funnelkit Pro. Upgrade now to access all templates.","funnel-builder"))),Object(r.createElement)(N.a,{isPrimary:!0,size:"md",proLink:Object(C.S)(["Template","Cards","Notice"])}))),Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:p()("wffn_pick_template",{wffn_fullscreen_pich_templates:!!f})},S))};function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){tt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lt=function(e){var t=e.activeFilter,n=e.defaultBuilder,c=e.filters,a=e.editors,i=e.templates,b=e.isTemplateLoading,m=e.activeBuilder,d=e.activeTemplateGroup,O=e.templateGroup,j=void 0===O?[]:O,v=e.funnelId,y=void 0===v?0:v,_=e.showDefaultEditorNotice,h=void 0===_||_,w=e.templateCards,g=void 0===w?{}:w,E=e.previewData,S=e.onImportComplete,k=e.templateFilterCheck,T=e.showTemplatesNav,P=e.parentRoute,N=e.disabledNavs,I=void 0===N?[]:N,x=e.showBuildFromScratch,A=void 0===x||x,U=e.funnelTitleModalData,z=void 0===U?{}:U,M=e.scratchConfirmModalData,q=e.importApiPrefix,W=void 0===q?"funnels":q,$=e.templateListNotice,V=e.showImportNotice,J=void 0===V?"":V,Y=e.urlDependency,H=void 0===Y||Y,Q=e.showEditors,K=void 0===Q||Q,Z=e.previewCustomizeEnabled,X=void 0!==Z&&Z,te=e.listRef,ne=e.stepId,re=Object(f.i)(),le=Object(ee.b)("ck").isProTemplatesLocked,ce=Object(ee.b)("ul").isProTemplatesLocked,ae=Object(ee.b)(),oe=ae.isProTemplatesLocked,ie=ae.isBasic,ue=Object(Be.a)().updateStatus,se=y,fe=Object(ee.c)(),be=fe.showSnackbar,pe=fe.hideSnackbar,me=nt(Object(r.useState)(!1),2),de=me[0],Oe=me[1],he=nt(Object(r.useState)(!1),2),we=he[0],ge=he[1],Ee=function(){if(H)return f.k.apply(void 0,arguments)},Se=Object(ye.a)().unsetTabData,ke=(0,D.a.getFunnel)(),Te=Object(R.a)(),Pe=Te.fetch,Ne=Te.makeDefaultEditor,Ce=Te.setActiveBuilder,xe=Te.setActiveGroup,Ae=Te.setCurrentTemplate,Fe=Te.setActiveStep,De=Te.setActiveSubFilter,Ge=Te.setImportOffer,Ue=(0,Object(B.a)().getCurrentTemplate)(),ze=Object(o.useParams)(),Me=ze.builder,We=ze.templateId,$e=ze.filter,Ve=void 0===$e?d:$e,Je=Object(f.i)().importType,Ye=ne?"step":"wc_checkout"===Je?"funnel":Je,He=Object(ve.a)().setIsFunnelEmpty;Object(r.useEffect)((function(){return Object(l.isEmpty)(g)&&Pe(),function(){Ge(null),pe()}}),[]),Object(r.useEffect)((function(){var e,t;Me&&!b&&We&&g[We]&&Ae({id:We,template:g[We],steps:g[We].steps,activeStep:null!==(e=g[We])&&void 0!==e&&e.steps?null===(t=g[We])||void 0===t?void 0:t.steps[0].type:""})}),[Me,We,b]),Object(C.l)(Object(s.__)("Import Funnel","funnel-builder"));var Qe=nt(Object(r.useState)(!1),2),Ke=Qe[0],Xe=Qe[1],tt=nt(Object(r.useState)(!1),2),rt=tt[0],lt=tt[1],ct=nt(Object(r.useState)(!1),2),at=ct[0],ot=ct[1],it=nt(Object(r.useState)({}),2),ut=it[0],st=it[1],ft=nt(Object(r.useState)(!1),2),bt=ft[0],pt=ft[1];Object(r.useEffect)((function(){})),Object(r.useEffect)((function(){Ce(m)}),[d,c,a]),Object(r.useEffect)((function(){return We&&Ae({id:We,template:{}}),function(){Ce("")}}),[]),Object(r.useEffect)((function(){we&&(Ee({},"/templates"),be(Object(s.__)("Template not found for requested URL. Please select from the list.")))}),[we]);var mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"activate",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.noop;try{st((function(e){return et(et({},e),{},{disableConfirm:!0,cancelButtonText:"",shouldCloseOnClickOutside:!1})})),u()({path:Object(C.x)("/funnels/activate-plugin/?slug=".concat(e,"&init=").concat(t,"&status=").concat(n)),method:"POST"}).then((function(e){!0===e.success&&(r(),st({status:!1}))})).catch((function(e){st({status:!0,error:e.message||e.msg}),console.log("catch",e)}))}catch(e){console.log(e)}},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.builders_options,l=e.builders_texts,c=n,a=null==Ue?void 0:Ue.isBuildFromScratch,o=!0,i=null==Ue?void 0:Ue.id;if("wp_editor"!==m&&"customizer"!==m&&void 0!==c&&c.status&&"activated"!==c.status||o){var u=l,f=u.text;"gutenberg"===m&&a&&(f=Object(s.__)("To have the best experience in Block editor, FunnelKit has built a minimalist block plugin ","funnel-builder")+"<strong>SlingBlocks.</strong>");var b={key:"pluginActivation",status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:f}}),closeIcon:!0};b.confirmButtonText=u.ButtonText,"yes"===u.show_cancel_btn&&(b.cancelButtonText="Cancel"),"gutenberg"===m&&a&&(b.cancelButtonText=Object(s.__)("No thanks","funnel-builder")),st(et(et({},b),{},{onConfirm:function(){if(u.builder_link&&"install"===c.status&&"yes"===u.noInstall)return window.open(u.builder_link,"_blank"),void st({status:!1});"yes"!==u.show_cancel_btn&&st({status:!1}),mt(c.slug,c.init,c.status,i,t)},onCancel:function(){Oe(!1),lt(!1),st({status:!1})}})),lt(!1)}else t()},Ot=function e(n){var r=Object(G.a)(m,d),l="/funnel-offer/".concat(ne,'/design?design={"builder":"').concat(r,'","template":"').concat(n,'"}'),c="/funnel-".concat(d,"/").concat(ne,'/design?design={"builder":"').concat(r,'","template":"').concat(n,'"}');u()({path:Object(C.x)("".concat("upsell"===d?l:c)),method:"POST"}).then((function(r){if(r.success)S();else{if(!r.hasOwnProperty("builders_options"))throw st({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:r.message||r.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:r.error}),lt(!1),r;dt(r,(function(){lt({id:n,group:d,filter:t}),e(n)}))}})).catch((function(e){throw e}))},jt=function e(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];var a=r[0],o=r[1],i=r[2],f=r[3],b=i||d;lt({id:a,group:b,filter:t});var p=!0;try{if(ne)return void Ot(a);var O=Object.create({});O.template=a,O.builder=Object(G.a)(m,b);var j=Object.create({});if(se&&"step"===Ye){var v=f&&f.hasOwnProperty("id")?f.id:0;f?(O.title=o.title,O.inherit_from=v,O.type=b,delete O.template,delete O.builder):(O.funnel_id=se,O.type=b,O.title=o.title,O.template_type=t),"upsell"===b&&("new"===o.type?(delete O.inherit_from,f&&(O.offer_inherit=v),Object(l.size)(o.offer_title)?O.offer_title=o.offer_title:O.offer_title=f.name):Object(l.size)(o.offer_title)?O.title=o.offer_title:O.title="".concat(f.name," Copy")),O.insert_into=o.insert_into}else{var y=E().thumbnails;y.forEach((function(e){j["upsell"===e.step?"wc_upsells":e.step]=e.slug})),O.steps=JSON.stringify(j),se&&"funnel"===Ye?O.funnel_id=Number(se):O.title=o.title}var _=0!==se&&"step"===Ye?"upsell"===b&&"existing"===o.type?Object(C.x)("/funnel-upsell/".concat(o.insert_into,"/offers")):Object(C.x)("/funnels/".concat(se,"/steps")):Object(C.x)("/".concat(W,"/import_template"));u()({method:"POST",data:O,path:_}).then((function(t){if(t.hasOwnProperty("builders_options"))dt(t,(function(){e.apply(void 0,r)}));else if(t.status&&!0===t.status){if(t.setup&&ue(t.setup),p=!1,se||(t.funnel_id?vt(t.funnel_id):st({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:Object(s.__)("Unable to import template. Contact Support.","funnel-builder")})),0!==se&&S){if("funnel"===Ye&&He(!1),"upsell"===b&&o.hasOwnProperty("insert_into")&&""!==o.insert_into&&ke.steps){var n=ke.steps.findIndex((function(e){return parseInt(e.id)===parseInt(o.insert_into)})),l=ke.steps[n].substeps;l.hasOwnProperty("offer")&&l.offer.length>0&&l.offer.map((function(e){Se("offer",e.id,"products",e.id)}))}S(t)}}else st({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:t.message||t.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:t.error}),Oe(!1)})).catch((function(e){st({status:!0,error:e.message||e.msg}),Oe(!1)})).finally((function(){p&&lt(!1)}))}catch(e){console.log(e),lt(!1)}},vt=function e(t){try{u()({path:Object(C.x)("/funnels/".concat(t,"/import-status"))}).then((function(n){!0===n.status?S?(Xe(!1),S({funnel_id:t})):(delete re.group,Ee({},"/funnels/".concat(t),re)):!1===n.status&&setTimeout((function(){e(t)}),2e3)}))}catch(e){}},yt=function(e){var t=!1,n="upsell"===Ve?!ce:["wc_checkout","wc_thankyou"].includes(Ve)||ie?!le:!oe;return"yes"===e&&!0!==n?t=!0:"status"===e&&(t=n),t},_t=yt("status"),ht=function(){return Object(r.createElement)(L.a,{className:"bwf-admin-modal-squeezy "+ut.className,isLoading:ut.loading,successMessage:ut.success,errorMessage:ut.error,isOpen:ut.status,autoHide:8e3,content:ut.content,confirmText:ut.confirmText,confirmButtonText:ut.confirmButtonText,cancelButtonText:ut.cancelButtonText,onConfirm:ut.onConfirm,onCancel:ut.onCancel,modalTitle:ut.modalTitle,disableConfirm:ut.disableConfirm,closeIcon:ut.closeIcon,onRequestClose:function(){return st({status:!1})}})},wt=function(){return Object(r.createElement)(r.Fragment,null,!de&&ht(),Object(r.createElement)(F,{isOpen:at,onRequestClose:function(){return ot(!1)},modalContent:Object(G.d)({FB_PRO_STATUS:_t,funnelId:y,importType:Ye,activeTemplateGroup:d}),className:"bwf-templates-pro-modal"}),de&&(0===y?Object(r.createElement)(_e.b,{onCloseModal:function(){Oe(!1)},isWorking:rt,onComplete:function(e,n,r){Ue.isBuildFromScratch?function e(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];var a=r[0],o=r[1],i=r[2];if(lt({id:"scratch",group:d,filter:t}),i)u()({path:Object(C.x)("".concat("wc_checkout"===d?"/store-checkout":"/funnels","/duplicate/").concat(i)),method:"wc_checkout"===d?"POST":"GET"}).then((function(t){t.status&&(Object(C.ib)()||t.funnel_id)?S?S({funnel_id:t.funnel_id}):Ee({},"/funnels/".concat(t.funnel_id),re):t.builders_options?dt(t,(function(){e.apply(void 0,r)})):st({status:!0,modalTitle:Object(s.__)("Clone Funnel"),error:t.message||t.msg||Object(s.__)("Unable to clone funnel. Contact Support.","funnel-builder"),content:t.error}),lt(!1)})).catch((function(e){lt(!1),console.log(e)}));else{var b={funnel_name:a,template:"scratch"};i&&(b.inherit_from=i),o&&!Object(l.isEmpty)(o)&&(b.funnel_steps=o.join(",")),b.builder=m,"wc_checkout"===d&&(b.default_step="yes",b.template=null==Ue?void 0:Ue.id);try{u()({method:"POST",data:b,path:Object(C.x)("/".concat(W))}).then((function(t){if(t.builders_options)dt(t,(function(){e.apply(void 0,r)}));else if(!0===t.status&&t.hasOwnProperty("funnel")){var n=t.funnel.id;t.setup&&ue(t.setup),"funnels"===W?(delete re.group,Object(f.k)({},"/funnels/".concat(n),re)):S({funnel_id:t.funnel.id})}else!1===t.status&&(st({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:t.message||t.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:t.error}),Oe(!1),lt(!1))}))}catch(e){console.log(e),lt(!1)}}}(e,n,r):jt(Ue.id,{title:e})},modalTitle:z.title,className:p()({"bwf-visibility-hidden":"pluginActivation"===ut.key})},ht()):Object(r.createElement)(Ie,{onCloseModal:function(){Oe(!1)},isWorking:rt,activeTemplateGroup:d,templateGroup:j,showCloneOption:Ue.isBuildFromScratch,onComplete:function(e,t,n){var r=Ue.id;if(t!==d){var c=Object(l.get)(i,"".concat(t,".").concat(m)),a=c&&Object.keys(c).find((function(e){var t;return!0===(null===(t=c[e])||void 0===t?void 0:t.build_from_scratch)}));a&&(r=c[a].slug)}jt(r,e,t,n)},className:p()({"bwf-visibility-hidden":"pluginActivation"===ut.key})},ht())))};return Object(r.createElement)(r.Fragment,null,b?Object(r.createElement)(Le,{showEditors:K,showTemplatesNav:K}):Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-template-list-header"},T&&Object(r.createElement)(qe,{funnelId:y,disabledNavs:I,activeTemplateGroup:d,templateGroup:j,onClick:function(e){return xe(e)},urlDependency:H}),K&&Object(r.createElement)(Re,{editorList:a[d],onChange:function(e){Ce(e),h&&Object(G.f)({showSnackbar:be,hideSnackbar:pe,builder:e,defaultBuilder:n,onConfirm:function(){!function(e){if(n!==e){pt(!0);try{u()({path:Object(C.x)('/funnels/general-settings/update-default-builder?settings={"default_selected_builder": "'.concat(e,'"}')),method:"POST"}).then((function(t){t.success?Ne(e):console.log("Something went wrong with saving default editor")})).catch((function(e){console.log(e)})).finally((function(){pt(!1)}))}catch(e){console.log(e),pt(!1)}}}(e)},defaultEditorLoading:bt})},activeEditor:m})),Object(r.createElement)("div",{id:"wffn_design_container",ref:te},Object(r.createElement)("div",{className:"wffn_tab_container"},$,Object(r.createElement)(Ze,{templateFilterCheck:k,templateCards:g,showBuildFromScratch:A,importBuildFromScratch:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(M&&!r)st(et(et({},M),{},{onConfirm:function(){return e(t,n,!0)},onCancel:function(){return st({status:!1})}}));else{if(rt)return!1;"upsell"===d&&yt()?ot(!0):(Ae({id:t,isBuildFromScratch:!0,template:{name:j[d]}}),J?J():ne||"funnel"===Ye&&y?jt(t):Oe(!0),se||He(!0))}},activeTemplateGroup:d,activeEditor:m,onPreview:function(e,t,n){e.preventDefault(),n.group_type?De(Object.keys(n.group_type)[0]):0!==y&&"funnel"!==Ye||"optin"!==d&&"wc_checkout"!==d||De("optin"===d?"inline":"wc_checkout"===d&&"1"),Ae({id:t,template:n,steps:n.steps,activeStep:n.steps?n.steps[0].type:""}),Xe(!0),"upsell"===d&&0===y?Ee({},"".concat(P,"/").concat(d,"/").concat(m,"/preview/").concat(t)):0===y?Ee({},"".concat(P,"/").concat(d,"/").concat(m,"/preview/").concat(t,"/").concat(n.steps[0].type)):n.steps?("funnel"===Ye&&Ee({},"".concat(P,"/templates/").concat(d,"/").concat(m,"/preview/").concat(t,"/").concat(n.steps[0].type)),Fe(n.steps[0].type)):Ee({},"".concat(P,"/templates/").concat(d,"/").concat(m,"/preview/").concat(t))},funnelId:y,importType:Ye,stepId:ne,importing:rt})))),(Me||Ke)&&Object(r.createElement)(je,{isOpen:Ke||Me,onRequestClose:function(){Xe(!1),De(!1),re.group&&(delete re.group,Ee({},Object(f.g)(),re))},onImport:function(){J?J():ne||"funnel"===Ye&&y?jt(Ue.id):Oe(!0)},templateGroup:j,activeGroup:d,templateID:Ue.id,template:Ue.template,activeEditor:m,importing:rt,templateList:i,filters:c,templates:i,hasPRO:yt,previewData:E,isTemplateLoading:b,activeFilter:t,setPreviewErr:ge,parentRoute:P,funnelId:y,importType:Ye,updateQueryString:Ee,previewCustomizeEnabled:X,urlDependency:H,stepId:ne},wt()),!(Me||Ke)&&wt())};lt.prototype={filters:a.a.object.isRequired,templates:a.a.object.isRequired,editors:a.a.object.isRequired,defaultBuilder:a.a.object.isRequired,templateLoading:a.a.func.isRequired,activeTemplateGroup:a.a.string.isRequired,templateGroup:a.a.object.isRequired};var ct=lt},365:function(e,t,n){},366:function(e,t,n){"use strict";var r=n(0),l=n(7),c=n.n(l),a=(n(459),n(1));t.a=function(e){var t=e.className,n=e.type;return Object(r.createElement)("div",{className:c()("bwf-other-builder-notice",t)},Object(r.createElement)("h3",null,Object(a.__)("How it works","funnel-builder")),Object(r.createElement)("span",null,Object(a.__)("This builder is designed to work with shortcodes. To use the shortcodes in our builder, simply follow these steps:","funnel-builder")),Object(r.createElement)("ol",null,"landing"!==n&&Object(r.createElement)("li",null,Object(a.__)("Copy the shortcodes from the source document or website.","funnel-builder")),Object(r.createElement)("li",null,Object(a.__)("Open the WordPress editor.","funnel-builder")),Object(r.createElement)("li",null,Object(a.__)("Launch your page builder.","funnel-builder")),"landing"!==n&&Object(r.createElement)("li",null,Object(a.__)("Find the area on the page where you want to use the shortcode, and paste it in.","funnel-builder"))))}},377:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n(0),l=n(2),c=n(9),a=n(1),o=n(10),i=n.n(o),u=n(16),s=n(275),f=n(3),b=n(339),p=n(21),m=n(84),d=n(271),O=n(23),j=n(285),v=n(7),y=n.n(v),_=n(406),h=n(26),w=n(14),g=n(441);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t,n,r,l,c,a){try{var o=e[c](a),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,l)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.b=function(e){var t,n=e.onCloseModal,o=e.onComplete,i=e.isWorking,b=e.className,v=e.children,E=(Object(w.i)(),P(Object(r.useState)(""),2)),S=E[0],k=E[1],N=P(Object(r.useState)(""),2),I=N[0],x=N[1],A=P(Object(r.useState)([]),2),F=A[0],L=A[1],B=P(Object(r.useState)(!1),2),R=B[0],D=B[1],G=Object(O.b)("ul").isProFeatureLocked,U=Object(h.a)().setGlobalCheckout,z=(Object(g.a)().fetch,Object(d.a)()),M=z.getCurrentTemplate,q=z.getScratchTemplateType,W=z.getActiveGroup,$=z.getActiveSubFilter,V=M(),J=q(),Y=W(),H=$();if(V.isBuildFromScratch&&"json"===J)return Object(r.createElement)(_.a,{modalTitle:Object(f.ib)()?Object(a.__)("Import Store Checkout","funnel-builder"):Object(a.__)("Import Funnel","funnel-builder"),apiPath:Object(f.ib)()?"/store-checkout/import":"/funnels/import",onRequestClose:function(){return n()},onSuccess:function(e){var t=Array.isArray(e.funnel_id)?e.funnel_id[0]:e.funnel_id;t&&(Object(f.ib)()?(U({funnel_id:t,funnel_status:!1}),Object(w.k)({},"/store-checkout",{})):Object(w.k)({},"/funnels/".concat(t),{}))}});var Q=Object(r.createElement)(r.Fragment,null,"wc_checkout"===Y?Object(a.__)("Create Store Checkout","funnel-builder"):Object(a.__)("Create Funnel","funnel-builder")),K=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!==J&&V.isBuildFromScratch||I){e.next=3;break}return k("Funnel title is required field"),e.abrupt("return");case 3:k(""),o&&o(I,F,V.isBuildFromScratch&&"new"!==J&&R);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,l){var c=e.apply(t,n);function a(e){T(c,r,l,a,o,"next",e)}function o(e){T(c,r,l,a,o,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),Z=function(){return V.isBuildFromScratch?"new"===J?Object(l.isEmpty)(I.trim())||!1===Y&&Object(l.isEmpty)(F):Object(l.isEmpty)(R):Object(l.isEmpty)(I.trim())},X=function(e){return"wc_checkout"===e.type&&H&&j.e.hasOwnProperty(e.type)&&j.e[e.type].hasOwnProperty(H)?" - ".concat(j.e[e.type][H]," ")+Object(a.__)("Step","funnel-builder"):""};return Object(r.createElement)(c.Modal,{title:Q,className:y()("bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal",b),onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!i,overlayClassName:"bwf-create-funnel-modal__overlay"},v,S&&Object(r.createElement)(m.a,{errorMessage:S}),(!V.isBuildFromScratch||"existing"!==J)&&Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&(Z()||K())}},Object(r.createElement)(c.TextControl,{placeholder:Object(a.__)("Enter funnel name","funnel-builder"),label:Object(a.__)("Name","funnel-builder"),value:I,onChange:function(e){return x(e)},disabled:i})),V.isBuildFromScratch&&("new"===J?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-create-new-funnel__add-step-wrap"},"wc_checkout"===Y?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(a.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-mb-12 bwf-flex bwf--g8"},Object(r.createElement)(p.c,{content:Object(a.__)("Checkout","funnel-builder"),border:!0}),Object(r.createElement)(p.c,{content:Object(a.__)("Thank You","funnel-builder"),border:!0})),Object(r.createElement)("span",{className:"help-text"},Object(a.__)("Note: You have to custom build and design the above steps","funnel-builder"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,Object(a.__)("Add following steps to funnel","funnel-builder")),Object(r.createElement)(s.a,{value:F,onChange:function(e){L(e)},options:Object.keys(f.rb).map((function(e){return{value:e,label:f.rb[e],isPro:G&&"upsell"===e}})),disabled:i})))):Object(r.createElement)(C,{onSelect:function(e){return D(e)},activeGroup:Y})),!V.isBuildFromScratch&&V.steps&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(a.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-mb-12 bwf-flex-wrap"},null===(t=V.steps)||void 0===t?void 0:t.filter((function(e){return!G||"upsell"!==e.type})).map((function(e,t){return Object(r.createElement)(p.c,{content:f.rb[e.type]+X(e),border:!0,key:"step-type-".concat(t)})})))),Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.a,{onClick:n,className:"bwf-modal-cancel-btn",disabled:i},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(u.a,{isPrimary:!0,disabled:Z()||i,isBusy:i,onClick:K,className:Z()?"bwf-no-ripple":"",name:"add-funnel"},Object(a.__)("Done","funnel-builder"))))};var C=function(e){var t=e.onSelect,n=e.activeGroup,c=e.label,o=void 0===c?Object(a.__)("Funnel","funnel-builder"):c,u=P(Object(r.useState)([]),2),s=u[0],m=u[1],d=P(Object(r.useState)(""),2),O=d[0],j=d[1],v=P(Object(r.useState)({}),2),y=v[0],_=v[1],h=P(Object(r.useState)([]),2),w=h[0],g=h[1],E=P(Object(r.useState)(!0),2),k=E[0],T=E[1],N=function(e){T(!0),i()({path:Object(f.x)("/funnels".concat(Object(f.w)(S({},e))))}).then((function(e){e.status?(m(e.items),Object(l.size)(e.items)?g(e.items.map((function(e){return{key:e.id,value:e.title}}))):g([{key:"no-data",value:"No Data Found"}])):e.items||g([]),T(!1)})).catch((function(e){console.log(e),T(!1)}))};Object(r.useEffect)((function(){Object(l.isEmpty)(O)?N({limit:10,need_steps_data:!0}):N({limit:10,s:O,need_steps_data:!0})}),[O]);var C=Object(r.useMemo)((function(){var e;if(Object(l.isEmpty)(s))return[];var t=null===(e=s.find((function(e){return e.id===y.key})))||void 0===e?void 0:e.steps_data,r=[];return t.forEach((function(e){r.push(e.type),"wc_checkout"===e.type&&e.substeps&&!Object(l.isEmpty)(e.substeps)&&r.push("wc_order_bump")})),r.filter((function(e){return"wc_checkout"!==n||["wc_checkout","wc_thankyou","wc_upsells"].includes(e)})).filter((function(e,t,n){return n.indexOf(e)===t}))}),[y]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,o),Object(r.createElement)(b.a,{onSearch:function(e){return j(e)},isLoading:k,items:w,multiGroup:!1,error:"",onItemClick:function(e){t(e.key),_(e)},blurText:y.value,placeholder:Object(a.__)("Search…","funnel-builder"),helpText:Object(a.__)("Search and select a Funnel to import steps","funnel-builder")}),!Object(l.isEmpty)(y)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(a.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf-flex-wrap bwf--g8 bwf-mb-16"},Object(l.isEmpty)(C)?Object(r.createElement)(p.c,{content:Object(a.__)("No Steps","funnel-builder"),border:!0}):C.map((function(e,t){return Object(r.createElement)(p.c,{content:Object(f.qb)(e),border:!0,key:"steps-".concat(t)})})))))}},378:function(e,t,n){"use strict";var r=n(0),l=n(2),c=n(9),a=n(1),o=n(10),i=n.n(o),u=n(34),s=n(3),f=n(339);function b(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t,n,r,l,c,a){try{var o=e[c](a),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,l)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=t.type,o=t.title,d=t.is_substep,O=void 0!==d&&d,j=e.onStepSelected,v=e.label,y=void 0===v?Object(a.__)(["offer","wc_order_bump"].includes(n)?"Select ".concat("offer"===n?"Offer":"Order Bump"):"Select Step","funnel-builder"):v,_=e.showCheckbox,h=void 0!==_&&_,w=m(Object(r.useState)(!h),2),g=w[0],E=(w[1],m(Object(r.useState)(!1),2)),S=E[0],k=E[1],T=m(Object(r.useState)(null),2),P=T[0],N=T[1],C=m(Object(r.useState)(!1),2),I=C[0],x=C[1],A=m(Object(r.useState)(null),2),F=A[0],L=A[1],B=Object(r.useRef)(new AbortController),R=I&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(c.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(a.__)("".concat(o," not found"),"funnel-builder")))),D=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,r=O&&!0===O?"&is_substep=true":"",e.next=5,i()({path:Object(s.x)("/funnels/step/search/?s=".concat(t,"&type=").concat(n).concat(r)),signal:B.current.signal});case 5:c=e.sent,N(c||null),Object(l.isEmpty)(c.steps)&&Object(l.isEmpty)(c.pages)?x(!0):x(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"AbortError"===e.t0.name?console.log(e.t0):(N(null),x(!0));case 13:k(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,l){var c=e.apply(t,n);function a(e){p(c,r,l,a,o,"next",e)}function o(e){p(c,r,l,a,o,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){return D(""),function(){B.current.abort()}}),[]);var G=Object(l.isObject)(P)&&!Object(l.isNull)(P)?b(Object(l.isEmpty)(P)?[]:P):Object(l.isArray)(P)&&!Object(l.isEmpty)(P)?P.map((function(e){return{key:e.id,value:e.name}})):[],U=F&&F.hasOwnProperty("name")?Object(u.decodeEntities)(F.name):"";return Object(r.createElement)(r.Fragment,null,g&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-label"},y),Object(r.createElement)(f.a,{onSearch:function(e){return D(e)},isLoading:S,items:G,multiGroup:Object(l.isObject)(P),error:R,onItemClick:function(e){L(e),j({step:e,copyFrom:g})},blurText:U,placeholder:Object(a.__)("Search…","funnel-builder"),stepTitle:o,helpText:["offer","wc_order_bump"].includes(n)?null:Object(a.__)("Search and select a page from a Funnel, Post or a Page.","funnel-builder")})))}},384:function(e,t,n){},385:function(e,t,n){"use strict";var r=n(0),l=n(1),c=(n(419),n(9)),a=n(5),o=n(23);t.a=function(e){var t=e.onFileSelected,n=(e.htmlData,e.filetypeArray),i=(e.btnLabel,e.dropZoneContent),u=Object(o.c)().showSnackbar,s=function(e){e&&e[0]&&"type"in e[0]?n.includes(e[0].type)?t(e[0]):u(Object(l.__)("Uploaded file is not valid.","funnel-builder")):u(Object(l.__)("Uploaded file not found","funnel-builder"))},f=n&&n[0]?n[0]:"application/json";return Object(r.createElement)("div",{className:"bwf-component-import-wrapper"},Object(r.createElement)(c.DropZoneProvider,null,Object(r.createElement)("div",{className:"bwf-import-area-wrapper"},Object(r.createElement)(c.FormFileUpload,{isSecondary:!0,accept:f,onChange:function(e){return s(e.target.files)},render:function(e){var t=e.openFileDialog;return Object(r.createElement)("div",{className:"bwf-import-area",onClick:t},i||null,"application/json"===f&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.a,{icon:"import-file",size:56}),Object(r.createElement)("div",{className:"bwf-drop-import-heading"},Object(l.__)("Drag or browse a JSON file to import funnel","funnel-builder")),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(l.__)("(Maximum file size allowed 10 MB)","funnel-builder"))))}}),Object(r.createElement)(c.DropZone,{onFilesDrop:s,onHTMLDrop:s,onDrop:s}))))}},406:function(e,t,n){"use strict";var r=n(0),l=n(2),c=n(1),a=n(10),o=n.n(a),i=n(9),u=n(3),s=n(385),f=(n(453),n(5)),b=(n(454),n(7)),p=n.n(b),m=n(19),d=function(e){var t=e.value,n=void 0===t?0:t,l=e.content,c=void 0===l?"":l,a=e.isLoading,o=e.error;return Object(r.createElement)("div",{className:"bwf-circular-progress-bar"},Object(r.createElement)("div",{className:p()("bwf-circular-progress-bar__circle",{"is-loading":a,"is-complete":!a&&!o,"is-danger":o}),role:"progressbar","aria-valuenow":n,"aria-valuemin":"0","aria-valuemax":"100",style:{"--value":n,"--pg-bar-color":o?m.DANGER_COLOR:m.BLUE_BASE}}),Object(r.createElement)("div",{className:"bwf-circular-progress-bar__content"},o?Object(r.createElement)(f.a,{icon:"cross",size:"72",color:"#ffffff"}):a?c:Object(r.createElement)(f.a,{icon:"tick",size:"72",color:"#ffffff"})))},O=n(23),j=n(49),v=n(264),y=n(377),_=n(26),h=n(16);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,c=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){o=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(o)throw l}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=Object(r.createElement)(r.Fragment,null,Object(c.__)("It seems there was an issue during the import. Please contact","funnel-builder"),Object(r.createElement)("a",{href:"https://funnelkit.com/support/?utm_source=WordPress&utm_medium=Funnel+Import+Failed&utm_campaign=FB+Lite+Plugin",target:"_blank",rel:"noopener noreferrer"},Object(c.__)(" support ","funnel-builder")),Object(c.__)("with JSON for a review.","funnle-builder"));t.a=function(e){e.isOpen;var t=e.onRequestClose,n=e.onSuccess,a=void 0===n?l.noop:n,b=e.modalTitle,p=e.apiPath,m=e.showSuccessState,w=void 0===m||m,E=e.extraParams,k=void 0===E?{}:E,P=e.enableClone,N=void 0!==P&&P,C=Object(O.b)().isBasicFeatureLocked,I=S(Object(r.useState)({status:!1,modalTitle:b||Object(c.__)("Import Funnel","funnel-builder")}),2),x=I[0],A=I[1],F=S(Object(r.useState)(null),2),L=F[0],B=F[1],R=S(Object(r.useState)("json"),2),D=R[0],G=R[1],U=S(Object(r.useState)(0),2),z=U[0],M=U[1],q=S(Object(r.useState)(!1),2),W=q[0],$=q[1],V=Object(O.c)().showSnackbar,J=Object(j.a)().updateStatus,Y=Object(_.a)().setGlobalCheckout,H=Object(r.useRef)(new AbortController),Q=function(e){if(a(e),e.setup&&J(e.setup),Object(u.ib)()&&z&&Y({funnel_id:e.funnel_id,funnel_name:"",funnel_status:!1}),"json"===D){if(!w)return void t(!0);A(g(g({},x),{},{status:!0,title:Object(c.__)("Sucessfully Imported","funnel-builder"),loading:!1,message:Object(c.__)("Successfully Imported and added in your FunnelKit.","funnel-builder")}))}else t(!0)},K=function(){A(g(g({},x),{},{status:!1,loading:!1,error:!0,title:Object(c.__)("Importing Failed","funnel-builder"),message:T})),B(null)};Object(r.useEffect)((function(){L&&function(){A(g(g({},x),{},{title:Object(c.__)("Please wait…","funnel-builder"),loading:!0,message:Object(r.createElement)(r.Fragment,null,Object(c.__)("Please wait! We are importing ")+(null==L?void 0:L.name)+Object(c.__)(" data."))}));try{var e=new FormData;if(e.append("files",L),!Object(l.isEmpty)(k))for(var t=0,n=Object.entries(k);t<n.length;t++){var a=S(n[t],2),i=a[0],s=a[1];e.append(i,s)}o()({method:"POST",body:e,path:Object(u.x)(p||"/funnels/import"),signal:H.current.signal}).then((function(e){1==e.status?Q(e):K()})).catch((function(){K()}))}catch(e){console.log(e),K()}}()}),[L]);var Z=function(){var e;null===(e=H.current)||void 0===e||e.abort(),t(x.status)},X=function(){switch(D){case"json":return!L;case"existing":return!z;default:return!1}};return Object(r.createElement)(i.Modal,{className:"bwf-admin-modal bwf-admin-modal-small bwf-import-funnel-modal",title:x.modalTitle,onRequestClose:Z,shouldCloseOnClickOutside:!W},x.title&&Object(r.createElement)("div",{className:"bwf-import-modal-content"},Object(r.createElement)(d,{value:"100",content:Object(r.createElement)(f.a,{icon:"import-file",size:"56"}),isLoading:x.loading,error:x.error}),Object(r.createElement)("div",{className:"bwf-drop-import-content bwf-mt-10"},x.message),(!0===x.status||x.error)&&Object(r.createElement)(h.a,{isPrimary:!0,onClick:Z,className:"bwf-import-modal-close-btn"},Object(c.__)("Close","funnel-builder"))),!x.title&&Object(r.createElement)(r.Fragment,null,N&&Object(r.createElement)(v.a,{options:[{value:"json",label:Object(c.__)("Upload JSON","funnel-builder")},{value:"existing",label:Object(c.__)("Clone Funnel","funnel-builder"),isPro:C}],selected:D,onChange:function(e){G(e)},className:""}),"json"===D?Object(r.createElement)(s.a,{onFileSelected:function(e){return B(e)},filetypeArray:["application/json"]}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(y.a,{activeGroup:Object(u.ib)()?"wc_checkout":"",onSelect:function(e){return M(e)}}),Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(h.a,{onClick:t,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(h.a,{isPrimary:!0,disabled:X()||W,isBusy:W,onClick:function(){$(!0),o()({path:Object(u.x)("".concat(Object(u.ib)()?"/store-checkout":"/funnels","/duplicate/").concat(z)),method:Object(u.ib)()?"POST":"GET"}).then((function(e){e.status?Q(e):V(e.msg),$(!1)})).catch((function(e){V(e.msg),$(!1)}))},className:X()?"bwf-no-ripple":"",name:"add-funnel"},Object(c.__)("Done","funnel-builder"))))))}},419:function(e,t,n){},441:function(e,t,n){"use strict";var r=n(2),l=n(20),c=n(3),a=n(118),o=n(10),i=n.n(o),u=["state","fetch","setStateProp"],s=["s","page","filter","path"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}t.a=function(){var e=Object(l.a)("funnelList"),t=e.state,n=e.fetch,o=e.setStateProp,f=m(e,u),p=(0,Object(a.a)().getFunnels)();return b(b({},f),{},{fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.query,a=e.offset,i=e.limit,u=e.search,f=e.getDraft,p=void 0!==f&&f,d=e.getSteps,O=void 0!==d&&d,j=e.categories,v=e.signal,y=(l.s,l.page,l.filter,l.path,m(l,s)),_=b(b(b(b({offset:a,limit:i},u&&{s:u}),{},{filters:y},p&&{need_draft_count:""}),O&&{need_steps_data:!0}),!Object(r.isEmpty)(j)&&{categories:j.map((function(e){return e.id})).join(",")});u&&!Object(r.isEmpty)(u)?o("search",u):t.search&&o("search",null),o("analyticsLoading",!0),n("GET",Object(c.x)("/funnels"),_,{signal:v})},fetchAnalytics:function(e){o("analyticsLoading",!0);var t=Object(r.cloneDeep)(p),n=t.map((function(e){return e.id}));i()({path:Object(c.x)("/funnels/funnel-list/revenue"),method:"POST",data:{funnel_ids:n},signal:e}).then((function(e){e.status&&e.funnels&&(t=t.map((function(t){return e.funnels[parseInt(t.id)]?b(b({},t),{},{stats:e.funnels[t.id]}):t})),o("funnels",t),o("analyticsLoaded",!0)),o("analyticsLoading",!1)})).catch((function(e){"AbortError"!==e.name&&console.log(e),o("analyticsLoading",!1)}))},setFunnelListValues:function(e,t){o(e,t)},updateFunnelInList:function(e,t){var n=p.map((function(n){return n.id===e?b(b({},n),t):n}));o("funnels",n)},setSearchText:function(e){o("search",e)}})}},453:function(e,t,n){},454:function(e,t,n){},455:function(e,t,n){},456:function(e,t,n){},457:function(e,t,n){},458:function(e,t,n){},459:function(e,t,n){}}]);