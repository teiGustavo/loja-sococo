(window.webpackJsonp=window.webpackJsonp||[]).push([[38,23],{1154:function(e,t,n){},1187:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),o=n(25),a=n(124),l=n(2),u=n(14),i=n(115),s=n(3),f=n(146),b=n(9),p=n(10),d=n.n(p),m=n(54),O=n(74),j=n(65),h=n(26),v=n(32),g=n(30),y=n(55),w=n(5),_=n(406),E=n(420),k=n(34),S=n(23),C=n(80);function T(e,t,n,r,c,o,a){try{var l=e[o](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,c)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(r,c){var o=e.apply(t,n);function a(e){T(o,r,c,a,l,"next",e)}function l(e){T(o,r,c,a,l,"throw",e)}a(void 0)}))}}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw c}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e){var t=e.onBackupChange,n=A(Object(r.useState)(!0),2),o=n[0],a=n[1];Object(r.useEffect)((function(){t(!0)}),[]);var l=Object(r.createElement)(C.a,{type:"checkbox",checked:o,onChange:function(e){a(e),t(e)},label:Object(c.__)("Download this complete funnel before deletion.","funnel-builder"),className:"bwf-mt-16"});return Object(r.createElement)(r.Fragment,null,Object(c.__)("You are about to delete Store Checkout. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),l)},F=function(){var e,t=(v.a.getFunnel()||{}).id,n=A(Object(r.useState)(!1),2),o=n[0],a=n[1],l=A(Object(r.useState)({}),2),i=l[0],f=l[1],p=Object(h.a)(),C=p.removeStoreCheckout,T=p.setGlobalCheckout,x=A(Object(r.useState)(!1),2),N=x[0],L=x[1],F=Object(r.useRef)(),R=Object(S.c)().showSnackbar,B=Object(g.a)(),M=B.setFunnelStatus,z=B.setFunnelTitle,G=B.fetch,U=v.a.getFunnelTitle(),q=v.a.getFunnelStatus(),J=v.a.getFunnelLoading(),Y=A(Object(r.useState)({status:!1,isLoading:!1,title:U}),2),$=Y[0],K=Y[1],H=Object(r.useRef)(!0),V=function(e){K((function(t){return I(I({},t),e)}))},W={status:!0,modalTitle:Object(c.__)("Delete Store Checkout","funnel-builder"),buttonCancel:Object(c.__)("Cancel","funnel-builder"),buttonConfirm:Object(c.__)("Delete","funnel-builder"),confirmButtonClass:"is-danger",content:Object(r.createElement)(D,{onBackupChange:function(e){H.current=e}})},Q=function(){var e=P(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(n?Object(c.__)("Enabling Store Checkout","funnel-builder"):Object(c.__)("Disabling Store Checkout","funnel-builder")),e.next=4,d()({method:"POST",path:Object(s.x)("/store-checkout/".concat(t,"/status"))});case 4:(r=e.sent).status&&(M(t,n?"Published":"Draft"),R(n?Object(c.__)("Store Checkout Enabled","funnel-builder"):Object(c.__)("Store Checkout Disabled","funnel-builder")),T({funnel_status:r.result},!0)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("toggleStoreCheckoutStatus:",e.t0),R(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=P(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!H.current){e.next=7;break}return Z(Object(c.__)("We're downloading funnel before deletion","funnel-builder")),e.next=5,ee(t,U);case 5:e.next=8;break;case 7:f(I(I({},W),{},{disableConfirm:!0}));case 8:return e.next=10,d()({path:Object(s.x)("/store-checkout/".concat(t)),method:"DELETE"});case 10:if(1!=(n=e.sent).status){e.next=17;break}return R(Object(c.__)("Store checkout deleted successfully","funnel-builder")),f({}),C(),Object(u.k)({},"/store-checkout"),e.abrupt("return");case 17:throw Error(n.message);case 20:e.prev=20,e.t0=e.catch(0),f({status:!0,error:e.t0.messgae?e.t0.message:Object(c.__)("Something went wrong, Please check your response","funnel-builder")});case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.__)("We are exporting store checkout.","funnel-builder");f({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"},Object(c.__)("Please wait…","funnel-builder")),Object(r.createElement)("div",{className:"bwf-text-light"},e))})},ee=function(){var e=P(regeneratorRuntime.mark((function e(t,n){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(s.x)("/store-checkout/export/?ids=".concat(t)),e.prev=1,e.next=4,d()({path:r,method:"GET"});case 4:c=e.sent,Array.isArray(c)&&(o=c,a="FunnelKit-"+n,l=void 0,u=void 0,i=void 0,b=void 0,p=void 0,m=void 0,l="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(o)),u=document.createElement("a"),i=new Date,b=i.getMonth()+1,p=i.getDate(),m=(b<10?"0":"")+b+"-"+(p<10?"0":"")+p+"-"+i.getFullYear(),u.setAttribute("href",l),u.setAttribute("download",a+"-"+m+".json"),document.body.appendChild(u),u.click(),u.remove(),f({status:!1}),f({status:!1})),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}var o,a,l,u,i,b,p,m}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),te=function(){var e=P(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:0,n=r.length>1&&void 0!==r[1]?r[1]:"wf-funnel",Z(),e.prev=3,e.next=6,ee(t,n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),f({status:!0,error:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}();return Object(s.sb)(F,(function(){return L(!1)})),Object(r.createElement)("div",{className:"bwf-flex bwf--g12"},Object(r.createElement)(b.Button,{onClick:function(){Object(u.k)({importType:"step"})},className:"bwf-no-ripple",isPrimary:!0},Object(c.__)("Add New Step","funnel-builder")),Object(r.createElement)(O.a,{menuPosition:"bottom right",classes:"bwf-standard-ellipsis-menu bwf-store-checkout-actions",dropdownClasses:"bwf-standard-ellipsis-dropdown",buttonLabel:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",null,Object(c.__)("Actions","funnel-builder")),N?Object(r.createElement)(w.a,{icon:"angle-up",size:16}):Object(r.createElement)(w.a,{icon:"angle-down",size:16})),disabled:J,renderContent:function(e){var n=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(j.a,{isClickable:!0,onInvoke:function(){V({status:!0}),n()}},Object(c.__)("Rename","funnel-builder")),Object(r.createElement)(j.a,{isClickable:!0,onInvoke:function(){Q("Draft"===q?1:0),n()}},"Draft"===q?Object(c.__)("Enable","funnel-builder"):Object(c.__)("Disable","funnel-builder")),Object(r.createElement)(j.a,{isClickable:!0,onInvoke:function(){f({status:!0,modalTitle:Object(c.__)("Import"),buttonCancel:Object(c.__)("Cancel","funnel-builder"),buttonConfirm:Object(c.__)("Confirm","funnel-builder"),content:Object(r.createElement)(r.Fragment,null,Object(c.__)("The funnel already has a few steps. Importing another funnel would remove the current steps. ","funnel-builder"),Object(r.createElement)("strong",null," ",Object(c.__)("Tip: ","funnel-builder")),Object(c.__)("You can export the current funnel before importing","funnel-builder")),onConfirm:function(){return a(!0)}}),n()}},Object(r.createElement)(y.a,{justify:"flex-start"},Object(r.createElement)(y.c,null,Object(c.__)("Import","funnel-builder")))),Object(r.createElement)(j.a,{isClickable:!0,onInvoke:function(){te(t,U),n()}},Object(r.createElement)(y.a,{justify:"flex-start"},Object(r.createElement)(y.c,null,Object(c.__)("Export","funnel-builder")))),Object(r.createElement)(j.a,{isClickable:!0,onInvoke:function(){f(I(I({},W),{},{onConfirm:function(){return X()}})),n()},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(y.a,{justify:"flex-start"},Object(r.createElement)(y.c,null,Object(c.__)("Delete","funnel-builder")))))}}),Object(r.createElement)(m.a,{confirmText:i.confirmText,confirmButtonText:i.buttonConfirm,confirmButtonClass:i.confirmButtonClass,cancelButtonText:i.buttonCancel,onConfirm:i.onConfirm,isLoading:i.loading,successMessage:i.success,errorMessage:i.error,content:i.content,onRequestClose:function(){return f({status:!1})},modalTitle:i.modalTitle,disableConfirm:i.disableConfirm,isOpen:i.status,closeIcon:!0}),o&&Object(r.createElement)(_.a,{modalTitle:Object(c.__)("Import Store Checkout","funnel-builder"),apiPath:"/store-checkout/import?override_existing=yes",onRequestClose:function(){return a(!1)},onSuccess:function(e){e.funnel_id&&(T({funnel_id:e.funnel_id,funnel_status:!1}),G(parseInt(e.funnel_id)))},extraParams:{id:t},showSuccessState:!0,enableClone:!0}),$.status&&Object(r.createElement)(E.a,{renameTitle:"Rename",title:null!==(e=Object(k.decodeEntities)(U))&&void 0!==e?e:"",onclose:function(){return K({status:!1,isLoading:!1})},updateTitle:function(e){(e=e.trim())!==U?(V({isLoading:!0}),d()({path:Object(s.x)("/funnels/".concat(t)),method:"POST",data:{title:e,description:"",funnel_id:t}}).then((function(t){t.id&&(z(e),V({status:!1,isLoading:!1}),R(Object(c.__)("Changes Saved","funnel-builder")))})).catch((function(e){console.log(e),z(U),R("Title Updation Failed")}))):V({status:!1,isLoading:!1})},isLoading:$.isLoading}))},R=n(21),B=n(64),M=n(95),z=n(41),G=n(100),U=n(99),q=(n(169),n(40)),J=n(102),Y=n(92),$=n(91),K=n(86),H=n(96),V=n(164),W=n(133),Q=["edit"];function X(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw c}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var te=function(e,t,n){return decodeURIComponent(Object(u.f)(e,t,n))},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=(arguments.length>4&&void 0!==arguments[4]||Object(r.createElement)(r.Fragment,null),arguments.length>5?arguments[5]:void 0),b=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},p=Object(S.b)(),d=p.isProFeatureLocked,m=v.a.getFunnelViewLink(),O=v.a.getFunnelStatus(),j=Object(g.a)(),h=j.fetch,y=v.a.getSteps().length,w=Object(r.useState)(!1),_=Z(w,2),E=_[0],k=(_[1],Object(B.a)()),C=k.setActiveMultiple,T=k.setPageHeader,P=k.setL2NavType,x=k.setL2Nav,I=k.setPageBackLink,N=k.setL2NavAlign,A=k.setIsLoading,L=k.setStepHeader,D=k.setIsStepNavActive,ee=k.resetHeaderMenu,ne=k.setL2PostTitle,re=Object(Y.a)(),ce=re.setOrderLoading,oe=re.setOrders,ae=Object($.a)(),le=ae.setLeadLoading,ue=ae.setLeads,ie=Object(J.a)(),se=ie.getTotalContacts,fe=ie.getMessage,be=Object(H.a)(),pe=be.setReferrerLoading,de=Object(W.a)(),me=de.resetAnalyticsData,Oe=Object(G.a)(),je=Oe.getTotalOrders,he=Object(U.a)(),ve=he.getTotalLeads,ge=je(),ye=ve(),we=se(),_e=(fe(),Object(z.a)().getPreviousStep()),Ee=Object(q.a)(),ke=Ee.setStepData,Se=Ee.setSteps,Ce=Ee.setStepLoading,Te=Ee.setPreviousStep,Pe=Ee.setVariant,xe=Object(M.a)(),Ie=xe.control_title,Ne=xe.isLoading,Ae=Object(K.a)(),Le=Ae.setExperimentData,De=Ae.setExperimentStatus,Fe=Object(r.useRef)();Object(r.useEffect)((function(){A(E)}),[E]),Object(r.useEffect)((function(){return function(){A(!1),ee()}}),[]),Object(r.useEffect)((function(){ke({}),Se({})}),[]);var Re=location&&location.search?Object(o.parse)(location.search.substring(1)):{},Be=(Re.edit,X(Re,Q)),Me=Re.path.split("/")&&Re.path.split("/").length>=3?Re.path.split("/")[2].toLowerCase():"steps",ze=Object(a.useParams)(),Ge=ze.stepType,Ue=ze.stepId,qe=(ze.subAction,ze.tabId,ze.tab),Je=Object(f.a)(),Ye=Je.getContact,$e=Ye(),Ke=null!=$e?$e:{},He=Ke.user_info,Ve=void 0===He?{}:He,We=(null==Ve?void 0:Ve.first_name)&&"".concat(null==Ve?void 0:Ve.first_name," ").concat(null==Ve?void 0:Ve.last_name),Qe=function(e){return Object(r.createElement)(i.a,{modalTitle:e,disabled:["publish","edit","preview","stepType","draftContainer","abContainer","draft","action"]})},Xe={funnels:{name:Object(c.__)("Funnels","funnel-builder"),link:te({},"/store-checkout/analytics/funnels",Be)},referrers:{name:Object(c.__)("Referrers","funnel-builder"),link:te({},"/store-checkout/analytics/referrers",Be),modalContent:{title:Object(c.__)("Referrers","funnel-builder"),content:{}}},"utm-campaigns":{name:Object(c.__)("UTM Campaigns","funnel-builder"),link:te({},"/store-checkout/analytics/utm-campaigns",Be)}};Object(r.useEffect)((function(){return function(){ce(!0),oe([],1,25),le(!0),ue([],1,25),pe(!0),me(n)}}),[]),Object(r.useEffect)((function(){Le({}),!Fe.current||"experiments"!==Fe.current&&"innerStep"!==Fe.current?isNaN(Number(Ue))?"experiments"===Me&&(Fe.current="experiments"):Fe.current="innerStep":(h(parseInt(n)),Fe.current=!1)}),[Me,Ue]);var Ze=function(){return"orders"===_e?"/store-checkout/orders":"leads"===_e?"/store-checkout/orders/optins":"/store-checkout/orders"},et=[{label:Object(c.__)("List Mode","funnel-builder"),id:"list",link:"/store-checkout"},{label:Object(c.__)("Canvas Mode","funnel-builder"),id:"canvas",link:"/store-checkout/canvas"}];return Object(r.useEffect)((function(){if(isNaN(Number(Ue))&&ee(),qe||(x({}),D(!0),C({leftNav:"store-checkout"})),n)if(T(""),P("menu"),N("left"),!Ge&&["steps","canvas"].includes(Me)){ne(""),Pe("");var e=Re.path.includes("canvas")?"canvas":"list";Ce(!0),Te(""),De(null),L(Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-mb-16"},Object(r.createElement)("div",{className:"bwf-flex bwf--g12"},Object(r.createElement)("div",{className:"bwf-header-title"},Object(c.__)("Steps","funnel-builder")),Object(r.createElement)(V.a,{list:et,active:e})),"steps"===Me&&Object(r.createElement)(F,null)))}else"experiments"===Me?(ne(null),Pe(""),I("admin.php?page=bwf&path=/store-checkout/steps"),L(Qe(Ie?Ie+Object(c.__)(" - A/B Test","funnel-builder"):Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf-mb-12"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-28 bwf-w-300"}))))):"analytics"===Me?(C({leftNav:"store-checkout",rightNav:Ue||"funnels"}),x(Xe),P("menu"),N("left"),L(Object(r.createElement)("div",{className:"bwf-header-title bwf-mb-16"},Object(c.__)("Analytics","funnel-builder"),d&&Object(r.createElement)(R.b,null)))):"settings"===Me?L(Object(r.createElement)("div",{className:"bwf-header-title bwf-mb-16"},Object(c.__)("Settings","funnel-builder"))):"contacts"===Me?void 0!==Ue&&("orders"===_e&&ce(!1),"leads"===_e&&le(!1),I(Object(s.P)({},"".concat(Ze()))),L(Object(r.createElement)(i.a,{modalTitle:Object(c.__)("Details","funnel-builder"),isBack:!0,disabled:["publish","edit","preview","stepType","draftContainer","abContainer","draft","action"]}))):"contact-export"===Me?(I(Object(s.P)({},"/store-checkout/contacts")),L(Qe("Export Contacts"))):["orders"].includes(Me)&&(L(Object(r.createElement)("div",{className:"bwf-header-title bwf-mb-16"},Object(c.__)("Conversions","funnel-builder")," ",!isNaN(ge)&&!Object(l.isEmpty)(null==ge?void 0:ge.toString())&&Object(r.createElement)("span",{className:"bwf-list-count"},"(",ge," ",Object(c.sprintf)(Object(c.__)("Order%s","funnel-builder"),Number(ge)>1?"s":""),")"))),C({leftNav:"store-checkout",rightNav:Ue||"orders"}),x({}),P("menu"),N("left"));else T(t)}),[e,t,m,u,y,null==b?void 0:b.abTestTitle,n,E,O,Ge,We,Ue,Ne,qe,ge,ye,we]),!0},re=(n(1154),n(81)),ce=n(435),oe=function(e){var t=e.onRequestClose,n=Object(re.a)(),c=n.setActiveGroup,o=n.setActiveSubFilter,a=n.setActiveBuilder,i=Object(h.a)().setGlobalCheckout,s=Object(g.a)().setFunnelTitle,f=Object(u.i)();Object(r.useEffect)((function(){c("wc_checkout")}),[]),Object(r.useEffect)((function(){Object(l.isEmpty)(f.importType)&&Object(u.k)({importType:"wc_checkout"})}),[f.importType]);return Object(r.createElement)(ce.default,{isStoreCheckout:!0,onImportComplete:function(e){s(""),t(),i({funnel_id:e.funnel_id,funnel_name:"",funnel_status:!1}),a(""),c("funnel"),o(!1),Object(u.k)({},"/store-checkout",{})},showTemplatesNav:!1})},ae=n(24),le=n(60),ue=n(320),ie=n(168),se=n(161),fe=n(167),be=n(84),pe=n(29),de=n(165),me=n(38),Oe=n(916),je=n(260),he=n(170),ve=n(7),ge=n.n(ve),ye=n(19),we=n(16);function _e(e,t,n,r,c,o,a){try{var l=e[o](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,c)}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw c}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Se=function(e){var t=e.funnelId,n=e.funnelStatus,o=Object(S.c)().showSnackbar,a=Object(g.a)().setFunnelStatus,l=Object(h.a)().setGlobalCheckout,u=Ee(Object(r.useState)(!1),2),i=u[0],f=u[1],b=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=["Draft",!1].includes(n)?"Published":"Draft",e.prev=1,f(!0),e.next=5,d()({method:"POST",path:Object(s.x)("/store-checkout/".concat(t,"/status"))});case 5:(u=e.sent).status&&(o("Published"===r?Object(c.__)("Store Checkout Enabled","funnel-builder"):Object(c.__)("Store Checkout Disabled","funnel-builder")),a(t,r),l({funnel_status:u.result},!0)),f(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("toggleStoreCheckoutStatus:",e.t0),o(e.t0.message),f(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var o=e.apply(t,n);function a(e){_e(o,r,c,a,l,"next",e)}function l(e){_e(o,r,c,a,l,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(we.a,{className:"is-danger",onClick:b,isBusy:i,isSmall:!0},Object(c.__)("Enable Store Checkout","funnel-builder"))},Ce=n(35),Te=function(e){var t=e.className,n=Object(Ce.a)().isStatusLoading,o=(0,Object(ae.a)().getGlobalCheckout)()||{},a=o.funnel_id,l=o.funnel_status;return n||["Published",!0].includes(l)?null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)(b.Notice,{status:"info",isDismissible:!1,className:ge()("bwf-component-notice bwf-store-checkout-header-error-notice",t)},Object(r.createElement)("div",{className:"bwf-flex bwf--g4 bwf--align-start"},Object(r.createElement)("span",{className:"bwf-flex"},Object(r.createElement)(w.a,{icon:"info",style:{margin:0},color:ye.DANGER_COLOR})),Object(r.createElement)("p",{className:"bwf-notice-content"},Object(c.__)("Store Checkout is currently disabled. To make it accessible for customers click","funnel-builder"),Object(r.createElement)("strong",null,Object(c.__)(" “Enable” ","funnel-builder")),Object(c.__)("to activate it.","funnel-builder"))),Object(r.createElement)(Se,{funnelId:a,funnelStatus:l})))},Pe=n(149);function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ie=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(8),n.e(41)]).then(n.bind(null,1170))})),Ne=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(5),n.e(13),n.e(40)]).then(n.bind(null,1141))})),Ae=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(3),n.e(4),n.e(0),n.e(32)]).then(n.bind(null,1190))})),Le=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(3),n.e(4),n.e(0),n.e(32)]).then(n.bind(null,1194))})),De=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(8),n.e(11),n.e(43)]).then(n.bind(null,1171))})),Fe=Object(r.lazy)((function(){return n.e(39).then(n.bind(null,1144))})),Re=Object(r.lazy)((function(){return Promise.all([n.e(3),n.e(4),n.e(7),n.e(10),n.e(42)]).then(n.bind(null,1169))})),Be=Object(r.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(9)]).then(n.bind(null,1183))})),Me=Object(r.lazy)((function(){return n.e(14).then(n.bind(null,1198))})),ze=function(e){var t=Object(S.b)().isLite,n=Object(S.b)("ul").isLite,o=e.funnelId,u=e.funnelTitle,i=e.error,f=Object(g.a)().setLanguageData,b=Object($.a)(),p=b.setLeadLoading,d=b.setLeadsFiltersList,m=b.setLeadsFirstTimeLoading,O=Object(Y.a)(),j=O.setOrderLoading,h=O.setOrdersFiltersList,y=O.setOrdersFirstTimeLoading,w=Object(H.a)().setReferrerLoading,_=Object(Pe.a)().setUtmsLoading,E=(v.a.getFunnelStatus(),v.a.getFunnelLoading());Object(s.l)(Object(c.__)("Store Checkout","funnel-builder"));var k=Object(de.a)(),C=k.setContacts,T=k.setContactLoading,P=k.setContactsFiltersList,x=(0,Object(ae.a)().getClosedNotices)(),I=(0,Object(z.a)().getLoading)();Object(le.addFilter)("bwf.funnel.experiment.useExperimentNav","wffn/bwf.funnel.experiment.useExperimentNav",(function(e){return Object(s.ib)()?ne:e})),Object(r.useEffect)((function(){return function(){T(!0),C([],1,25),j(!0),p(!0),w(!0),_(!0),P([]),d([]),h([]),y(null),m(null),f({isLoading:!0})}}),[]);var N=Object(Oe.useParams)(),A=N.tabId,L=void 0===A?"steps":A,D=N.tab,F=N.stepId;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ue.a,null),Object(r.createElement)("div",{className:"bwf-store-checkout-wrap"},Object(r.createElement)(ie.a,{title:E&&Object(l.isEmpty)(u)?Object(r.createElement)(pe.a,{h:24,w:150}):u}),Object(r.createElement)(je.a,null,Object(r.createElement)(me.a,{pageKey:"canvas"===L?"steps":L},(function(e){var l,f=e.ref;return Object(r.createElement)("div",{ref:f},i&&"AbortError"!==(null==i?void 0:i.name)?Object(r.createElement)(be.a,{errorMessage:i.hasOwnProperty("message")?i.message:Object(c.__)("Unable to load Store Checkout Steps","funnel-builder")}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(se.a,{isLoading:!1,funnelId:o,afterTitle:!(D?I:E)&&Object(r.createElement)(Te,null)}),Object(r.createElement)(r.Suspense,{fallback:Object(r.createElement)(r.Fragment,null)},Object(r.createElement)(je.a,null,Object(r.createElement)(me.a,{pageKey:null!==(l=null!=D?D:F)&&void 0!==l?l:L},(function(e){var c=e.ref;return Object(r.createElement)("div",{ref:c},Object(r.createElement)(a.Switch,null,Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout","/store-checkout/steps","/store-checkout/templates/:filter/:builder/preview/:templateId","/store-checkout/templates/:filter/:builder/preview/:templateId/:step"],render:function(e){return Object(r.createElement)(Ie,xe({},e,{funnelId:o}))}}),Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout/contacts/:contactId"],render:function(e){return Object(r.createElement)(Ne,xe({},e,{funnelId:o}))}}),Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout/orders"],render:function(e){return Object(r.createElement)(Ae,xe({},e,{funnelId:o}))}}),Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout/orders/:subAction"],render:function(e){return Object(r.createElement)(Le,xe({},e,{funnelId:o}))}}),Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout/analytics","/store-checkout/analytics/:subAction"],render:function(e){return Object(r.createElement)(Fe,xe({},e,{funnelId:o}))}}),Object(r.createElement)(a.Route,{exact:!0,path:"/store-checkout/canvas",render:function(e){return Object(r.createElement)(Re,xe({},e,{funnelTitle:u,funnelId:o}))}}),Object(r.createElement)(a.Route,{exact:!0,path:["/store-checkout/settings","/store-checkout/settings/:tabId"],render:function(e){return Object(r.createElement)(De,xe({},e,{funnelId:o}))}}),Object(r.createElement)(a.Route,{exact:!0,path:"/store-checkout/experiments/:stepId",render:function(e){return Object(r.createElement)(Be,xe({},e,{funnelId:o}))}}),Object(s.t)()&&Object(r.createElement)(a.Route,{exact:!0,path:"/store-checkout/languages",render:function(e){return Object(r.createElement)(Me,xe({},e,{funnelId:o}))}}),Object(fe.a)(t,n).map((function(e,t){return Object(r.createElement)(a.Route,{key:t,exact:!0,path:e.path,render:e.render})})),s.u))}))))))})))),!(null!=x&&x.includes("internal_help_tip_dismiss"))&&Object(r.createElement)(he.a,null))},Ge=n(157),Ue=n(148),qe=n(39),Je=n(88);function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw c}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(){var e=Ve(Object(r.useState)(null),2),t=e[0],n=e[1],o=Ve(Object(r.useState)(!1),2),l=o[0],i=o[1],s=Object(h.a)().setGlobalCheckout,f=Object(Ce.a)().isStatusLoading,b=Object(re.a)().setActiveGroup,p=Object(ae.a)(),d=p.getGlobalCheckout,m=p.getLoading,O=d(),j="object"===He(O)?O:{},y=j.funnel_id,w=void 0===y?0:y,E=j.funnel_name,k=Object(g.a)().resetFunnel,S=Object(Ge.a)().resetFlowData,C=Object(Je.a)().resetCanvasData,T=Object(Ue.a)().resetFunnelSettings,P=v.a.getCountData(),x=v.a.getFunnelTitle(),I=v.a.getFunnelLoading(),N=v.a.getIsFunnelEmpty(),A=v.a.getFunnelError(),L=(0,Object(z.a)().getStepsError)(),D=Object(a.useParams)(),F=D.tabId,R=void 0===F?"steps":F,M=(D.builder,D.stepId),G=(Object(u.i)().importType,m()),U=Object(qe.a)().getPageCountData,J=Object(B.a)().setPageCountData,Y=U(),$=Object(q.a)().setPreviousStep;Object(r.useEffect)((function(){w&&J($e($e({},Y),P))}),[w,P]),Object(r.useEffect)((function(){return function(){k(),S(),C(),T(),$("")}}),[]);return ne(R,x&&w?x:G?"":E||Object(c.__)("Store Checkout","funnel-builder"),w,!1),Object(r.useEffect)((function(){I&&!N&&A?n(A):M&&L&&n(L)}),[I,N,A,L]),Object(r.createElement)("div",null,!f&&!G&&Object(r.createElement)(r.Fragment,null,w?Object(r.createElement)(ze,{funnelId:w,error:t,funnelTitle:x}):Object(r.createElement)("div",{className:"bwf-store-checkout-wrap"},Object(r.createElement)(ue.a,null),Object(r.createElement)(oe,{onRequestClose:function(){b("funnel")}})),l&&Object(r.createElement)(_.a,{modalTitle:Object(c.__)("Import Store Checkout","funnel-builder"),apiPath:"/store-checkout/import",onRequestClose:function(){return i(!1)},onSuccess:function(e){e.funnel_id&&s({funnel_id:e.funnel_id,funnel_status:!1})},showSuccessState:!0,enableClone:!0})))}},320:function(e,t,n){"use strict";var r=n(0),c=n(15),o=n.n(c);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var c=b(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,n,c,o=i(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).scrollTo=t.scrollTo.bind(f(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){setTimeout(this.scrollTo,window.location.hash?100:250)}},{key:"scrollTo",value:function(){var e=this.props.offset,t=void 0===e?"0":e,n=window.location.hash?window.location.hash.substring(1):null,r=document.getElementById(n);if(r){var c=r.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:c-parseInt(t,10),behavior:"smooth"})}else this.ref.current?window.scrollTo({top:0,behavior:"smooth"}):setTimeout(this.scrollTo,250)}},{key:"render",value:function(){var e=this.props.children;return this.ref=Object(r.createRef)(),Object(r.createElement)("div",{ref:this.ref},e)}}])&&l(t.prototype,n),c&&l(t,c),a}(r.Component);p.propTypes={offset:o.a.string},t.a=p},420:function(e,t,n){"use strict";var r=n(0),c=n(9),o=n(1),a=n(2),l=(n(506),n(16));function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,c,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,c=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw c}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.onclose,n=e.title,i=e.updateTitle,s=e.isLoading,f=e.renameTitle,b=u(Object(r.useState)(n),2),p=b[0],d=b[1],m=Object(a.isEmpty)(p.trim());return Object(r.createElement)(c.Modal,{title:f,className:"bwf-admin-modal bwf-admin-modal-small bwf-rename-funnel-modal",onRequestClose:function(){return t()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(o.__)("Title","funnel-builder")),Object(r.createElement)(c.TextControl,{value:p,onChange:function(e){d(e)},className:m?"bwf-error-border":"",onKeyDown:function(e){if("Enter"===e.key){if(m)return;i(p)}}}),m?Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(o.__)("Title is required","funnel-builder")):null,Object(r.createElement)("div",{className:"bwf-rename-funnel-modal__actions"},Object(r.createElement)(l.a,{className:"bwf-modal-cancel-btn",onClick:t},Object(o.__)("Cancel","funnel-builder")),Object(r.createElement)(l.a,{isPrimary:!0,onClick:function(){return i(p)},disabled:m,isBusy:s,className:m?"bwf-no-ripple":""},Object(o.__)("Update","funnel-builder"))))}},435:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(124),o=n(2),a=n(1),l=n(351),u=n(271),i=n(81),s=n(3),f=n(14),b=function(e){var t=Object(r.useRef)(!0),n=Object(u.a)(),c=n.getTemplates,a=n.getActiveBuilder,l=n.getActiveGroup,i=Object(o.isEmpty)(c()),s=l(),f=a();Object(r.useEffect)((function(){var n,r;t.current||!e.current||i||(r=null===(n=e.current)||void 0===n?void 0:n.getClientRects()[0].top)&&e.current&&r<252.86&&window.scrollTo(0,60)}),[i,s,f]),Object(r.useEffect)((function(){t.current&&!Object(o.isEmpty)(f)&&(window.scrollTo(0,0),t.current=!1)}),[f])},p=n(23),d=n(285);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=Object(p.b)("ul").isProFeatureLocked,n=Object(u.a)(),m=n.getTemplates,j=n.getBuilders,h=(n.getFilters,n.getDefaultBuilder),v=n.templateLoading,g=n.getActiveBuilder,y=n.getActiveSubFilter,w=n.getActiveGroup,_=n.getCurrentTemplate,E=Object(i.a)().setActiveGroup,k=e.onImportComplete,S=e.isStoreCheckout,C=void 0!==S&&S,T=e.scratchConfirmModalData,P=e.storeCheckoutId,x=e.isStoreChekoutExists,I=void 0!==x&&x,N=e.templateListNotice,A=e.showImportNotice,L=e.urlDependency,D=void 0===L||L,F=e.showEditors,R=void 0===F||F,B=e.showTemplatesNav,M=void 0===B||B,z=e.showBuildFromScratch,G=void 0===z||z,U=e.showSelectedTemplates,q=void 0!==U&&U,J=e.previewCustomizeEnabled,Y=void 0!==J&&J,$=e.hideTabs,K=void 0===$?[]:$,H=Object(f.i)().importType,V=m(),W=j(),Q=JSON.parse(JSON.stringify(W)),X=h(),Z=g(),ee=v(),te=y(),ne=_(),re=Object(c.useParams)(),ce=re.id,oe=void 0===ce?0:ce,ae=re.filter,le=void 0===ae?"funnel":ae,ue=re.builder,ie=re.templateId,se=re.step,fe=Object(r.useRef)();b(!Object(s.ib)()&&fe);var be,pe=D?ie:ne.id,de=D?se:ne.activeStep,me=C&&P?P:oe,Oe=w(),je=me||C||!D?Oe:le,he={funnel:Object(a.__)("All","funnel-builder"),wc_checkout:Object(a.__)("Checkout","funnel-builder"),landing:Object(a.__)("Sales Funnels","funnel-builder"),optin:Object(a.__)("Lead Funnels","funnel-builder")};((me||I||K.includes("wc_checkout"))&&delete he.wc_checkout,I&&(he.upsell&&delete he.upsell,me||(he.wc_checkout=Object(a.__)("Checkout","funnel-builder"))),!t||me||K.includes("upsell")||(he.upsell=Object(a.__)("One Click Upsell","funnel-builder")),Q&&Q.wc_checkout&&Q.wc_checkout.customizer&&delete Q.wc_checkout.customizer,"funnel"===H)&&(null===(be=Q[je])||void 0===be||delete be.wp_editor);Object(r.useEffect)((function(){return function(){E("funnel")}}),[]);var ve=function(){var e=ue||X;return Object(o.isEmpty)(Z)||(e=Z),Q&&Q[je]&&!Q[je][e]&&(e=Q[je][X]?X:"elementor"),e},ge=["1","2","3","inline","popup"],ye=function(e,t){return("wc_checkout"===t||"optin"===t)&&te&&ge.includes(te)?V[t][Z][e].group_type[te]:e},we={landing:"sp",optin:"op",optin_ty:"op-confirmed",wc_checkout:"checkouts",upsell:"offer",wc_thankyou:"order-confirmed"},_e=function(e,t,n){var r=we.hasOwnProperty(e)?we[e]:"";return"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},Ee=Object(s.ib)()?"/store-checkout":me?"/funnels/".concat(me):"/templates";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l.a,{filters:d.e,templates:V,activeBuilder:ve(),templateCards:function(){if(Object(o.isEmpty)(V)||Object(o.isEmpty)([je]))return{};var e,t=ve(),n={};if("upsell"===je)n=null===(e=V[je])||void 0===e?void 0:e[t];else if("funnel"===je){var r=V[je][t];for(var c in r){var a,l=r[c];if(r[c].hasOwnProperty("group")||q&&!q.includes(l.name))if(!(l.group.includes("sales")||l.group.includes("optin")||null!==(a=r[c])&&void 0!==a&&a.build_from_scratch))continue;n[c]=r[c]}}else for(var u in V.funnel[t]){var i=V.funnel[t][u];(!q||q&&q.includes(i.name))&&("landing"===je&&i.group.includes("sales")||"optin"===je&&i.group.includes("optin")||"wc_checkout"===je&&i.group.includes("wc_checkout"))&&(n[u]=i)}return n}(),editors:Q,defaultBuilder:X,isTemplateLoading:ee,activeTemplateGroup:je,templateGroup:he,previewData:function(){if(Object(o.isEmpty)(V)||!pe)return{};var e={success:!0},t=[],n=[];try{var r=ve();if("upsell"===je){t=[];var c=r;for(var l in"oxy"===c&&(c="oxygen"),"customizer"===c&&(c="elementor"),V[je][r]){var u=V[je][r][l];if(!u.build_from_scratch){var i={};i.id=l,i.funnel=l,i.slug=l,i.name=u.name,i.thumbnail=u.thumbnail,i.template=pe,i.pro=u.pro,i.preview="https://templates-".concat(c,".funnelswp.com/offer/").concat(null==u?void 0:u.prevslug,"/"),i.group_type={},i.type="upsell",t.push(i),n.push({id:l,preview:"https://templates-".concat(c,".funnelswp.com/offer/").concat(null==u?void 0:u.prevslug,"/")})}}e.activeTemplate={id:pe,thumbnail:pe,preview:"https://templates-".concat(c,".funnelswp.com/offer/").concat(V[je][r][pe].prevslug,"/"),slug:pe,prevId:pe,name:V[je][r][pe].name,pro:V[je][r][pe].pro,tempPro:V[je][r][pe].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var s="funnel";switch(je){case"optin":s="optin";break;case"landing":s="sales";break;case"wc_checkout":s="checkout"}var f=V.funnel[r][pe];t=f.steps?f.steps.map((function(e){var t=V[e.type][r][ye(e.slug,e.type)];if(void 0===t)throw new Error("Step template not found with slug "+ye(e.slug,e.type));var c="";switch(e.type){case"landing":c=Object(a.__)("Sales Page","funnel-builder");break;case"wc_checkout":c=Object(a.__)("Checkout Page","funnel-builder");break;case"upsell":c=Object(a.__)("One Click Upsell","funnel-builder");break;case"wc_thankyou":c=Object(a.__)("Thank You Page","funnel-builder");break;case"optin":c=Object(a.__)("Optin Page","funnel-builder");break;case"optin_ty":c=Object(a.__)("Optin Confirmation Page","funnel-builder")}t.group_type?Object.values(t.group_type).forEach((function(t){var c=V[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(c.prevslug),preview:_e(e.type,c,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:_e(e.type,t,r)});return{id:"".concat(e.type,"-").concat(pe),slug:ye(e.slug,e.type),funnel:pe,step:e.type,name:c,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:s,group_type:t.group_type||{},preview:_e(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var b=f?f.steps.filter((function(e){return e.type===de})):[],p=V[b[0].type][r][ye(b[0].slug,b[0].type)];e.activeTemplate={thumbnail:"".concat(de,"-").concat(pe),prevId:"".concat(de,"-").concat(p.prevslug),preview:_e(b[0].type,p,r),slug:pe,name:V.funnel[r][pe].name,pro:V.funnel[r][pe].pro,tempPro:V.funnel[r][pe].pro,group:"funnel",filters:!!p.group_type&&Object.keys(p.group_type),type:de,funnelGroup:f.group,filter:"wc_checkout"===de?p.no_steps:p.group?p.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:me,onImportComplete:k,templateFilterCheck:function(e){return!me||"funnel"===H||!1===te||!1===te||!(!me||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===te?"optin":te):te===e.group)},activeFilter:te,isStoreCheckout:C,parentRoute:Ee,showTemplatesNav:M,showBuildFromScratch:!!G&&("funnel"!==H||C&&!me),funnelTitleModalData:O({},C&&{title:Object(a.__)("Store Checkout","funnel-builder")}),scratchConfirmModalData:T,importApiPrefix:C?"store-checkout":"funnels",templateListNotice:N,showImportNotice:A,urlDependency:D,showEditors:R,previewCustomizeEnabled:Y,listRef:fe}))}},506:function(e,t,n){}}]);