(window.webpackJsonp=window.webpackJsonp||[]).push([[46,0,2,5,8,42],Array(261).concat([function(e,t,n){"use strict";n.d(t,"a",(function(){return se}));var r=n(0),o=n(1),a=n(7),i=n.n(a),c=n(2),l=n(15),u=n.n(l),s=n(9),f=n(43),d=n(58),p=n(34),b=n(44);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(l,e);var t,n,o,a=g(l);function l(){var e;return m(this,l),(e=a.apply(this,arguments)).handleKeyDown=e.handleKeyDown.bind(w(e)),e.select=e.select.bind(w(e)),e.optionRefs={},e.listbox=Object(r.createRef)(),e}return t=l,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,r=t.selectedIndex;Object(c.isEqual)(n,e.options)||(this.optionRefs={}),r!==e.selectedIndex&&this.scrollToOption(r)}},{key:"getOptionRef",value:function(e){return this.optionRefs.hasOwnProperty(e)||(this.optionRefs[e]=Object(r.createRef)()),this.optionRefs[e]}},{key:"select",value:function(e){var t=this.props.onSelect;e.isDisabled||t(e)}},{key:"scrollToOption",value:function(e){var t=this.listbox.current;if(!(t.scrollHeight<=t.clientHeight)&&this.optionRefs[e]){var n=this.optionRefs[e].current,r=t.clientHeight+t.scrollTop,o=n.offsetTop+n.offsetHeight;o>r?t.scrollTop=o-t.clientHeight:n.offsetTop<t.scrollTop&&(t.scrollTop=n.offsetTop)}}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.options,a=t.onSearch,i=t.selectedIndex,c=t.setExpanded;if(0!==o.length)switch(e.keyCode){case d.UP:n(),e.preventDefault(),e.stopPropagation();break;case d.DOWN:r(),e.preventDefault(),e.stopPropagation();break;case d.ENTER:this.select(o[i]),e.preventDefault(),e.stopPropagation();break;case d.LEFT:case d.RIGHT:c(!1);break;case d.ESCAPE:return c(!1),void a(null);case d.TAB:this.select(o[i]),c(!1),a(null)}}},{key:"toggleKeyEvents",value:function(e){this.props.node[e?"addEventListener":"removeEventListener"]("keydown",this.handleKeyDown,!0)}},{key:"componentDidMount",value:function(){this.toggleKeyEvents(!0)}},{key:"componentWillUnmount",value:function(){this.toggleKeyEvents(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,o=t.listboxId,a=t.options,l=t.selectedIndex,u=t.staticList,s=t.hoverState,f=t.label,d=t.bottomFixed,h=i()("bwf-select-control__listbox",{"is-static":u,"has-label":!Object(c.isEmpty)(f),"is-bottom-fixed":d});return Object(r.createElement)(b.a,{ref:this.listbox,focusOnMount:!1,id:o,className:h,placement:"bottom"},a.map((function(t,o){return Object(r.createElement)("div",{key:o,onMouseOver:function(){s(o)},className:"".concat(void 0!==t.nameKey?"bwf-select-optgroup-wrap":"")},Object(r.createElement)("div",{className:"bwf-select-optgroup ".concat(null==t.nameKey?"bwf-hide":"")},t.nameKey),Object(r.createElement)("div",{ref:e.getOptionRef(o),key:t.key,id:"bwf-select-control__option-".concat(n,"-").concat(t.key),role:"option","aria-selected":o===l,disabled:t.isDisabled,className:i()("bwf-select-control__option",{"is-selected":o===l}),onClick:function(){return e.select(t)},tabIndex:"-1"},t.icon&&Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:t.icon}}),Object(p.decodeEntities)(t.label),t.meta))})))}}])&&y(t.prototype,n),o&&y(t,o),l}(r.Component);_.propTypes={instanceId:u.a.number,listboxId:u.a.string,node:u.a.instanceOf(Element).isRequired,onSelect:u.a.func,options:u.a.arrayOf(u.a.shape({isDisabled:u.a.bool,key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,keywords:u.a.arrayOf(u.a.oneOfType([u.a.string,u.a.number])),label:u.a.oneOfType([u.a.string,u.a.object]),value:u.a.any})).isRequired,selectedIndex:u.a.number,staticList:u.a.bool};var E=_,S=n(132);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(l,e);var t,n,a,i=T(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).removeAll=t.removeAll.bind(I(t)),t.removeResult=t.removeResult.bind(I(t)),t}return t=l,(n=[{key:"removeAll",value:function(){(0,this.props.onChange)([])}},{key:"removeResult",value:function(e){var t=this.props,n=t.selected,r=t.onChange,o=Object(c.findIndex)(n,{key:e});r([].concat(k(n.slice(0,o)),k(n.slice(o+1))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.selected,a=t.showClearButton;return n.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-select-control__tags"},n.map((function(t,a){if(!t.label)return null;var i=Object(o.sprintf)(Object(o.__)("%1$s (%2$s of %3$s)","funnel-builder"),t.label,a+1,n.length);return Object(r.createElement)(S.a,{key:t.key,id:t.key,label:t.label,remove:e.removeResult,screenReaderLabel:i})}))),a&&Object(r.createElement)(s.Button,{className:"bwf-select-control__clear",isLink:!0,onClick:this.removeAll},Object(r.createElement)(s.Icon,{icon:"dismiss"}),Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Clear all","funnel-builder")))):null}}])&&P(t.prototype,n),a&&P(t,a),l}(r.Component);R.propTypes={onChange:u.a.func,onSelect:u.a.func,selected:u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string})),showClearButton:u.a.bool};var M=R,F=n(5);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K(e);if(t){var o=K(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return V(this,n)}}function V(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(l,e);var t,n,a,c=H(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={isActive:!1},t.input=Object(r.createRef)(),t.updateSearch=t.updateSearch.bind(Y(t)),t.onFocus=t.onFocus.bind(Y(t)),t.onBlur=t.onBlur.bind(Y(t)),t.onKeyDown=t.onKeyDown.bind(Y(t)),t}return t=l,(n=[{key:"updateSearch",value:function(e){return function(t){e(t.target.value)}}},{key:"onFocus",value:function(e){var t=this,n=this.props,r=n.isSearchable,o=n.setExpanded,a=n.showAllOnFocus,i=n.updateSearchOptions,c=n.isExpanded;return function(n){t.setState({isActive:!0}),r&&a?(n.target.select(),i("")):r?e(n.target.value):o(!c)}}},{key:"onBlur",value:function(){var e=this.props.onBlur;"function"==typeof e&&e(),this.setState({isActive:!1})}},{key:"onKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.selected,a=t.onChange,i=t.query,c=t.setExpanded;d.BACKSPACE===e.keyCode&&!i&&o.length&&a(B(o.slice(0,-1))),d.DOWN===e.keyCode&&(r(),c(!0),e.preventDefault(),e.stopPropagation()),d.UP===e.keyCode&&(n(),c(!0),e.preventDefault(),e.stopPropagation())}},{key:"renderButton",value:function(){var e=this.props,t=e.multiple,n=e.selected;return t||!n.length?null:Object(r.createElement)("div",{className:"bwf-select-control__control-value"},n[0].label)}},{key:"renderInput",value:function(){var e,t,n=this.props,o=n.activeId,a=n.hasTags,i=n.inlineTags,c=n.instanceId,l=n.isExpanded,u=n.isSearchable,s=n.listboxId,f=n.onSearch,d=n.placeholder,p=n.searchInputType,b=n.disabled,h=n.error,m=this.state.isActive;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-control-container"},Object(r.createElement)("input",{autoComplete:"off",className:"bwf-select-control__control-input",id:"bwf-select-control-".concat(c,"__control-input"),ref:this.input,type:u?p:"button",value:this.getInputValue(),placeholder:m?d:"",onChange:this.updateSearch(f),onClick:this.onFocus(f),onBlur:this.onBlur,onKeyDown:this.onKeyDown,role:"combobox","aria-autocomplete":"list","aria-expanded":l,"aria-haspopup":"true","aria-owns":s,"aria-controls":s,"aria-activedescendant":o,disabled:b,"aria-describedby":a&&i?"search-inline-input-".concat(c):null}),Object(r.createElement)("div",{className:"bwf-select-arrow-icon",onClick:this.onFocus(f)},Object(r.createElement)(F.a,{icon:l?"angle-up":"angle-down",size:12})),(null===(e=this.props.selected[0])||void 0===e?void 0:e.hint)&&Object(r.createElement)("div",{className:"bwf-select-hint"},null===(t=this.props.selected[0])||void 0===t?void 0:t.hint)),h&&Object(r.createElement)("div",{className:"bwf-error-text"},h))}},{key:"getInputValue",value:function(){var e=this.props,t=e.inlineTags,n=e.isFocused,r=e.isSearchable,o=e.multiple,a=e.query,i=e.selected,c=e.placeholder,l=i.length?i[0].label:c||"Select";return o||n||t?r&&n&&a?a:"":l}},{key:"getIcon",value:function(){var e=this.props,t=e.inlineTags,n=e.isFocused,r=e.multiple,o=e.selected,a=!(!o.length||!o[0].icon)&&o[0].icon;return!(r||n||t)&&a}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.className,c=n.hasTags,l=n.help,u=n.inlineTags,s=n.instanceId,f=n.isSearchable,d=n.label,p=n.query;return this.state.isActive,Object(r.createElement)("div",{className:i()("components-base-control","bwf-select-control__control",a,{empty:!p||0===p.length,"has-tags":u&&c,"with-value":null===(e=this.getInputValue())||void 0===e?void 0:e.length,"has-error":!!l}),onClick:function(){t.input.current.focus()}},f&&Object(r.createElement)(F.a,{icon:"search",size:18}),u&&Object(r.createElement)(M,this.props),Object(r.createElement)("div",{className:"components-base-control__field"},!!d&&Object(r.createElement)("label",{htmlFor:"bwf-select-control-".concat(s,"__control-input"),className:"bwf-select-controls-label"},d),this.renderInput(),u&&Object(r.createElement)("span",{id:"search-inline-input-".concat(s),className:"screen-reader-text"},Object(o.__)("Move backward for selected items","funnel-builder")),!!l&&Object(r.createElement)("p",{id:"bwf-select-control-".concat(s,"__help"),className:"components-base-control__help"},l)))}}])&&z(t.prototype,n),a&&z(t,a),l}(r.Component);X.propTypes={hasTags:u.a.bool,help:u.a.oneOfType([u.a.string,u.a.node]),inlineTags:u.a.bool,isSearchable:u.a.bool,instanceId:u.a.number,label:u.a.string,listboxId:u.a.string,onBlur:u.a.func,onChange:u.a.func,onSearch:u.a.func,placeholder:u.a.string,query:u.a.string,selected:u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string})),showAllOnFocus:u.a.bool};var $=X,G=(n(499),n(128));function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Z(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le(e);if(t){var o=le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue={isExpanded:!1,isFocused:!1,query:""},se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(u,e);var t,n,a,l=ae(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state=te(te({},ue),{},{searchOptions:[],selectedIndex:0}),t.bindNode=t.bindNode.bind(ce(t)),t.decrementSelectedIndex=t.decrementSelectedIndex.bind(ce(t)),t.incrementSelectedIndex=t.incrementSelectedIndex.bind(ce(t)),t.onAutofillChange=t.onAutofillChange.bind(ce(t)),t.updateSearchOptions=Object(c.debounce)(t.updateSearchOptions.bind(ce(t)),e.searchDebounceTime),t.search=t.search.bind(ce(t)),t.selectOption=t.selectOption.bind(ce(t)),t.setExpanded=t.setExpanded.bind(ce(t)),t.setHoverState=t.setHoverState.bind(ce(t)),t}return t=u,(n=[{key:"bindNode",value:function(e){this.node=e}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelected(),t=this.props.inlineTags,n=te({},ue);!t&&e.length&&e[0].label&&(n.query=e[0].label),this.setState(n)}},{key:"handleFocusOutside",value:function(){this.reset()}},{key:"hasTags",value:function(){var e=this.props,t=e.inlineTags,n=e.selected;return!!t&&(Array.isArray(n)?n.some((function(e){return Boolean(e.label)})):Boolean(n))}},{key:"getSelected",value:function(){var e=this.props,t=e.multiple,n=e.options,r=e.selected;if(t||Array.isArray(r))return t&&!Array.isArray(r)?Object(c.isEmpty)(r)?[]:[r]:r;var o=n.find((function(e){return e.key===r}));return o?[o]:[]}},{key:"selectOption",value:function(e){var t=this.props,n=t.multiple,r=t.onChange,o=t.selected,a=this.state.query,i=n?[].concat(Z(o),[e]):[e];this.reset(i),n&&Array.isArray(o)?-1===Object(c.findIndex)(o,{key:e.key})&&r(i,a):o!==e.key&&r(e.key,a)}},{key:"decrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(0===e?t.length:e)-1:t.length-1;this.setState({selectedIndex:n})}},{key:"incrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(e+1)%t.length:0;this.setState({selectedIndex:n})}},{key:"setHoverState",value:function(e){this.setState({selectedIndex:e})}},{key:"announce",value:function(e){var t=this.props.debouncedSpeak;t&&(e.length?t(Object(o.sprintf)(Object(o._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length,"funnel-builder"),e.length),"assertive"):t(Object(o.__)("No results.","funnel-builder"),"assertive"))}},{key:"getOptions",value:function(){var e=this.props,t=e.isSearchable,n=e.options,r=(e.excludeSelectedOptions,this.state.searchOptions);return this.getSelected().map((function(e){return e.key})),t?r:n}},{key:"getOptionsByQuery",value:function(e,t){for(var n=this.props,r=n.getSearchExpression,o=n.maxResults,a=n.onFilter,i=[],l=r(Object(c.escapeRegExp)(t?t.trim():"")),u=l?new RegExp(l,"i"):/^$/,s=0;s<e.length;s++){var f=e[s],d=f.keywords,p=void 0===d?[]:d;if("string"==typeof f.label&&(p=[].concat(Z(p),[f.label])),p.some((function(e){return u.test(e)}))&&(i.push(f),o&&i.length===o))break}return a(i,t)}},{key:"setExpanded",value:function(e){var t=this.props,n=t.selected,r=void 0===n?"":n,o=t.options.findIndex((function(e){return"string"==typeof e?e===r:e.key===r}));this.setState({selectedIndex:0<o?o:0}),this.setState({isExpanded:e})}},{key:"search",value:function(e){var t=this,n=this.cacheSearchOptions||[],r=null===e||e.length||this.props.hideBeforeSearch?this.getOptionsByQuery(n,e):n;this.setState({query:e,isFocused:!0,selectedIndex:0,searchOptions:r},(function(){t.setState({isExpanded:Boolean(t.getOptions().length)})})),this.updateSearchOptions(e)}},{key:"updateSearchOptions",value:function(e){var t=this,n=this.props,r=n.hideBeforeSearch,o=n.options,a=n.onSearch,i=this.activePromise=Promise.resolve(a(o,e)).then((function(n){if(i===t.activePromise){t.cacheSearchOptions=n;var o=null===e||e.length||r?t.getOptionsByQuery(n,e):n;t.setState({selectedIndex:0,searchOptions:o},(function(){t.setState({isExpanded:Boolean(t.getOptions().length)}),t.announce(o)}))}}))}},{key:"onAutofillChange",value:function(e){var t=this.props.options,n=this.getOptionsByQuery(t,e.target.value);1===n.length&&this.selectOption(n[0])}},{key:"render",value:function(){var e=this.props,t=e.autofill,n=e.children,o=e.className,a=e.controlClassName,c=e.inlineTags,l=e.instanceId,u=e.isSearchable,s=e.options,f=e.multiple,d=e.disabled,p=void 0!==d&&d,b=e.label,h=e.error,m=this.state,y=m.isExpanded,v=m.isFocused,g=m.selectedIndex,O=this.hasTags(),w=(s[g]||{}).key,j=void 0===w?"":w,_=y?"bwf-select-control__listbox-".concat(l):null,S=y?"bwf-select-control__option-".concat(l,"-").concat(j):null;return Object(r.createElement)("div",{className:i()("bwf-select-control bwf-select-control-2",o,{"has-inline-tags":O&&c,"is-focused":v,"is-searchable":u,"is-disabled":p,"no-label":!b,"has-error":h}),ref:this.bindNode},t&&Object(r.createElement)("input",{onChange:this.onAutofillChange,name:t,type:"text",className:"bwf-select-control__autofill-input",tabIndex:"-1",disabled:p}),n,Object(r.createElement)($,Q({},this.props,this.state,{activeId:S,className:a,hasTags:O,isExpanded:y,listboxId:_,onSearch:this.search,selected:this.getSelected(),setExpanded:this.setExpanded,updateSearchOptions:this.updateSearchOptions,decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,disabled:p})),!c&&f&&Object(r.createElement)(M,Q({},this.props,{selected:this.getSelected(),options:this.getOptions()})),y&&Object(r.createElement)(E,Q({},this.props,this.state,{activeId:S,listboxId:_,node:this.node,onSelect:this.selectOption,onSearch:this.search,options:this.getOptions(),decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,setExpanded:this.setExpanded,hoverState:this.setHoverState})))}}])&&re(t.prototype,n),a&&re(t,a),u}(r.Component);se.propTypes={autofill:u.a.string,children:u.a.node,className:u.a.string,controlClassName:u.a.string,excludeSelectedOptions:u.a.bool,onFilter:u.a.func,getSearchExpression:u.a.func,help:u.a.oneOfType([u.a.string,u.a.node]),inlineTags:u.a.bool,isSearchable:u.a.bool,label:u.a.string,onChange:u.a.func,onSearch:u.a.func,options:u.a.arrayOf(u.a.shape({isDisabled:u.a.bool,key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,keywords:u.a.arrayOf(u.a.oneOfType([u.a.string,u.a.number])),label:u.a.oneOfType([u.a.string,u.a.object]),value:u.a.any})).isRequired,placeholder:u.a.string,searchDebounceTime:u.a.number,selected:u.a.oneOfType([u.a.string,u.a.number,u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string}))]),maxResults:u.a.number,multiple:u.a.bool,showClearButton:u.a.bool,searchInputType:u.a.oneOf(["text","search","number","email","tel","url"]),hideBeforeSearch:u.a.bool,showAllOnFocus:u.a.bool,staticList:u.a.bool,disabled:u.a.bool};var fe={autofill:null,excludeSelectedOptions:!0,getSearchExpression:c.identity,inlineTags:!1,isSearchable:!1,onChange:c.noop,onFilter:c.identity,onSearch:function(e){return Promise.resolve(e)},maxResults:0,multiple:!1,searchDebounceTime:0,searchInputType:"search",selected:[],showAllOnFocus:!1,showClearButton:!1,hideBeforeSearch:!1,staticList:!1},de=Object(G.a)(se,fe);t.b=Object(f.compose)([s.withSpokenMessages,f.withInstanceId,s.withFocusOutside])(de)},function(e,t,n){"use strict";var r=n(0),o=n(2);t.a=function(e,t){return function(n){var a=Object(o.defaults)({},n,t);return Object(r.createElement)(e,a)}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),o=n(2),a=n(7),i=n.n(a),c=n(43),l=(n(9),n(307),n(21)),u=["label","className","selected","help","onChange","hideLabelFromVision","options","disabled","orientation"];function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(e){var t=e.label,n=e.className,a=e.selected,d=e.help,p=e.onChange,b=(e.hideLabelFromVision,e.options),h=void 0===b?[]:b,m=e.disabled,y=void 0!==m&&m,v=e.orientation,g=void 0===v?"horizontal":v,O=(s(e,u),Object(c.useInstanceId)(f)),w="inspector-radio-control-".concat(O),j=function(e){return p(e.target.value)};return!Object(o.isEmpty)(h)&&Object(r.createElement)("div",{className:i()("components-base-control",n,"components-radio-control bwf-components-radio-control",g)},Object(r.createElement)("div",{className:"components-base-control__field"},t&&Object(r.createElement)("label",{className:"components-base-control__label",dangerouslySetInnerHTML:{__html:t}}),Object(r.createElement)("div",{className:"bwf-radio-control-inner"},h.map((function(e,t){return Object(r.createElement)("div",{key:"".concat(w,"-").concat(t),className:"components-radio-control__option"},Object(r.createElement)("input",{id:"".concat(w,"-").concat(t),className:"components-radio-control__input",type:"radio",name:w,value:e.value,onChange:j,checked:!y&&e.value===a,disabled:y||e.disabled||e.isPro,"aria-describedby":d?"".concat(w,"__help"):void 0}),e.isPro&&Object(r.createElement)(l.b,null),Object(r.createElement)("label",{htmlFor:"".concat(w,"-").concat(t)},e.label))})))))}},,,function(e,t,n){var r;try{r={cloneDeep:n(741),constant:n(470),defaults:n(742),each:n(524),filter:n(527),find:n(743),flatten:n(553),forEach:n(525),forIn:n(747),has:n(537),isUndefined:n(538),last:n(748),map:n(539),mapValues:n(749),max:n(750),merge:n(752),min:n(758),minBy:n(759),now:n(627),pick:n(760),range:n(765),reduce:n(541),sortBy:n(768),uniqueId:n(773),values:n(546),zipObject:n(774)}}catch(e){}r||(r=window._),e.exports=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),o=n(2),a=n(7),i=n.n(a),c=n(43),l=n(9),u=(n(3),n(1)),s=n(44);n(294);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e.label,n=void 0===t?"":t,a=e.id,d=void 0===a?"":a,p=e.value,b=e.onChange,h=void 0===b?o.noop:b,m=e.className,y=e.style,v=void 0===y?{}:y,g=e.isHover,O=e.hoverVal,w=void 0===O?"":O,j="inspector-color-".concat(Object(c.useInstanceId)(l.ColorPicker)),_=f(Object(r.useState)(!1),2),E=_[0],S=_[1],x=f(Object(r.useState)(),2),k=x[0],C=x[1],P=f(Object(r.useState)(0),2),N=P[0],T=P[1],D=g?Object(o.isArray)(p)?p:[p,w]:p,I=function(e){if(g){var t=D;return t[N]=e.hex,void h(t,{id:d})}h(e.hex,{id:d})},A=g?D[N]:D;return Object(r.createElement)("div",{className:i()("components-color-field",m),style:v},Object(r.createElement)("div",{className:"components-color-field-label-wrap"},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:j},n),g&&Object(r.createElement)(l.ButtonGroup,{className:"bwf-color-picker-modes"},Object(r.createElement)(l.Button,{className:i()("is-secondary-gray is-small",{"is-selected":0===N}),onClick:function(){return T(0)}},Object(u.__)("Default","funnel-builder")),Object(r.createElement)(l.Button,{className:i()("is-secondary-gray is-small",{"is-selected":1===N}),onClick:function(){return T(1)}},Object(u.__)("Hover","funnel-builder")))),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return S(!0)}},Object(r.createElement)(l.ColorIndicator,{colorValue:A,ref:C,className:i()({"is-empty":Object(o.isEmpty)(A)})}),Object(r.createElement)("span",{className:"indicator-text"},A||"Select")),E&&Object(r.createElement)(s.a,{position:"top right",onClose:function(){return S(!1)},anchor:k},Object(r.createElement)(l.ColorPicker,{color:A,onChangeComplete:I}),Object(r.createElement)(l.Button,{isLink:!0,className:"bwf-color-picker-reset-btn",onClick:function(){return I({hex:""})}},Object(u.__)("Reset","funnel-builder")))))}},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(7),a=n.n(o),i=n(2),c=n(9),l=n(55),u=(n(277),n(5));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,o=e.className,d=e.center,p=void 0!==d&&d,b=e.isDismissive,h=void 0!==b&&b,m=e.onDismisal,y=void 0===m?function(){}:m,v=e.isProFeatureLocked;if(Object(i.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:a()("bwf-zero-state",o,{"bwf-block-t-center":p})},h&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return y()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(u.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(l.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(l.a,{key:"layout-block-"+t,className:a()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(l.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(l.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),v&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(l.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(c.Button,f({isPrimary:!e.isSecondary,key:t,onClick:e.onClick,className:a()("bwf-no-ripple",e.className,{"is-secondary":e.isSecondary})},e.props),!1!==e.proCheck&&v&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===s(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(58),i=n(2),c=n(9);n(7),n(283);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){var t=e.value,n=void 0===t?"":t,c=e.onChange,l=e.keyid,s=e.openMergeTagModal,d=e.customSettings,p=void 0===d?{}:d,b=e.toolbar,h=e.quicktags,m=void 0!==h&&h,y=Object(r.useRef)(!1),v=Object(r.useRef)(n);return Object(r.useEffect)((function(){if(y.current){var e=window.tinymce.get("editor-bwf"+l);(null==e?void 0:e.getContent())!==n&&(null==e||e.setContent(n||""),v.current=n||"")}}),[n]),Object(r.useEffect)((function(){function e(){var e=window.tinymce.settings,n=e.plugins,r=void 0===n?"":n,o=["lists","link"];Object(i.isEmpty)(r)||(o=[].concat(f(Object(i.isArray)(r)?r:r.split(",")),f(o))),wp.editor.initialize("editor-bwf"+l,{tinymce:u(u({},e),{},{inline:!1,content_css:!1,setup:t,height:114,resize:!1,toolbar1:b||"bold,italic,,bullist,numlist,mergetagmodal,link",fontsize_formats:f(Array(39)).map((function(e,t){return t+12})).join("px ")+"px",content_style:'body {color: #353030;font-size:14px;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}',classic_block_editor:!0,selector:"#editor-bwf"+l,plugins:o},p),quicktags:!!m&&{buttons:"strong,em,link,ul,ol,li,code"}})}function t(e){var t=Object(i.debounce)((function(){var t=e.getContent();t!==e._lastChange&&(e._lastChange=t,c(t))}),250);e.on("Paste Change input Undo Redo",t),e.on("remove",t.cancel),e.on("keydown",(function(t){a.isKeyboardEvent.primary(t,"z")&&t.stopPropagation(),t.keyCode!==a.BACKSPACE&&t.keyCode!==a.DELETE||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===a.F10&&t.stopPropagation()})),s&&e.addButton("mergetagmodal",{icon:"merge-tag",text:Object(o.__)("Merge Tags","funnel-builder"),tooltip:Object(o.__)("Merge Tags","funnel-builder"),onclick:function(){s(!0)}}),e.on("init",(function(){null==e||e.setContent(v.current),n!==v.current&&c(v.current)}))}function r(){"complete"===document.readyState&&e()}return y.current=!0,"complete"===document.readyState?e():document.addEventListener("readystatechange",r),function(){document.removeEventListener("readystatechange",r),wp.oldEditor.remove("editor-bwf"+l)}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("textarea",{key:"editor",id:"editor-bwf"+l,className:"wp-block-freeform block-library-rich-text__tinymce bwf-editor-container",onChange:function(e){c(e.target.value)},onBlur:function(e){c(e.target.value)}}))};function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isTextEditor,n=void 0===t||t,o=b(Object(r.useState)("visual"),2),a=o[0],i=(o[1],b(Object(r.useState)(),2)),l=i[0],u=i[1];return Object(r.useEffect)((function(){u(e.value)}),[e.value]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mce-editor ".concat(e.label?"bwf-is-label":"")},e.label&&Object(r.createElement)("label",null,Object(r.createElement)("span",null,e.label)),Object(r.createElement)("div",{className:e.className},"visual"===a&&Object(r.createElement)(p,e),n&&"text"==a&&Object(r.createElement)(c.TextareaControl,{id:"lead_notification_body",placeholder:null==e?void 0:e.placeholder,className:"form-control wp-textarea bwf-editor-textarea",defaultValue:l,onChange:function(t){null!=e&&e.onChange(t)}}))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s}));var r=n(0),o=n(15),a=n.n(o),i=["component","children"];function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=Object(r.createContext)(2);function u(e){return Object(r.createElement)(l.Consumer,null,(function(t){var n="h"+Math.min(t,6);return Object(r.createElement)(n,e)}))}function s(e){var t=e.component,n=e.children,o=c(e,i),a=t||"div";return Object(r.createElement)(l.Consumer,null,(function(e){return Object(r.createElement)(l.Provider,{value:e+1},!1===t?n:Object(r.createElement)(a,o,n))}))}s.propTypes={component:a.a.oneOfType([a.a.func,a.a.string,a.a.bool]),children:a.a.node}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(0),o=n(9),a=n(43),i=n(2),c=n(7),l=n.n(c),u=(n(324),n(63)),s=n(21),f=n(1);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t=e.label,n=e.className,c=e.value,h=e.help,m=e.options,v=void 0===m?[]:m,g=e.onBlur,O=(void 0===g&&i.noop,e.onChange),w=void 0===O?i.noop:O,j=e.onFocus,_=(void 0===j&&i.noop,e.disabled),E=e.showtooltip,S=void 0!==E&&E,x=e.tooltipmsg,k=void 0===x?"":x,C=e.select_all,P=e.select_all_label,N=e.orientation,T=void 0===N?"vertical":N,D=b(Object(r.useState)(!0),2),I=D[0],A=D[1],R=Object(a.useInstanceId)(y);if(Object(i.isEmpty)(v))return null;var M="inspector-checklist-".concat(R);c=null!=c&&c?c:[];var F=l()("components-checklist",n),L=function(e){var t=p(c);!0===e.target.checked?c.includes(e.target.value)||t.push(e.target.value):t=c.filter((function(t){return t!==e.target.value})),w(t,{event:e}),A(!1)},B=v.map((function(e){return e.value}));return Object(r.createElement)(o.BaseControl,{label:t,id:M,help:h},Object(r.createElement)("div",{className:l()("component-checklist-option-wrap",F,T)},C&&Object(r.createElement)("div",{className:l()("bwf-checkbox-control select_all")},Object(r.createElement)("span",{className:l()("bwf-checkbox-control-inner")},Object(r.createElement)("input",{type:"checkbox",id:"checkbox_select_all",value:Object(i.isEmpty)(Object(i.difference)(B,c)),onChange:function(e){e.target.checked?w(B,{e:e}):w([],{e:e})},checked:Object(i.isEmpty)(Object(i.difference)(B,c)),className:l()({"bwf-no-animation":I})})),Object(r.createElement)("label",{htmlFor:"checkbox_select_all"},P||Object(f.__)("Select All","funnel-builder"))),v.map((function(e,t){return Object(r.createElement)(u.a,{toolTipText:e.disable&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},k),visible:S&&e.disable||!1,size:280,iconSize:"auto",key:"".concat(M,"-").concat(t),position:"bottom right"},Object(r.createElement)("div",{key:"".concat(M,"-").concat(t),className:l()("bwf-checkbox-control")},Object(r.createElement)("span",{className:l()("bwf-checkbox-control-inner",{"bwf-checkbox-disabled":e.disable})},Object(r.createElement)("input",d({id:"".concat(M,"-").concat(t),type:"checkbox",value:e.value,onChange:e.disable?function(){}:L,checked:!e.isPro&&(n=c,o=e.value,!!Array.isArray(n)&&n.includes(o)),className:l()({"bwf-no-animation":I}),"aria-describedby":h?"".concat(M,"__help"):void 0},(_||e.isPro)&&{disabled:!0}))),e.isPro&&Object(r.createElement)(s.b,null),Object(r.createElement)("label",{htmlFor:"".concat(M,"-").concat(t)},e.label)));var n,o}))))}},,function(e,t,n){},,,,,,function(e,t,n){},,,function(e,t,n){"use strict";var r=n(267),o=n(299).Graph;function a(e,t,n,o){var a;do{a=r.uniqueId(o)}while(e.hasNode(a));return n.dummy=t,e.setNode(a,n),a}function i(e){return r.max(r.map(e.nodes(),(function(t){var n=e.node(t).rank;if(!r.isUndefined(n))return n})))}e.exports={addDummyNode:a,simplify:function(e){var t=(new o).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),t},asNonCompoundGraph:function(e){var t=new o({multigraph:e.isMultigraph()}).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){e.children(n).length||t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){t.setEdge(n,e.edge(n))})),t},successorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.outEdges(t),(function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.inEdges(t),(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,o=e.x,a=e.y,i=t.x-o,c=t.y-a,l=e.width/2,u=e.height/2;if(!i&&!c)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(c)*l>Math.abs(i)*u?(c<0&&(u=-u),n=u*i/c,r=u):(i<0&&(l=-l),n=l,r=l*c/i);return{x:o+n,y:a+r}},buildLayerMatrix:function(e){var t=r.map(r.range(i(e)+1),(function(){return[]}));return r.forEach(e.nodes(),(function(n){var o=e.node(n),a=o.rank;r.isUndefined(a)||(t[a][o.order]=n)})),t},normalizeRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank})));r.forEach(e.nodes(),(function(n){var o=e.node(n);r.has(o,"rank")&&(o.rank-=t)}))},removeEmptyRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank}))),n=[];r.forEach(e.nodes(),(function(r){var o=e.node(r).rank-t;n[o]||(n[o]=[]),n[o].push(r)}));var o=0,a=e.graph().nodeRankFactor;r.forEach(n,(function(t,n){r.isUndefined(t)&&n%a!=0?--o:o&&r.forEach(t,(function(t){e.node(t).rank+=o}))}))},addBorderNode:function(e,t,n,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=n,o.order=r);return a(e,"border",o,t)},maxRank:i,partition:function(e,t){var n={lhs:[],rhs:[]};return r.forEach(e,(function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n},time:function(e,t){var n=r.now();try{return t()}finally{console.log(e+" time: "+(r.now()-n)+"ms")}},notime:function(e,t){return t()}}},,function(e,t,n){"use strict";var r=n(0),o=(n(9),n(7)),a=n.n(o),i=n(2),c=n(15),l=n.n(c),u=n(5),s=n(44),f=(n(269),n(262)),d=function(e){var t=e.disabled,n=e.value,o=e.onChange,c=e.dateFormat,l=e.label,f=e.describedBy,d=e.error,p=e.onFocus,b=e.onKeyDown,h=e.errorPosition,m=e.placeHolder,y=a()("bwf-calendar-input",{"is-empty":0===n.length,"is-error":d}),v=Object(i.uniqueId)("_woo-dates-input"),g=Object(r.useRef)(null);return Object(r.createElement)("div",{className:y},Object(r.createElement)("input",{type:"text",ref:g,className:"bwf-calendar-input-text",value:n,onChange:o,"aria-label":l,id:v,"aria-describedby":"".concat(v,"-message"),placeholder:Object(i.isEmpty)(m)?c.toLowerCase():m,onFocus:p,onKeyDown:b,disabled:t}),d&&Object(r.createElement)(s.a,{className:"bwf-calendar-input-error",focusOnMount:!1,position:h},d),Object(r.createElement)("span",{className:"bwf-calender-custom-icon",onClick:function(){p(),g.current&&g.current.focus()}},Object(r.createElement)(u.a,{icon:"calender"})),Object(r.createElement)("p",{className:"screen-reader-text",id:"".concat(v,"-message")},d||f))};d.propTypes={disabled:l.a.bool,value:l.a.string,onChange:l.a.func.isRequired,dateFormat:l.a.string.isRequired,label:l.a.string.isRequired,describedBy:l.a.string.isRequired,error:l.a.string,errorPosition:l.a.string,onFocus:l.a.func,onKeyDown:l.a.func};var p={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:i.noop};t.a=Object(f.a)(d,p)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(0),o=(n(304),n(305),n(1)),a=n(9),i=n(2),c=n(58),l=n(13),u=n.n(l),s=n(15),f=n.n(s),d=n(82),p=n(7),b=n.n(p),h=(n(269),n(288)),m=n(273),y=n(3),v=n(83);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(f,e);var t,n,a,s=j(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this,e)).onDateChange=t.onDateChange.bind(E(t)),t.onInputChange=t.onInputChange.bind(E(t)),t}return t=f,(n=[{key:"handleKeyDown",value:function(e,t,n){var r=n.keyCode;c.TAB===r&&e&&t()}},{key:"handleFocus",value:function(e,t){e||t()}},{key:"onDateChange",value:function(e,t){var n=this.props,r=n.onUpdate,o=n.dateFormat,a=u()(t);r({date:a,text:t?a.format(o):"",error:null}),e()}},{key:"onInputChange",value:function(e){var t=e.target.value,n=this.props.dateFormat,r=Object(d.i)(n,t),o=r?null:d.b.invalid;this.props.onUpdate({date:r,text:t,error:t.length>0?o:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.date,a=t.disabled,c=t.text,s=t.dateFormat,f=t.error,d=t.isInvalidDate,p=t.placeHolder,m=t.position,y=void 0===m?"bottom center":m,g=t.hasValue,O=void 0!==g&&g,w=t.className,j=(Object(l.isMoment)(n)?n.isValid():u()(n).isValid())?n:"";return Object(r.createElement)("div",{className:b()("bwf-specific-date",{"bwf-has-value":O})},Object(r.createElement)(v.a,{position:y,focusOnMount:!1,contentClassName:"bwf-filters-date-content ".concat(w),renderToggle:function(t){var n=t.isOpen,l=t.onToggle;return Object(r.createElement)(h.a,{disabled:!!n&&a,value:c,onChange:e.onInputChange,dateFormat:s,label:Object(o.__)("Choose a date","funnel-builder"),error:f,describedBy:Object(o.sprintf)(Object(o.__)("Date input describing a selected date in format %s","funnel-builder"),s),onFocus:Object(i.partial)(e.handleFocus,n,l),"aria-expanded":n,focusOnMount:!1,onKeyDown:Object(i.partial)(e.handleKeyDown,n,l),errorPosition:"top center",placeHolder:p})},renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(k,{onToggle:n,date:j,isInvalidDate:d,onDateChange:e.onDateChange})}}))}}])&&O(t.prototype,n),a&&O(t,a),f}(r.Component),k=function(e){var t=e.onToggle,n=e.date,o=e.onDateChange,c=e.isInvalidDate,l=Object(r.useRef)();return Object(y.sb)(l,(function(){return t()})),Object(r.createElement)("div",{ref:l},Object(r.createElement)(m.b,{component:!1},Object(r.createElement)("div",{className:"bwf-calendar-react-dates is-core-datepicker"},Object(r.createElement)(a.DatePicker,{currentDate:n,onChange:Object(i.partial)(o,t),isInvalidDate:c}))))};x.propTypes={date:f.a.oneOfType([f.a.string,f.a.object]),disabled:f.a.bool,text:f.a.string,error:f.a.string,onUpdate:f.a.func.isRequired,dateFormat:f.a.string.isRequired,isInvalidDate:f.a.func},t.b=x},,,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(7),i=n.n(a),c=n(2),l=n(15),u=n.n(l),s=n(330),f=n(74),d=n(65),p=function(e){var t=e.children;return Object(r.createElement)("div",{className:"bwf-ellipsis-menu__title"},t)};p.propTypes={children:u.a.node};var b=p,h=n(319),m=n(312),y=n(338),v=function(e){var t=e.data;return Object(r.createElement)("ul",{className:"bwf-table-summary bwf-display-flex"},t.map((function(e,t){var n=e.label,o=e.value;return Object(r.createElement)("li",{className:"bwf-table-summary-item",key:t},Object(r.createElement)("span",{className:"bwf-table-summary-value"},o),Object(r.createElement)("span",{className:"bwf-table-summary-label"},n))})))};v.propTypes={data:u.a.array};var g=v,O=(n(364),n(262));function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(u,e);var t,n,a,l=x(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=(t=l.call(this,e)).getShowCols(e.headers);return t.state={showCols:n},t.onColumnToggle=t.onColumnToggle.bind(C(t)),t.onPageChange=t.onPageChange.bind(C(t)),t}return t=u,(n=[{key:"componentDidUpdate",value:function(e){var t=e.headers,n=e.query,r=this.props,o=r.headers,a=r.onColumnsChange,i=r.query,l=this.state.showCols;if(Object(c.isEqual)(o,t)||this.setState({showCols:this.getShowCols(o)}),i.orderby!==n.orderby&&!l.includes(i.orderby)){var u=l.concat(i.orderby);this.setState({showCols:u}),a(u)}}},{key:"getShowCols",value:function(e){return e.map((function(e){var t=e.key,n=e.visible;return!(void 0!==n&&!n)&&t})).filter(Boolean)}},{key:"getVisibleHeaders",value:function(){var e=this.props.headers,t=this.state.showCols;return e.filter((function(e){var n=e.key;return t.includes(n)}))}},{key:"getVisibleRows",value:function(){var e=this.props,t=e.headers,n=e.rows,r=this.state.showCols;return n.map((function(e){return t.map((function(t,n){var o=t.key;return r.includes(o)&&e[n]})).filter(Boolean)}))}},{key:"onColumnToggle",value:function(e){var t=this,n=this.props,r=n.headers,o=n.query,a=n.onQueryChange,i=n.onColumnsChange;return function(){t.setState((function(t){if(t.showCols.includes(e)){if(o.orderby===e){var n=Object(c.find)(r,{defaultSort:!0})||Object(c.first)(r)||{};a("sort")(n.key,"desc")}var l=Object(c.without)(t.showCols,e);return i(l,e),{showCols:l}}var u=[].concat(j(t.showCols),[e]);return i(u,e),{showCols:u}}))}}},{key:"onPageChange",value:function(){var e=this.props,t=e.onPageChange,n=e.onQueryChange;t&&t.apply(void 0,arguments),n&&n("paged").apply(void 0,arguments)}},{key:"render",value:function(){var e=this,t=this.props,n=t.actions,a=t.className,c=t.isLoading,l=t.onQueryChange,u=t.onSort,p=t.query,v=t.rowHeader,O=t.rowsPerPage,w=t.showMenu,j=t.summary,_=t.title,E=t.totalRows,S=t.rowClasses,x=t.emptyMessage,k=t.filterColumnIcon,C=void 0===k?"":k,P=t.extraSectionBeforefilterCol,N=t.hideHeader,T=t.footer,D=t.showPagination,I=void 0===D||D,A=t.id,R=t.perPageOptions,M=this.state.showCols,F=this.props.headers,L=this.getVisibleHeaders(),B=this.getVisibleRows(),q=i()("bwf-table","bwf-analytics-card",a,{"bwf-table-placeholder":c});return Object(r.createElement)(s.a,{className:q,title:_,action:n,hideHeader:N&&"yes"==N?"yes":"no",footer:T,menu:!(!P&&!w)&&Object(r.createElement)("div",null,P,w&&Object(r.createElement)(f.a,{label:Object(o.__)("Choose which values to display","funnel-builder"),buttonIcon:C,renderContent:function(){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(b,null,Object(o.__)("Columns:","funnel-builder")),F.map((function(t){var n=t.key,o=t.label;return t.required?null:Object(r.createElement)(d.a,{checked:M.includes(n),isCheckbox:!0,isClickable:!0,key:n,onInvoke:e.onColumnToggle(n)},o)})))}})),belowHeader:!!this.props.beforeTable&&this.props.beforeTable,id:A},c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Your requested data is loading","funnel-builder")),Object(r.createElement)(y.a,{numberOfRows:O,headers:L,rowHeader:v,caption:_,query:p})):Object(r.createElement)(m.a,{rows:B,headers:L,rowHeader:v,caption:_,query:p,emptyMessage:x,onSort:u||l("sort"),rowClasses:S}),I&&!c&&Object(r.createElement)(h.a,{key:parseInt(p.paged,10)||1,page:parseInt(p.paged,10)||1,perPage:O,total:E,onPageChange:this.onPageChange,onPerPageChange:l("per_page"),perPageOptions:R}),j&&Object(r.createElement)(g,{data:j}))}}])&&E(t.prototype,n),a&&E(t,a),u}(r.Component);N.propTypes={headers:u.a.arrayOf(u.a.shape({hiddenByDefault:u.a.bool,defaultSort:u.a.bool,isSortable:u.a.bool,key:u.a.string,label:u.a.oneOfType([u.a.string,u.a.node]),required:u.a.bool})),ids:u.a.arrayOf(u.a.number),isLoading:u.a.bool,onQueryChange:u.a.func,onColumnsChange:u.a.func,onSort:u.a.func,query:u.a.object,rowHeader:u.a.oneOfType([u.a.number,u.a.bool]),rows:u.a.arrayOf(u.a.arrayOf(u.a.shape({display:u.a.node,value:u.a.oneOfType([u.a.string,u.a.number,u.a.bool])}))).isRequired,rowsPerPage:u.a.number.isRequired,showMenu:u.a.bool,summary:u.a.arrayOf(u.a.shape({label:u.a.node,value:u.a.oneOfType([u.a.string,u.a.number])})),totalRows:u.a.oneOfType([u.a.number,u.a.string]).isRequired,rowClasses:u.a.arrayOf(u.a.string),showPagination:u.a.bool};var T={isLoading:!1,onQueryChange:function(){return function(){}},onColumnsChange:function(){},onSort:void 0,query:{},rowHeader:0,rows:[],showMenu:!0,rowClasses:[],showPagination:!0};t.a=Object(O.a)(N,T)},function(e,t,n){},,function(e,t,n){var r;try{r={clone:n(659),constant:n(470),each:n(524),filter:n(527),has:n(537),isArray:n(278),isEmpty:n(705),isFunction:n(443),isUndefined:n(538),keys:n(327),map:n(539),reduce:n(541),size:n(708),transform:n(714),union:n(715),values:n(546)}}catch(e){}r||(r=window._),e.exports=r},,,function(e,t,n){var r;try{r=n(657)}catch(e){}r||(r=window.graphlib),e.exports=r},,,,function(e,t,n){"use strict";var r=n(9),o=n(0),a=n(7),i=n.n(a),c=n(275),l=n(80),u=n(261),s=n(2),f=n(314),d=["ajax_cb","options"];function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var y=n(272),v=["value","onChange","id","label","className"];function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var w=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,a=e.id,c=e.label,l=e.className,u=O(e,v);function s(e){r(e,a)}return Object(o.createElement)("div",{className:i()("components-richeditor",l)},c&&Object(o.createElement)("label",{className:"components-label components-richeditor-label",htmlFor:a},c),Object(o.createElement)(y.a,g({content:n,value:n,setContent:s,onChange:s,keyid:a},u)))},j=n(5),_=function(e){var t=e.label,n=e.copy_text;return Object(o.createElement)("div",{className:i()("components-copier")},t&&Object(o.createElement)("label",{className:"components-label"},t),n&&Object(o.createElement)("div",{className:"bwf-display-flex"},Object(o.createElement)("span",{className:"bwf-copier-text"},n," "),Object(o.createElement)(r.Button,{className:"bwf-copier-icon",isSecondary:!0,onClick:function(){return e=n,(t=document.createElement("textarea")).value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),void document.body.removeChild(t);var e,t}},Object(o.createElement)(j.a,{icon:"duplicate",size:20}),"Copy")))},E=n(264),S=n(268),x=n(1),k=(n(309),n(3)),C=n(262);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e,t){var n;if(Object(s.isObject)(e))return e;if(Object(s.isString)(e)){var r,o=e.split(" ");return I(r={},t.attrTop,Object(s.isEmpty)(o[0])?"0":o[0]),I(r,t.attrRight,Object(s.isEmpty)(o[1])?"0":o[1]),I(r,t.attrBottom,Object(s.isEmpty)(o[2])?"0":o[2]),I(r,t.attrLeft,Object(s.isEmpty)(o[3])?"0":o[3]),r}return I(n={},t.attrTop,"0"),I(n,t.attrRight,"0"),I(n,t.attrBottom,"0"),I(n,t.attrLeft,"0"),n},R={label:Object(x.__)("Padding","funnel-builder"),type:"padding",units:["px","em","%"],unit:"px",min:-250,max:1e3,labelTop:Object(x.__)("Top","funnel-builder"),labelRight:Object(x.__)("Right","funnel-builder"),labelBottom:Object(x.__)("Bottom","funnel-builder"),labelLeft:Object(x.__)("Left","funnel-builder"),attrTop:"top",attrRight:"right",attrBottom:"bottom",attrLeft:"left",value:{},attrKey:"",attrUnit:"unit"},M=Object(C.a)((function(e){var t,n=e.value,a=void 0===n?{}:n,c=e.label,l=e.type,u=e.onChange,f=void 0===u?s.noop:u,d=(e.defaultSync,A(a,e)),p="",b=T(Object(o.useState)(!Object(k.k)(Object.values(d))),2),h=b[0],m=b[1],y=T(Object(o.useState)(Object(s.cloneDeep)(Object(s.defaultsDeep)(d,(I(t={},e.attrTop,"0"),I(t,e.attrRight,"0"),I(t,e.attrBottom,"0"),I(t,e.attrLeft,"0"),t)))),2),v=y[0],g=y[1];p=v&&v[e.attrUnit]?v[e.attrUnit]:"px",Object(o.useEffect)((function(){g(N(N({},v),A(a,e)))}),[a]),Object(o.useEffect)((function(){var t;g(Object(s.cloneDeep)(Object(s.defaultsDeep)(d,(I(t={},e.attrTop,"0"),I(t,e.attrRight,"0"),I(t,e.attrBottom,"0"),I(t,e.attrLeft,"0"),t)))),p=v&&v[e.attrUnit]?v[e.attrUnit]:"px"}),[]);var O=function(t,n){var r=t.target.value;if(h)!function(t){"padding"===l&&(t=t.toString().replace(/-/g,""));var n=N({},v);if(n[e.attrTop]=t,n[e.attrRight]=t,n[e.attrBottom]=t,n[e.attrLeft]=t,Object(s.isString)(a)){var r="".concat(n[e.attrTop]," ").concat(n[e.attrRight]," ").concat(n[e.attrBottom]," ").concat(n[e.attrLeft]);f(r)}else f(n)}(r);else{"padding"===l&&(r=r.toString().replace(/-/g,""));var o=N({},v);if(o[n]=r,Object(s.isString)(a)){var i="".concat(o[e.attrTop]," ").concat(o[e.attrRight]," ").concat(o[e.attrBottom]," ").concat(o[e.attrLeft]);f(i)}else f(o)}};return Object(o.createElement)("div",{className:"bwf-dimensions-control-component"},c&&Object(o.createElement)("label",{className:"components-base-control__label"},c),Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{className:"components-bwf-dimensions-control__inputs"},Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return O(t,e.attrTop)},"aria-label":Object(x.sprintf)(Object(x.__)("%s Top","funnel-builder"),c),value:v&&v[e.attrTop],min:"padding"===e.type?0:"%"===p?-100:e.min,max:"%"===p?100:e.max,"data-attribute":l}),Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return O(t,e.attrRight)},"aria-label":Object(x.sprintf)(Object(x.__)("%s Top","funnel-builder"),c),value:v&&v[e.attrRight],min:"padding"===e.type?0:"%"===p?-100:e.min,max:"%"===p?100:e.max,"data-attribute":l}),Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return O(t,e.attrBottom)},"aria-label":Object(x.sprintf)(Object(x.__)("%s Top","funnel-builder"),c),value:v&&v[e.attrBottom],min:"padding"===e.type?0:"%"===p?-100:e.min,max:"%"===p?100:e.max,"data-attribute":l}),Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return O(t,e.attrLeft)},"aria-label":Object(x.sprintf)(Object(x.__)("%s Top","funnel-builder"),c),value:v&&v[e.attrLeft],min:"padding"===e.type?0:"%"===p?-100:e.min,max:"%"===p?100:e.max,"data-attribute":l}),Object(o.createElement)(r.Button,{className:i()("components-bwf-dimensions-control_reset",{"is-lock":h}),label:Object(x.__)("Reset","funnel-builder"),onClick:function(){return m((function(e){return!e}))},isSmall:!0},Object(o.createElement)(j.a,{icon:h?"lock":"unlock",size:"16"}))),Object(o.createElement)("div",{className:"components-bwf-dimensions-control__input-labels"},Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelTop),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelRight),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelBottom),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelLeft),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"}))))}),R),F=n(43);n(310);function L(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q=[{id:"h-offset",selectindex:0,label:Object(x.__)("H Offset","funnel-builder"),allownegative:!0},{id:"v-offset",selectindex:1,label:Object(x.__)("V Offest","funnel-builder"),allownegative:!0},{id:"blur",selectindex:2,label:Object(x.__)("Blur","funnel-builder")},{id:"spread",selectindex:3,label:Object(x.__)("Spread","funnel-builder")},{id:"color",selectindex:4,label:Object(x.__)("Color","funnel-builder"),type:"color"},{id:"inset",selectindex:5,label:Object(x.__)("Enable Box Shadow Inset","funnel-builder"),type:"toggle"}],z=function e(t){var n=t.typography,r=t.setTypography,a=t.settingOptions,i=t.label,c=Object(F.useInstanceId)(e,"bwf-field-item");return Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{className:"bwf-box-shadow-control-component ",id:c},i&&Object(o.createElement)("label",{className:"components-base-control__label"},i),Object(o.createElement)("div",{className:"components-bwf-box-shadow-control__inputs "},a.map((function(e){return e.type?"color"===e.type?"":void 0:Object(o.createElement)("div",{className:"bwf-input bwf-"+e.id,key:e.id},Object(o.createElement)("input",{type:"number",value:n[e.selectindex],id:e.id,min:"-200",max:"200",className:"components-bwf-box-shadow-control__number ",onChange:function(t){var o=t.target.value;o=e.hasOwnProperty("allownegative")&&e.allownegative?t.target.value:o<0?0:o;var a=L(n);a[e.selectindex]=o,r(a)}}),Object(o.createElement)("label",{htmlFor:e.id},e.label))})))),Object(o.createElement)("div",{className:"bwf-shadow-color-wrapper",key:"color"},"",Object(o.createElement)("label",{className:"components-base-control__label"},Object(x.__)("Shadow Color","funnel-builder")),Object(o.createElement)(S.a,{value:n[4],onChange:function(e){var t=L(n);t[4]=e,r(t)}})))},U=function(e){var t=e.value,n=void 0===t?{}:t,r=e.label,a=n.h_offset,i=void 0===a?"":a,c=n.v_offset,l=void 0===c?"":c,u=n.blur,s=void 0===u?"":u,f=n.spread,d=void 0===f?"":f,p=n.color,b=void 0===p?"":p,h=n.inset,m=[i,l,s,d,b,void 0===h?"":h];return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(z,{typography:m,setTypography:function(t){var n={h_offset:t[0],v_offset:t[1],blur:t[2],spread:t[3],color:t[4],inset:t[5]};e.onChange(n)},settingOptions:q,label:r}))};n(311);function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=function(e){var t=e.value,n=e.onChange,a=e.label,i=e.defaultCustomValue,c=V(Object(o.useState)(""),2),l=c[0],f=c[1],d=V(Object(o.useState)(""),2),p=d[0],b=d[1];return Object(o.useEffect)((function(){Object(s.isEmpty)(p)&&(Object(s.isEmpty)(null==t?void 0:t.toString())?(b("auto"),f("100%")):(b("custom"),f(t)))}),[t]),Object(o.createElement)(o.Fragment,null,a&&Object(o.createElement)("label",{className:"components-base-control__label"},a),Object(o.createElement)("div",{className:"bwf-width-control"},Object(o.createElement)(r.TextControl,H({value:l,onChange:function(e){n(e),f(e)},disabled:"auto"===p},"custom"===p&&{type:"number",min:"0"})),Object(o.createElement)(u.a,{options:[{key:"auto",label:Object(x.__)("Auto","funnel-builder")},{key:"custom",label:Object(x.__)("Custom","funnel-builder")}],selected:p,onChange:function(e){b(e),"auto"===e?(n(""),f("100%")):(n(Object(s.isEmpty)(null==t?void 0:t.toString())?i:t),f(i))}})))},X=n(63),$=["label","tooltip"];function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ee(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var te={checkbox:l.a,radio:E.a,select:u.b,textarea:r.TextareaControl,text:r.TextControl,input:r.TextControl,checklist:c.a,ajax:function(e){var t=e.ajax_cb,n=e.options,r=void 0===n?[]:n,a=m(e,d),i=b(Object(o.useState)(r),2),c=i[0],l=i[1],u=b(Object(o.useState)(!1),2),h=u[0],y=u[1];Object(o.useEffect)((function(){Object(s.isEmpty)(c)&&v()}),[c]);var v=function(){return new Promise((function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:t,dataType:"json",contentType:"application/json"},success:function(e){var t=Array.isArray(e.results)?e.results:[];t=t.map((function(e){return"object"!==e.value&&(e.key||"object"===e.value||(e.key=e.value),e.value={id:e.value}),e})),l(t),y(!0)}})}))};return Object(o.createElement)(o.Fragment,null,h?Object(o.createElement)(f.a,p({options:c},a)):Object(o.createElement)("div",{className:"setting-form-field"},Object(o.createElement)("div",{className:"is-placeholder long"})))},richeditor:w,richtext:w,copier:_,color:S.a,toggle:r.ToggleControl,"bwf-toggle":function(e){var t=e.label,n=e.tooltip,a=ee(e,$);return Object(o.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(o.createElement)("div",{className:"bwf-flex bwf--g4"},Object(o.createElement)("label",null,t),!Object(s.isEmpty)(n)&&Object(o.createElement)(X.a,{toolTipText:n,size:280,position:"bottom right"},Object(o.createElement)(j.a,{icon:"info",size:16}))),Object(o.createElement)(r.ToggleControl,J({},a,{className:"bwf-tooglecontrol-advance"})))},"dimension-control":M,"box-shadow":U,"bwf-label":function(e){var t=e.label,n=e.class;return Object(o.createElement)("span",{className:i()("bwf_label",n)},t)},width:K};t.a=function(e){var t=e.input,n=e.formProps,a=e.values,c=e.customMapField,l=void 0===c?{}:c,u=Q(Q({},te),l),f=u.text;if(t.type.toLowerCase()in u&&(f=u[t.type.toLowerCase()]),t.ajax_cb&&(f=u.ajax),"select"===t.type&&t.multiple&&!Object(s.isEmpty)(a)){var d=a[t.id];if(Object(s.isEmpty)(d))a[t.id]=[];else if(!Object(s.isEmpty)(t.options)&&"string"==typeof d[0]){var p=[];t.options.forEach((function(e){if(void 0===e.key)if("string"==typeof e.value&&d.includes(e.value)){var t={};t.key=e.value,t.label=e.label,t.value={id:e.value},p.push(t)}else if("string"==typeof e.value.id&&d.includes(e.value.id)){var n={};n.key=e.value,n.label=e.label,n.value={id:e.value},p.push(n)}})),a[t.id]=p}}var b,h;return Object(o.createElement)("div",{className:i()("form-group",t.class,"text"!==t.type&&"field--"+t.type,{"inline-group":!t.label})},"disabled"===t.type?Object(o.createElement)(r.TextControl,{disabled:!0,value:t.value,label:t.label}):Object(o.createElement)(f,Q(Q({label:t.label},(b=t,h=Object.assign({},b.props),b.type.toLowerCase()in u||(h.type=b.type.toLowerCase()),h.placeholder=b.placeholder,h.options=b.options,b.checkboxlabel&&(h.checkboxlabel=b.checkboxlabel),b.multiple&&(h.multiple=b.multiple),b.ajax_cb&&(h.ajax_cb=b.ajax_cb),"copier"===b.type&&(h=b),"width"===b.type&&(h=b),"color"===b.type&&(h=b,b.isHover&&b.hoverKey&&(h.hoverVal=a[b.hoverKey])),"richeditor"!==b.type&&"richtext"!==b.type&&"textarea"!==b.type||(h=b),"number"===b.type&&(h.min=b.min,h.max=b.max),"select"===b.type&&(h.excludeSelectedOptions=!1,h.options&&(h.options=h.options.map((function(e){return"object"!==G(e.value)&&(e.key="object"!==G(e.value)?e.value:e.key,e.value={id:e.value}),e}))),b.multiple&&(h.excludeSelectedOptions=!0,h.inlineTags=!0)),"richeditor"===b.type&&(h.id=b.id),"bwf-toggle"===b.type&&(h.tooltip=b.tooltip),"input"!==b.type&&"text"!==b.type&&"textarea"!==b.type||(h.placeholder=Object(x.__)("Type here","funnel-builder")),"text"===b.type&&b.disabled&&(h.disabled=b.disabled),"toggle"===b.type&&(h.className="bwf-tooglecontrol-advance",h.tooltip=b.tooltip,h.label=b.label),h.keyid=b.key,h)),n)),t.hint&&Object(o.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:t.hint}}))}},,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(7),i=n.n(a),c=n(15),l=n.n(c),u=n(1),s=n(9),f=n(43),d=n(590),p=n(591),b=n(592),h=n(5),m=n(21),y=n(262);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,e);var t,n,a,c=j(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={tabIndex:null,isScrollableRight:!1,isScrollableLeft:!1},t.container=Object(r.createRef)(),t.sortBy=t.sortBy.bind(E(t)),t.updateTableShadow=t.updateTableShadow.bind(E(t)),t}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.container.current,t=e.scrollWidth>e.clientWidth;this.setState({tabIndex:t?"0":null}),this.updateTableShadow(),window.addEventListener("resize",this.updateTableShadow)}},{key:"componentDidUpdate",value:function(){this.updateTableShadow()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateTableShadow)}},{key:"sortBy",value:function(e){var t=this,n=this.props,r=n.headers,a=n.query;return function(){var n=a.orderby||Object(o.get)(Object(o.find)(r,{defaultSort:!0}),"key",!1),i=a.order||Object(o.get)(Object(o.find)(r,{key:n}),"defaultOrder","desc"),c="desc";e===n&&(c="desc"===i?"asc":"desc"),t.props.onSort(e,c)}}},{key:"updateTableShadow",value:function(){var e=this.container.current,t=this.state,n=t.isScrollableRight,r=t.isScrollableLeft,o=e.scrollWidth-e.scrollLeft<=e.offsetWidth;o&&n?this.setState({isScrollableRight:!1}):o||this.state.isScrollableRight||this.setState({isScrollableRight:!0});var a=e.scrollLeft<=0;a&&r?this.setState({isScrollableLeft:!1}):a||r||this.setState({isScrollableLeft:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.ariaHidden,a=t.caption,c=t.classNames,l=t.headers,f=t.instanceId,y=t.query,v=t.rowHeader,O=t.rows,w=t.rowClasses,j=t.emptyMessage,_=this.state,E=_.isScrollableRight,S=_.isScrollableLeft,x=_.tabIndex,k=i()("bwf-table-table",c,{"is-scrollable-right":E,"is-scrollable-left":S,"is-empty-data":!N}),C=y.orderby||Object(o.get)(Object(o.find)(l,{defaultSort:!0}),"key",!1),P=y.order||Object(o.get)(Object(o.find)(l,{key:C}),"defaultOrder","desc"),N=!!O.length;return Object(r.createElement)("div",{className:k,ref:this.container,tabIndex:x,"aria-hidden":n,"aria-labelledby":"caption-".concat(f),role:"group",onScroll:this.updateTableShadow},Object(r.createElement)("table",{width:"100%"},Object(r.createElement)("caption",{id:"caption-".concat(f),className:"bwf-table-caption screen-reader-text"},a,"0"===x&&Object(r.createElement)("small",null,Object(u.__)("(scroll to see more)","funnel-builder"))),Object(r.createElement)("tbody",null,Object(r.createElement)("tr",null,l.map((function(t,n){var a=t.cellClassName,c=t.isSortable,l=t.isNumeric,h=t.key,y=t.label,v=t.screenReaderLabel,O=t.isPro,w="header-".concat(f,"-").concat(n),j={className:i()("bwf-table-header",a,{"is-sortable":c,"is-sorted":C===h,"is-numeric":l})};c&&(j["aria-sort"]="none",C===h&&(j["aria-sort"]="asc"===P?"ascending":"descending"));var _=C===h&&"asc"!==P?Object(u.sprintf)(Object(u.__)("Sort by %s in ascending order","funnel-builder"),v):Object(u.sprintf)(Object(u.__)("Sort by %s in descending order","funnel-builder"),v),E=Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{"aria-hidden":Boolean(v)},y),O&&Object(r.createElement)(m.b,null),v&&Object(r.createElement)("span",{className:"screen-reader-text"},v));return Object(r.createElement)("th",g({role:"columnheader",scope:"col",key:n},j),c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Button,{"aria-describedby":w,onClick:N?e.sortBy(h):o.noop},E,C===h&&"asc"===P?Object(r.createElement)(d.a,{icon:p.a}):Object(r.createElement)(d.a,{icon:b.a})),Object(r.createElement)("span",{className:"screen-reader-text",id:w},_)):E)}))),N?O.map((function(e,t){return Object(r.createElement)("tr",{key:t,className:w[t]},e.map((function(e,t){var o=l[t],a=o.cellClassName,c=(o.isLeftAligned,o.isNumeric),u=o.isPro,s=v===t,f=s?"th":"td",d=i()("bwf-table-item",a,{"is-conversion":"conversion"===l[t].key,"is-numeric":c,"is-sorted":C===l[t].key});return Object(r.createElement)(f,{scope:s?"row":null,key:t,className:d},u&&!n?"-":function(e){return e.display||null}(e))})))})):Object(r.createElement)("tr",{className:"bwf-table-empty"},Object(r.createElement)("td",{className:"bwf-table-empty-item",colSpan:l.length},Object(r.createElement)(h.a,{icon:"no-data",height:"82",width:"112"}),Object(r.createElement)("div",{className:"bwf-no-data"},Object(u.__)("No Data Available","funnel-builder")),j?Object(r.createElement)("div",{className:"bwf-info"},j):null)))))}}])&&O(t.prototype,n),a&&O(t,a),l}(r.Component);x.propTypes={ariaHidden:l.a.bool,className:l.a.string,headers:l.a.arrayOf(l.a.shape({defaultSort:l.a.bool,defaultOrder:l.a.string,isLeftAligned:l.a.bool,isNumeric:l.a.bool,isSortable:l.a.bool,key:l.a.string,label:l.a.node,required:l.a.bool,screenReaderLabel:l.a.string})),onSort:l.a.func,query:l.a.object,rows:l.a.arrayOf(l.a.arrayOf(l.a.shape({display:l.a.node,value:l.a.oneOfType([l.a.string,l.a.number,l.a.bool])}))).isRequired,rowHeader:l.a.oneOfType([l.a.number,l.a.bool]),rowClasses:l.a.arrayOf(l.a.string)};var k={ariaHidden:!1,headers:[],onSort:o.noop,query:{},rowHeader:0,rowClasses:[]};t.a=Object(f.withInstanceId)(Object(y.a)(x,k))},,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(7),i=n.n(a),c=n(2),l=n(15),u=n.n(l),s=n(9),f=n(43),d=n(58);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(l,e);var t,n,o,a=y(l);function l(){var e;return b(this,l),(e=a.apply(this,arguments)).handleKeyDown=e.handleKeyDown.bind(g(e)),e.select=e.select.bind(g(e)),e.optionRefs={},e.listbox=Object(r.createRef)(),e}return t=l,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,r=t.selectedIndex;Object(c.isEqual)(n,e.options)||(this.optionRefs={}),r!==e.selectedIndex&&this.scrollToOption(r)}},{key:"getOptionRef",value:function(e){return this.optionRefs.hasOwnProperty(e)||(this.optionRefs[e]=Object(r.createRef)()),this.optionRefs[e]}},{key:"select",value:function(e){var t=this.props.onSelect;e.isDisabled||t(e)}},{key:"scrollToOption",value:function(e){var t=this.listbox.current;if(!(t.scrollHeight<=t.clientHeight)&&this.optionRefs[e]){var n=this.optionRefs[e].current,r=t.clientHeight+t.scrollTop,o=n.offsetTop+n.offsetHeight;o>r?t.scrollTop=o-t.clientHeight:n.offsetTop<t.scrollTop&&(t.scrollTop=n.offsetTop)}}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.options,a=t.onSearch,i=t.selectedIndex,c=t.setExpanded;if(0!==o.length)switch(e.keyCode){case d.UP:n(),e.preventDefault(),e.stopPropagation();break;case d.DOWN:r(),e.preventDefault(),e.stopPropagation();break;case d.ENTER:this.select(o[i]),e.preventDefault(),e.stopPropagation();break;case d.LEFT:case d.RIGHT:c(!1);break;case d.ESCAPE:return c(!1),void a(null);case d.TAB:this.select(o[i]),c(!1),a(null)}}},{key:"toggleKeyEvents",value:function(e){this.props.node[e?"addEventListener":"removeEventListener"]("keydown",this.handleKeyDown,!0)}},{key:"componentDidMount",value:function(){this.toggleKeyEvents(!0)}},{key:"componentWillUnmount",value:function(){this.toggleKeyEvents(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,o=t.listboxId,a=t.options,c=t.selectedIndex,l=t.staticList,u=i()("bwf-select-control-listbox",{"is-static":l});return Object(r.createElement)("div",{ref:this.listbox,id:o,role:"listbox",className:u,tabIndex:"-1"},a.map((function(t,o){return Object(r.createElement)(s.Button,{ref:e.getOptionRef(o),key:t.key,id:"bwf-select-control-option-".concat(n,"-").concat(t.key),role:"option","aria-selected":o===c,disabled:t.isDisabled,className:i()("bwf-select-control-option",{"is-selected":o===c}),onClick:function(){return e.select(t)},tabIndex:"-1"},t.label)})))}}])&&h(t.prototype,n),o&&h(t,o),l}(r.Component);w.propTypes={instanceId:u.a.number,listboxId:u.a.string,node:u.a.instanceOf(Element).isRequired,onSelect:u.a.func,options:u.a.arrayOf(u.a.shape({isDisabled:u.a.bool,key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,keywords:u.a.arrayOf(u.a.oneOfType([u.a.string,u.a.number])),label:u.a.oneOfType([u.a.string,u.a.object]),value:u.a.any})).isRequired,selectedIndex:u.a.number,staticList:u.a.bool};var j=w,_=n(132);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(l,e);var t,n,a,i=P(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).removeAll=t.removeAll.bind(T(t)),t.removeResult=t.removeResult.bind(T(t)),t}return t=l,(n=[{key:"removeAll",value:function(){(0,this.props.onChange)([])}},{key:"removeResult",value:function(e){var t=this;return function(){var n=t.props,r=n.selected,o=n.onChange,a=Object(c.findIndex)(r,{key:e});o([].concat(S(r.slice(0,a)),S(r.slice(a+1))))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.selected,a=t.showClearButton;return n.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-select-control-tags"},n.map((function(t,a){if(!t.label)return null;var i=Object(o.sprintf)(Object(o.__)("%1$s (%2$s of %3$s)","funnel-builder"),t.label,a+1,n.length);return Object(r.createElement)(_.a,{key:t.key,id:t.key,label:t.label,remove:e.removeResult,screenReaderLabel:i})}))),a&&Object(r.createElement)(s.Button,{className:"bwf-select-control-clear",isLink:!0,onClick:this.removeAll},Object(r.createElement)(s.Icon,{icon:"dismiss"}),Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Clear all","funnel-builder")))):null}}])&&k(t.prototype,n),a&&k(t,a),l}(r.Component);I.propTypes={onChange:u.a.func,onSelect:u.a.func,selected:u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string})),showClearButton:u.a.bool};var A=I,R=n(5);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(l,e);var t,n,a,c=z(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).state={isActive:!1},t.input=Object(r.createRef)(),t.updateSearch=t.updateSearch.bind(H(t)),t.onFocus=t.onFocus.bind(H(t)),t.onBlur=t.onBlur.bind(H(t)),t.onKeyDown=t.onKeyDown.bind(H(t)),t}return t=l,(n=[{key:"updateSearch",value:function(e){var t=this;return function(n){t.isBWFMaintainSingleTerm()||e(n.target.value)}}},{key:"onFocus",value:function(e){var t=this,n=this.props,r=n.isSearchable,o=n.setExpanded,a=n.showAllOnFocus,i=n.updateFilteredOptions;return function(n){t.setState({isActive:!0}),r&&a?(n.target.select(),i("")):r?e(n.target.value):o(!0)}}},{key:"onBlur",value:function(){var e=this.props.onBlur;"function"==typeof e&&e(),this.setState({isActive:!1})}},{key:"onKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.selected,a=t.onChange,i=t.query,c=t.setExpanded;d.BACKSPACE===e.keyCode&&!i&&o.length&&a(F(o.slice(0,-1))),d.DOWN===e.keyCode&&(r(),c(!0),e.preventDefault(),e.stopPropagation()),d.UP===e.keyCode&&(n(),c(!0),e.preventDefault(),e.stopPropagation())}},{key:"renderButton",value:function(){var e=this.props,t=e.multiple,n=e.selected;return t||!n.length?null:Object(r.createElement)("div",{className:"bwf-select-control-control-value"},n[0].label)}},{key:"renderInput",value:function(){var e=this.props,t=e.activeId,n=e.hasTags,o=e.inlineTags,a=e.instanceId,i=e.isExpanded,c=e.isSearchable,l=e.listboxId,u=e.onSearch,s=e.placeholder,f=e.searchInputType,d=this.state.isActive,p=this.isBWFMaintainSingleTerm();return Object(r.createElement)("input",{autoComplete:"off",className:"bwf-select-control-control-input",id:"bwf-select-control-".concat(a,"-control-input"),ref:this.input,type:c?f:"button",value:this.getInputValue(),placeholder:d&&!p?s:"",onChange:this.updateSearch(u),onFocus:this.onFocus(u),onBlur:this.onBlur,onKeyDown:this.onKeyDown,role:"combobox","aria-autocomplete":"list","aria-expanded":i,"aria-haspopup":"true","aria-owns":l,"aria-controls":l,"aria-activedescendant":t,"aria-describedby":n&&o?"search-inline-input-".concat(a):null})}},{key:"isBWFMaintainSingleTerm",value:function(){var e=this.props,t=e.selected;return!!e.bwfMaintainSingleTerm&&t.length>0}},{key:"getInputValue",value:function(){var e=this.props,t=e.isFocused,n=e.isSearchable,r=e.multiple,o=e.query,a=e.selected,i=a.length?a[0].label:"";return r||t?this.isBWFMaintainSingleTerm()?"":n&&t&&o?o:"":i}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.hasTags,c=t.help,l=t.inlineTags,u=t.instanceId,s=t.isSearchable,f=t.label,d=t.query,p=this.state.isActive;return Object(r.createElement)("div",{className:i()("components-base-control","bwf-select-control-control",n,{empty:!d||0===d.length,"is-active":p,"has-tags":l&&a,"with-value":this.getInputValue().length,"has-error":!!c}),onClick:function(){e.input.current.focus()}},s&&Object(r.createElement)(R.a,{icon:"search",size:18}),l&&Object(r.createElement)(A,this.props),Object(r.createElement)("div",{className:"components-base-control__field"},!!f&&Object(r.createElement)("label",{htmlFor:"bwf-select-control-".concat(u,"-control-input"),className:"components-base-control__label"},f),this.renderInput(),l&&Object(r.createElement)("span",{id:"search-inline-input-".concat(u),className:"screen-reader-text"},Object(o.__)("Move backward for selected items","funnel-builder")),!!c&&Object(r.createElement)("p",{id:"bwf-select-control-".concat(u,"__help"),className:"components-base-control__help"},c)))}}])&&B(t.prototype,n),a&&B(t,a),l}(r.Component);Y.propTypes={hasTags:u.a.bool,help:u.a.oneOfType([u.a.string,u.a.node]),inlineTags:u.a.bool,isSearchable:u.a.bool,instanceId:u.a.number,label:u.a.string,listboxId:u.a.string,onBlur:u.a.func,onChange:u.a.func,onSearch:u.a.func,placeholder:u.a.string,query:u.a.string,selected:u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string})),showAllOnFocus:u.a.bool,bwfMaintainSingleTerm:u.a.bool};var K=Y,X=(n(503),n(128));function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function W(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return re(this,n)}}function re(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(u,e);var t,n,a,l=ne(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),ie(oe(t=l.call(this,e)),"mounted",!0),t.state=J(J({},t.constructor.getInitialState()),{},{filteredOptions:[],selectedIndex:0}),t.bindNode=t.bindNode.bind(oe(t)),t.decrementSelectedIndex=t.decrementSelectedIndex.bind(oe(t)),t.incrementSelectedIndex=t.incrementSelectedIndex.bind(oe(t)),t.onAutofillChange=t.onAutofillChange.bind(oe(t)),t.updateFilteredOptions=Object(c.debounce)(t.updateFilteredOptions.bind(oe(t)),e.searchDebounceTime),t.search=t.search.bind(oe(t)),t.selectOption=t.selectOption.bind(oe(t)),t.setExpanded=t.setExpanded.bind(oe(t)),t}return t=u,a=[{key:"getInitialState",value:function(){return{isExpanded:!1,isFocused:!1,query:""}}}],(n=[{key:"bindNode",value:function(e){this.node=e}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelected(),t=this.props.multiple,n=this.constructor.getInitialState();!t&&e.length&&e[0].label&&(n.query=e[0].label),this.setState(n)}},{key:"handleFocusOutside",value:function(){this.reset()}},{key:"hasTags",value:function(){var e=this.props,t=e.multiple,n=e.selected;return!!t&&n.some((function(e){return Boolean(e.label)}))}},{key:"getSelected",value:function(){var e=this.props,t=e.multiple,n=e.options,r=e.selected;if(t||Array.isArray(r))return r;var o=n.find((function(e){return e.key===r}));return o?[o]:[]}},{key:"selectOption",value:function(e){var t=this.props,n=t.multiple,r=t.onChange,o=t.selected,a=this.state.query,i=n?[].concat(W(o),[e]):[e];this.reset(i),Array.isArray(o)?-1===Object(c.findIndex)(o,{key:e.key})&&r(i,a):o!==e.key&&r(e.key,a)}},{key:"decrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(0===e?t.length:e)-1:t.length-1;this.setState({selectedIndex:n})}},{key:"incrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(e+1)%t.length:0;this.setState({selectedIndex:n})}},{key:"announce",value:function(e){var t=this.props.debouncedSpeak;t&&(e.length?t(Object(o.sprintf)(Object(o._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length,"funnel-builder"),e.length),"assertive"):t(Object(o.__)("No results.","funnel-builder"),"assertive"))}},{key:"getOptions",value:function(){var e=this.props,t=e.isSearchable,n=e.options,r=this.state.filteredOptions;return t?r:n}},{key:"getFilteredOptions",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.props,r=n.excludeSelectedOptions,o=void 0===r||r,a=n.maxResults,i=void 0===a?10:a,c=n.onFilter,l=void 0===c?function(){}:c,u=this.getSelected().map((function(e){return e.key})),s=[],f=0;f<e.length;f++){var d=e[f];if(!o||!u.includes(d.key)){var p=d.keywords,b=void 0===p?[]:p;if("string"==typeof d.label&&(b=[].concat(W(b),[d.label])),s.push(d),i&&s.length===i)break}}return l(s,t)}},{key:"setExpanded",value:function(e){this.setState({isExpanded:e})}},{key:"search",value:function(e){this.setState({query:e,isFocused:!0}),this.updateFilteredOptions(e)}},{key:"updateFilteredOptions",value:function(e){var t=this,n=this.props,r=n.hideBeforeSearch,o=n.options,a=n.onSearch,i=this.activePromise=Promise.resolve(a(o,e)).then((function(n){if(i===t.activePromise&&t.mounted){var o=null===e||e.length||r?t.getFilteredOptions(n,e):n;t.setState({selectedIndex:0,filteredOptions:o,isExpanded:Boolean(o.length)},(function(){return t.announce(o)}))}}))}},{key:"onAutofillChange",value:function(e){var t=this.props.options,n=this.getFilteredOptions(t,e.target.value);1===n.length&&this.selectOption(n[0])}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.autofill,n=e.children,o=e.className,a=e.controlClassName,c=e.inlineTags,l=e.instanceId,u=e.isSearchable,s=e.options,f=this.state,d=f.isExpanded,p=f.isFocused,b=f.selectedIndex,h=this.hasTags(),m=(s[b]||{}).key,y=void 0===m?"":m,v=d?"bwf-select-control-listbox-".concat(l):null,g=d?"bwf-select-control-option-".concat(l,"-").concat(y):null;return Object(r.createElement)("div",{className:i()("bwf-select-control bwf-select-control-1",o,{"has-inline-tags":h&&c,"is-focused":p,"is-searchable":u}),ref:this.bindNode},t&&Object(r.createElement)("input",{onChange:this.onAutofillChange,name:t,type:"text",className:"bwf-select-control-autofill-input",tabIndex:"-1"}),n,Object(r.createElement)(K,G({},this.props,this.state,{activeId:g,className:a,hasTags:h,isExpanded:d,listboxId:v,onSearch:this.search,selected:this.getSelected(),setExpanded:this.setExpanded,updateFilteredOptions:this.updateFilteredOptions,decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm})),!c&&h&&Object(r.createElement)(A,G({},this.props,{selected:this.getSelected()})),d&&Object(r.createElement)(j,G({},this.props,this.state,{activeId:g,listboxId:v,node:this.node,onSelect:this.selectOption,onSearch:this.search,options:this.getOptions(),decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,setExpanded:this.setExpanded})))}}])&&ee(t.prototype,n),a&&ee(t,a),u}(r.Component);ce.propTypes={autofill:u.a.string,children:u.a.node,className:u.a.string,controlClassName:u.a.string,excludeSelectedOptions:u.a.bool,onFilter:u.a.func,getSearchExpression:u.a.func,help:u.a.oneOfType([u.a.string,u.a.node]),inlineTags:u.a.bool,isSearchable:u.a.bool,label:u.a.string,onChange:u.a.func,onSearch:u.a.func,options:u.a.arrayOf(u.a.shape({isDisabled:u.a.bool,key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,keywords:u.a.arrayOf(u.a.oneOfType([u.a.string,u.a.number])),label:u.a.oneOfType([u.a.string,u.a.object]),value:u.a.any})).isRequired,placeholder:u.a.string,searchDebounceTime:u.a.number,selected:u.a.oneOfType([u.a.string,u.a.arrayOf(u.a.shape({key:u.a.oneOfType([u.a.number,u.a.string]).isRequired,label:u.a.string}))]),maxResults:u.a.number,multiple:u.a.bool,showClearButton:u.a.bool,searchInputType:u.a.oneOf(["text","search","number","email","tel","url"]),hideBeforeSearch:u.a.bool,showAllOnFocus:u.a.bool,staticList:u.a.bool,bwfMaintainSingleTerm:u.a.bool};var le={autofill:null,excludeSelectedOptions:!0,getSearchExpression:c.identity,inlineTags:!1,isSearchable:!1,onChange:c.noop,onFilter:c.identity,onSearch:function(e){return Promise.resolve(e)},maxResults:0,multiple:!1,searchDebounceTime:0,searchInputType:"search",selected:[],showAllOnFocus:!1,showClearButton:!1,hideBeforeSearch:!1,staticList:!1,bwfMaintainSingleTerm:!1},ue=Object(X.a)(ce,le);t.a=Object(f.compose)([s.withSpokenMessages,f.withInstanceId,s.withFocusOutside])(ue)},,function(e,t,n){var r=n(688),o=n(698),a=n(345),i=n(278),c=n(703);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?i(e)?o(e[0],e[1]):r(e):c(e)}},,,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(9),i=n(7),c=n.n(i),l=n(15),u=n.n(l),s=n(2),f=(n(323),n(5)),d=n(261),p=n(262);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=[10,25,50,75,100],E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(u,e);var t,n,i,l=g(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={inputValue:t.props.page},t.previousPage=t.previousPage.bind(w(t)),t.nextPage=t.nextPage.bind(w(t)),t.onInputChange=t.onInputChange.bind(w(t)),t.onInputBlur=t.onInputBlur.bind(w(t)),t.perPageChange=t.perPageChange.bind(w(t)),t.selectInputValue=t.selectInputValue.bind(w(t)),t}return t=u,(n=[{key:"getPerPageOptions",value:function(){var e=this.props.perPageOptions;return[].concat(h(void 0===e?[]:e),_).sort((function(e,t){return e-t}))}},{key:"previousPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n-1<1||r(n-1,"previous")}},{key:"nextPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n+1>this.pageCount||r(n+1,"next")}},{key:"perPageChange",value:function(e){var t=this.props,n=t.onPerPageChange,r=t.onPageChange,o=t.total,a=t.page;n(parseInt(e,10));var i=Math.ceil(o/parseInt(e,10));a>i&&r(i)}},{key:"onInputChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"onInputBlur",value:function(e){var t=this.props,n=t.onPageChange,r=t.page,o=parseInt(e.target.value,10);o!==r&&Number.isFinite(o)&&o>0&&this.pageCount&&this.pageCount>=o&&n(o,"goto")}},{key:"selectInputValue",value:function(e){e.target.select()}},{key:"renderPageArrows",value:function(){var e=this.props,t=e.page,n=e.showPageArrowsLabel;if(this.pageCount<=1)return null;var i=c()("bwf-pagination-link",{"is-active":t>1}),l=c()("bwf-pagination-link",{"is-active":t<this.pageCount});return Object(r.createElement)("div",{className:"bwf-pagination-page-arrows"},n&&Object(r.createElement)("span",{className:"bwf-pagination-page-arrows-label",role:"status","aria-live":"polite"},Object(o.sprintf)(Object(o.__)("Page %d of %d","funnel-builder"),t,this.pageCount)),Object(r.createElement)("div",{className:"bwf-pagination-page-arrows-buttons"},Object(r.createElement)(a.Button,{className:i,disabled:!(t>1),onClick:this.previousPage,label:Object(o.__)("Previous Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-left",width:16})),Object(r.createElement)(a.Button,{className:l,disabled:!(t<this.pageCount),onClick:this.nextPage,label:Object(o.__)("Next Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-right",width:16,color:"#0073AA"}))))}},{key:"renderPerPagePicker",value:function(){var e,t=this.getPerPageOptions().map((function(e){return{key:e.toString(),label:e.toString()}}));return Object(r.createElement)("div",{className:"bwf-pagination-per-page-picker"},Object(r.createElement)(d.b,{selected:null===(e=this.props.perPage)||void 0===e?void 0:e.toString(),onChange:this.perPageChange,options:t,labelPosition:"side"}),Object(r.createElement)("label",{className:"bwf-pagination-per-page-picker__label"},Object(o.__)("Per Page","funnel-builder")))}},{key:"render",value:function(){var e=this.props,t=e.total,n=e.perPage,o=e.className,a=e.showPerPagePicker;this.pageCount=Math.ceil(t/n);var i=c()("bwf-pagination",o);return this.pageCount<=1?t>this.getPerPageOptions()[0]&&Object(r.createElement)("div",{className:i},this.renderPerPagePicker())||null:Object(r.createElement)("div",{className:i},this.renderPageArrows(),a&&this.renderPerPagePicker())}}])&&y(t.prototype,n),i&&y(t,i),u}(r.Component);E.propTypes={page:u.a.number.isRequired,onPageChange:u.a.func,perPage:u.a.number.isRequired,onPerPageChange:u.a.func,total:u.a.oneOfType([u.a.number,u.a.string]).isRequired,className:u.a.string,showPagePicker:u.a.bool,showPerPagePicker:u.a.bool,showPageArrowsLabel:u.a.bool};var S={onPageChange:s.noop,onPerPageChange:s.noop,showPagePicker:!1,showPerPagePicker:!0,showPageArrowsLabel:!0};t.a=Object(p.a)(E,S)},,,function(e,t,n){"use strict";var r=n(1);t.a={calendarLabel:Object(r.__)("Calendar","funnel-builder"),closeDatePicker:Object(r.__)("Close","funnel-builder"),focusStartDate:Object(r.__)("Interact with the calendar and select start and end dates.","funnel-builder"),clearDate:Object(r.__)("Clear Date","funnel-builder"),clearDates:Object(r.__)("Clear Dates","funnel-builder"),jumpToPrevMonth:Object(r.__)("Move backward to switch to the previous month.","funnel-builder"),jumpToNextMonth:Object(r.__)("Move forward to switch to the next month.","funnel-builder"),enterKey:Object(r.__)("Enter key","funnel-builder"),leftArrowRightArrow:Object(r.__)("Right and left arrow keys","funnel-builder"),upArrowDownArrow:Object(r.__)("up and down arrow keys","funnel-builder"),pageUpPageDown:Object(r.__)("page up and page down keys","funnel-builder"),homeEnd:Object(r.__)("Home and end keys","funnel-builder"),escape:Object(r.__)("Escape key","funnel-builder"),questionMark:Object(r.__)("Question mark","funnel-builder"),selectFocusedDate:Object(r.__)("Select the date in focus.","funnel-builder"),moveFocusByOneDay:Object(r.__)("Move backward (left) and forward (right) by one day.","funnel-builder"),moveFocusByOneWeek:Object(r.__)("Move backward (up) and forward (down) by one week.","funnel-builder"),moveFocusByOneMonth:Object(r.__)("Switch months.","funnel-builder"),moveFocustoStartAndEndOfWeek:Object(r.__)("Go to the first or last day of a week.","funnel-builder"),returnFocusToInput:Object(r.__)("Return to the date input field.","funnel-builder"),keyboardNavigationInstructions:Object(r.__)("Press the down arrow key to interact with the calendar and select a date.","funnel-builder"),chooseAvailableStartDate:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Select %s as a start date.","funnel-builder"),t)},chooseAvailableEndDate:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Select %s as an end date.","funnel-builder"),t)},chooseAvailableDate:function(e){return e.date},dateIsUnavailable:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("%s is not selectable.","funnel-builder"),t)},dateIsSelected:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Selected. %s","funnel-builder"),t)}}},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(34),i=n(15),c=n.n(i),l=n(7),u=n.n(l),s=(n(343),n(5)),f=["labels","isOpen","showIcon","hasValue"];function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var b=function(e){var t=e.labels,n=e.isOpen,i=e.showIcon,c=e.hasValue,l=p(e,f),b=u()("bwf-dropdown-button",{"is-open":n,"is-multi-line":t.length>1,"has-value":c});return Object(r.createElement)(o.Button,d({className:b,"aria-expanded":n},l),Object(r.createElement)("div",{className:"bwf-dropdown-button-labels"},t.map((function(e,t){return Object(r.createElement)("span",{key:t},Object(a.decodeEntities)(e))})),i&&Object(r.createElement)(s.a,{icon:"calender"})))};b.propTypes={labels:c.a.array.isRequired,isOpen:c.a.bool},t.a=b},function(e,t,n){var r=n(510),o=n(512),a=n(328);e.exports=function(e){return a(e)?r(e):o(e)}},,,function(e,t,n){"use strict";var r=n(0),o=n(7),a=n.n(o),i=n(15),c=n.n(i),l=(n(74),n(273));n(363);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,e);var t,n,o,i=p(c);function c(){return s(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.action,n=e.children,o=e.description,i=e.isInactive,c=e.menu,u=e.title,s=e.hideHeader,f=e.footer,d=e.id,p=a()("bwf-card",this.props.className,{"has-menu":!!c,"has-action":!!t,"is-inactive":!!i});return Object(r.createElement)("div",{className:p,id:d},s&&"no"==s&&(!!u||t||c)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-card-header"},!!u&&Object(r.createElement)("div",{className:"bwf-card-title-wrapper"},Object(r.createElement)("div",{className:"bwf-card-title bwf-card-header-item"},u),o&&Object(r.createElement)("div",{className:"bwf-card-description bwf-card-header-item"},o)),t&&Object(r.createElement)("div",{className:"bwf-card-action bwf-card-header-item"},t),c&&Object(r.createElement)("div",{className:"bwf-card-menu bwf-card-header-item"},c))),Object(r.createElement)(l.b,{className:"bwf-card-body"},n),f&&Object(r.createElement)("div",{className:"bwf-card-footer"},f))}}])&&f(t.prototype,n),o&&f(t,o),c}(r.Component);m.propTypes={action:c.a.node,className:c.a.string,description:c.a.oneOfType([c.a.string,c.a.node]),isInactive:c.a.bool,title:c.a.oneOfType([c.a.string,c.a.node])};t.a=m},,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(15),i=n.n(a),c=n(312);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=["numberOfRows"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,e);var t,n,a,i=v(l);function l(){return h(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.numberOfRows,a=void 0===n?5:n,i=b(t,u),l=Object(o.range)(a).map((function(){return e.props.headers.map((function(){return{display:Object(r.createElement)("span",{className:"is-placeholder"})}}))})),f=this.props.headers.map((function(e){return d(d({},e),{},{label:Object(r.createElement)("span",{className:"is-placeholder"})})}));return Object(r.createElement)(c.a,s({ariaHidden:!0,classNames:"is-loading",rows:l},i,{headers:f}))}}])&&m(t.prototype,n),a&&m(t,a),l}(r.Component);w.propTypes={query:i.a.object,headers:i.a.arrayOf(i.a.shape({hiddenByDefault:i.a.bool,defaultSort:i.a.bool,isSortable:i.a.bool,key:i.a.string,label:i.a.node,required:i.a.bool})),numberOfRows:i.a.number},t.a=w},function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(2),i=n(1),c=(n(384),n(15)),l=n.n(c),u=n(7),s=n.n(u),f=n(5),d=n(19),p=(n(42),n(262));function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e){var t=e.onSearch,n=e.isLoading,c=e.items,l=e.onItemClick,u=e.error,p=e.blurText,h=e.placeholder,m=void 0===h?Object(i.__)("Type to search","funnel-builder"):h,y=e.helpText,v=e.multiGroup,g=void 0!==v&&v,O=e.stepTitle,w=void 0===O?Object(i.__)("details","funnel-builder"):O,j=b(Object(r.useState)(""),2),_=j[0],E=j[1],S=b(Object(r.useState)(!1),2),x=S[0],k=S[1],C=Object(r.useRef)(null),P=function(e,t){l(e),k(!1),t.preventDefault()};Object(r.useEffect)((function(){p&&!x&&E(p)}),[p,x]);var N=Object(r.useRef)();return Object(r.useEffect)((function(){return jQuery("body").on("click",(function(e){jQuery(N.current).find(e.target).length>0?k(!0):k(!1)})),function(){jQuery("body").off("click")}}),[]),Object(r.createElement)("div",{className:s()("bwf-select-auto-box",{"has-help-text":y}),ref:N},Object(r.createElement)("span",{className:"bwf-select-auto-box__search-icon"},Object(r.createElement)(f.a,{icon:"search",height:"16",width:"16",color:d.TEXT_COLOR_3})),Object(r.createElement)("span",{className:"bwf-select-auto__angle-icon"},Object(r.createElement)(f.a,{icon:Object(a.isArray)(c)&&c.length>0&&x?"angle-up":"angle-down",height:"12",width:"12",color:d.TEXT_COLOR_2})),Object(r.createElement)(o.TextControl,{autoComplete:"off",value:_,onChange:function(e){return E(n=e),C.current&&clearTimeout(C.current),void(C.current=setTimeout((function(){return t(n)}),500));var n},placeholder:m}),(!Object(a.isArray)(c)||!!u)&&x&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},u),Object(a.isArray)(c)&&x&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},n?Object(r.createElement)("div",null,Object(i.__)("Fetching ".concat(w,""),"funnel-builder")):Object(r.createElement)("ul",null,g?c.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-suggestion-panel-".concat(t)},Object(r.createElement)("li",{className:"bwf-suggestion-panel__group"},e.name),e.steps.map((function(e){return Object(r.createElement)("li",{key:e.id,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,e.name))})))})):c.map((function(e){return Object(r.createElement)("li",{key:e.key,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,Object(i.__)(e.value,"funnel-builder")))}))))),y&&Object(r.createElement)("span",{className:"bwf-select-auto-box__helpText"},y))};m.propTypes={onSearch:l.a.func,isLoading:l.a.bool,items:l.a.oneOfType([l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,value:l.a.string.isRequired})),l.a.array]),onItemClick:l.a.func,onChange:l.a.func,error:l.a.any},t.a=Object(p.a)(m,{onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null})},,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(1),i=n(9),c=n(378),l=n(16),u=n(264),s=n(59),f=n(23);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=e.requestCreateStep,p=e.onRequestClose,b=e.onCreationScreen,h=e.creationSuccess,m=e.clearAndCloseEverything,y=e.isBusy,v=e.errors,g=Object(f.b)(),O=g.isProFeatureLocked,w=g.isBasic,j=Object(f.b)("ck").isProFeatureLocked,_=w&&"wc_checkout"===(null==t?void 0:t.type)?j:O,E=d(Object(r.useState)(""),2),S=E[0],x=E[1],k=d(Object(r.useState)(""),2),C=k[0],P=k[1],N=d(Object(r.useState)(null),2),T=N[0],D=N[1],I=d(Object(r.useState)(null!=v?v:{}),2),A=I[0],R=I[1],M=d(Object(r.useState)("new"),2),F=M[0],L=M[1],B=d(Object(r.useState)(!1),2),q=B[0],z=B[1];Object(r.useEffect)((function(){R(v)}),[v]),Object(r.useEffect)((function(){var e;P(null==T||null===(e=T.step)||void 0===e?void 0:e.name),"new"===F&&Object(o.isEmpty)(S.trim())||"existing"===F&&Object(o.isEmpty)(C)?z(!0):z(!1)}),[F,T,S,C]);var U=function(){if(!q){var t=e.errors;T&&T.copyFrom&&!T.step&&(t.copyFrom=Object(a.__)("Copy From: This field is required","funnel-builder")),0===Object(o.size)(t)?n({copyFrom:T&&T.hasOwnProperty("step")?T.step:null,title:"existing"===F?"".concat(C," Copy"):S}):R(t)}};return Object(r.createElement)(r.Fragment,null,A&&Object(o.size)(A)>0&&Object(r.createElement)(s.a,{status:"error",isDismissible:!0,onRemove:function(){return R({})}},Object(r.createElement)("ul",{className:"bwf-m-0"},Object.keys(A).map((function(e){return Object(r.createElement)("li",{className:"bwf-m-0",key:e},A[e])})))),y||!b||h?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("form",{method:"post",action:"",className:"bwf-funnel-add-step",onSubmit:function(e){U(),e.preventDefault()}},Object(r.createElement)(u.a,{options:[{value:"new",label:Object(a.__)("Create New","funnel-builder")},{value:"existing",label:Object(a.__)("Clone Existing","funnel-builder"),isPro:_}],selected:F,onChange:function(e){L(e)},className:"bwf-add-bump_radio-items"}),"new"===F?Object(r.createElement)(i.TextControl,{label:Object(a.__)("Name","funnel-builder"),placeholder:Object(a.__)("Enter Name","funnel-builder"),value:S,onChange:function(e){return x(e)}}):null,"existing"===F?Object(r.createElement)(c.a,{step:t,onStepSelected:function(e){return D(e)},showCheckbox:!1}):null,Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(l.a,{className:"bwf-modal-cancel-btn",onClick:p},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(l.a,{isPrimary:!0,onClick:U,disabled:q,isBusy:y,className:q?"bwf-no-ripple":""},Object(a.__)("Add","funnel-builder"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{marginTop:"-16px"}},Object(a.__)("Something went wrong, Pleas contact to support team","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(l.a,{isPrimary:!0,onClick:function(){p(),m()}},Object(a.__)("OK","funnel-builder")))))}},function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(1),i=n(3),c=n(7),l=n.n(c),u=n(5),s=n(10),f=n.n(s),d=n(367),p=n(85);function b(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isOpen,n=e.onRequestClose,c=h(Object(r.useState)({default_css:"",skin_all:{}}),2),s=c[0],m=c[1],y=h(Object(r.useState)(!0),2),v=y[0],g=y[1];return Object(r.useEffect)((function(){f()({path:Object(i.x)("/funnel-bump/skins/preview/")}).then((function(e){e.success&&m({skin_all:e.skin_all,default_css:e.default_css}),g(!1)})).catch((function(e){g(!1),console.log(e)}))}),[]),t&&Object(r.createElement)("div",{className:"bwf-order-bum-pro-modal"},Object(r.createElement)(o.Modal,{className:"bwf-admin-modal bwf-ob-pro-modal bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()}},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-modal-custom-header"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-modal-title"},Object(a.__)("Order Bump Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g16"},Object(r.createElement)(p.a,{isPrimary:!0,proLink:Object(i.S)(["Order","Bump","Template","Modal"])}),Object(r.createElement)("button",{className:"bwf-no-style-button",onClick:n},Object(r.createElement)(u.a,{icon:"cross",size:"24"})))),Object(r.createElement)("div",{className:l()("bwf-ob-pro-modal-content",{"is-placeholder":v}),style:{paddingTop:"1px"}},v?Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap"},b(new Array(8)).map((function(e,t){return Object(r.createElement)(d.a,{index:t,key:"ob-place-".concat(t)})}))):Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap",id:"wfob_wrap"},Object(r.createElement)("style",null,s.default_css),Object.keys(s.skin_all).map((function(e){var t=s.skin_all[e];return Object(r.createElement)("div",{className:"bwf_bump_skin_preview",key:e},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.dynamic_inline_css}}),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.html}}))}))," "))))}},function(e,t,n){},function(e,t,n){var r=n(510),o=n(670),a=n(328);e.exports=function(e){return a(e)?r(e,!0):o(e)}},function(e,t){e.exports=function(e){return e}},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return h}));var r=n(0),o=n(303),a=n(3),i=n(2),c=n(403),l=n(7),u=n.n(l),s={image:c.a},f=function(e,t,n,a){return e.map((function(e,c){return"richeditor"===e.type&&(e.openMergeTagModal=a,e.id="richeditor-".concat(c),e.toolbar="bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",e.quicktags=!0),Object(r.createElement)(r.Fragment,{key:c},(Object(i.isEmpty)(e.toggler)||d(t,e.toggler,e))&&Object(r.createElement)(o.a,{input:e,formProps:n(e.key),values:t,customMapField:s}))}))},d=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var o=0;o<r.length;o++)if(t.value.indexOf(r[o])>-1){n=!0;break}}else Object(a.y)(r)==Object(a.y)(t.value)&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n},p=function(e,t){if(e.selectors&&e.stylekey&&!Object(i.isEmpty)(e.value)){var n,r=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,o="".concat(e.stylekey,":").concat(e.value).concat(null!==(n=null==e?void 0:e.styleUnit)&&void 0!==n?n:"",";");-1!==t.search("".concat(r,"{"))?t=t.replace("".concat(r,"{"),"".concat(r,"{").concat(o)):t+="".concat(r,"{").concat(o,"}")}return t},b=function(e){return new Promise((function(t,n){var r="";e.forEach((function(e){switch(e.type){case"text":if(e.selectors){var t=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(t).html(e.value)}break;case"richtext":case"richeditor":case"textarea":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(n).html(e.value)}break;case"label":break;case"toggle":case"checkbox":if(e.selectors){var o=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;1==e.value||"true"==e.value?e.contentClass?jQuery(o).addClass(e.contentClass):jQuery(o).show():e.contentClass?jQuery(o).removeClass(e.contentClass):jQuery(o).hide()}break;case"select":if(e.selectors){var a=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(e.value&&Object(i.isArray)(e.allClasses)?(jQuery(a).removeClass(e.allClasses),jQuery(a).addClass(e.value)):r=p(e,r),e.classList){var c=Object.values(e.classList),l=e.classList[e.value];jQuery(a).removeClass(c).addClass(l)}}break;case"color":if(e.selectors){var u=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,s="".concat(e.stylekey,":").concat(e.value,";");r+="".concat(u,"{").concat(s,"}"),"social_proof_tooltip_bg_color"===e.key&&(r+="".concat(u,"::after{ border-top-color: ").concat(e.value,"}"))}if(e.isHover&&e.hoverSelectors){var f=Array.isArray(e.hoverSelectors)?e.hoverSelectors.toString():e.hoverSelectors,d="".concat(e.stylekey,":").concat(e.hoverVal,";");r+="".concat(f,"{").concat(d,"}")}break;case"dimension-control":if(e.selectors){var b=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,h="".concat(e.stylekey,":").concat(e.value.toString().replace(/ /g,"px ")).concat(null==e?void 0:e.styleUnit,";");r+="".concat(b,"{").concat(h,"}"),r+="".concat(b,"{").concat(h,"}")}break;case"box-shadow":if(e.selectors){var m=e.value,y=m.h_offset,v=m.v_offset,g=m.blur,O=m.spread,w=m.color,j=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(!(Object(i.isEmpty)(y)||Object(i.isEmpty)(v)||Object(i.isEmpty)(g)||Object(i.isEmpty)(O)||Object(i.isEmpty)(w))){var _="".concat(e.stylekey,":").concat(y,"px ").concat(v,"px ").concat(g,"px ").concat(O,"px ").concat(w,";");r+="".concat(j,"{").concat(_,"}")}}break;case"image":if(e.selectors){var E,S,x,k,C,P,N=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type||"custom"===e.value.type&&Object(i.isEmpty)(null==e||null===(E=e.value)||void 0===E?void 0:E.custom_url))if(jQuery(N+" img").length)jQuery(N+" img").attr("src",null==e||null===(C=e.value)||void 0===C?void 0:C.image_url);else jQuery(N).find("svg").remove(),jQuery(N).append('<img src="'+(null==e||null===(P=e.value)||void 0===P?void 0:P.image_url)+'" alt="order bump" />');else if(Object(i.isEmpty)(null==e||null===(S=e.value)||void 0===S?void 0:S.custom_url))jQuery(N+" img").attr("src","").attr("srcset","");else{var T,D;if(jQuery(N+" img").length)jQuery(N+" img").attr("src",null==e||null===(T=e.value)||void 0===T?void 0:T.custom_url).attr("srcset","");else jQuery(N).find("svg").remove(),jQuery(N).append('<img src="'+(null==e||null===(D=e.value)||void 0===D?void 0:D.custom_url)+'" alt="order bump" />').attr("srcset","")}if(e.alignmentSelectors){var I,A,R=Array.isArray(e.alignmentSelectors)?e.alignmentSelectors.toString():e.alignmentSelectors,M=null!==(I=null==e||null===(A=e.value)||void 0===A?void 0:A.position)&&void 0!==I?I:"left";if(null!=e&&e.alignmentClassList){var F=Object.values(null==e?void 0:e.alignmentClassList),L=null==e?void 0:e.alignmentClassList[M];jQuery(R).removeClass(F).addClass(L)}}var B=null!==(x=null==e||null===(k=e.value)||void 0===k?void 0:k.width)&&void 0!==x?x:"100";B&&(r+="".concat(N,"{max-width: ").concat(B,"px;}"))}break;default:r=p(e,r)}})),t(r)}))},h=function(e){var t=e.index,n=void 0===t?0:t;return Object(r.createElement)("div",{className:u()("bwf-p-20 bwf-border-1 bwf-rounded-6",{"bwf-mt-16":0!==n||1!==n}),style:{background:"#ffffff"}},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-100 "}),Object(r.createElement)("div",{className:"bwf-flex bwf--column bwf--align-start",style:{width:"100%"}},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15 bwf-mb-10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-12 bwf-mb-5"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-mt-20"})))}},,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(9),i=n(1),c=n(10),l=n.n(c),u=n(34),s=n(3),f=n(339);function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=t.type,c=t.title,h=t.is_substep,m=void 0!==h&&h,y=e.onStepSelected,v=e.label,g=void 0===v?Object(i.__)(["offer","wc_order_bump"].includes(n)?"Select ".concat("offer"===n?"Offer":"Order Bump"):"Select Step","funnel-builder"):v,O=e.showCheckbox,w=void 0!==O&&O,j=b(Object(r.useState)(!w),2),_=j[0],E=(j[1],b(Object(r.useState)(!1),2)),S=E[0],x=E[1],k=b(Object(r.useState)(null),2),C=k[0],P=k[1],N=b(Object(r.useState)(!1),2),T=N[0],D=N[1],I=b(Object(r.useState)(null),2),A=I[0],R=I[1],M=Object(r.useRef)(new AbortController),F=T&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(a.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(i.__)("".concat(c," not found"),"funnel-builder")))),L=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,r=m&&!0===m?"&is_substep=true":"",e.next=5,l()({path:Object(s.x)("/funnels/step/search/?s=".concat(t,"&type=").concat(n).concat(r)),signal:M.current.signal});case 5:a=e.sent,P(a||null),Object(o.isEmpty)(a.steps)&&Object(o.isEmpty)(a.pages)?D(!0):D(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"AbortError"===e.t0.name?console.log(e.t0):(P(null),D(!0));case 13:x(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,c,"next",e)}function c(e){p(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){return L(""),function(){M.current.abort()}}),[]);var B=Object(o.isObject)(C)&&!Object(o.isNull)(C)?d(Object(o.isEmpty)(C)?[]:C):Object(o.isArray)(C)&&!Object(o.isEmpty)(C)?C.map((function(e){return{key:e.id,value:e.name}})):[],q=A&&A.hasOwnProperty("name")?Object(u.decodeEntities)(A.name):"";return Object(r.createElement)(r.Fragment,null,_&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-label"},g),Object(r.createElement)(f.a,{onSearch:function(e){return L(e)},isLoading:S,items:B,multiGroup:Object(o.isObject)(C),error:F,onItemClick:function(e){R(e),y({step:e,copyFrom:_})},blurText:q,placeholder:Object(i.__)("Search","funnel-builder"),stepTitle:c,helpText:["offer","wc_order_bump"].includes(n)?null:Object(i.__)("Search and select a page from a Funnel, Post or a Page.","funnel-builder")})))}},,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(7),i=n.n(a),c=n(1185),l=n(2),u=n(452),s=n.n(u),f=n(9),d=n(1199),p=n(500),b=n(15),h=n.n(b),m=n(175),y=n(14),v=n(42);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(i,e);var t,n,o,a=_(i);function i(){return O(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.height,t=void 0===e?0:e;return Object(r.createElement)("div",{"aria-hidden":"true",className:"bwf-chart-placeholder",style:{height:t}},Object(r.createElement)(v.a,{size:"xl"}))}}])&&w(t.prototype,n),o&&w(t,o),i}(r.Component);x.propTypes={height:h.a.number};var k=x,C=n(273),P=(n(416),n(1200)),N=n(1180);n(417);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(c,e);var t,n,o,a=A(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).chartRef=Object(r.createRef)(),t}return t=c,(n=[{key:"componentDidMount",value:function(){this.drawUpdatedChart()}},{key:"shouldComponentUpdate",value:function(e){return this.props.className!==e.className||!Object(l.isEqual)(this.props.data,e.data)||!Object(l.isEqual)(this.props.orderedKeys,e.orderedKeys)||this.props.drawChart!==e.drawChart||this.props.height!==e.height||this.props.chartType!==e.chartType||this.props.width!==e.width||this.props.chartMeta!==e.chartMeta}},{key:"componentDidUpdate",value:function(){this.drawUpdatedChart()}},{key:"componentWillUnmount",value:function(){this.deleteChart()}},{key:"delayedScroll",value:function(){var e=this.props.tooltip;return Object(l.throttle)((function(){e&&e.hide()}),300)}},{key:"deleteChart",value:function(){Object(N.a)(this.chartRef.current).selectAll("svg").remove()}},{key:"drawUpdatedChart",value:function(){(0,this.props.drawChart)(this.getContainer())}},{key:"getContainer",value:function(){var e=this.props,t=e.className,n=e.height,r=e.width;this.deleteChart();var o=Object(N.a)(this.chartRef.current).append("svg").attr("viewBox","0 0 ".concat(r," ").concat(n)).attr("height",n).attr("width",r).attr("preserveAspectRatio","xMidYMid meet");return t&&o.attr("class","".concat(t,"__viewbox")),o.append("g")}},{key:"render",value:function(){var e=this.props.className;return Object(r.createElement)("div",{className:i()("d3-base",e),ref:this.chartRef,onScroll:this.delayedScroll()})}}])&&D(t.prototype,n),o&&D(t,o),c}(r.Component);function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}F.propTypes={className:h.a.string,data:h.a.array,orderedKeys:h.a.array,tooltip:h.a.object,chartType:h.a.string};var U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.b;return"function"==typeof e?e:t(e)},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Set(e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]));return B(t).filter((function(e){return"date"!==e}))},V=n(1201),Y=n(1184),K=n(1191),X=n(13),$=n.n(X);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(V.a)().domain(e.filter((function(e){return e.visible})).map((function(e){return e.key}))).rangeRound([0,t.bandwidth()]).padding(n?0:.07)},Z=function(e,t){return Object(Y.a)().domain([$()(e[0],"YYYY-MM-DD HH:mm").toDate(),$()(e[e.length-1],"YYYY-MM-DD HH:mm").toDate()]).rangeRound([0,t])},J=function(e){var t=function(e){var t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return e.forEach((function(e){for(var r=0,o=Object.entries(e);r<o.length;r++){var a=G(o[r],2),i=a[0],c=a[1];"date"!==i&&Number.isFinite(c.value)&&c.value>t&&(t=c.value),"date"!==i&&Number.isFinite(c.value)&&c.value<n&&(n=c.value)}})),{upper:t,lower:n}}(e),n=t.lower,r=t.upper,o=function(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))return 1;if(0===t&&0===e)return 1/3;if(0===e&&t>0&&t<=1)return Math.pow(10,Math.floor(Math.log10(t)))/2;var n=Math.max(-e,t),r=3*Math.pow(10,(Math.log(n)*Math.LOG10E+1|0)-2),o=Math.ceil(n/r)*r/3;return t<1&&e>-1?Math.round(4*o)/4:Math.ceil(o)}(n,r),a={lower:0,upper:0,step:o};return(Number.isFinite(n)||n<0)&&(a.lower=Math.floor(n/o)*o,a.lower===n&&0!==n&&(a.lower-=o)),(Number.isFinite(r)||r>0)&&(a.upper=o<=1?4:4*o,a.upper===r&&0!==r&&(a.upper+=o)),a},ee=n(1196),te=function(e){for(var t=[],n=1;n<=Math.floor(Math.sqrt(e));n++)e%n==0&&(t.push(n),e/n!==n&&t.push(e/n));return t.sort((function(e,t){return e-t})),t},ne=function(e,t,n,r){var o,a=function(e,t){if(e<783)return 7;if(e>=783&&e<=1130)return 12;if(e>1130&&e<=1365){if("time-comparison"===t)return 16;if("item-comparison"===t)return 12}else if(e>1365){if("time-comparison"===t)return 31;if("item-comparison"===t)return 16}return 16}(t,n);return(e.length>=63&&"day"===r||e.length>=9&&"week"===r)&&(e=(o=e).filter((function(e,t){return 0===t||$()(e).toDate().getMonth()!==$()(o[t-1]).toDate().getMonth()}))),e.length<=a||"hour"===r&&function(e){var t=$()(e[0]).toDate(),n=$()(e[e.length-1]).toDate();return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}(e)&&t>783?e:function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e[r]);return n[0]!==e[0]&&n.unshift(e[0]),n}(e,function(e,t){for(var n=[],r=1;n.length<=3;)n=te(e.length-r),r+=1;return n.find((function(n){return e.length/n<t}))}(e,a))},re=function(e,t,n,r){var o=$()(e).toDate(),a=0!==t?n[t-1]:n[t];return a=a instanceof Date?a:$()(a).toDate(),0===t?r(o):function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new RegExp([" |,"],"g"),r=e.split(n),o=t.split(n),a=new Array,i=e.length>t.length?r:o,c=0;c<i.length;c++)r[c]!==o[c]&&a.push(o[c]);return a}(r(a),r(o)).join(" ")},oe=n(3);function ae(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e,t,n){for(var r=[],o=0;o<e;o++){var a=(o+1)/e*t,i=n?Math.round(a):a;r[r.length-1]!==i&&r.push(i)}return r},le=function(e,t,n){return[0].concat(ae(function(e,t){if(e>=0)return[];var n=Math.ceil(-e/t);return ce(n,e,e<-1)}(e,n)),ae(function(e,t){if(e<=0)return[];var n=Math.ceil(e/t);return ce(n,e,e>1)}(t,n)))},ue=function(e,t,n,r,o,a){Object(oe.z)();var i=le(t.yScale.domain()[0],t.yScale.domain()[1],t.step),c=t.xScale.range()[1],l=o?c+r.left+r.right+35:-r.left/2-15,u=t.yMin>=0||t.yMax>0?" with-positive-ticks":"";e.append("g").attr("class","grid"+u).attr("transform","translate(0, 0)").call(Object(ee.b)(t.yScale).tickValues(i).tickSize(-c-r.left-r.right).tickFormat("")),e.append("g").attr("class","axis y-axis").attr("aria-hidden","true").attr("transform","translate("+l+", 0)").attr("text-anchor","start").call(Object(ee.b)(t.yScale).tickValues(0===t.yMax&&0===t.yMin?[i[0]]:i).tickFormat((function(e){return e>-1&&e<1&&n.yBelow1Format?n.yBelow1Format(e):a&&!a.isCurrency?n.yFormat(e):(t=n.yFormat(e),"left"===(null==(o=null!==(r=wffn_contacts_data.currency)&&void 0!==r?r:{symbol:""})?void 0:o.symbolPosition)?(null==o?void 0:o.symbol)+t:t+(null==o?void 0:o.symbol));var t,r,o})))},se=function(e,t,n,r,o,a,i){!function(e,t,n,r){var o=n.yScale.range()[0],a=ne(t.uniqueDates,n.xScale.range()[1],t.mode,t.interval);"line"!==t.chartType&&"curve-line"!==t.chartType||(a=a.map((function(e){return $()(e).toDate()}))),e.append("g").attr("class","axis").attr("aria-hidden","true").attr("transform","translate(0, ".concat(o+10,")")).call(Object(ee.a)(n.xScale).tickValues(a).tickFormat((function(e,n){return"hour"===t.interval?r.xFormat(e instanceof Date?e:$()(e).toDate()):re(e,n,a,r.xFormat)}))),"day"===t.interval&&e.append("g").attr("class","axis axis-month").attr("aria-hidden","true").attr("transform","translate(0, ".concat(o+("day"===t.interval?30:0),")")).call(Object(ee.a)(n.xScale).tickValues(a).tickFormat((function(e,t){return re(e,t,a,r.x2Format)}))),e.append("g").attr("class","pipes").attr("transform","translate(0, ".concat(o,")")).call(Object(ee.a)(n.xScale).tickValues(a).tickSize(5).tickFormat(""))}(e,t,n,r),ue(e,n,r,o,a,i),e.selectAll(".domain").remove(),e.selectAll(".axis .tick line").remove()},fe=n(1088),de=n(1098);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var me=function(e,t,n,r,o,a){var i,c,u=r.yScale.range()[0],s=r.xScale.range()[1],f=(i=r.xScale,c=r.yScale,Object(de.a)().x((function(e){return i($()(e.date).toDate())})).y((function(e){return c(e.value)}))),d=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,n.visibleKeys),p=e.append("g").attr("class","lines").selectAll(".line-g").data(d.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),b=function(e,t,n,r,o){var a=n.slice().reverse();return t.map((function(n,i){var c=Object(l.first)(e.filter((function(e){return e.date===n}))),u=o($()(n).toDate()),s=o(i>=1?$()(t[i-1]).toDate():$()(t[0]).toDate()),f=i<t.length-1?o($()(t[i+1]).toDate()):o($()(t[t.length-1]).toDate()),d=0===i?f-u:u-s,p=0===i?0:u-d/2;return d=0===i||i===t.length-1?d/2:d,{date:n,start:t.length>1?p:0,width:t.length>1?d:r,values:a.map((function(e){var t=e.key,r=c[t];return r?{key:t,value:r.value,date:n}:null})).filter(Boolean)}}))}(t,n.uniqueDates,n.visibleKeys,s,r.xScale),h=s<=1365||n.uniqueDates.length>50?2:3;h=s<=783?1.25:h;var m=s<=1365?4:6;n.uniqueDates.length>1&&p.append("path").attr("fill","none").attr("stroke-width",h).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",(function(e){return n.getColor(e.key)})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",(function(e){return f(e.values)}));s/n.uniqueDates.length>36&&p.selectAll("circle").data((function(e,t){return e.values.map((function(n){return be(be({},n),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",m).attr("fill",(function(e){return n.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",h+1).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("cx",(function(e){return r.xScale($()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=o.screenReaderFormat(e.date instanceof Date?e.date:$()(e.date).toDate());return"".concat(t," ").concat(a.valueFormat(e.value))})).on("focus",(function(e,n,r){a.show(t.find((function(t){return t.date===e.date})),r[n].parentNode,fe.b.target)})).on("blur",(function(){return a.hide()}));var y=e.append("g").attr("class","focusspaces").selectAll(".focus").data(b).enter().append("g").attr("class","focus"),v=y.append("g").attr("class","focus-grid").attr("opacity","0");v.append("line").attr("x1",(function(e){return r.xScale($()(e.date).toDate())})).attr("y1",0).attr("x2",(function(e){return r.xScale($()(e.date).toDate())})).attr("y2",u),v.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",m+2).attr("fill",(function(e){return n.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",h+2).attr("cx",(function(e){return r.xScale($()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})),y.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",u).attr("opacity",0).on("mouseover",(function(e,r,o){var i=(0===r||r===b.length-1)&&n.uniqueDates.length>1?0:.5;a.show(t.find((function(t){return t.date===e.date})),fe.b.target,o[r].parentNode,i)})).on("mouseout",(function(){return a.hide()}))},ye=[[],[.5],[.333,.667],[.2,.5,.8],[.12,.375,.625,.88],[0,.25,.5,.75,1]],ve=function(e,t){return function(n){var r=e.length>5?5:e.length,o=Object(l.findIndex)(e,(function(e){return e.key===n})),a=o<=4?ye[r][o]:0;return t(a)}};function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Oe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ref=null,this.chart=null,this.position="",this.title="",this.labelFormat="",this.valueFormat="",this.visibleKeys="",this.getColor=null,this.interval="",this.margin=24,this.chartMeta={},this.type="old",this.isProFeatureLocked=!1,this.component=!1}var t,n,o;return t=e,(n=[{key:"calculateXPosition",value:function(e,t,n){var r=this.ref.getBoundingClientRect(),o=this.ref.parentNode.querySelector(".d3-base").getBoundingClientRect(),a=Math.max(o.left,t.left);if("below"===this.position)return Math.max(this.margin,Math.min(e.left+.5*e.width-r.width/2-a,o.width-r.width-this.margin));var i=e.left+e.width*n+this.margin-a;return i+r.width+this.margin>o.width?Math.max(this.margin,e.left+e.width*(1-n)-r.width-this.margin-a):i}},{key:"calculateYPosition",value:function(e,t){if("below"===this.position)return t.height;var n=this.ref.getBoundingClientRect(),r=e.top+this.margin-t.top;return r+n.height+this.margin>t.height?Math.max(0,e.top-n.height-this.margin-t.top):r}},{key:"calculatePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=e.getBoundingClientRect(),a=this.chart.getBoundingClientRect(),i=this.ref.getBoundingClientRect();return"below"===this.position&&(t=0),{x:n<50||n>a.width-220?this.calculateXPosition(o,a,t):n-i.width/4,y:r-("new"===this.type?.65*i.height:i.height)}}},{key:"hide",value:function(){Object(N.a)(this.chart).selectAll(".barfocus, .focus-grid").attr("opacity","0"),Object(N.a)(this.ref).style("visibility","hidden")}},{key:"getTooltipRowLabel",value:function(e,t){return e[t.key].labelDate?this.labelFormat($()(e[t.key].labelDate).toDate()):t.label||t.key}},{key:"show",value:function(e,t,n){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0;if(this.visibleKeys.length){Object(N.a)(n).select(".focus-grid, .barfocus").attr("opacity","1");var l=this.calculatePosition(t,a,i,c),u=(this.visibleKeys.map((function(t){return'\n\t\t\t\t\t<li class="key-row">\n\t\t\t\t\t\t<div class="key-container">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="key-color"\n\t\t\t\t\t\t\t\tstyle="background-color: '.concat(o.getColor(t.key),'">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="key-key">').concat(o.getTooltipRowLabel(e,t),'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="key-value">').concat(o.valueFormat(e[t.key].value),"</span>\n\t\t\t\t\t</li>\n\t\t\t\t")})),this.title?this.title:this.labelFormat($()(e.date).toDate()),Object(oe.z)()),s=function(e){return"year"===o.interval?$()(e).year():$()(e).format("month"===o.interval?"MMM YYYY":Object(oe.X)())},f=function(t){var n,a,i,c,l,f,d,p,b,h,m,y=o.visibleKeys[0].key;if(o.component){var v,g=o.component;return'<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t'.concat(Object(r.renderToString)(Object(r.createElement)(g,{data:e[y]})),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t<div>').concat(o.chartMeta.title,"</div>\n\t\t\t\t\t\t\t\t<div>").concat(s(null===(v=e[y])||void 0===v?void 0:v.labelDate),"</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>")}switch(t){case"old":return 1===o.visibleKeys.length?'\n\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-value">\n\t\t\t\t\t\t\t\t'.concat(o.chartMeta&&!o.chartMeta.isCurrency?e[y].value:u.formatAmount(e[y].value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t<div>').concat(o.chartMeta.title,"</div>\n\t\t\t\t\t\t\t<div>").concat(s(null===(n=e[y])||void 0===n?void 0:n.labelDate),"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"):'\n\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val bwf-mb-16">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class="color" style="background: #0073AA;"></div>\n\t\t\t\t\t\t\t\t<div class="label">'.concat(s(null===(a=e.primary)||void 0===a?void 0:a.labelDate),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t').concat(o.chartMeta&&!o.chartMeta.isCurrency?e.primary.value:u.formatAmount(e.primary.value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class="color" style="background: #F5C452;"></div>\n\t\t\t\t\t\t\t\t<div class="label">').concat(s(null===(i=e.secondary)||void 0===i?void 0:i.labelDate),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t').concat(o.chartMeta&&!o.chartMeta.isCurrency?e.secondary.value:u.formatAmount(e.secondary.value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t<div>').concat(o.chartMeta.title,"</div>\n\t\t\t\t\t\t<div>").concat(s(null===(c=e.primary)||void 0===c?void 0:c.labelDate),"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t");case"new":return 1===o.visibleKeys.length?'\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-value">\n\t\t\t\t\t\t\t\t\t\t'.concat(u.formatAmount(e[y].value),'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-sec-values">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Checkout</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(u.formatAmount(null===(l=e[y].data)||void 0===l?void 0:l.checkout),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Order Bump</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(o.isProFeatureLocked?"-":u.formatAmount(null===(f=e[y].data)||void 0===f?void 0:f.orderBump),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Upsell</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(o.isProFeatureLocked?"-":u.formatAmount(null===(d=e[y].data)||void 0===d?void 0:d.upsell),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t\t<div>').concat(null===(p=e[y].data)||void 0===p?void 0:p.orders," Orders</div>\n\t\t\t\t\t\t\t\t\t<div>").concat(s(e.date),"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"):'\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val bwf-mb-16">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="color" style="background: #0073AA;"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label" >'.concat(s(null===(b=e.primary)||void 0===b?void 0:b.labelDate),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t\t\t\t').concat(u.formatAmount(e.primary.value),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="color" style="background: #F5C452;"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">').concat(s(null===(h=e.secondary)||void 0===h?void 0:h.labelDate),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t\t\t\t').concat(u.formatAmount(e.secondary.value),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t<div>').concat(s(null===(m=e.primary)||void 0===m?void 0:m.labelDate),"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t")}};Object(N.a)(this.ref).style("left",l.x+"px").style("top",l.y+"px").style("visibility","visible").html(f(this.type))}}}])&&ge(t.prototype,n),o&&ge(t,o),e}(),we=n(1175),je=n(1176),_e=n(19);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="";switch(e){case 0:t=_e.BLUE_BASE;break;case 1:t=_e.NOTICE_YELLOW;break;case 2:t="#F5C452";break;default:t=_e.BLUE_BASE}return t},Ce=function(e,t,n,r,o,a,i){var c,u,s=r.yScale.range()[0],f=r.xScale.range()[1],d=(c=r.xScale,u=r.yScale,Object(de.a)().curve(we.a).x((function(e){return c($()(e.date).toDate())})).y((function(e){return u(e.value)}))),p=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,n.visibleKeys),b=e.append("g").attr("class","lines").selectAll(".line-g").data(p.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),h=function(e,t,n,r,o){var a=n.slice().reverse();return t.map((function(n,i){var c=Object(l.first)(e.filter((function(e){return e.date===n}))),u=o($()(n).toDate()),s=o(i>=1?$()(t[i-1]).toDate():$()(t[0]).toDate()),f=i<t.length-1?o($()(t[i+1]).toDate()):o($()(t[t.length-1]).toDate()),d=0===i?f-u:u-s,p=0===i?0:u-d/2;return d=0===i||i===t.length-1?d/2:d,{date:n,start:t.length>1?p:0,width:t.length>1?d:r,values:a.map((function(e){var t=e.key,r=c[t];return r?{key:t,value:r.value,date:n}:null})).filter(Boolean)}}))}(t,n.uniqueDates,n.visibleKeys,f,r.xScale),m=b.append("defs");b.append("g").attr("class","line-group").each((function(e,t){var n,o=Object(N.a)(this),a=Object(l.findIndex)(i,(function(t){return t.key===e.key})),c=ke(a),u=(n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c))?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null,f="grad-".concat(e.key,"-").concat(t),p=m.append("linearGradient").attr("id",f).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");[{offset:"0%",opacity:.02},{offset:"20%",opacity:.03},{offset:"50%",opacity:.04},{offset:"80%",opacity:.02},{offset:"100%",opacity:0}].forEach((function(e){p.append("stop").attr("offset",e.offset).style("stop-color","rgba(".concat(u.r,", ").concat(u.g,", ").concat(u.b,", ").concat(e.opacity,")"))}));var b=Object(je.a)().curve(we.a).x((function(e){return r.xScale($()(e.date).toDate())})).y0(s).y1((function(e){return r.yScale(e.value)}));o.append("path").attr("class","area").attr("d",b(e.values)).attr("fill","url(#".concat(f,")")).style("opacity",1),o.append("path").attr("fill","none").attr("stroke-width",2).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",c).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",d(e.values))}));var y=2;y=f<=783?2:y;var v=f<=1365?4:6;f/n.uniqueDates.length>36&&b.selectAll("circle").data((function(e,t){return e.values.map((function(n){return Se(Se({},n),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",v).attr("fill",(function(e){return"#0073aa"})).attr("stroke","#fff").attr("stroke-width","4px").style("opacity",(function(e){e.focus;return 0})).attr("cx",(function(e){return r.xScale($()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=o.screenReaderFormat(e.date instanceof Date?e.date:$()(e.date).toDate());return"".concat(t," ").concat(a.valueFormat(e.value))})).on("focus",(function(e,t,n){})).on("blur",(function(){return a.hide()}));var g=e.append("g").attr("class","focusspaces").selectAll(".focus").data(h).enter().append("g").attr("class","focus"),O=g.append("g").attr("class","focus-grid").attr("opacity","0");O.selectAll(null).data((function(e){return e.values})).enter().append("line").attr("x1",(function(e){return r.xScale($()(e.date).toDate())})).attr("y1",(function(e){return r.yScale(e.value)})).attr("x2",(function(e){return r.xScale($()(e.date).toDate())})).attr("y2",s),O.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",v+2).attr("fill",(function(e){var t=Object(l.findIndex)(i,(function(t){return t.key===e.key}));return ke(t)})).attr("stroke","#fff").style("filter","url(#glow)").attr("stroke-width",y).attr("cx",(function(e){return r.xScale($()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})),g.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",s).attr("opacity",0).on("mouseover",(function(e,o,c){var l,u,s,f,d,p,b=(0===o||o===h.length-1)&&n.uniqueDates.length>1?0:.5,m=e.values.sort((function(e,t){return(null==i?void 0:i.findIndex((function(t){return(null==t?void 0:t.key)===(null==e?void 0:e.key)})))-(null==i?void 0:i.findIndex((function(e){return(null==e?void 0:e.key)===(null==t?void 0:t.key)})))})),y=null!==(l=null===(u=m[0])||void 0===u?void 0:u.value)&&void 0!==l?l:0,v=null!==(s=null===(f=m[1])||void 0===f?void 0:f.value)&&void 0!==s?s:0,g=null!==(d=null===(p=m[2])||void 0===p?void 0:p.value)&&void 0!==d?d:0;a.show(t.find((function(t){return t.date===e.date})),fe.b.target,c[o].parentNode,b,r.xScale($()(e.date).toDate()),r.yScale(Math.max(y,v,g)))})).on("mouseout",(function(){return a.hide()}))},Pe=n(1195),Ne=n(1177),Te=n(1096),De=n(262);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Be(e);if(t){var o=Be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fe(this,n)}}function Fe(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Le(e)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(){return"rtl"===document.documentElement.dir},ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(c,e);var t,n,o,a=Me(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).drawChart=t.drawChart.bind(Le(t)),t.getParams=t.getParams.bind(Le(t)),t.tooltipRef=Object(r.createRef)(),t}return t=c,(n=[{key:"getFormatParams",value:function(){var e=this.props,t=e.screenReaderFormat,n=e.xFormat,r=e.x2Format,o=e.yFormat,a=e.yBelow1Format;return{screenReaderFormat:U(t,P.a),xFormat:U(n,P.a),x2Format:U(r,P.a),yBelow1Format:U(a),yFormat:U(o)}}},{key:"getScaleParams",value:function(e){var t=this.props,n=t.data,r=t.height,o=t.orderedKeys,a=t.chartType,i=this.getMargin(),c=r-i.top-i.bottom,l=this.getWidth()-i.left-i.right,u=J(n),s=u.upper,f=u.lower,d=u.step,p=function(e,t,n){return Object(K.a)().domain([Math.min(t,0),0===n&&0===t?1:Math.max(n,0)]).rangeRound([e,0])}(c,f,s);if("line"===a||"curve-line"===a)return{step:d,xScale:Z(e,l),yMax:s,yMin:f,yScale:p};var b=this.shouldBeCompact(),h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(V.a)().domain(e).range([0,t]).paddingInner(n?0:.1)}(e,l,b);return{step:d,xGroupScale:Q(o,h,b),xScale:h,yMax:s,yMin:f,yScale:p}}},{key:"getParams",value:function(e){var t=this.props,n=t.chartType,r=t.colorScheme,o=t.data,a=t.interval,i=t.mode,c=t.orderedKeys||function(e){return H(e).map((function(t){return{key:t,focus:!0,total:e.reduce((function(e,n){return e+n[t].value}),0),visible:!0}})).sort((function(e,t){return t.total-e.total}))}(o),l=c.filter((function(e){return e.visible})),u=c.length>5?l:c;return{getColor:ve(u,r),interval:a,mode:i,chartType:n,uniqueDates:e,visibleKeys:l}}},{key:"createTooltip",value:function(e,t,n){var r=this.props,o=r.tooltipLabelFormat,a=r.tooltipPosition,i=r.tooltipTitle,c=r.tooltipValueFormat,l=r.interval,u=r.chartMeta,s=r.toopTipComponent,f=new Oe;f.ref=this.tooltipRef.current,f.type=u?"old":"new",f.chart=e,f.position=a,f.title=i,f.labelFormat=U(o,P.a),f.valueFormat=U(c),f.visibleKeys=n,f.getColor=t,f.interval=l,f.chartMeta=u,f.isProFeatureLocked=this.props.isProFeatureLocked,f.component=s,this.tooltip=f}},{key:"drawChart",value:function(e){var t,n=this.props,r=n.data,o=n.dateParser,a=n.chartType,i=n.emptyText,c=n.chartMeta,u=n.chartId,s=n.orderedKeys,f=this.getMargin(),d=e.attr("id","chart").append("g").attr("transform","translate(".concat(f.left,", ").concat(f.top,")"));if("donut"===a)return null===(t=Object(N.a)("#".concat(u," .d3-donut-tip")).node())||void 0===t||t.remove(),void function(e,t,n){var r=n.width,o=void 0===r?640:r,a=n.height,i=void 0===a?400:a,c=(n.margin,n.emptyText),u=void 0===c?"":c,s=n.chartId,f=n.donutTip,d=Math.min(o,i)/2+35,p=t.reduce((function(e,t){return e+(t.value||0)}),0),b=p?t:[{key:"dummy",value:100,color:["#DEDFEA","#DEDFEA"]}],h=Object(Te.a)().domain(b.map((function(e){return e.key}))).range(b.map((function(e){return e.color&&Object(l.isArray)(e.color)?e.color[0]:_e.TEXT_COLOR_3}))),m=Object(Pe.a)().sort(null).value((function(e){return e.value}))(b),y=Object(Ne.a)().innerRadius(.52*d).outerRadius(.8*d),v=Object(Ne.a)().innerRadius(.52*(d+2)).outerRadius(.8*(d+8));Object(Ne.a)().innerRadius(.9*d).outerRadius(.9*d),e.attr("transform","translate("+o/2+","+i/2+")");var g=e.append("defs").append("filter").attr("id","drop-shadow").attr("height","130%");g.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),g.append("feFlood").attr("flood-color","#323247").attr("flood-opacity","0.5").attr("result","offsetColor"),g.append("feOffset").attr("in","blur").attr("dx",1).attr("dy",1).attr("result","offsetBlur"),g.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("result","offsetBlur").attr("operator","in");var O=g.append("feMerge");O.append("feMergeNode").attr("in","offsetBlur"),O.append("feMergeNode").attr("in","SourceGraphic");var w=function(e){if(p){Object(N.a)("#slice-"+e.data.key).attr("d",v).attr("filter","url(#drop-shadow");var t=e.data.tooltip;Object(N.a)("#".concat(s," .d3-donut-tip")).style("opacity",1),f.html(t).style("opacity",1).style("left",fe.b.layerX-50+"px").style("top",fe.b.layerY+10+"px")}},j=function(e){Object(N.a)("#slice-"+e.data.key).attr("d",y).attr("filter",""),Object(N.a)("#".concat(s," .d3-donut-tip")).style("opacity",0)};e.selectAll("allSlices").data(m).enter().append("path").attr("id",(function(e){return"slice-"+e.data.key})).attr("d",y).attr("fill",(function(e){return h(e.data.key)})).style("stroke-width","0").on("mousemove",w).on("mouseleave",j),e.selectAll("allValues").data(m).enter().append("text").text((function(e){return e.data.value>4?e.data.value<10&&e.data.value%1?Math.floor(e.data.value)+"%":e.data.value+"%":""})).attr("id",(function(e){return"value-"+e.data.key})).attr("class","slice-value").attr("transform",(function(e){return"translate("+y.centroid(e)+")"})).style("text-anchor","middle").style("fill",(function(e){return e.data.color&&Object(l.isArray)(e.data.color)?e.data.color[1]:"#ffffff"})).on("mousemove",w).on("mouseleave",j),p||e.append("text").attr("class","name-text").text(u).attr("text-anchor","middle").attr("x","0").attr("y","0").attr("width","100").style("fill",_e.TEXT_COLOR_3).call((function(e){e.each((function(){for(var e=Object(N.a)(this),t=e.text().split(/\s+/).reverse(),n=parseFloat(e.attr("width")),r=parseFloat(e.attr("y")),o=e.attr("x"),a=e.attr("text-anchor"),i=e.text(null).append("tspan").attr("x",o).attr("y",r).attr("text-anchor",a),c=0,l=[],u=t.pop();u;)l.push(u),i.text(l.join(" ")),i.node().getComputedTextLength()>n&&(c+=1,l.pop(),i.text(l.join(" ")),l=[u],i=e.append("tspan").attr("x",o).attr("y",r+20*c).attr("anchor",a).text(u)),u=t.pop()}))}))}(d,r,{height:280,width:280,emptyText:i,chartId:u,donutTip:Object(N.a)("#"+u).append("div").style("opacity",0).attr("class","d3-donut-tip")});var p=function(e,t){var n=Object(P.b)(t);return B(new Set(e.map((function(e){return e.date})))).sort((function(e,t){return n(e)-n(t)}))}(r,o),b=this.getFormatParams(),h=this.getParams(p),m=this.getScaleParams(p);this.createTooltip(d.node(),h.getColor,h.visibleKeys),se(d,h,m,b,f,qe(),c),"curve-line"!==a?("line"===a&&me(d,r,h,m,b,this.tooltip),"bar"===a&&function(e,t,n,r,o,a){var i=r.yScale.range()[0],c=e.append("g").attr("class","bars").selectAll("g").data(t).enter().append("g").attr("transform",(function(e){return"translate(".concat(r.xScale(e.date),", 0)")})).attr("class","bargroup").attr("role","region").attr("aria-label",(function(e){return"item-comparison"===n.mode?o.screenReaderFormat(e.date instanceof Date?e.date:$()(e.date).toDate()):null}));c.append("rect").attr("class","barfocus").attr("x",0).attr("y",0).attr("width",r.xGroupScale.range()[1]).attr("height",i).attr("opacity","0").on("mouseover",(function(e,n,r){a.show(t.find((function(t){return t.date===e.date})),fe.b.target,r[n].parentNode)})).on("mouseout",(function(){return a.hide()}));var l=r.yScale(0);c.selectAll(".bar").data((function(e){return n.visibleKeys.map((function(t){return{key:t.key,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,label:t.label,visible:t.visible,date:e.date}}))})).enter().append("rect").attr("class","bar").attr("x",(function(e){return r.xGroupScale(e.key)})).attr("y",(function(e){return Math.min(l,r.yScale(e.value))})).attr("width",r.xGroupScale.bandwidth()).attr("height",(function(e){return Math.abs(l-r.yScale(e.value))})).attr("fill",(function(e){return n.getColor(e.key)})).attr("pointer-events","none").attr("tabindex","0").attr("aria-label",(function(e){var r=e.label||e.key;if("time-comparison"===n.mode){var i=t.find((function(t){return t.date===e.date}));r=o.screenReaderFormat($()(i[e.key].labelDate).toDate())}return"".concat(r," ").concat(a.valueFormat(e.value))})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).on("focus",(function(e,n,r){var o=e.value>0?fe.b.target:fe.b.target.parentNode;a.show(t.find((function(t){return t.date===e.date})),o,r[n].parentNode)})).on("blur",(function(){return a.hide()}))}(d,r,h,m,b,this.tooltip)):Ce(d,r,h,m,b,this.tooltip,s)}},{key:"shouldBeCompact",value:function(){var e=this.props,t=e.data,n=e.chartType,r=e.width;if("bar"!==n)return!1;var o=this.getMargin(),a=r-o.left-o.right,i=t&&t.length?Object.keys(t[0]).length-1:0;return a<t.length*(i+1)}},{key:"getMargin",value:function(){var e=this.props.margin;return qe()?{bottom:e.bottom,left:-30,right:e.left,top:e.top}:e}},{key:"getWidth",value:function(){var e=this.props,t=e.data,n=e.chartType,r=e.width;if("bar"!==n)return r;var o=this.getMargin(),a=t&&t.length?Object.keys(t[0]).length-1:0,i=this.shouldBeCompact()?t.length*a:t.length*(a+1);return Math.max(r,i+o.left+o.right)}},{key:"getEmptyMessage",value:function(){var e=this.props,t=e.baseValue,n=e.data,o=e.emptyMessage;if(o&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<e.length;n++)for(var r=0,o=Object.entries(e[n]);r<o.length;r++){var a=L(o[r],2),i=a[0],c=a[1];if("date"!==i&&!Object(l.isNil)(c.value)&&c.value!==t)return!1}return!0}(n,t))return Object(r.createElement)("div",{className:"d3-chart__empty-message"},o)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.data,o=e.height,a=e.orderedKeys,c=e.chartType,l=e.chartMeta,u=this.getWidth();return Object(r.createElement)("div",{className:i()("d3-chart__container",t)},this.getEmptyMessage(),Object(r.createElement)("div",{className:"d3-chart__tooltip",ref:this.tooltipRef}),Object(r.createElement)(F,{className:i()(t),data:n,drawChart:this.drawChart,chartMeta:l,height:o,orderedKeys:a,tooltip:this.tooltip,chartType:c,width:u}))}}])&&Ae(t.prototype,n),o&&Ae(t,o),c}(r.Component);ze.propTypes={baseValue:h.a.number,className:h.a.string,colorScheme:h.a.func,data:h.a.array.isRequired,dateParser:h.a.string.isRequired,emptyMessage:h.a.string,height:h.a.number,interval:h.a.oneOf(["hour","day","week","month","quarter","year",""]),margin:h.a.shape({bottom:h.a.number,left:h.a.number,right:h.a.number,top:h.a.number}),mode:h.a.oneOf(["item-comparison","time-comparison"]),screenReaderFormat:h.a.oneOfType([h.a.string,h.a.func]),orderedKeys:h.a.array,tooltipLabelFormat:h.a.oneOfType([h.a.string,h.a.func]),tooltipValueFormat:h.a.oneOfType([h.a.string,h.a.func]),tooltipPosition:h.a.oneOf(["below","over"]),tooltipTitle:h.a.string,chartType:h.a.oneOf(["bar","line","curve-line","donut"]),width:h.a.number,xFormat:h.a.oneOfType([h.a.string,h.a.func]),x2Format:h.a.oneOfType([h.a.string,h.a.func]),yBelow1Format:h.a.oneOfType([h.a.string,h.a.func]),yFormat:h.a.oneOfType([h.a.string,h.a.func])};var Ue=Object(De.a)(ze,{baseValue:0,data:[],dateParser:"%Y-%m-%dT%H:%M:%S",height:200,margin:{bottom:30,left:40,right:0,top:20},mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",tooltipPosition:"over",tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",chartType:"line",width:600,xFormat:"%Y-%m-%d",x2Format:"",yBelow1Format:".3~f",yFormat:".3~s"}),He=n(43),Ve=n(80);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=We(e);if(t){var o=We(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ge(this,n)}}function Ge(e,t){if(t&&("object"===Ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(l,e);var t,n,a,c=$e(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=c.call(this)).listRef=Object(r.createRef)(),e.state={isScrollable:!1},e}return t=l,(n=[{key:"componentDidMount",value:function(){this.updateListScroll(),window.addEventListener("resize",this.updateListScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateListScroll)}},{key:"updateListScroll",value:function(){if(this&&this.listRef){var e=this.listRef.current,t=e.scrollHeight-e.scrollTop<=e.offsetHeight;this.setState({isScrollable:!t})}}},{key:"render",value:function(){var e=this.props,t=(e.colorScheme,e.data),n=e.handleLegendHover,a=e.handleLegendToggle,c=e.interactive,l=e.legendDirection,u=(e.legendValueFormat,e.instanceId),s=e.totalLabel,f=this.state.isScrollable,d=t.filter((function(e){return e.visible})),p=d.length,b="column"===l&&t.length>5&&s;return t.length,Object(r.createElement)("div",{className:i()("bwf-legend","bwf-legend-direction-".concat(l),{"has-total":b,"is-scrollable":f},this.props.className)},Object(r.createElement)("ul",{className:"bwf-legend-list",ref:this.listRef,onScroll:b?this.updateListScroll:null},t.map((function(e,t){return Object(r.createElement)("li",{className:i()("bwf-legend-item",{"bwf-legend-item-checked":e.visible}),key:e.key,id:"bwf-legend-".concat(u,"__item__").concat(e.key),onMouseEnter:n,onMouseLeave:n,onBlur:n,onFocus:n},Object(r.createElement)("button",{onClick:a,id:"bwf-legend-".concat(u,"__item-button__").concat(e.key),disabled:e.visible&&p<=1||!e.visible&&p>=5||!c,title:p>=5?Object(o.sprintf)(Object(o.__)("You may select up to %d items.","funnel-builder"),5):""},Object(r.createElement)("div",{className:"bwf-legend-item-container"},Object(r.createElement)(Ve.a,{checked:e.visible,onChange:function(){},color:1===t?_e.NOTICE_YELLOW:_e.BLUE_BASE}),Object(r.createElement)("span",{className:"bwf-legend-item-title"},e.label))))}))),b&&Object(r.createElement)("div",{className:"bwf-legend-total"},s))}}])&&Ke(t.prototype,n),a&&Ke(t,a),l}(r.Component);Qe.propTypes={className:h.a.string,colorScheme:h.a.func,data:h.a.array.isRequired,handleLegendToggle:h.a.func,handleLegendHover:h.a.func,interactive:h.a.bool,legendDirection:h.a.oneOf(["row","column"]),legendValueFormat:h.a.oneOfType([h.a.string,h.a.func]),totalLabel:h.a.string,instanceId:h.a.number};var Ze=Object(He.withInstanceId)(Object(De.a)(Qe,{interactive:!0,legendDirection:"row",legendValueFormat:","}));n(418);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(){return(et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lt(e);if(t){var o=lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return it(this,n)}}function it(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ct(e)}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){switch(t){case"left_space":return[e+" ",""];case"right":return["",e];case"right_space":return[""," "+e];case"left":default:return[e,""]}}var st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(b,e);var t,n,a,u=at(b);function b(e){var t,n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),t=u.call(this,e),n=ct(t),a=function(){return Object(r.createElement)("div",{className:"bwf-chart__donut-legends"},t.props.data.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-chart__donut-legend",key:"bwf-chart__donut-legend-".concat(t)},Object(r.createElement)("div",{className:"bwf-chart__donut-legend-color",style:{backgroundColor:e.color[0]}}),e.title)})))},(o="getDonutLegends")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,t.chartBodyRef=Object(r.createRef)();var i=t.getDataKeys();return t.state={focusedKeys:[],visibleKeys:i.slice(0,5),width:0},t.prevDataKeys=i.sort(),t.handleTypeToggle=t.handleTypeToggle.bind(ct(t)),t.handleLegendToggle=t.handleLegendToggle.bind(ct(t)),t.handleLegendHover=t.handleLegendHover.bind(ct(t)),t.updateDimensions=t.updateDimensions.bind(ct(t)),t.getVisibleData=Object(p.a)(t.getVisibleData),t.getOrderedKeys=Object(p.a)(t.getOrderedKeys),t.setInterval=t.setInterval.bind(ct(t)),t}return t=b,(n=[{key:"getDataKeys",value:function(){var e=this.props,t=e.data,n=e.filterParam,r=e.mode,o=e.query;if("item-comparison"===r){var a=n?Object(y.e)(o[n]):[];return this.getOrderedKeys([],[],a).map((function(e){return e.key}))}return H(t)}},{key:"componentDidUpdate",value:function(){var e=this.props.data;if(e&&e.length){var t=H(e).sort();if(!Object(l.isEqual)(t,this.prevDataKeys)){var n=this.getDataKeys();this.prevDataKeys=t,this.setState({visibleKeys:n.slice(0,5)})}}}},{key:"componentDidMount",value:function(){this.updateDimensions(),this.setD3DefaultFormat(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"setD3DefaultFormat",value:function(){var e=this.props.currency,t=e.symbol,n=e.symbolPosition,r=e.decimalSeparator,o=e.thousandSeparator;Object(c.a)({decimal:r,thousands:o,grouping:[3],currency:ut(t,n)})}},{key:"getOrderedKeys",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.props,o=r.data,a=r.legendTotals,i=r.mode;if(!o||0===o.length)return[];var c=o.reduce((function(e,t){return Object.entries(t).forEach((function(t){var n=tt(t,2),r=n[0],o=n[1];"date"===r||e[r]||(e[r]=o.label)})),e}),{}),l=Object.entries(c).map((function(n){var r=tt(n,2),i=r[0],c=r[1];return{focus:0===e.length||e.includes(i),key:i,label:c,total:a&&void 0!==a[i]?a[i]:"conversion_rate"!==i?o.reduce((function(e,t){return e+t[i].value}),0):0!==o.reduce((function(e,t){return e+t.conversion.value}),0)?o.reduce((function(e,t){return e+t.conversion.value}),0)/o.reduce((function(e,t){return e+t.view.value}),0)*100:0,visible:t.includes(i)}}));return"item-comparison"===i?l.sort((function(e,t){return t.total-e.total})).filter((function(e){return e.total>0||n.includes(parseInt(e.key,10))})):l}},{key:"handleTypeToggle",value:function(e){if(this.props.chartType!==e){var t=this.props,n=t.path,r=t.query,o=t.onChartChange,a=void 0===o?l.noop:o,i=t.updateQuery;(void 0===i||i)&&Object(y.k)({chartType:e},n,r),a(e)}}},{key:"handleLegendToggle",value:function(e){if(this.props.interactiveLegend){var t=e.currentTarget.id.split("_").pop(),n=this.state,r=n.focusedKeys,o=n.visibleKeys;o.includes(t)?this.setState({focusedKeys:Object(l.without)(r,t),visibleKeys:Object(l.without)(o,t)}):this.setState({focusedKeys:r.concat([t]),visibleKeys:o.concat([t])})}}},{key:"handleLegendHover",value:function(e){if("mouseleave"===e.type||"blur"===e.type)this.setState({focusedKeys:[]});else if("mouseenter"===e.type||"focus"===e.type){var t=e.currentTarget.id.split("__").pop();this.setState({focusedKeys:[t]})}}},{key:"updateDimensions",value:function(){this.setState({width:this.props.width?this.props.width:this.chartBodyRef.current.offsetWidth})}},{key:"getVisibleData",value:function(e,t){var n=t.filter((function(e){return e.visible}));return Object(l.isEmpty)(n)?[]:e.map((function(e){var t={date:e.date};return n.forEach((function(n){t[n.key]=e[n.key]})),t}))}},{key:"setInterval",value:function(e){var t=this.props,n=t.path,r=t.query,o=t.onIntervalChange,a=void 0===o?l.noop:o,i=t.updateQuery;(void 0===i||i)&&Object(y.k)({interval:e},n,r),a(e)}},{key:"renderIntervalSelector",value:function(){var e=this.props,t=e.interval,n=e.allowedIntervals;if(!n||n.length<1)return null;!0===n.includes("quarter")&&n.splice(n.indexOf("quarter"),1);var a={hour:Object(o.__)("By hour","funnel-builder"),day:Object(o.__)("By day","funnel-builder"),week:Object(o.__)("By week","funnel-builder"),month:Object(o.__)("By month","funnel-builder"),quarter:Object(o.__)("By quarter","funnel-builder"),year:Object(o.__)("By year","funnel-builder")};return Object(r.createElement)(f.SelectControl,{value:t,options:n.map((function(e){return{value:e,label:a[e]}})),onChange:this.setInterval})}},{key:"getChartHeight",value:function(){var e=this.props,t=e.isViewportLarge;return e.isViewportMobile?180:t?300:220}},{key:"getLegendPosition",value:function(){var e=this.props,t=e.legendPosition,n=e.mode,r=e.isViewportWide;return t||(r&&"time-comparison"===n?"top":r&&"item-comparison"===n?"side":"bottom")}},{key:"render",value:function(){var e=this.state,t=e.focusedKeys,n=e.visibleKeys,a=e.width,c=this.props,u=c.baseValue,p=c.chartType,b=c.data,h=c.dateParser,m=c.emptyMessage,v=c.filterParam,g=c.interactiveLegend,O=c.interval,w=c.isRequesting,j=c.isViewportLarge,_=c.itemsLabel,E=c.mode,S=c.query,x=c.screenReaderFormat,P=c.showHeaderControls,N=c.title,T=c.tooltipLabelFormat,D=c.tooltipValueFormat,I=c.tooltipTitle,A=c.valueType,R=c.xFormat,M=c.x2Format,F=c.yBelow1Format,L=c.yFormat,B=c.hideTypeSelect,q=c.className,z=c.customHeaderItem,U=c.showLegend,H=c.height,V=c.emptyText,Y=c.chartMeta,K=c.chartId,X=c.customFooter,$=c.isProFeatureLocked,G=c.toopTipComponent,W=c.donutEmptyState,Q=v?Object(y.e)(S[v]):[],Z=this.getOrderedKeys(t,n,Q),J=w||Object(l.isEmpty)(b)?null:this.getVisibleData(b,Z),ee=this.getLegendPosition(),te="top"===ee?"row":"column",ne="side"===ee?"row":"column",re=H||this.getChartHeight(),oe=w||!U?null:"donut"===p?this.getDonutLegends():Object(r.createElement)(Ze,{colorScheme:d.a,data:Z,handleLegendHover:this.handleLegendHover,handleLegendToggle:this.handleLegendToggle,interactive:g,legendDirection:te,legendValueFormat:D,totalLabel:Object(o.sprintf)(_,Z.length)}),ae=L,ie=F;if(!L)switch(A){case"average":ae=",.0f";break;case"currency":ae="$.3~s",ie="$.3~f";break;case"number":ae=",.0f"}return Object(r.createElement)("div",et({className:i()("bwf-chart",q)},K&&{id:K}),P&&Object(r.createElement)("div",{className:"bwf-chart-header"},Object(r.createElement)("div",{className:"bwf-chart-title"},N),"top"===ee&&oe,z,this.renderIntervalSelector(),!B&&Object(r.createElement)(f.NavigableMenu,{className:"bwf-chart-types",orientation:"horizontal",role:"menubar"},Object(r.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"line"===p}),title:Object(o.__)("Line chart","funnel-builder"),"aria-checked":"line"===p,role:"menuitemradio",tabIndex:"line"===p?0:-1,onClick:Object(l.partial)(this.handleTypeToggle,"line")},Object(r.createElement)(s.a,{icon:"line-graph"})),Object(r.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"bar"===p}),title:Object(o.__)("Bar chart","funnel-builder"),"aria-checked":"bar"===p,role:"menuitemradio",tabIndex:"bar"===p?0:-1,onClick:Object(l.partial)(this.handleTypeToggle,"bar")},Object(r.createElement)(s.a,{icon:"stats-alt"})))),Object(r.createElement)(C.b,{component:!1},Object(r.createElement)("div",{className:i()("bwf-chart-body","bwf-chart-body-".concat(ne)),ref:this.chartBodyRef},"donut"===p&&W&&Object(r.createElement)("div",{className:"bwf-donut-chart-empty-state"},W),"side"===ee&&oe,w&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Your requested data is loading","funnel-builder")),Object(r.createElement)(k,{height:re})),!w&&!Object(l.isEmpty)(J)&&a>0&&Object(r.createElement)(Ue,{baseValue:u,chartType:p,colorScheme:d.a,data:J,dateParser:h,height:re,emptyMessage:m,interval:O,margin:{bottom:50,left:50,right:30,top:0},mode:E,orderedKeys:Z,screenReaderFormat:x,tooltipLabelFormat:T,tooltipValueFormat:D,tooltipPosition:j?"over":"below",tooltipTitle:I,valueType:A,width:"row"===ne?a-320:a,xFormat:R,x2Format:M,yBelow1Format:ie,yFormat:ae,emptyText:V,chartMeta:Y,chartId:K,isProFeatureLocked:$,toopTipComponent:G})),"bottom"===ee&&Object(r.createElement)("div",{className:"bwf-chart-footer"},oe)),X)}}])&&rt(t.prototype,n),a&&rt(t,a),b}(r.Component);t.a=Object(m.withViewportMatch)({isViewportMobile:"< medium",isViewportLarge:">= large",isViewportWide:">= wide"})(Object(De.a)(st,{baseValue:0,chartType:"line",data:[],dateParser:"%Y-%m-%dT%H:%M:%S",interactiveLegend:!0,interval:"day",isRequesting:!1,mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",showHeaderControls:!0,tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",xFormat:"%d",x2Format:"%b %Y",currency:{symbol:"$",symbolPosition:"left",decimalSeparator:".",thousandSeparator:","},className:"",showLegend:!0}))},,,,function(e,t,n){},,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(15),i=n.n(a),c=n(7),l=n.n(c),u=(n(460),n(314)),s=n(1),f=n(262);function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e);var t,n,o,a=v(i);function i(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),n=O(t),o=!0,(r="mounted")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.state={options:[]},t.appendFreeTextSearch=t.appendFreeTextSearch.bind(O(t)),t.fetchOptions=t.fetchOptions.bind(O(t)),t.updateSelected=t.updateSelected.bind(O(t)),t}return t=i,(n=[{key:"getAutocompleter",value:function(){return this.props.autocompleter&&"object"===h(this.props.autocompleter)?this.props.autocompleter:{}}},{key:"getFormattedOptions",value:function(e,t){var n=this.getAutocompleter(),r=[];return e.forEach((function(e){var o={key:n.getOptionIdentifier(e),label:n.getOptionLabel(e,t),keywords:n.getOptionKeywords(e).filter(Boolean),value:e};r.push(o)})),r}},{key:"fetchOptions",value:function(e,t){var n=this;return t?this.getAutocompleter().options(t,this.props.searchHelper).then(function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.mounted){e.next=4;break}return o=n.getFormattedOptions(r,t),n.setState({options:o}),e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,c,"next",e)}function c(e){b(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}()):[]}},{key:"updateSelected",value:function(e){var t=this.props.onChange,n=this.getAutocompleter();t(e.map((function(e){return e.value?n.getOptionCompletion(e.value):e})))}},{key:"appendFreeTextSearch",value:function(e,t){var n=this.props,r=n.allowFreeTextSearch,o=n.emptySearchText,a=void 0===o?Object(s.__)("Not Found","funnel-builder"):o;if(!t||!t.length)return[];if(!r)return e.length>0?e:[{label:a,key:"",notFound:!0}];if(!r)return e;var i=this.getAutocompleter();return[].concat(d(i.getFreeTextOptions(t,e)),d(e))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.getAutocompleter(),t=this.props,n=t.className,o=t.inlineTags,a=t.placeholder,i=t.selected,c=t.showClearButton,s=t.staticResults,f=t.disabled,d=(t.multiple,this.state.options),p=e.inputType?e.inputType:"text";return Object(r.createElement)("div",null,Object(r.createElement)(u.a,{className:l()("bwf-search",n,{"is-static-results":s}),disabled:f,hideBeforeSearch:!0,inlineTags:o,isSearchable:!0,label:a,getSearchExpression:e.getSearchExpression,multiple:!0,placeholder:a,onChange:this.updateSelected,onFilter:this.appendFreeTextSearch,onSearch:this.fetchOptions,options:d,remove:this.props.onRemoveTag,searchDebounceTime:500,searchInputType:p,selected:i,showClearButton:c,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm}))}}])&&m(t.prototype,n),o&&m(t,o),i}(r.Component);j.propTypes={allowFreeTextSearch:i.a.bool,className:i.a.string,onChange:i.a.func,autocompleter:i.a.object,placeholder:i.a.string,selected:i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,label:i.a.string})),inlineTags:i.a.bool,showClearButton:i.a.bool,staticResults:i.a.bool,disabled:i.a.bool,bwfMaintainSingleTerm:i.a.bool,searchHelper:i.a.object};var _={allowFreeTextSearch:!1,onChange:o.noop,selected:[],inlineTags:!1,showClearButton:!1,staticResults:!1,disabled:!1,bwfMaintainSingleTerm:!1,searchHelper:{}};t.a=Object(f.a)(j,_)},function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(1),i=n(2),c=(n(461),n(16));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.pageUrl,n=e.onclose,u=e.title,s=e.updateDetail,f=e.isLoading,d=e.pageUrlSlug,p=l(Object(r.useState)(u),2),b=p[0],h=p[1],m=l(Object(r.useState)(d),2),y=m[0],v=m[1],g=l(Object(r.useState)(""),2),O=g[0],w=g[1],j=Object(i.isEmpty)(null==b?void 0:b.trim())||Object(i.isEmpty)(null==y?void 0:y.trim()),_=Object(r.useRef)();return Object(r.useEffect)((function(){var e,n=null==t?void 0:t.split("/");_.current=null==n||null===(e=n.slice(0,Object(i.isEmpty)(n[n.length-1])?-2:-1))||void 0===e?void 0:e.join("/"),w(t)}),[t]),Object(r.createElement)(o.Modal,{title:Object(a.__)("Edit Details","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-small bwf-edit-detail-modal",onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(a.__)("Name","funnel-builder")),Object(r.createElement)(o.TextControl,{value:b,onChange:function(e){h(e)},className:Object(i.size)(null==b?void 0:b.trim())?"":"bwf-error-border",onKeyDown:function(e){if("Enter"===e.key){if(j)return;s(b,y)}}}),Object(i.size)(null==b?void 0:b.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Name is required","funnel-builder")),Object(r.createElement)("label",{id:"required",className:"bwf-mt-16"},Object(a.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(o.TextControl,{value:y,onChange:function(e){v(e.replace(/\s+/g,"-").toLocaleLowerCase()),w(_.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},className:Object(i.size)(null==y?void 0:y.trim())?"":"bwf-error-border"}),Object(i.size)(null==y?void 0:y.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url"},Object(r.createElement)("label",{className:"bwf-url-title bwf-mt-16"},Object(a.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},O))),Object(r.createElement)("div",{className:"bwf-edit-detail-modal__actions"},Object(r.createElement)(c.a,{className:"bwf-modal-cancel-btn",onClick:n},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(c.a,{isPrimary:!0,onClick:function(){return s(b,y)},disabled:j,isBusy:f,className:j?"bwf-no-ripple":""},Object(a.__)("Update","funnel-builder"))))}},,function(e,t,n){var r=n(423),o=n(424);e.exports=function(e,t,n,a){var i=!n;n||(n={});for(var c=-1,l=t.length;++c<l;){var u=t[c],s=a?a(n[u],e[u],u,n,e):void 0;void 0===s&&(s=e[u]),i?o(n,u,s):r(n,u,s)}return n}},,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(7),a=n.n(o),i=n(2),c=n(9),l=n(43),u=n(1),s=n(261),f=(n(421),n(5));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=[{label:Object(u.__)("Product","funnel-builder"),value:"product"},{label:Object(u.__)("Custom","funnel-builder"),value:"custom"}];t.a=function e(t){var n,o=t.onChange,d=t.value,b=t.label,m=t.className,v=Object(l.useInstanceId)(e),g="inspector-bump-image-".concat(v),O=a()("components-bump-image",m),w=h(Object(r.useState)(d.type),2),j=w[0],_=w[1],E=h(Object(r.useState)(d.custom_url),2),S=E[0],x=E[1],k=Object(r.useRef)(document.body.classList.contains("modal-open")),C=function(e){o(e)},P=function(e,t){e.preventDefault(),n||((n=wp.media({title:"Media",library:{uploadedTo:console.log(wp.media.view.settings.post.id),type:"image"},button:{text:"Use this media"},multiple:!1})).on("select",(function(){var e=n.state().get("selection").first().toJSON();C(p(p({},d),{},{custom_url:e.url,type:"custom"})),x(e.url)})),n.on("close",(function(){k.current&&!document.body.classList.contains("modal-open")&&document.body.classList.add("modal-open")}))),n.open()};return Object(r.createElement)(c.BaseControl,{label:b,className:O,id:g},Object(r.createElement)("div",{className:"component-bump-image-wrap"},!Object(i.isEmpty)(y)&&Object(r.createElement)(c.ButtonGroup,{className:"bwf-button-group bwf-group-tab"},y.map((function(e,t){return Object(r.createElement)(c.Button,{key:t,variant:e.value===j?"primary":"",onClick:function(){_(e.value),"product"===e.value?(delete d.custom_url,C(p(p({},d),{},{type:e.value}))):Object(i.isEmpty)(S)||C(p(p({},d),{},{type:e.value,custom_url:S}))}},e.label)}))),Object(r.createElement)("div",{className:"bwf-bump-image-field"},Object(r.createElement)("div",{className:"bwf-bump-img-field-container"},"product"===j?Object(r.createElement)("img",{src:null==d?void 0:d.image_url,alt:"Product Image"}):Object(r.createElement)("div",{className:"bwf-bump-custom-img"},S?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("img",{src:S,alt:"Product Image"}),Object(r.createElement)("div",{className:"bwf-media-actions"},Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-delete",onClick:function(){x(""),C(p(p({},d),{},{type:"product",custom_url:""}))}},Object(r.createElement)(f.a,{icon:"delete",size:"16"})),Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-edit",onClick:P},Object(r.createElement)(f.a,{icon:"edit",size:"16"})))):Object(r.createElement)("div",{className:"bwf-media-uploader-wrap",onClick:P},Object(r.createElement)(f.a,{icon:"add-image",size:48}),Object(r.createElement)("div",null,Object(u.__)("Add Image","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-bump-image-attr"},Object(r.createElement)(c.TextControl,{type:"number",label:Object(u.__)("Width (px)","funnel-builder"),max:400,value:null==d?void 0:d.width,onChange:function(e){C(p(p({},d),{},{width:e}))}}),Object(r.createElement)(s.b,{label:Object(u.__)("Image Position","funnel-builder"),options:[{label:Object(u.__)("Left","funnel-builder"),key:"left",value:"left"},{label:Object(u.__)("Right","funnel-builder"),key:"right",value:"right"},{label:Object(u.__)("Top","funnel-builder"),key:"top",value:"top"}],selected:null==d?void 0:d.position,onChange:function(e){C(p(p({},d),{},{position:e}))}})))))}},,,,,,,,,function(e,t){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(1),i=n(2),c=(n(506),n(16));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.onclose,n=e.title,u=e.updateTitle,s=e.isLoading,f=e.renameTitle,d=l(Object(r.useState)(n),2),p=d[0],b=d[1],h=Object(i.isEmpty)(p.trim());return Object(r.createElement)(o.Modal,{title:f,className:"bwf-admin-modal bwf-admin-modal-small bwf-rename-funnel-modal",onRequestClose:function(){return t()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(a.__)("Title","funnel-builder")),Object(r.createElement)(o.TextControl,{value:p,onChange:function(e){b(e)},className:h?"bwf-error-border":"",onKeyDown:function(e){if("Enter"===e.key){if(h)return;u(p)}}}),h?Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Title is required","funnel-builder")):null,Object(r.createElement)("div",{className:"bwf-rename-funnel-modal__actions"},Object(r.createElement)(c.a,{className:"bwf-modal-cancel-btn",onClick:t},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(c.a,{isPrimary:!0,onClick:function(){return u(p)},disabled:h,isBusy:s,className:h?"bwf-no-ripple":""},Object(a.__)("Update","funnel-builder"))))}},function(e,t,n){},function(e,t,n){var r=n(463),o=n(660),a=n(661),i=n(662),c=n(663),l=n(664);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=c,u.prototype.set=l,e.exports=u},function(e,t,n){var r=n(424),o=n(388),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];a.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(509);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},,function(e,t,n){var r=n(668)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(471),o=n(686)(r);e.exports=o},function(e,t,n){var r=n(474),o=n(429);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[o(t[n++])];return n&&n==a?e:void 0}},,function(e,t,n){var r=n(345),o=n(542),a=n(543);e.exports=function(e,t){return a(o(e,t,r),e+"")}},function(e,t,n){var r=n(388),o=n(328),a=n(465),i=n(297);e.exports=function(e,t,n){if(!i(n))return!1;var c=typeof t;return!!("number"==c?o(n)&&a(t,n.length):"string"==c&&t in n)&&r(n[t],e)}},function(e,t,n){"use strict";var r=n(267);e.exports={longestPath:function(e){var t={};r.forEach(e.sources(),(function n(o){var a=e.node(o);if(r.has(t,o))return a.rank;t[o]=!0;var i=r.min(r.map(e.outEdges(o),(function(t){return n(t.w)-e.edge(t).minlen})));return i!==Number.POSITIVE_INFINITY&&null!=i||(i=0),a.rank=i}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(296);e.exports=o;function o(e){this._isDirected=!r.has(e,"directed")||e.directed,this._isMultigraph=!!r.has(e,"multigraph")&&e.multigraph,this._isCompound=!!r.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(e,t){e[t]?e[t]++:e[t]=1}function i(e,t){--e[t]||delete e[t]}function c(e,t,n,o){var a=""+t,i=""+n;if(!e&&a>i){var c=a;a=i,i=c}return a+""+i+""+(r.isUndefined(o)?"\0":o)}function l(e,t,n,r){var o=""+t,a=""+n;if(!e&&o>a){var i=o;o=a,a=i}var c={v:o,w:a};return r&&(c.name=r),c}function u(e,t){return c(e,t.v,t.w,t.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(e){return this._label=e,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultNodeLabelFn=e,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._in[t])}))},o.prototype.sinks=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._out[t])}))},o.prototype.setNodes=function(e,t){var n=arguments,o=this;return r.each(e,(function(e){n.length>1?o.setNode(e,t):o.setNode(e)})),this},o.prototype.setNode=function(e,t){return r.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},o.prototype.node=function(e){return this._nodes[e]},o.prototype.hasNode=function(e){return r.has(this._nodes,e)},o.prototype.removeNode=function(e){var t=this;if(r.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],r.each(this.children(e),(function(e){t.setParent(e)})),delete this._children[e]),r.each(r.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],r.each(r.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},o.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(t))t="\0";else{for(var n=t+="";!r.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},o.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},o.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}},o.prototype.children=function(e){if(r.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return r.keys(t)}else{if("\0"===e)return this.nodes();if(this.hasNode(e))return[]}},o.prototype.predecessors=function(e){var t=this._preds[e];if(t)return r.keys(t)},o.prototype.successors=function(e){var t=this._sucs[e];if(t)return r.keys(t)},o.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return r.union(t,this.successors(e))},o.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},o.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){e(r)&&t.setNode(r,n)})),r.each(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var o={};return this._isCompound&&r.each(t.nodes(),(function(e){t.setParent(e,function e(r){var a=n.parent(r);return void 0===a||t.hasNode(a)?(o[r]=a,a):a in o?o[a]:e(a)}(e))})),t},o.prototype.setDefaultEdgeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultEdgeLabelFn=e,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(e,t){var n=this,o=arguments;return r.reduce(e,(function(e,r){return o.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r})),this},o.prototype.setEdge=function(){var e,t,n,o,i=!1,u=arguments[0];"object"==typeof u&&null!==u&&"v"in u?(e=u.v,t=u.w,n=u.name,2===arguments.length&&(o=arguments[1],i=!0)):(e=u,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],i=!0)),e=""+e,t=""+t,r.isUndefined(n)||(n=""+n);var s=c(this._isDirected,e,t,n);if(r.has(this._edgeLabels,s))return i&&(this._edgeLabels[s]=o),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[s]=i?o:this._defaultEdgeLabelFn(e,t,n);var f=l(this._isDirected,e,t,n);return e=f.v,t=f.w,Object.freeze(f),this._edgeObjs[s]=f,a(this._preds[t],e),a(this._sucs[e],t),this._in[t][s]=f,this._out[e][s]=f,this._edgeCount++,this},o.prototype.edge=function(e,t,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(e,t,n){var o=1===arguments.length?u(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return r.has(this._edgeLabels,o)},o.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):c(this._isDirected,e,t,n),o=this._edgeObjs[r];return o&&(e=o.v,t=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],i(this._preds[t],e),i(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},o.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=r.values(n);return t?r.filter(o,(function(e){return e.v===t})):o}},o.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=r.values(n);return t?r.filter(o,(function(e){return e.w===t})):o}},o.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},,function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},,,function(e,t,n){var r=n(515),o=n(516),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,c=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return a.call(e,t)})))}:o;e.exports=c},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(520);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(472),o=n(327);e.exports=function(e,t){return e&&r(e,t,o)}},function(e,t,n){var r=n(685)();e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},,,function(e,t,n){var r=n(468),o=n(716);e.exports=function e(t,n,a,i,c){var l=-1,u=t.length;for(a||(a=o),c||(c=[]);++l<u;){var s=t[l];n>0&&a(s)?n>1?e(s,n-1,a,i,c):r(c,s):i||(c[c.length]=s)}return c}},function(e,t,n){var r=n(415);e.exports=function(e,t,n){for(var o=-1,a=e.length;++o<a;){var i=e[o],c=t(i);if(null!=c&&(void 0===l?c==c&&!r(c):n(c,l)))var l=c,u=i}return u}},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(43),a=n(15),i=n.n(a),c=n(9),l=n(7),u=n.n(l);n(505);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=["label","value","help","className","instanceId","onChange","onClick","prefix","suffix","type","disabled","trafficError"];function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,n,o,a=m(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={isFocused:!1},t}return t=i,(n=[{key:"handleFocusOutside",value:function(){this.setState({isFocused:!1})}},{key:"handleOnClick",value:function(e,t){this.setState({isFocused:!0}),"function"==typeof t&&t(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,o=t.value,a=t.help,i=t.className,l=t.instanceId,s=t.onChange,b=t.onClick,h=t.prefix,m=t.suffix,y=t.type,v=void 0===y?"text":y,g=t.disabled,O=t.trafficError,w=void 0!==O&&O,j=p(t,f),_=(this.state.isFocused,"inspector-text-control-with-affixes-".concat(l)),E=[];a&&E.push("".concat(_,"__help")),h&&E.push("".concat(_,"__prefix")),m&&E.push("".concat(_,"__suffix"));var S=u()(i,{"with-value":""!==o,empty:""===o}),x=u()("text-control-with-affixes",{"text-control-with-prefix":h,"text-control-with-suffix":m,disabled:g});return Object(r.createElement)(c.BaseControl,{label:n,id:_,help:a,className:S,onClick:function(t){return e.handleOnClick(t,b)}},Object(r.createElement)("div",{className:x},h&&Object(r.createElement)("span",{id:"".concat(_,"__prefix"),className:"text-control-with-affixes__prefix"},h),Object(r.createElement)("input",d({className:"components-text-control__input ".concat(w?"bwf-error":""),type:v,id:_,value:o,onChange:function(e){return s(e.target.value)},"aria-describedby":E.join(" "),disabled:g,onFocus:function(){return e.setState({isFocused:!0})}},j)),m&&Object(r.createElement)("span",{id:"".concat(_,"__suffix"),className:"text-control-with-affixes__suffix"},m)))}}])&&b(t.prototype,n),o&&b(t,o),i}(r.Component);g.propTypes={label:i.a.string,help:i.a.string,type:i.a.string,value:i.a.string.isRequired,className:i.a.string,onChange:i.a.func.isRequired,prefix:i.a.node,suffix:i.a.node,disabled:i.a.bool},t.a=Object(o.compose)([o.withInstanceId,c.withFocusOutside])(g)},function(e,t,n){},function(e,t,n){},function(e,t,n){var r=n(422),o=n(464),a=n(423),i=n(665),c=n(669),l=n(513),u=n(514),s=n(672),f=n(673),d=n(518),p=n(674),b=n(391),h=n(676),m=n(677),y=n(522),v=n(278),g=n(390),O=n(681),w=n(297),j=n(683),_=n(327),E=n(344),S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1,e.exports=function e(t,n,x,k,C,P){var N,T=1&n,D=2&n,I=4&n;if(x&&(N=C?x(t,k,C,P):x(t)),void 0!==N)return N;if(!w(t))return t;var A=v(t);if(A){if(N=h(t),!T)return u(t,N)}else{var R=b(t),M="[object Function]"==R||"[object GeneratorFunction]"==R;if(g(t))return l(t,T);if("[object Object]"==R||"[object Arguments]"==R||M&&!C){if(N=D||M?{}:y(t),!T)return D?f(t,c(N,t)):s(t,i(N,t))}else{if(!S[R])return C?t:{};N=m(t,R,T)}}P||(P=new r);var F=P.get(t);if(F)return F;P.set(t,N),j(t)?t.forEach((function(r){N.add(e(r,n,x,r,t,P))})):O(t)&&t.forEach((function(r,o){N.set(o,e(r,n,x,o,t,P))}));var L=A?void 0:(I?D?p:d:D?E:_)(t);return o(L||t,(function(r,o){L&&(r=t[o=r]),a(N,o,e(r,n,x,o,t,P))})),N}},,function(e,t,n){var r=n(442),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var r=n(666),o=n(444),a=n(278),i=n(390),c=n(465),l=n(425),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),s=!n&&o(e),f=!n&&!s&&i(e),d=!n&&!s&&!f&&l(e),p=n||s||f||d,b=p?r(e.length,String):[],h=b.length;for(var m in e)!t&&!u.call(e,m)||p&&("length"==m||f&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||c(m,h))||b.push(m);return b}},,,function(e,t,n){(function(e){var r=n(337),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o?r.Buffer:void 0,c=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(602)(e))},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(468),o=n(426),a=n(467),i=n(516),c=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=o(e);return t}:i;e.exports=c},function(e,t,n){var r=n(519),o=n(467),a=n(327);e.exports=function(e){return r(e,a,o)}},function(e,t,n){var r=n(468),o=n(278);e.exports=function(e,t,n){var a=t(e);return o(e)?a:r(a,n(e))}},function(e,t,n){var r=n(337).Uint8Array;e.exports=r},function(e,t,n){var r=n(469);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(523),o=n(426),a=n(487);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},function(e,t,n){var r=n(297),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},function(e,t,n){e.exports=n(525)},function(e,t,n){var r=n(464),o=n(427),a=n(526),i=n(278);e.exports=function(e,t){return(i(e)?r:o)(e,a(t))}},function(e,t,n){var r=n(345);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t,n){var r=n(515),o=n(687),a=n(316),i=n(278);e.exports=function(e,t){return(i(e)?r:o)(e,a(t,3))}},function(e,t,n){var r=n(690),o=n(318);e.exports=function e(t,n,a,i,c){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,i,e,c))}},function(e,t,n){var r=n(530),o=n(693),a=n(531);e.exports=function(e,t,n,i,c,l){var u=1&n,s=e.length,f=t.length;if(s!=f&&!(u&&f>s))return!1;var d=l.get(e),p=l.get(t);if(d&&p)return d==t&&p==e;var b=-1,h=!0,m=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++b<s;){var y=e[b],v=t[b];if(i)var g=u?i(v,y,b,t,e,l):i(y,v,b,e,t,l);if(void 0!==g){if(g)continue;h=!1;break}if(m){if(!o(t,(function(e,t){if(!a(m,t)&&(y===e||c(y,e,n,i,l)))return m.push(t)}))){h=!1;break}}else if(y!==v&&!c(y,v,n,i,l)){h=!1;break}}return l.delete(e),l.delete(t),h}},function(e,t,n){var r=n(508),o=n(691),a=n(692);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(297);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},,function(e,t,n){var r=n(701),o=n(702);e.exports=function(e,t){return null!=e&&o(e,t,r)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},,function(e,t){e.exports=function(e){return void 0===e}},function(e,t,n){var r=n(475),o=n(316),a=n(540),i=n(278);e.exports=function(e,t){return(i(e)?r:a)(e,o(t,3))}},function(e,t,n){var r=n(427),o=n(328);e.exports=function(e,t){var n=-1,a=o(e)?Array(e.length):[];return r(e,(function(e,r,o){a[++n]=t(e,r,o)})),a}},function(e,t,n){var r=n(706),o=n(427),a=n(316),i=n(707),c=n(278);e.exports=function(e,t,n){var l=c(e)?r:i,u=arguments.length<3;return l(e,a(t,4),n,u,o)}},function(e,t,n){var r=n(717),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,c=o(a.length-t,0),l=Array(c);++i<c;)l[i]=a[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=a[i];return u[t]=n(l),r(e,this,u)}}},function(e,t,n){var r=n(718),o=n(719)(r);e.exports=o},function(e,t){e.exports=function(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},function(e,t,n){var r=n(328),o=n(318);e.exports=function(e){return o(e)&&r(e)}},function(e,t,n){var r=n(728),o=n(327);e.exports=function(e){return null==e?[]:r(e,o(e))}},function(e,t,n){var r=n(296),o=n(548);e.exports=function(e,t,n,r){return function(e,t,n,r){var a,i,c={},l=new o,u=function(e){var t=e.v!==a?e.v:e.w,r=c[t],o=n(e),u=i.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);u<r.distance&&(r.distance=u,r.predecessor=a,l.decrease(t,u))};e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;c[e]={distance:n},l.add(e,n)}));for(;l.size()>0&&(a=l.removeMin(),(i=c[a]).distance!==Number.POSITIVE_INFINITY);)r(a).forEach(u);return c}(e,String(t),n||a,r||function(t){return e.outEdges(t)})};var a=r.constant(1)},function(e,t,n){var r=n(296);function o(){this._arr=[],this._keyIndices={}}e.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},o.prototype.has=function(e){return r.has(this._keyIndices,e)},o.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var o=this._arr,a=o.length;return n[e]=a,o.push({key:e,priority:t}),this._decrease(a),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},o.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},o.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))},o.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},o.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],a=n[t];n[e]=a,n[t]=o,r[a.key]=e,r[o.key]=t}},function(e,t,n){var r=n(296);e.exports=function(e){var t=0,n=[],o={},a=[];return e.nodes().forEach((function(i){r.has(o,i)||function i(c){var l=o[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach((function(e){r.has(o,e)?o[e].onStack&&(l.lowlink=Math.min(l.lowlink,o[e].index)):(i(e),l.lowlink=Math.min(l.lowlink,o[e].lowlink))})),l.lowlink===l.index){var u,s=[];do{u=n.pop(),o[u].onStack=!1,s.push(u)}while(c!==u);a.push(s)}}(i)})),a}},function(e,t,n){var r=n(296);function o(e){var t={},n={},o=[];if(r.each(e.sinks(),(function i(c){if(r.has(n,c))throw new a;r.has(t,c)||(n[c]=!0,t[c]=!0,r.each(e.predecessors(c),i),delete n[c],o.push(c))})),r.size(t)!==e.nodeCount())throw new a;return o}function a(){}e.exports=o,o.CycleException=a,a.prototype=new Error},function(e,t,n){var r=n(296);e.exports=function(e,t,n){r.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),a=[],i={};return r.each(t,(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(t,n,o,a,i,c){r.has(a,n)||(a[n]=!0,o||c.push(n),r.each(i(n),(function(n){e(t,n,o,a,i,c)})),o&&c.push(n))}(e,t,"post"===n,i,o,a)})),a}},function(e,t,n){var r=n(628);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(476);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},function(e,t,n){var r=n(424),o=n(388);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t){e.exports=function(e,t){return e<t}},function(e,t,n){"use strict";var r=n(267),o=n(299).Graph,a=n(432).slack;function i(e,t){return r.forEach(e.nodes(),(function n(o){r.forEach(t.nodeEdges(o),(function(r){var i=r.v,c=o===i?r.w:i;e.hasNode(c)||a(t,r)||(e.setNode(c,{}),e.setEdge(o,c,{}),n(c))}))})),e.nodeCount()}function c(e,t){return r.minBy(t.edges(),(function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return a(t,n)}))}function l(e,t,n){r.forEach(e.nodes(),(function(e){t.node(e).rank+=n}))}e.exports=function(e){var t,n,r=new o({directed:!1}),u=e.nodes()[0],s=e.nodeCount();r.setNode(u,{});for(;i(r,e)<s;)t=c(r,e),n=r.hasNode(t.v)?a(e,t):-a(e,t),l(r,e,n);return r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports={graphlib:n(299),layout:n(740),debug:n(797),util:{time:n(286).time,notime:n(286).notime},version:n(798)}},function(e,t,n){var r=n(658);e.exports={Graph:r.Graph,json:n(730),alg:n(731),version:r.version}},function(e,t,n){e.exports={Graph:n(462),version:n(729)}},function(e,t,n){var r=n(507);e.exports=function(e){return r(e,4)}},function(e,t,n){var r=n(463);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(463),o=n(599),a=n(508);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(389),o=n(327);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},,,function(e,t,n){var r=n(389),o=n(344);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(297),o=n(487),a=n(671),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var c in e)("constructor"!=c||!t&&i.call(e,c))&&n.push(c);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(389),o=n(467);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(389),o=n(517);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(519),o=n(517),a=n(344);e.exports=function(e){return r(e,a,o)}},,function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(469),o=n(678),a=n(679),i=n(680),c=n(521);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(e,n);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return a(e);case"[object Set]":return new l;case"[object Symbol]":return i(e)}}},function(e,t,n){var r=n(469);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(376),o=r?r.prototype:void 0,a=o?o.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},function(e,t,n){var r=n(682),o=n(466),a=n(511),i=a&&a.isMap,c=i?o(i):r;e.exports=c},function(e,t,n){var r=n(391),o=n(318);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(684),o=n(466),a=n(511),i=a&&a.isSet,c=i?o(i):r;e.exports=c},function(e,t,n){var r=n(391),o=n(318);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,a=Object(t),i=r(t),c=i.length;c--;){var l=i[e?c:++o];if(!1===n(a[l],l,a))break}return t}}},function(e,t,n){var r=n(328);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var a=n.length,i=t?a:-1,c=Object(n);(t?i--:++i<a)&&!1!==o(c[i],i,c););return n}}},function(e,t,n){var r=n(427);e.exports=function(e,t){var n=[];return r(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}},function(e,t,n){var r=n(689),o=n(697),a=n(533);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(422),o=n(528);e.exports=function(e,t,n,a){var i=n.length,c=i,l=!a;if(null==e)return!c;for(e=Object(e);i--;){var u=n[i];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<c;){var s=(u=n[i])[0],f=e[s],d=u[1];if(l&&u[2]){if(void 0===f&&!(s in e))return!1}else{var p=new r;if(a)var b=a(f,d,s,e,t,p);if(!(void 0===b?o(d,f,3,a,p):b))return!1}}return!0}},function(e,t,n){var r=n(422),o=n(529),a=n(694),i=n(696),c=n(391),l=n(278),u=n(390),s=n(425),f="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,p,b,h){var m=l(e),y=l(t),v=m?"[object Array]":c(e),g=y?"[object Array]":c(t),O=(v="[object Arguments]"==v?f:v)==f,w=(g="[object Arguments]"==g?f:g)==f,j=v==g;if(j&&u(e)){if(!u(t))return!1;m=!0,O=!1}if(j&&!O)return h||(h=new r),m||s(e)?o(e,t,n,p,b,h):a(e,t,v,n,p,b,h);if(!(1&n)){var _=O&&d.call(e,"__wrapped__"),E=w&&d.call(t,"__wrapped__");if(_||E){var S=_?e.value():e,x=E?t.value():t;return h||(h=new r),b(S,x,n,p,h)}}return!!j&&(h||(h=new r),i(e,t,n,p,b,h))}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(376),o=n(520),a=n(388),i=n(529),c=n(695),l=n(473),u=r?r.prototype:void 0,s=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,f,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=c;case"[object Set]":var b=1&r;if(p||(p=l),e.size!=t.size&&!b)return!1;var h=d.get(e);if(h)return h==t;r|=2,d.set(e,t);var m=i(p(e),p(t),r,u,f,d);return d.delete(e),m;case"[object Symbol]":if(s)return s.call(e)==s.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(518),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,i,c){var l=1&n,u=r(e),s=u.length;if(s!=r(t).length&&!l)return!1;for(var f=s;f--;){var d=u[f];if(!(l?d in t:o.call(t,d)))return!1}var p=c.get(e),b=c.get(t);if(p&&b)return p==t&&b==e;var h=!0;c.set(e,t),c.set(t,e);for(var m=l;++f<s;){var y=e[d=u[f]],v=t[d];if(a)var g=l?a(v,y,d,t,e,c):a(y,v,d,e,t,c);if(!(void 0===g?y===v||i(y,v,n,a,c):g)){h=!1;break}m||(m="constructor"==d)}if(h&&!m){var O=e.constructor,w=t.constructor;O==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof O&&O instanceof O&&"function"==typeof w&&w instanceof w||(h=!1)}return c.delete(e),c.delete(t),h}},function(e,t,n){var r=n(532),o=n(327);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,r(i)]}return t}},function(e,t,n){var r=n(528),o=n(699),a=n(535),i=n(534),c=n(532),l=n(533),u=n(429);e.exports=function(e,t){return i(e)&&c(t)?l(u(e),t):function(n){var i=o(n,e);return void 0===i&&i===t?a(n,e):r(t,i,3)}}},function(e,t,n){var r=n(428);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},,function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},,function(e,t,n){var r=n(536),o=n(704),a=n(534),i=n(429);e.exports=function(e){return a(e)?r(i(e)):o(e)}},function(e,t,n){var r=n(428);e.exports=function(e){return function(t){return r(t,e)}}},,function(e,t){e.exports=function(e,t,n,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}},function(e,t){e.exports=function(e,t,n,r,o){return o(e,(function(e,o,a){n=r?(r=!1,e):t(n,e,o,a)})),n}},function(e,t,n){var r=n(512),o=n(391),a=n(328),i=n(709),c=n(710);e.exports=function(e){if(null==e)return 0;if(a(e))return i(e)?c(e):e.length;var t=o(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},function(e,t,n){var r=n(381),o=n(278),a=n(318);e.exports=function(e){return"string"==typeof e||!o(e)&&a(e)&&"[object String]"==r(e)}},function(e,t,n){var r=n(711),o=n(712),a=n(713);e.exports=function(e){return o(e)?a(e):r(e)}},function(e,t,n){var r=n(536)("length");e.exports=r},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",a="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+o+")"+"?",u="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[a,i,c].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),s="(?:"+[a+r+"?",r,i,c,n].join("|")+")",f=RegExp(o+"(?="+o+")|"+s+u,"g");e.exports=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}},function(e,t,n){var r=n(464),o=n(523),a=n(471),i=n(316),c=n(426),l=n(278),u=n(390),s=n(443),f=n(297),d=n(425);e.exports=function(e,t,n){var p=l(e),b=p||u(e)||d(e);if(t=i(t,4),null==n){var h=e&&e.constructor;n=b?p?new h:[]:f(e)&&s(h)?o(c(e)):{}}return(b?r:a)(e,(function(e,r,o){return t(n,e,r,o)})),n}},function(e,t,n){var r=n(476),o=n(430),a=n(720),i=n(545),c=o((function(e){return a(r(e,1,i,!0))}));e.exports=c},function(e,t,n){var r=n(376),o=n(444),a=n(278),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||o(e)||!!(i&&e&&e[i])}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(470),o=n(509),a=n(345),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=i},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var o=n(),a=16-(o-r);if(r=o,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(530),o=n(721),a=n(725),i=n(531),c=n(726),l=n(473);e.exports=function(e,t,n){var u=-1,s=o,f=e.length,d=!0,p=[],b=p;if(n)d=!1,s=a;else if(f>=200){var h=t?null:c(e);if(h)return l(h);d=!1,s=i,b=new r}else b=t?[]:p;e:for(;++u<f;){var m=e[u],y=t?t(m):m;if(m=n||0!==m?m:0,d&&y==y){for(var v=b.length;v--;)if(b[v]===y)continue e;t&&b.push(y),p.push(m)}else s(b,y,n)||(b!==p&&b.push(y),p.push(m))}return p}},function(e,t,n){var r=n(722);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},function(e,t,n){var r=n(544),o=n(723),a=n(724);e.exports=function(e,t,n){return t==t?a(e,t,n):r(e,o,n)}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(675),o=n(727),a=n(473),i=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=i},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(475);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},function(e,t){e.exports="2.1.8"},function(e,t,n){var r=n(296),o=n(462);function a(e){return r.map(e.nodes(),(function(t){var n=e.node(t),o=e.parent(t),a={v:t};return r.isUndefined(n)||(a.value=n),r.isUndefined(o)||(a.parent=o),a}))}function i(e){return r.map(e.edges(),(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return r.isUndefined(t.name)||(o.name=t.name),r.isUndefined(n)||(o.value=n),o}))}e.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:a(e),edges:i(e)};r.isUndefined(e.graph())||(t.value=r.clone(e.graph()));return t},read:function(e){var t=new o(e.options).setGraph(e.value);return r.each(e.nodes,(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),r.each(e.edges,(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}}},function(e,t,n){e.exports={components:n(732),dijkstra:n(547),dijkstraAll:n(733),findCycles:n(734),floydWarshall:n(735),isAcyclic:n(736),postorder:n(737),preorder:n(738),prim:n(739),tarjan:n(549),topsort:n(550)}},function(e,t,n){var r=n(296);e.exports=function(e){var t,n={},o=[];function a(o){r.has(n,o)||(n[o]=!0,t.push(o),r.each(e.successors(o),a),r.each(e.predecessors(o),a))}return r.each(e.nodes(),(function(e){t=[],a(e),t.length&&o.push(t)})),o}},function(e,t,n){var r=n(547),o=n(296);e.exports=function(e,t,n){return o.transform(e.nodes(),(function(o,a){o[a]=r(e,a,t,n)}),{})}},function(e,t,n){var r=n(296),o=n(549);e.exports=function(e){return r.filter(o(e),(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))}},function(e,t,n){var r=n(296);e.exports=function(e,t,n){return function(e,t,n){var r={},o=e.nodes();return o.forEach((function(e){r[e]={},r[e][e]={distance:0},o.forEach((function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var o=n.v===e?n.w:n.v,a=t(n);r[e][o]={distance:a,predecessor:e}}))})),o.forEach((function(e){var t=r[e];o.forEach((function(n){var a=r[n];o.forEach((function(n){var r=a[e],o=t[n],i=a[n],c=r.distance+o.distance;c<i.distance&&(i.distance=c,i.predecessor=o.predecessor)}))}))})),r}(e,t||o,n||function(t){return e.outEdges(t)})};var o=r.constant(1)},function(e,t,n){var r=n(550);e.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},function(e,t,n){var r=n(551);e.exports=function(e,t){return r(e,t,"post")}},function(e,t,n){var r=n(551);e.exports=function(e,t){return r(e,t,"pre")}},function(e,t,n){var r=n(296),o=n(462),a=n(548);e.exports=function(e,t){var n,i=new o,c={},l=new a;function u(e){var r=e.v===n?e.w:e.v,o=l.priority(r);if(void 0!==o){var a=t(e);a<o&&(c[r]=n,l.decrease(r,a))}}if(0===e.nodeCount())return i;r.each(e.nodes(),(function(e){l.add(e,Number.POSITIVE_INFINITY),i.setNode(e)})),l.decrease(e.nodes()[0],0);var s=!1;for(;l.size()>0;){if(n=l.removeMin(),r.has(c,n))i.setEdge(n,c[n]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(n).forEach(u)}return i}},function(e,t,n){"use strict";var r=n(267),o=n(776),a=n(779),i=n(780),c=n(286).normalizeRanks,l=n(782),u=n(286).removeEmptyRanks,s=n(783),f=n(784),d=n(785),p=n(786),b=n(795),h=n(286),m=n(299).Graph;e.exports=function(e,t){var n=t&&t.debugTiming?h.time:h.notime;n("layout",(function(){var t=n("  buildLayoutGraph",(function(){return function(e){var t=new m({multigraph:!0,compound:!0}),n=x(e.graph());return t.setGraph(r.merge({},v,S(n,y),r.pick(n,g))),r.forEach(e.nodes(),(function(n){var o=x(e.node(n));t.setNode(n,r.defaults(S(o,O),w)),t.setParent(n,e.parent(n))})),r.forEach(e.edges(),(function(n){var o=x(e.edge(n));t.setEdge(n,r.merge({},_,S(o,j),r.pick(o,E)))})),t}(e)}));n("  runLayout",(function(){!function(e,t){t("    makeSpaceForEdgeLabels",(function(){!function(e){var t=e.graph();t.ranksep/=2,r.forEach(e.edges(),(function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(e)})),t("    removeSelfEdges",(function(){!function(e){r.forEach(e.edges(),(function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e)})),t("    acyclic",(function(){o.run(e)})),t("    nestingGraph.run",(function(){s.run(e)})),t("    rank",(function(){i(h.asNonCompoundGraph(e))})),t("    injectEdgeLabelProxies",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};h.addDummyNode(e,"edge-proxy",o,"_ep")}}))}(e)})),t("    removeEmptyRanks",(function(){u(e)})),t("    nestingGraph.cleanup",(function(){s.cleanup(e)})),t("    normalizeRanks",(function(){c(e)})),t("    assignRankMinMax",(function(){!function(e){var t=0;r.forEach(e.nodes(),(function(n){var o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=r.max(t,o.maxRank))})),e.graph().maxRank=t}(e)})),t("    removeEdgeLabelProxies",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(e)})),t("    normalize.run",(function(){a.run(e)})),t("    parentDummyChains",(function(){l(e)})),t("    addBorderSegments",(function(){f(e)})),t("    order",(function(){p(e)})),t("    insertSelfEdges",(function(){!function(e){var t=h.buildLayerMatrix(e);r.forEach(t,(function(t){var n=0;r.forEach(t,(function(t,o){var a=e.node(t);a.order=o+n,r.forEach(a.selfEdges,(function(t){h.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:a.rank,order:o+ ++n,e:t.e,label:t.label},"_se")})),delete a.selfEdges}))}))}(e)})),t("    adjustCoordinateSystem",(function(){d.adjust(e)})),t("    position",(function(){b(e)})),t("    positionSelfEdges",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),o=r.x+r.width/2,a=r.y,i=n.x-o,c=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:a-c},{x:o+5*i/6,y:a-c},{x:o+i,y:a},{x:o+5*i/6,y:a+c},{x:o+2*i/3,y:a+c}],n.label.x=n.x,n.label.y=n.y}}))}(e)})),t("    removeBorderNodes",(function(){!function(e){r.forEach(e.nodes(),(function(t){if(e.children(t).length){var n=e.node(t),o=e.node(n.borderTop),a=e.node(n.borderBottom),i=e.node(r.last(n.borderLeft)),c=e.node(r.last(n.borderRight));n.width=Math.abs(c.x-i.x),n.height=Math.abs(a.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}})),r.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}(e)})),t("    normalize.undo",(function(){a.undo(e)})),t("    fixupEdgeLabelCoords",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(e)})),t("    undoCoordinateSystem",(function(){d.undo(e)})),t("    translateGraph",(function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,a=0,i=e.graph(),c=i.marginx||0,l=i.marginy||0;function u(e){var r=e.x,i=e.y,c=e.width,l=e.height;t=Math.min(t,r-c/2),n=Math.max(n,r+c/2),o=Math.min(o,i-l/2),a=Math.max(a,i+l/2)}r.forEach(e.nodes(),(function(t){u(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.has(n,"x")&&u(n)})),t-=c,o-=l,r.forEach(e.nodes(),(function(n){var r=e.node(n);r.x-=t,r.y-=o})),r.forEach(e.edges(),(function(n){var a=e.edge(n);r.forEach(a.points,(function(e){e.x-=t,e.y-=o})),r.has(a,"x")&&(a.x-=t),r.has(a,"y")&&(a.y-=o)})),i.width=n-t+c,i.height=a-o+l}(e)})),t("    assignNodeIntersects",(function(){!function(e){r.forEach(e.edges(),(function(t){var n,r,o=e.edge(t),a=e.node(t.v),i=e.node(t.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=i,r=a),o.points.unshift(h.intersectRect(a,n)),o.points.push(h.intersectRect(i,r))}))}(e)})),t("    reversePoints",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);n.reversed&&n.points.reverse()}))}(e)})),t("    acyclic.undo",(function(){o.undo(e)}))}(t,n)})),n("  updateInputGraph",(function(){!function(e,t){r.forEach(e.nodes(),(function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))})),r.forEach(e.edges(),(function(n){var o=e.edge(n),a=t.edge(n);o.points=a.points,r.has(a,"x")&&(o.x=a.x,o.y=a.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],v={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},g=["acyclicer","ranker","rankdir","align"],O=["width","height"],w={width:0,height:0},j=["minlen","weight","width","height","labeloffset"],_={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function S(e,t){return r.mapValues(r.pick(e,t),Number)}function x(e){var t={};return r.forEach(e,(function(e,n){t[n.toLowerCase()]=e})),t}},function(e,t,n){var r=n(507);e.exports=function(e){return r(e,5)}},function(e,t,n){var r=n(430),o=n(388),a=n(431),i=n(344),c=Object.prototype,l=c.hasOwnProperty,u=r((function(e,t){e=Object(e);var n=-1,r=t.length,u=r>2?t[2]:void 0;for(u&&a(t[0],t[1],u)&&(r=1);++n<r;)for(var s=t[n],f=i(s),d=-1,p=f.length;++d<p;){var b=f[d],h=e[b];(void 0===h||o(h,c[b])&&!l.call(e,b))&&(e[b]=s[b])}return e}));e.exports=u},function(e,t,n){var r=n(744)(n(745));e.exports=r},function(e,t,n){var r=n(316),o=n(328),a=n(327);e.exports=function(e){return function(t,n,i){var c=Object(t);if(!o(t)){var l=r(n,3);t=a(t),n=function(e){return l(c[e],e,c)}}var u=e(t,n,i);return u>-1?c[l?t[u]:u]:void 0}}},function(e,t,n){var r=n(544),o=n(316),a=n(746),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var l=null==n?0:a(n);return l<0&&(l=i(c+l,0)),r(e,o(t,3),l)}},function(e,t,n){var r=n(552);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(472),o=n(526),a=n(344);e.exports=function(e,t){return null==e?e:r(e,o(t),a)}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var r=n(424),o=n(471),a=n(316);e.exports=function(e,t){var n={};return t=a(t,3),o(e,(function(e,o,a){r(n,o,t(e,o,a))})),n}},function(e,t,n){var r=n(477),o=n(751),a=n(345);e.exports=function(e){return e&&e.length?r(e,a,o):void 0}},function(e,t){e.exports=function(e,t){return e>t}},function(e,t,n){var r=n(753),o=n(757)((function(e,t,n){r(e,t,n)}));e.exports=o},function(e,t,n){var r=n(422),o=n(554),a=n(472),i=n(754),c=n(297),l=n(344),u=n(555);e.exports=function e(t,n,s,f,d){t!==n&&a(n,(function(a,l){if(d||(d=new r),c(a))i(t,n,l,s,e,f,d);else{var p=f?f(u(t,l),a,l+"",t,n,d):void 0;void 0===p&&(p=a),o(t,l,p)}}),l)}},function(e,t,n){var r=n(554),o=n(513),a=n(521),i=n(514),c=n(522),l=n(444),u=n(278),s=n(545),f=n(390),d=n(443),p=n(297),b=n(755),h=n(425),m=n(555),y=n(756);e.exports=function(e,t,n,v,g,O,w){var j=m(e,n),_=m(t,n),E=w.get(_);if(E)r(e,n,E);else{var S=O?O(j,_,n+"",e,t,w):void 0,x=void 0===S;if(x){var k=u(_),C=!k&&f(_),P=!k&&!C&&h(_);S=_,k||C||P?u(j)?S=j:s(j)?S=i(j):C?(x=!1,S=o(_,!0)):P?(x=!1,S=a(_,!0)):S=[]:b(_)||l(_)?(S=j,l(j)?S=y(j):p(j)&&!d(j)||(S=c(_))):x=!1}x&&(w.set(_,S),g(S,_,v,O,w),w.delete(_)),r(e,n,S)}}},function(e,t,n){var r=n(381),o=n(426),a=n(318),i=Function.prototype,c=Object.prototype,l=i.toString,u=c.hasOwnProperty,s=l.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==s}},function(e,t,n){var r=n(389),o=n(344);e.exports=function(e){return r(e,o(e))}},function(e,t,n){var r=n(430),o=n(431);e.exports=function(e){return r((function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,c=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,c&&o(n[0],n[1],c)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var l=n[r];l&&e(t,l,r,i)}return t}))}},function(e,t,n){var r=n(477),o=n(556),a=n(345);e.exports=function(e){return e&&e.length?r(e,a,o):void 0}},function(e,t,n){var r=n(477),o=n(316),a=n(556);e.exports=function(e,t){return e&&e.length?r(e,o(t,2),a):void 0}},function(e,t,n){var r=n(761),o=n(764)((function(e,t){return null==e?{}:r(e,t)}));e.exports=o},function(e,t,n){var r=n(762),o=n(535);e.exports=function(e,t){return r(e,t,(function(t,n){return o(e,n)}))}},function(e,t,n){var r=n(428),o=n(763),a=n(474);e.exports=function(e,t,n){for(var i=-1,c=t.length,l={};++i<c;){var u=t[i],s=r(e,u);n(s,u)&&o(l,a(u,e),s)}return l}},function(e,t,n){var r=n(423),o=n(474),a=n(465),i=n(297),c=n(429);e.exports=function(e,t,n,l){if(!i(e))return e;for(var u=-1,s=(t=o(t,e)).length,f=s-1,d=e;null!=d&&++u<s;){var p=c(t[u]),b=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(u!=f){var h=d[p];void 0===(b=l?l(h,p,d):void 0)&&(b=i(h)?h:a(t[u+1])?[]:{})}r(d,p,b),d=d[p]}return e}},function(e,t,n){var r=n(553),o=n(542),a=n(543);e.exports=function(e){return a(o(e,void 0,r),e+"")}},function(e,t,n){var r=n(766)();e.exports=r},function(e,t,n){var r=n(767),o=n(431),a=n(552);e.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&o(t,n,i)&&(n=i=void 0),t=a(t),void 0===n?(n=t,t=0):n=a(n),i=void 0===i?t<n?1:-1:a(i),r(t,n,i,e)}}},function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,o,a){for(var i=-1,c=r(n((t-e)/(o||1)),0),l=Array(c);c--;)l[a?c:++i]=e,e+=o;return l}},function(e,t,n){var r=n(476),o=n(769),a=n(430),i=n(431),c=a((function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])}));e.exports=c},function(e,t,n){var r=n(475),o=n(428),a=n(316),i=n(540),c=n(770),l=n(466),u=n(771),s=n(345),f=n(278);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return f(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[s];var d=-1;t=r(t,l(a));var p=i(e,(function(e,n,o){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return c(p,(function(e,t){return u(e,t,n)}))}},function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},function(e,t,n){var r=n(772);e.exports=function(e,t,n){for(var o=-1,a=e.criteria,i=t.criteria,c=a.length,l=n.length;++o<c;){var u=r(a[o],i[o]);if(u)return o>=l?u:u*("desc"==n[o]?-1:1)}return e.index-t.index}},function(e,t,n){var r=n(415);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,a=e==e,i=r(e),c=void 0!==t,l=null===t,u=t==t,s=r(t);if(!l&&!s&&!i&&e>t||i&&c&&u&&!l&&!s||o&&c&&u||!n&&u||!a)return 1;if(!o&&!i&&!s&&e<t||s&&n&&a&&!o&&!i||l&&n&&a||!c&&a||!u)return-1}return 0}},function(e,t,n){var r=n(700),o=0;e.exports=function(e){var t=++o;return r(e)+t}},function(e,t,n){var r=n(423),o=n(775);e.exports=function(e,t){return o(e||[],t||[],r)}},function(e,t){e.exports=function(e,t,n){for(var r=-1,o=e.length,a=t.length,i={};++r<o;){var c=r<a?t[r]:void 0;n(i,e[r],c)}return i}},function(e,t,n){"use strict";var r=n(267),o=n(777);e.exports={run:function(e){var t="greedy"===e.graph().acyclicer?o(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],n={},o={};function a(i){r.has(o,i)||(o[i]=!0,n[i]=!0,r.forEach(e.outEdges(i),(function(e){r.has(n,e.w)?t.push(e):a(e.w)})),delete n[i])}return r.forEach(e.nodes(),a),t}(e);r.forEach(t,(function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,r.uniqueId("rev"))}))},undo:function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}}},function(e,t,n){var r=n(267),o=n(299).Graph,a=n(778);e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new o,i=0,c=0;r.forEach(e.nodes(),(function(e){n.setNode(e,{v:e,in:0,out:0})})),r.forEach(e.edges(),(function(e){var r=n.edge(e.v,e.w)||0,o=t(e),a=r+o;n.setEdge(e.v,e.w,a),c=Math.max(c,n.node(e.v).out+=o),i=Math.max(i,n.node(e.w).in+=o)}));var u=r.range(c+i+3).map((function(){return new a})),s=i+1;return r.forEach(n.nodes(),(function(e){l(u,s,n.node(e))})),{graph:n,buckets:u,zeroIdx:s}}(e,t||i),u=function(e,t,n){var r,o=[],a=t[t.length-1],i=t[0];for(;e.nodeCount();){for(;r=i.dequeue();)c(e,t,n,r);for(;r=a.dequeue();)c(e,t,n,r);if(e.nodeCount())for(var l=t.length-2;l>0;--l)if(r=t[l].dequeue()){o=o.concat(c(e,t,n,r,!0));break}}return o}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(u,(function(t){return e.outEdges(t.v,t.w)})),!0)};var i=r.constant(1);function c(e,t,n,o,a){var i=a?[]:void 0;return r.forEach(e.inEdges(o.v),(function(r){var o=e.edge(r),c=e.node(r.v);a&&i.push({v:r.v,w:r.w}),c.out-=o,l(t,n,c)})),r.forEach(e.outEdges(o.v),(function(r){var o=e.edge(r),a=r.w,i=e.node(a);i.in-=o,l(t,n,i)})),e.removeNode(o.v),i}function l(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},function(e,t){function n(){var e={};e._next=e._prev=e,this._sentinel=e}function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function o(e,t){if("_next"!==e&&"_prev"!==e)return t}e.exports=n,n.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return r(t),t},n.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},n.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,o)),n=n._prev;return"["+e.join(", ")+"]"}},function(e,t,n){"use strict";var r=n(267),o=n(286);e.exports={run:function(e){e.graph().dummyChains=[],r.forEach(e.edges(),(function(t){!function(e,t){var n,r,a,i=t.v,c=e.node(i).rank,l=t.w,u=e.node(l).rank,s=t.name,f=e.edge(t),d=f.labelRank;if(u===c+1)return;for(e.removeEdge(t),a=0,++c;c<u;++a,++c)f.points=[],r={width:0,height:0,edgeLabel:f,edgeObj:t,rank:c},n=o.addDummyNode(e,"edge",r,"_d"),c===d&&(r.width=f.width,r.height=f.height,r.dummy="edge-label",r.labelpos=f.labelpos),e.setEdge(i,n,{weight:f.weight},s),0===a&&e.graph().dummyChains.push(n),i=n;e.setEdge(i,l,{weight:f.weight},s)}(e,t)}))},undo:function(e){r.forEach(e.graph().dummyChains,(function(t){var n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)}))}}},function(e,t,n){"use strict";var r=n(432).longestPath,o=n(557),a=n(781);e.exports=function(e){switch(e.graph().ranker){case"network-simplex":c(e);break;case"tight-tree":!function(e){r(e),o(e)}(e);break;case"longest-path":i(e);break;default:c(e)}};var i=r;function c(e){a(e)}},function(e,t,n){"use strict";var r=n(267),o=n(557),a=n(432).slack,i=n(432).longestPath,c=n(299).alg.preorder,l=n(299).alg.postorder,u=n(286).simplify;function s(e){e=u(e),i(e);var t,n=o(e);for(p(n),f(n,e);t=h(n);)y(n,e,t,m(n,e,t))}function f(e,t){var n=l(e,e.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(e,t,n){var r=e.node(n).parent;e.edge(n,r).cutvalue=d(e,t,n)}(e,t,n)}))}function d(e,t,n){var o=e.node(n).parent,a=!0,i=t.edge(n,o),c=0;return i||(a=!1,i=t.edge(o,n)),c=i.weight,r.forEach(t.nodeEdges(n),(function(r){var i,l,u=r.v===n,s=u?r.w:r.v;if(s!==o){var f=u===a,d=t.edge(r).weight;if(c+=f?d:-d,i=n,l=s,e.hasEdge(i,l)){var p=e.edge(n,s).cutvalue;c+=f?-p:p}}})),c}function p(e,t){arguments.length<2&&(t=e.nodes()[0]),b(e,{},1,t)}function b(e,t,n,o,a){var i=n,c=e.node(o);return t[o]=!0,r.forEach(e.neighbors(o),(function(a){r.has(t,a)||(n=b(e,t,n,a,o))})),c.low=i,c.lim=n++,a?c.parent=a:delete c.parent,n}function h(e){return r.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function m(e,t,n){var o=n.v,i=n.w;t.hasEdge(o,i)||(o=n.w,i=n.v);var c=e.node(o),l=e.node(i),u=c,s=!1;c.lim>l.lim&&(u=l,s=!0);var f=r.filter(t.edges(),(function(t){return s===v(e,e.node(t.v),u)&&s!==v(e,e.node(t.w),u)}));return r.minBy(f,(function(e){return a(t,e)}))}function y(e,t,n,o){var a=n.v,i=n.w;e.removeEdge(a,i),e.setEdge(o.v,o.w,{}),p(e),f(e,t),function(e,t){var n=r.find(e.nodes(),(function(e){return!t.node(e).parent})),o=c(e,n);o=o.slice(1),r.forEach(o,(function(n){var r=e.node(n).parent,o=t.edge(n,r),a=!1;o||(o=t.edge(r,n),a=!0),t.node(n).rank=t.node(r).rank+(a?o.minlen:-o.minlen)}))}(e,t)}function v(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}e.exports=s,s.initLowLimValues=p,s.initCutValues=f,s.calcCutValue=d,s.leaveEdge=h,s.enterEdge=m,s.exchangeEdges=y},function(e,t,n){var r=n(267);e.exports=function(e){var t=function(e){var t={},n=0;function o(a){var i=n;r.forEach(e.children(a),o),t[a]={low:i,lim:n++}}return r.forEach(e.children(),o),t}(e);r.forEach(e.graph().dummyChains,(function(n){for(var r=e.node(n),o=r.edgeObj,a=function(e,t,n,r){var o,a,i=[],c=[],l=Math.min(t[n].low,t[r].low),u=Math.max(t[n].lim,t[r].lim);o=n;do{o=e.parent(o),i.push(o)}while(o&&(t[o].low>l||u>t[o].lim));a=o,o=r;for(;(o=e.parent(o))!==a;)c.push(o);return{path:i.concat(c.reverse()),lca:a}}(e,t,o.v,o.w),i=a.path,c=a.lca,l=0,u=i[l],s=!0;n!==o.w;){if(r=e.node(n),s){for(;(u=i[l])!==c&&e.node(u).maxRank<r.rank;)l++;u===c&&(s=!1)}if(!s){for(;l<i.length-1&&e.node(u=i[l+1]).minRank<=r.rank;)l++;u=i[l]}e.setParent(n,u),n=e.successors(n)[0]}}))}},function(e,t,n){var r=n(267),o=n(286);e.exports={run:function(e){var t=o.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};return r.forEach(e.children(),(function(n){!function n(o,a){var i=e.children(o);i&&i.length&&r.forEach(i,(function(e){n(e,a+1)}));t[o]=a}(n,1)})),t}(e),a=r.max(r.values(n))-1,i=2*a+1;e.graph().nestingRoot=t,r.forEach(e.edges(),(function(t){e.edge(t).minlen*=i}));var c=function(e){return r.reduce(e.edges(),(function(t,n){return t+e.edge(n).weight}),0)}(e)+1;r.forEach(e.children(),(function(l){!function e(t,n,a,i,c,l,u){var s=t.children(u);if(!s.length)return void(u!==n&&t.setEdge(n,u,{weight:0,minlen:a}));var f=o.addBorderNode(t,"_bt"),d=o.addBorderNode(t,"_bb"),p=t.node(u);t.setParent(f,u),p.borderTop=f,t.setParent(d,u),p.borderBottom=d,r.forEach(s,(function(r){e(t,n,a,i,c,l,r);var o=t.node(r),s=o.borderTop?o.borderTop:r,p=o.borderBottom?o.borderBottom:r,b=o.borderTop?i:2*i,h=s!==p?1:c-l[u]+1;t.setEdge(f,s,{weight:b,minlen:h,nestingEdge:!0}),t.setEdge(p,d,{weight:b,minlen:h,nestingEdge:!0})})),t.parent(u)||t.setEdge(n,f,{weight:0,minlen:c+l[u]})}(e,t,i,c,a,n,l)})),e.graph().nodeRankFactor=i},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,r.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}}},function(e,t,n){var r=n(267),o=n(286);function a(e,t,n,r,a,i){var c={width:0,height:0,rank:i,borderType:t},l=a[t][i-1],u=o.addDummyNode(e,"border",c,n);a[t][i]=u,e.setParent(u,r),l&&e.setEdge(l,u,{weight:1})}e.exports=function(e){r.forEach(e.children(),(function t(n){var o=e.children(n),i=e.node(n);if(o.length&&r.forEach(o,t),r.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var c=i.minRank,l=i.maxRank+1;c<l;++c)a(e,"borderLeft","_bl",n,i,c),a(e,"borderRight","_br",n,i,c)}}))}},function(e,t,n){"use strict";var r=n(267);function o(e){r.forEach(e.nodes(),(function(t){a(e.node(t))})),r.forEach(e.edges(),(function(t){a(e.edge(t))}))}function a(e){var t=e.width;e.width=e.height,e.height=t}function i(e){e.y=-e.y}function c(e){var t=e.x;e.x=e.y,e.y=t}e.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||o(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){r.forEach(e.nodes(),(function(t){i(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,i),r.has(n,"y")&&i(n)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){r.forEach(e.nodes(),(function(t){c(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,c),r.has(n,"x")&&c(n)}))}(e),o(e))}}},function(e,t,n){"use strict";var r=n(267),o=n(787),a=n(788),i=n(789),c=n(793),l=n(794),u=n(299).Graph,s=n(286);function f(e,t,n){return r.map(t,(function(t){return c(e,t,n)}))}function d(e,t){var n=new u;r.forEach(e,(function(e){var o=e.graph().root,a=i(e,o,n,t);r.forEach(a.vs,(function(t,n){e.node(t).order=n})),l(e,n,a.vs)}))}function p(e,t){r.forEach(t,(function(t){r.forEach(t,(function(t,n){e.node(t).order=n}))}))}e.exports=function(e){var t=s.maxRank(e),n=f(e,r.range(1,t+1),"inEdges"),i=f(e,r.range(t-1,-1,-1),"outEdges"),c=o(e);p(e,c);for(var l,u=Number.POSITIVE_INFINITY,b=0,h=0;h<4;++b,++h){d(b%2?n:i,b%4>=2),c=s.buildLayerMatrix(e);var m=a(e,c);m<u&&(h=0,l=r.cloneDeep(c),u=m)}p(e,l)}},function(e,t,n){"use strict";var r=n(267);e.exports=function(e){var t={},n=r.filter(e.nodes(),(function(t){return!e.children(t).length})),o=r.max(r.map(n,(function(t){return e.node(t).rank}))),a=r.map(r.range(o+1),(function(){return[]}));var i=r.sortBy(n,(function(t){return e.node(t).rank}));return r.forEach(i,(function n(o){if(r.has(t,o))return;t[o]=!0;var i=e.node(o);a[i.rank].push(o),r.forEach(e.successors(o),n)})),a}},function(e,t,n){"use strict";var r=n(267);function o(e,t,n){for(var o=r.zipObject(n,r.map(n,(function(e,t){return t}))),a=r.flatten(r.map(t,(function(t){return r.sortBy(r.map(e.outEdges(t),(function(t){return{pos:o[t.w],weight:e.edge(t).weight}})),"pos")})),!0),i=1;i<n.length;)i<<=1;var c=2*i-1;i-=1;var l=r.map(new Array(c),(function(){return 0})),u=0;return r.forEach(a.forEach((function(e){var t=e.pos+i;l[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=l[t+1]),l[t=t-1>>1]+=e.weight;u+=e.weight*n}))),u}e.exports=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=o(e,t[r-1],t[r]);return n}},function(e,t,n){var r=n(267),o=n(790),a=n(791),i=n(792);e.exports=function e(t,n,c,l){var u=t.children(n),s=t.node(n),f=s?s.borderLeft:void 0,d=s?s.borderRight:void 0,p={};f&&(u=r.filter(u,(function(e){return e!==f&&e!==d})));var b=o(t,u);r.forEach(b,(function(n){if(t.children(n.v).length){var o=e(t,n.v,c,l);p[n.v]=o,r.has(o,"barycenter")&&(a=n,i=o,r.isUndefined(a.barycenter)?(a.barycenter=i.barycenter,a.weight=i.weight):(a.barycenter=(a.barycenter*a.weight+i.barycenter*i.weight)/(a.weight+i.weight),a.weight+=i.weight))}var a,i}));var h=a(b,c);!function(e,t){r.forEach(e,(function(e){e.vs=r.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}(h,p);var m=i(h,l);if(f&&(m.vs=r.flatten([f,m.vs,d],!0),t.predecessors(f).length)){var y=t.node(t.predecessors(f)[0]),v=t.node(t.predecessors(d)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+v.order)/(m.weight+2),m.weight+=2}return m}},function(e,t,n){var r=n(267);e.exports=function(e,t){return r.map(t,(function(t){var n=e.inEdges(t);if(n.length){var o=r.reduce(n,(function(t,n){var r=e.edge(n),o=e.node(n.v);return{sum:t.sum+r.weight*o.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}}return{v:t}}))}},function(e,t,n){"use strict";var r=n(267);e.exports=function(e,t){var n={};return r.forEach(e,(function(e,t){var o=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};r.isUndefined(e.barycenter)||(o.barycenter=e.barycenter,o.weight=e.weight)})),r.forEach(t.edges(),(function(e){var t=n[e.v],o=n[e.w];r.isUndefined(t)||r.isUndefined(o)||(o.indegree++,t.out.push(n[e.w]))})),function(e){var t=[];function n(e){return function(t){t.merged||(r.isUndefined(t.barycenter)||r.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function o(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){var a=e.pop();t.push(a),r.forEach(a.in.reverse(),n(a)),r.forEach(a.out,o(a))}return r.map(r.filter(t,(function(e){return!e.merged})),(function(e){return r.pick(e,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(e){return!e.indegree})))}},function(e,t,n){var r=n(267),o=n(286);function a(e,t,n){for(var o;t.length&&(o=r.last(t)).i<=n;)t.pop(),e.push(o.vs),n++;return n}e.exports=function(e,t){var n=o.partition(e,(function(e){return r.has(e,"barycenter")})),i=n.lhs,c=r.sortBy(n.rhs,(function(e){return-e.i})),l=[],u=0,s=0,f=0;i.sort((d=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:d?t.i-e.i:e.i-t.i})),f=a(l,c,f),r.forEach(i,(function(e){f+=e.vs.length,l.push(e.vs),u+=e.barycenter*e.weight,s+=e.weight,f=a(l,c,f)}));var d;var p={vs:r.flatten(l,!0)};s&&(p.barycenter=u/s,p.weight=s);return p}},function(e,t,n){var r=n(267),o=n(299).Graph;e.exports=function(e,t,n){var a=function(e){var t;for(;e.hasNode(t=r.uniqueId("_root")););return t}(e),i=new o({compound:!0}).setGraph({root:a}).setDefaultNodeLabel((function(t){return e.node(t)}));return r.forEach(e.nodes(),(function(o){var c=e.node(o),l=e.parent(o);(c.rank===t||c.minRank<=t&&t<=c.maxRank)&&(i.setNode(o),i.setParent(o,l||a),r.forEach(e[n](o),(function(t){var n=t.v===o?t.w:t.v,a=i.edge(n,o),c=r.isUndefined(a)?0:a.weight;i.setEdge(n,o,{weight:e.edge(t).weight+c})})),r.has(c,"minRank")&&i.setNode(o,{borderLeft:c.borderLeft[t],borderRight:c.borderRight[t]}))})),i}},function(e,t,n){var r=n(267);e.exports=function(e,t,n){var o,a={};r.forEach(n,(function(n){for(var r,i,c=e.parent(n);c;){if((r=e.parent(c))?(i=a[r],a[r]=c):(i=o,o=c),i&&i!==c)return void t.setEdge(i,c);c=r}}))}},function(e,t,n){"use strict";var r=n(267),o=n(286),a=n(796).positionX;e.exports=function(e){(function(e){var t=o.buildLayerMatrix(e),n=e.graph().ranksep,a=0;r.forEach(t,(function(t){var o=r.max(r.map(t,(function(t){return e.node(t).height})));r.forEach(t,(function(t){e.node(t).y=a+o/2})),a+=o+n}))})(e=o.asNonCompoundGraph(e)),r.forEach(a(e),(function(t,n){e.node(n).x=t}))}},function(e,t,n){"use strict";var r=n(267),o=n(299).Graph,a=n(286);function i(e,t){var n={};return r.reduce(t,(function(t,o){var a=0,i=0,c=t.length,u=r.last(o);return r.forEach(o,(function(t,s){var f=function(e,t){if(e.node(t).dummy)return r.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}(e,t),d=f?e.node(f).order:c;(f||t===u)&&(r.forEach(o.slice(i,s+1),(function(t){r.forEach(e.predecessors(t),(function(r){var o=e.node(r),i=o.order;!(i<a||d<i)||o.dummy&&e.node(t).dummy||l(n,r,t)}))})),i=s+1,a=d)})),o})),n}function c(e,t){var n={};function o(t,o,a,i,c){var u;r.forEach(r.range(o,a),(function(o){u=t[o],e.node(u).dummy&&r.forEach(e.predecessors(u),(function(t){var r=e.node(t);r.dummy&&(r.order<i||r.order>c)&&l(n,t,u)}))}))}return r.reduce(t,(function(t,n){var a,i=-1,c=0;return r.forEach(n,(function(r,l){if("border"===e.node(r).dummy){var u=e.predecessors(r);u.length&&(a=e.node(u[0]).order,o(n,c,l,i,a),c=l,i=a)}o(n,c,n.length,a,t.length)})),n})),n}function l(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function u(e,t,n){if(t>n){var o=t;t=n,n=o}return r.has(e[t],n)}function s(e,t,n,o){var a={},i={},c={};return r.forEach(t,(function(e){r.forEach(e,(function(e,t){a[e]=e,i[e]=e,c[e]=t}))})),r.forEach(t,(function(e){var t=-1;r.forEach(e,(function(e){var l=o(e);if(l.length)for(var s=((l=r.sortBy(l,(function(e){return c[e]}))).length-1)/2,f=Math.floor(s),d=Math.ceil(s);f<=d;++f){var p=l[f];i[e]===e&&t<c[p]&&!u(n,e,p)&&(i[p]=e,i[e]=a[e]=a[p],t=c[p])}}))})),{root:a,align:i}}function f(e,t,n,a,i){var c={},l=function(e,t,n,a){var i=new o,c=e.graph(),l=function(e,t,n){return function(o,a,i){var c,l=o.node(a),u=o.node(i),s=0;if(s+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":c=-l.width/2;break;case"r":c=l.width/2}if(c&&(s+=n?c:-c),c=0,s+=(l.dummy?t:e)/2,s+=(u.dummy?t:e)/2,s+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":c=u.width/2;break;case"r":c=-u.width/2}return c&&(s+=n?c:-c),c=0,s}}(c.nodesep,c.edgesep,a);return r.forEach(t,(function(t){var o;r.forEach(t,(function(t){var r=n[t];if(i.setNode(r),o){var a=n[o],c=i.edge(a,r);i.setEdge(a,r,Math.max(l(e,t,o),c||0))}o=t}))})),i}(e,t,n,i),u=i?"borderLeft":"borderRight";function s(e,t){for(var n=l.nodes(),r=n.pop(),o={};r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return s((function(e){c[e]=l.inEdges(e).reduce((function(e,t){return Math.max(e,c[t.v]+l.edge(t))}),0)}),l.predecessors.bind(l)),s((function(t){var n=l.outEdges(t).reduce((function(e,t){return Math.min(e,c[t.w]-l.edge(t))}),Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==u&&(c[t]=Math.max(c[t],n))}),l.successors.bind(l)),r.forEach(a,(function(e){c[e]=c[n[e]]})),c}function d(e,t){return r.minBy(r.values(t),(function(t){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(t,(function(t,r){var a=function(e,t){return e.node(t).width}(e,r)/2;n=Math.max(t+a,n),o=Math.min(t-a,o)})),n-o}))}function p(e,t){var n=r.values(t),o=r.min(n),a=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(i){var c,l=n+i,u=e[l];if(u!==t){var s=r.values(u);(c="l"===i?o-r.min(s):a-r.max(s))&&(e[l]=r.mapValues(u,(function(e){return e+c})))}}))}))}function b(e,t){return r.mapValues(e.ul,(function(n,o){if(t)return e[t.toLowerCase()][o];var a=r.sortBy(r.map(e,o));return(a[1]+a[2])/2}))}e.exports={positionX:function(e){var t,n=a.buildLayerMatrix(e),o=r.merge(i(e,n),c(e,n)),l={};r.forEach(["u","d"],(function(a){t="u"===a?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(t=r.map(t,(function(e){return r.values(e).reverse()})));var i=("u"===a?e.predecessors:e.successors).bind(e),c=s(e,t,o,i),u=f(e,t,c.root,c.align,"r"===n);"r"===n&&(u=r.mapValues(u,(function(e){return-e}))),l[a+n]=u}))}));var u=d(e,l);return p(l,u),b(l,e.graph().align)},findType1Conflicts:i,findType2Conflicts:c,addConflict:l,hasConflict:u,verticalAlignment:s,horizontalCompaction:f,alignCoordinates:p,findSmallestWidthAlignment:d,balance:b}},function(e,t,n){var r=n(267),o=n(286),a=n(299).Graph;e.exports={debugOrdering:function(e){var t=o.buildLayerMatrix(e),n=new a({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),(function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)})),r.forEach(e.edges(),(function(e){n.setEdge(e.v,e.w,{},e.name)})),r.forEach(t,(function(e,t){var o="layer"+t;n.setNode(o,{rank:"same"}),r.reduce(e,(function(e,t){return n.setEdge(e,t,{style:"invis"}),t}))})),n}}},function(e,t){e.exports="0.8.5"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(4),a=n.n(o),i=n(37),c=n.n(i);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function s(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=s(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function f(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var d="function"==typeof Symbol&&Symbol.observable||"@@observable",p=function(){return Math.random().toString(36).substring(7).split("").join(".")},b={INIT:"@@redux/INIT"+p(),REPLACE:"@@redux/REPLACE"+p(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+p()}};function h(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function m(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(f(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(f(1));return n(m)(e,t)}if("function"!=typeof e)throw new Error(f(2));var o=e,a=t,i=[],c=i,l=!1;function u(){c===i&&(c=i.slice())}function s(){if(l)throw new Error(f(3));return a}function p(e){if("function"!=typeof e)throw new Error(f(4));if(l)throw new Error(f(5));var t=!0;return u(),c.push(e),function(){if(t){if(l)throw new Error(f(6));t=!1,u();var n=c.indexOf(e);c.splice(n,1),i=null}}}function y(e){if(!h(e))throw new Error(f(7));if(void 0===e.type)throw new Error(f(8));if(l)throw new Error(f(9));try{l=!0,a=o(a,e)}finally{l=!1}for(var t=i=c,n=0;n<t.length;n++){(0,t[n])()}return e}function v(e){if("function"!=typeof e)throw new Error(f(10));o=e,y({type:b.REPLACE})}function g(){var e,t=p;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(f(11));function n(){e.next&&e.next(s())}return n(),{unsubscribe:t(n)}}})[d]=function(){return this},e}return y({type:b.INIT}),(r={dispatch:y,subscribe:p,getState:s,replaceReducer:v})[d]=g,r}function y(e,t){return function(){return t(e.apply(this,arguments))}}function v(e,t){if("function"==typeof e)return y(e,t);if("object"!=typeof e||null===e)throw new Error(f(16));var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=y(o,t))}return n}function g(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var O={exports:{}},w={exports:{}},j={},_="function"==typeof Symbol&&Symbol.for,E=_?Symbol.for("react.element"):60103,S=_?Symbol.for("react.portal"):60106,x=_?Symbol.for("react.fragment"):60107,k=_?Symbol.for("react.strict_mode"):60108,C=_?Symbol.for("react.profiler"):60114,P=_?Symbol.for("react.provider"):60109,N=_?Symbol.for("react.context"):60110,T=_?Symbol.for("react.async_mode"):60111,D=_?Symbol.for("react.concurrent_mode"):60111,I=_?Symbol.for("react.forward_ref"):60112,A=_?Symbol.for("react.suspense"):60113,R=_?Symbol.for("react.suspense_list"):60120,M=_?Symbol.for("react.memo"):60115,F=_?Symbol.for("react.lazy"):60116,L=_?Symbol.for("react.block"):60121,B=_?Symbol.for("react.fundamental"):60117,q=_?Symbol.for("react.responder"):60118,z=_?Symbol.for("react.scope"):60119;function U(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case E:switch(e=e.type){case T:case D:case x:case C:case k:case A:return e;default:switch(e=e&&e.$$typeof){case N:case I:case F:case M:case P:return e;default:return t}}case S:return t}}}function H(e){return U(e)===D}j.AsyncMode=T,j.ConcurrentMode=D,j.ContextConsumer=N,j.ContextProvider=P,j.Element=E,j.ForwardRef=I,j.Fragment=x,j.Lazy=F,j.Memo=M,j.Portal=S,j.Profiler=C,j.StrictMode=k,j.Suspense=A,j.isAsyncMode=function(e){return H(e)||U(e)===T},j.isConcurrentMode=H,j.isContextConsumer=function(e){return U(e)===N},j.isContextProvider=function(e){return U(e)===P},j.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===E},j.isForwardRef=function(e){return U(e)===I},j.isFragment=function(e){return U(e)===x},j.isLazy=function(e){return U(e)===F},j.isMemo=function(e){return U(e)===M},j.isPortal=function(e){return U(e)===S},j.isProfiler=function(e){return U(e)===C},j.isStrictMode=function(e){return U(e)===k},j.isSuspense=function(e){return U(e)===A},j.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===x||e===D||e===C||e===k||e===A||e===R||"object"==typeof e&&null!==e&&(e.$$typeof===F||e.$$typeof===M||e.$$typeof===P||e.$$typeof===N||e.$$typeof===I||e.$$typeof===B||e.$$typeof===q||e.$$typeof===z||e.$$typeof===L)},j.typeOf=U,w.exports=j;var V=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;function X(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;function $(e,t,n,r,o){}$.resetWarningCache=function(){0};w.exports,Function.call.bind(Object.prototype.hasOwnProperty);function G(){}function W(){}W.resetWarningCache=G;O.exports=function(){function e(e,t,n,r,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:W,resetWarningCache:G};return n.PropTypes=n,n}();O.exports;var Q=a.a.createContext(null);var Z=function(e){e()},J=function(){return Z};var ee={notify:function(){},get:function(){return[]}};function te(e,t){var n,r=ee;function o(){i.onStateChange&&i.onStateChange()}function a(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){var e=J(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}var i={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=ee)},getListeners:function(){return r}};return i}var ne="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o.useLayoutEffect:o.useEffect;function re(e){var t=e.store,n=e.context,r=e.children,i=Object(o.useMemo)((function(){var e=te(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),c=Object(o.useMemo)((function(){return t.getState()}),[t]);ne((function(){var e=i.subscription;return e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,c]);var l=n||Q;return a.a.createElement(l.Provider,{value:i},r)}var oe=w.exports,ae={};ae[oe.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ae[oe.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var ie={},ce=60103,le=60106,ue=60107,se=60108,fe=60114,de=60109,pe=60110,be=60112,he=60113,me=60120,ye=60115,ve=60116,ge=60121,Oe=60122,we=60117,je=60129,_e=60131;if("function"==typeof Symbol&&Symbol.for){var Ee=Symbol.for;ce=Ee("react.element"),le=Ee("react.portal"),ue=Ee("react.fragment"),se=Ee("react.strict_mode"),fe=Ee("react.profiler"),de=Ee("react.provider"),pe=Ee("react.context"),be=Ee("react.forward_ref"),he=Ee("react.suspense"),me=Ee("react.suspense_list"),ye=Ee("react.memo"),ve=Ee("react.lazy"),ge=Ee("react.block"),Oe=Ee("react.server.block"),we=Ee("react.fundamental"),je=Ee("react.debug_trace_mode"),_e=Ee("react.legacy_hidden")}function Se(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case ce:switch(e=e.type){case ue:case fe:case se:case he:case me:return e;default:switch(e=e&&e.$$typeof){case pe:case be:case ve:case ye:case de:return e;default:return t}}case le:return t}}}var xe=de,ke=ce,Ce=be,Pe=ue,Ne=ve,Te=ye,De=le,Ie=fe,Ae=se,Re=he;function Me(){return Object(o.useContext)(Q)}function Fe(e){void 0===e&&(e=Q);var t=e===Q?Me:function(){return Object(o.useContext)(e)};return function(){return t().store}}ie.ContextConsumer=pe,ie.ContextProvider=xe,ie.Element=ke,ie.ForwardRef=Ce,ie.Fragment=Pe,ie.Lazy=Ne,ie.Memo=Te,ie.Portal=De,ie.Profiler=Ie,ie.StrictMode=Ae,ie.Suspense=Re,ie.isAsyncMode=function(){return!1},ie.isConcurrentMode=function(){return!1},ie.isContextConsumer=function(e){return Se(e)===pe},ie.isContextProvider=function(e){return Se(e)===de},ie.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===ce},ie.isForwardRef=function(e){return Se(e)===be},ie.isFragment=function(e){return Se(e)===ue},ie.isLazy=function(e){return Se(e)===ve},ie.isMemo=function(e){return Se(e)===ye},ie.isPortal=function(e){return Se(e)===le},ie.isProfiler=function(e){return Se(e)===fe},ie.isStrictMode=function(e){return Se(e)===se},ie.isSuspense=function(e){return Se(e)===he},ie.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===ue||e===fe||e===je||e===se||e===he||e===me||e===_e||"object"==typeof e&&null!==e&&(e.$$typeof===ve||e.$$typeof===ye||e.$$typeof===de||e.$$typeof===pe||e.$$typeof===be||e.$$typeof===we||e.$$typeof===ge||e[0]===Oe)},ie.typeOf=Se;var Le=Fe();function Be(e){void 0===e&&(e=Q);var t=e===Q?Le:Fe(e);return function(){return t().dispatch}}var qe=Be(),ze=function(e,t){return e===t};function Ue(e){void 0===e&&(e=Q);var t=e===Q?Me:function(){return Object(o.useContext)(e)};return function(e,n){void 0===n&&(n=ze);var r=t(),a=function(e,t,n,r){var a,i=Object(o.useReducer)((function(e){return e+1}),0)[1],c=Object(o.useMemo)((function(){return te(n,r)}),[n,r]),l=Object(o.useRef)(),u=Object(o.useRef)(),s=Object(o.useRef)(),f=Object(o.useRef)(),d=n.getState();try{if(e!==u.current||d!==s.current||l.current){var p=e(d);a=void 0!==f.current&&t(p,f.current)?f.current:p}else a=f.current}catch(e){throw l.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+l.current.stack+"\n\n"),e}return ne((function(){u.current=e,s.current=d,f.current=a,l.current=void 0})),ne((function(){function e(){try{var e=n.getState();if(e===s.current)return;var r=u.current(e);if(t(r,f.current))return;f.current=r,s.current=e}catch(e){l.current=e}i()}return c.onStateChange=e,c.trySubscribe(),e(),function(){return c.tryUnsubscribe()}}),[n,c]),a}(e,n,r.store,r.subscription);return Object(o.useDebugValue)(a),a}}var He,Ve=Ue();function Ye(e,t){return{type:e,payload:t}}He=i.unstable_batchedUpdates,Z=He;var Ke=Object.freeze({__proto__:null,setOnConnect:function(e){return Ye("SET_ON_CONNECT",{onConnect:e})},setOnConnectStart:function(e){return Ye("SET_ON_CONNECT_START",{onConnectStart:e})},setOnConnectStop:function(e){return Ye("SET_ON_CONNECT_STOP",{onConnectStop:e})},setOnConnectEnd:function(e){return Ye("SET_ON_CONNECT_END",{onConnectEnd:e})},setElements:function(e){return Ye("SET_ELEMENTS",e)},updateNodeDimensions:function(e){return Ye("UPDATE_NODE_DIMENSIONS",e)},updateNodePos:function(e){return Ye("UPDATE_NODE_POS",e)},updateNodePosDiff:function(e){return Ye("UPDATE_NODE_POS_DIFF",e)},setUserSelection:function(e){return Ye("SET_USER_SELECTION",e)},updateUserSelection:function(e){return Ye("UPDATE_USER_SELECTION",e)},unsetUserSelection:function(){return Ye("UNSET_USER_SELECTION")},setSelection:function(e){return Ye("SET_SELECTION",{selectionActive:e})},unsetNodesSelection:function(){return Ye("UNSET_NODES_SELECTION",{nodesSelectionActive:!1})},resetSelectedElements:function(){return Ye("RESET_SELECTED_ELEMENTS",{selectedElements:null})},setSelectedElements:function(e){return Ye("SET_SELECTED_ELEMENTS",e)},addSelectedElements:function(e){return Ye("ADD_SELECTED_ELEMENTS",e)},updateTransform:function(e){return Ye("UPDATE_TRANSFORM",{transform:e})},updateSize:function(e){return Ye("UPDATE_SIZE",{width:e.width||500,height:e.height||500})},initD3Zoom:function(e){return Ye("INIT_D3ZOOM",e)},setMinZoom:function(e){return Ye("SET_MINZOOM",e)},setMaxZoom:function(e){return Ye("SET_MAXZOOM",e)},setTranslateExtent:function(e){return Ye("SET_TRANSLATEEXTENT",e)},setConnectionPosition:function(e){return Ye("SET_CONNECTION_POSITION",{connectionPosition:e})},setConnectionNodeId:function(e){return Ye("SET_CONNECTION_NODEID",e)},setSnapToGrid:function(e){return Ye("SET_SNAPTOGRID",{snapToGrid:e})},setSnapGrid:function(e){return Ye("SET_SNAPGRID",{snapGrid:e})},setInteractive:function(e){return Ye("SET_INTERACTIVE",{nodesDraggable:e,nodesConnectable:e,elementsSelectable:e})},setNodesDraggable:function(e){return Ye("SET_NODES_DRAGGABLE",{nodesDraggable:e})},setNodesConnectable:function(e){return Ye("SET_NODES_CONNECTABLE",{nodesConnectable:e})},setElementsSelectable:function(e){return Ye("SET_ELEMENTS_SELECTABLE",{elementsSelectable:e})},setMultiSelectionActive:function(e){return Ye("SET_MULTI_SELECTION_ACTIVE",{multiSelectionActive:e})},setConnectionMode:function(e){return Ye("SET_CONNECTION_MODE",{connectionMode:e})},setNodeExtent:function(e){return Ye("SET_NODE_EXTENT",e)}});function Xe(e){var t=qe(),n=e(Ke);return Object(o.useMemo)((function(){return v(n,t)}),[t,n])}var $e=Ve,Ge=function(){return Le()};function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qe(e,t){if(e){if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}function Ze(e){return function(e){if(Array.isArray(e))return We(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||Qe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var et=function(e){var t=null==e?void 0:e.target;return["INPUT","SELECT","TEXTAREA","BUTTON"].includes(null==t?void 0:t.nodeName)||(null==t?void 0:t.hasAttribute("contenteditable"))},tt=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},rt=function(e,t){return{x:nt(e.x,t[0][0],t[1][0]),y:nt(e.y,t[0][1],t[1][1])}},ot=function(e){var t=Je(Object(o.useState)(!1),2),n=t[0],r=t[1];return Object(o.useEffect)((function(){if(void 0!==e){var t=function(t){et(t)||t.key!==e&&t.keyCode!==e||(t.preventDefault(),r(!0))},n=function(t){et(t)||t.key!==e&&t.keyCode!==e||r(!1)},o=function(){return r(!1)};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),window.addEventListener("blur",o),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",n),window.removeEventListener("blur",o)}}}),[e,r]),n};function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ct=function(e){return"id"in e&&"source"in e&&"target"in e},lt=function(e){return"id"in e&&!("source"in e)&&!("target"in e)},ut=function(e,t,n,r){var o=e.x,a=e.y,i=Je(t,3),c=i[0],l=i[1],u=i[2],s=Je(r,2),f=s[0],d=s[1],p={x:(o-c)/u,y:(a-l)/u};return n?{x:f*Math.round(p.x/f),y:d*Math.round(p.y/d)}:p},st=function(e){return function(t){var n=e.getState(),r=n.transform,o=n.snapToGrid,a=n.snapGrid;return ut(t,r,o,a)}},ft=function(e,t){return it(it({},e),{},{id:e.id.toString(),type:e.type||"default",__rf:{position:rt(e.position,t),width:null,height:null,handleBounds:{},isDragging:!1}})},dt=function(e){return it(it({},e),{},{source:e.source.toString(),target:e.target.toString(),sourceHandle:e.sourceHandle?e.sourceHandle.toString():null,targetHandle:e.targetHandle?e.targetHandle.toString():null,id:e.id.toString(),type:e.type||"default"})},pt=function(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}},bt=function(e){var t=e.x,n=e.y;return{x:t,y:n,x2:t+e.width,y2:n+e.height}},ht=function(e){var t=e.x,n=e.y;return{x:t,y:n,width:e.x2-t,height:e.y2-n}},mt=function(e){var t=e.reduce((function(e,t){var n=t.__rf,r=(n=void 0===n?{}:n).position,o=n.width,a=n.height;return pt(e,bt(it(it({},r),{},{width:o,height:a})))}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ht(t)},yt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],r=Je(n,3),o=r[0],a=r[1],i=r[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=bt({x:(t.x-o)/i,y:(t.y-a)/i,width:t.width/i,height:t.height/i});return e.filter((function(e){var t=e.selectable,n=void 0===t||t,r=e.__rf,o=r.position,a=r.width,i=r.height,s=r.isDragging;if(l&&!n)return!1;var f=bt(it(it({},o),{},{width:a,height:i})),d=Math.max(0,Math.min(u.x2,f.x2)-Math.max(u.x,f.x)),p=Math.max(0,Math.min(u.y2,f.y2)-Math.max(u.y,f.y)),b=Math.ceil(d*p);return!(null!==a&&null!==i&&!s)||(c?b>0:b>=a*i)}))},vt=function(e,t){var n=e.map((function(e){return e.id}));return t.filter((function(e){return n.includes(e.source)||n.includes(e.target)}))},gt=function(e,t){return[].concat(Ze(e.map((function(e){var t=it({},e);return t.position=t.__rf.position,delete t.__rf,t}))),Ze(t.map((function(e){return it({},e)}))))},Ot=function(e){return function(){var t=e.getState(),n=t.nodes,r=void 0===n?[]:n,o=t.edges;return gt(r,void 0===o?[]:o)}},wt=function(e){return function(){var t=e.getState(),n=t.nodes,r=void 0===n?[]:n,o=t.edges,a=void 0===o?[]:o,i=t.transform;return{elements:gt(r,a),position:[i[0],i[1]],zoom:i[2]}}},jt=function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,i=t/(e.width*(1+a)),c=n/(e.height*(1+a)),l=Math.min(i,c),u=nt(l,r,o),s=e.x+e.width/2,f=e.y+e.height/2,d=t/2-s*u,p=n/2-f*u;return[d,p,u]},_t={value:()=>{}};function Et(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new St(r)}function St(e){this._=e}function xt(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function kt(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function Ct(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=_t,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}St.prototype=Et.prototype={constructor:St,on:function(e,t){var n,r=this._,o=xt(e+"",r),a=-1,i=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<i;)if(n=(e=o[a]).type)r[n]=Ct(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Ct(r[n],e.name,null);return this}for(;++a<i;)if((n=(e=o[a]).type)&&(n=kt(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new St(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};var Pt="http://www.w3.org/1999/xhtml",Nt={svg:"http://www.w3.org/2000/svg",xhtml:Pt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tt(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Nt.hasOwnProperty(t)?{space:Nt[t],local:e}:e}function Dt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Pt&&t.documentElement.namespaceURI===Pt?t.createElement(e):t.createElementNS(n,e)}}function It(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function At(e){var t=Tt(e);return(t.local?It:Dt)(t)}function Rt(){}function Mt(e){return null==e?Rt:function(){return this.querySelector(e)}}function Ft(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function Lt(){return[]}function Bt(e){return null==e?Lt:function(){return this.querySelectorAll(e)}}function qt(e){return function(){return this.matches(e)}}function zt(e){return function(t){return t.matches(e)}}var Ut=Array.prototype.find;function Ht(){return this.firstElementChild}var Vt=Array.prototype.filter;function Yt(){return Array.from(this.children)}function Kt(e){return new Array(e.length)}function Xt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function $t(e){return function(){return e}}function Gt(e,t,n,r,o,a){for(var i,c=0,l=t.length,u=a.length;c<u;++c)(i=t[c])?(i.__data__=a[c],r[c]=i):n[c]=new Xt(e,a[c]);for(;c<l;++c)(i=t[c])&&(o[c]=i)}function Wt(e,t,n,r,o,a,i){var c,l,u,s=new Map,f=t.length,d=a.length,p=new Array(f);for(c=0;c<f;++c)(l=t[c])&&(p[c]=u=i.call(l,l.__data__,c,t)+"",s.has(u)?o[c]=l:s.set(u,l));for(c=0;c<d;++c)u=i.call(e,a[c],c,a)+"",(l=s.get(u))?(r[c]=l,l.__data__=a[c],s.delete(u)):n[c]=new Xt(e,a[c]);for(c=0;c<f;++c)(l=t[c])&&s.get(p[c])===l&&(o[c]=l)}function Qt(e){return e.__data__}function Zt(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Jt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function en(e){return function(){this.removeAttribute(e)}}function tn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nn(e,t){return function(){this.setAttribute(e,t)}}function rn(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function on(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function an(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ln(e){return function(){this.style.removeProperty(e)}}function un(e,t,n){return function(){this.style.setProperty(e,t,n)}}function sn(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function fn(e,t){return e.style.getPropertyValue(t)||cn(e).getComputedStyle(e,null).getPropertyValue(t)}function dn(e){return function(){delete this[e]}}function pn(e,t){return function(){this[e]=t}}function bn(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function hn(e){return e.trim().split(/^|\s+/)}function mn(e){return e.classList||new yn(e)}function yn(e){this._node=e,this._names=hn(e.getAttribute("class")||"")}function vn(e,t){for(var n=mn(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function gn(e,t){for(var n=mn(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function On(e){return function(){vn(this,e)}}function wn(e){return function(){gn(this,e)}}function jn(e,t){return function(){(t.apply(this,arguments)?vn:gn)(this,e)}}function _n(){this.textContent=""}function En(e){return function(){this.textContent=e}}function Sn(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function xn(){this.innerHTML=""}function kn(e){return function(){this.innerHTML=e}}function Cn(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Pn(){this.nextSibling&&this.parentNode.appendChild(this)}function Nn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tn(){return null}function Dn(){var e=this.parentNode;e&&e.removeChild(this)}function In(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function An(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rn(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Mn(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function Fn(e,t,n){return function(){var r,o=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var i=0,c=o.length;i<c;++i)if((r=o[i]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function Ln(e,t,n){var r=cn(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Bn(e,t){return function(){return Ln(this,e,t)}}function qn(e,t){return function(){return Ln(this,e,t.apply(this,arguments))}}Xt.prototype={constructor:Xt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},yn.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var zn=[null];function Un(e,t){this._groups=e,this._parents=t}function Hn(){return new Un([[document.documentElement]],zn)}function Vn(e){return"string"==typeof e?new Un([[document.querySelector(e)]],[document.documentElement]):new Un([[e]],zn)}function Yn(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}Un.prototype=Hn.prototype={constructor:Un,select:function(e){"function"!=typeof e&&(e=Mt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i,c=t[o],l=c.length,u=r[o]=new Array(l),s=0;s<l;++s)(a=c[s])&&(i=e.call(a,a.__data__,s,c))&&("__data__"in a&&(i.__data__=a.__data__),u[s]=i);return new Un(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return Ft(e.apply(this,arguments))}}(e):Bt(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i,c=t[a],l=c.length,u=0;u<l;++u)(i=c[u])&&(r.push(e.call(i,i.__data__,u,c)),o.push(i));return new Un(r,o)},selectChild:function(e){return this.select(null==e?Ht:function(e){return function(){return Ut.call(this.children,e)}}("function"==typeof e?e:zt(e)))},selectChildren:function(e){return this.selectAll(null==e?Yt:function(e){return function(){return Vt.call(this.children,e)}}("function"==typeof e?e:zt(e)))},filter:function(e){"function"!=typeof e&&(e=qt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],c=i.length,l=r[o]=[],u=0;u<c;++u)(a=i[u])&&e.call(a,a.__data__,u,i)&&l.push(a);return new Un(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Qt);var n=t?Wt:Gt,r=this._parents,o=this._groups;"function"!=typeof e&&(e=$t(e));for(var a=o.length,i=new Array(a),c=new Array(a),l=new Array(a),u=0;u<a;++u){var s=r[u],f=o[u],d=f.length,p=Zt(e.call(s,s&&s.__data__,u,r)),b=p.length,h=c[u]=new Array(b),m=i[u]=new Array(b),y=l[u]=new Array(d);n(s,f,h,m,y,p,t);for(var v,g,O=0,w=0;O<b;++O)if(v=h[O]){for(O>=w&&(w=O+1);!(g=m[w])&&++w<b;);v._next=g||null}}return(i=new Un(i,r))._enter=c,i._exit=l,i},enter:function(){return new Un(this._enter||this._groups.map(Kt),this._parents)},exit:function(){return new Un(this._exit||this._groups.map(Kt),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?a.remove():n(a),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),c=new Array(o),l=0;l<i;++l)for(var u,s=n[l],f=r[l],d=s.length,p=c[l]=new Array(d),b=0;b<d;++b)(u=s[b]||f[b])&&(p[b]=u);for(;l<o;++l)c[l]=n[l];return new Un(c,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],a=o.length-1,i=o[a];--a>=0;)(r=o[a])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Jt);for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i,c=n[a],l=c.length,u=o[a]=new Array(l),s=0;s<l;++s)(i=c[s])&&(u[s]=i);u.sort(t)}return new Un(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,a=t[n],i=0,c=a.length;i<c;++i)(o=a[i])&&e.call(o,o.__data__,i,a);return this},attr:function(e,t){var n=Tt(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?tn:en:"function"==typeof t?n.local?an:on:n.local?rn:nn)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ln:"function"==typeof t?sn:un)(e,t,null==n?"":n)):fn(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?dn:"function"==typeof t?bn:pn)(e,t)):this.node()[e]},classed:function(e,t){var n=hn(e+"");if(arguments.length<2){for(var r=mn(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?jn:t?On:wn)(n,t))},text:function(e){return arguments.length?this.each(null==e?_n:("function"==typeof e?Sn:En)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?xn:("function"==typeof e?Cn:kn)(e)):this.node().innerHTML},raise:function(){return this.each(Pn)},lower:function(){return this.each(Nn)},append:function(e){var t="function"==typeof e?e:At(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:At(e),r=null==t?Tn:"function"==typeof t?t:Mt(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Dn)},clone:function(e){return this.select(e?An:In)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,a=Rn(e+""),i=a.length;if(!(arguments.length<2)){for(c=t?Fn:Mn,r=0;r<i;++r)this.each(c(a[r],t,n));return this}var c=this.node().__on;if(c)for(var l,u=0,s=c.length;u<s;++u)for(r=0,l=c[u];r<i;++r)if((o=a[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?qn:Bn)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],a=0,i=o.length;a<i;++a)(r=o[a])&&(yield r)}};const Kn={capture:!0,passive:!1};function Xn(e){e.preventDefault(),e.stopImmediatePropagation()}function $n(e){var t=e.document.documentElement,n=Vn(e).on("dragstart.drag",Xn,Kn);"onselectstart"in t?n.on("selectstart.drag",Xn,Kn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Gn(e,t){var n=e.document.documentElement,r=Vn(e).on("dragstart.drag",null);t&&(r.on("click.drag",Xn,Kn),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Wn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Qn(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zn(){}var Jn="\\s*([+-]?\\d+)\\s*",er="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",tr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nr=/^#([0-9a-f]{3,8})$/,rr=new RegExp("^rgb\\("+[Jn,Jn,Jn]+"\\)$"),or=new RegExp("^rgb\\("+[tr,tr,tr]+"\\)$"),ar=new RegExp("^rgba\\("+[Jn,Jn,Jn,er]+"\\)$"),ir=new RegExp("^rgba\\("+[tr,tr,tr,er]+"\\)$"),cr=new RegExp("^hsl\\("+[er,tr,tr]+"\\)$"),lr=new RegExp("^hsla\\("+[er,tr,tr,er]+"\\)$"),ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function sr(){return this.rgb().formatHex()}function fr(){return this.rgb().formatRgb()}function dr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?pr(t):3===n?new yr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?br(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?br(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=rr.exec(e))?new yr(t[1],t[2],t[3],1):(t=or.exec(e))?new yr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ar.exec(e))?br(t[1],t[2],t[3],t[4]):(t=ir.exec(e))?br(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=cr.exec(e))?wr(t[1],t[2]/100,t[3]/100,1):(t=lr.exec(e))?wr(t[1],t[2]/100,t[3]/100,t[4]):ur.hasOwnProperty(e)?pr(ur[e]):"transparent"===e?new yr(NaN,NaN,NaN,0):null}function pr(e){return new yr(e>>16&255,e>>8&255,255&e,1)}function br(e,t,n,r){return r<=0&&(e=t=n=NaN),new yr(e,t,n,r)}function hr(e){return e instanceof Zn||(e=dr(e)),e?new yr((e=e.rgb()).r,e.g,e.b,e.opacity):new yr}function mr(e,t,n,r){return 1===arguments.length?hr(e):new yr(e,t,n,null==r?1:r)}function yr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function vr(){return"#"+Or(this.r)+Or(this.g)+Or(this.b)}function gr(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Or(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function wr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _r(e,t,n,r)}function jr(e){if(e instanceof _r)return new _r(e.h,e.s,e.l,e.opacity);if(e instanceof Zn||(e=dr(e)),!e)return new _r;if(e instanceof _r)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,c=a-o,l=(a+o)/2;return c?(i=t===a?(n-r)/c+6*(n<r):n===a?(r-t)/c+2:(t-n)/c+4,c/=l<.5?a+o:2-a-o,i*=60):c=l>0&&l<1?0:i,new _r(i,c,l,e.opacity)}function _r(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Er(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Wn(Zn,dr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:sr,formatHex:sr,formatHsl:function(){return jr(this).formatHsl()},formatRgb:fr,toString:fr}),Wn(yr,mr,Qn(Zn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new yr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new yr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vr,formatHex:vr,formatRgb:gr,toString:gr})),Wn(_r,(function(e,t,n,r){return 1===arguments.length?jr(e):new _r(e,t,n,null==r?1:r)}),Qn(Zn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new _r(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new _r(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new yr(Er(e>=240?e-240:e+120,o,r),Er(e,o,r),Er(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Sr=e=>()=>e;function xr(e){return 1==(e=+e)?kr:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Sr(isNaN(t)?n:t)}}function kr(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Sr(isNaN(e)?t:e)}var Cr=function e(t){var n=xr(t);function r(e,t){var r=n((e=mr(e)).r,(t=mr(t)).r),o=n(e.g,t.g),a=n(e.b,t.b),i=kr(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=a(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Pr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Nr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tr=new RegExp(Nr.source,"g");function Dr(e,t){var n,r,o,a=Nr.lastIndex=Tr.lastIndex=0,i=-1,c=[],l=[];for(e+="",t+="";(n=Nr.exec(e))&&(r=Tr.exec(t));)(o=r.index)>a&&(o=t.slice(a,o),c[i]?c[i]+=o:c[++i]=o),(n=n[0])===(r=r[0])?c[i]?c[i]+=r:c[++i]=r:(c[++i]=null,l.push({i:i,x:Pr(n,r)})),a=Tr.lastIndex;return a<t.length&&(o=t.slice(a),c[i]?c[i]+=o:c[++i]=o),c.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)c[(n=l[r]).i]=n.x(e);return c.join("")})}var Ir,Ar=180/Math.PI,Rr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Mr(e,t,n,r,o,a){var i,c,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,l/=c),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Ar,skewX:Math.atan(l)*Ar,scaleX:i,scaleY:c}}function Fr(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(a,i){var c=[],l=[];return a=e(a),i=e(i),function(e,r,o,a,i,c){if(e!==o||r!==a){var l=i.push("translate(",null,t,null,n);c.push({i:l-4,x:Pr(e,o)},{i:l-2,x:Pr(r,a)})}else(o||a)&&i.push("translate("+o+t+a+n)}(a.translateX,a.translateY,i.translateX,i.translateY,c,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Pr(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(a.rotate,i.rotate,c,l),function(e,t,n,a){e!==t?a.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Pr(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(a.skewX,i.skewX,c,l),function(e,t,n,r,a,i){if(e!==n||t!==r){var c=a.push(o(a)+"scale(",null,",",null,")");i.push({i:c-4,x:Pr(e,n)},{i:c-2,x:Pr(t,r)})}else 1===n&&1===r||a.push(o(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,i.scaleX,i.scaleY,c,l),a=i=null,function(e){for(var t,n=-1,r=l.length;++n<r;)c[(t=l[n]).i]=t.x(e);return c.join("")}}}var Lr=Fr((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Rr:Mr(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Br=Fr((function(e){return null==e?Rr:(Ir||(Ir=document.createElementNS("http://www.w3.org/2000/svg","g")),Ir.setAttribute("transform",e),(e=Ir.transform.baseVal.consolidate())?Mr((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Rr)}),", ",")",")");function qr(e){return((e=Math.exp(e))+1/e)/2}var zr,Ur,Hr=function e(t,n,r){function o(e,o){var a,i,c=e[0],l=e[1],u=e[2],s=o[0],f=o[1],d=o[2],p=s-c,b=f-l,h=p*p+b*b;if(h<1e-12)i=Math.log(d/u)/t,a=function(e){return[c+e*p,l+e*b,u*Math.exp(t*e*i)]};else{var m=Math.sqrt(h),y=(d*d-u*u+r*h)/(2*u*n*m),v=(d*d-u*u-r*h)/(2*d*n*m),g=Math.log(Math.sqrt(y*y+1)-y),O=Math.log(Math.sqrt(v*v+1)-v);i=(O-g)/t,a=function(e){var r,o=e*i,a=qr(g),s=u/(n*m)*(a*(r=t*o+g,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[c+s*p,l+s*b,u*a/qr(t*o+g)]}}return a.duration=1e3*i*t/Math.SQRT2,a}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4),Vr=0,Yr=0,Kr=0,Xr=0,$r=0,Gr=0,Wr="object"==typeof performance&&performance.now?performance:Date,Qr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zr(){return $r||(Qr(Jr),$r=Wr.now()+Gr)}function Jr(){$r=0}function eo(){this._call=this._time=this._next=null}function to(e,t,n){var r=new eo;return r.restart(e,t,n),r}function no(){$r=(Xr=Wr.now())+Gr,Vr=Yr=0;try{!function(){Zr(),++Vr;for(var e,t=zr;t;)(e=$r-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Vr}()}finally{Vr=0,function(){var e,t,n=zr,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:zr=t);Ur=e,oo(r)}(),$r=0}}function ro(){var e=Wr.now(),t=e-Xr;t>1e3&&(Gr-=t,Xr=e)}function oo(e){Vr||(Yr&&(Yr=clearTimeout(Yr)),e-$r>24?(e<1/0&&(Yr=setTimeout(no,e-Wr.now()-Gr)),Kr&&(Kr=clearInterval(Kr))):(Kr||(Xr=Wr.now(),Kr=setInterval(ro,1e3)),Vr=1,Qr(no)))}function ao(e,t,n){var r=new eo;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}eo.prototype=to.prototype={constructor:eo,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Zr():+n)+(null==t?0:+t),this._next||Ur===this||(Ur?Ur._next=this:zr=this,Ur=this),this._call=e,this._time=n,oo()},stop:function(){this._call&&(this._call=null,this._time=1/0,oo())}};var io=Et("start","end","cancel","interrupt"),co=[];function lo(e,t,n,r,o,a){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function a(l){var u,s,f,d;if(1!==n.state)return c();for(u in o)if((d=o[u]).name===n.name){if(3===d.state)return ao(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete o[u]):+u<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete o[u])}if(ao((function(){3===n.state&&(n.state=4,n.timer.restart(i,n.delay,n.time),i(l))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),u=0,s=-1;u<f;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++s]=d);r.length=s+1}}function i(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=5,1),a=-1,i=r.length;++a<i;)r[a].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=to((function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:o,on:io,tween:co,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function uo(e,t){var n=fo(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function so(e,t){var n=fo(e,t);if(n.state>3)throw new Error("too late; already running");return n}function fo(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function po(e,t){var n,r,o,a=e.__transition,i=!0;if(a){for(o in t=null==t?null:t+"",a)(n=a[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[o]):i=!1;i&&delete e.__transition}}function bo(e,t){var n,r;return function(){var o=so(this,e),a=o.tween;if(a!==n)for(var i=0,c=(r=n=a).length;i<c;++i)if(r[i].name===t){(r=r.slice()).splice(i,1);break}o.tween=r}}function ho(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var a=so(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var c={name:t,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=c;break}l===u&&o.push(c)}a.tween=o}}function mo(e,t,n){var r=e._id;return e.each((function(){var e=so(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return fo(e,r).value[t]}}function yo(e,t){var n;return("number"==typeof t?Pr:t instanceof dr?Cr:(n=dr(t))?(t=n,Cr):Dr)(e,t)}function vo(e){return function(){this.removeAttribute(e)}}function go(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Oo(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}}function wo(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}function jo(e,t,n){var r,o,a;return function(){var i,c,l=n(this);if(null!=l)return(i=this.getAttribute(e))===(c=l+"")?null:i===r&&c===o?a:(o=c,a=t(r=i,l));this.removeAttribute(e)}}function _o(e,t,n){var r,o,a;return function(){var i,c,l=n(this);if(null!=l)return(i=this.getAttributeNS(e.space,e.local))===(c=l+"")?null:i===r&&c===o?a:(o=c,a=t(r=i,l));this.removeAttributeNS(e.space,e.local)}}function Eo(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function So(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function xo(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&So(e,o)),n}return o._value=t,o}function ko(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Eo(e,o)),n}return o._value=t,o}function Co(e,t){return function(){uo(this,e).delay=+t.apply(this,arguments)}}function Po(e,t){return t=+t,function(){uo(this,e).delay=t}}function No(e,t){return function(){so(this,e).duration=+t.apply(this,arguments)}}function To(e,t){return t=+t,function(){so(this,e).duration=t}}function Do(e,t){if("function"!=typeof t)throw new Error;return function(){so(this,e).ease=t}}function Io(e,t,n){var r,o,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?uo:so;return function(){var i=a(this,e),c=i.on;c!==r&&(o=(r=c).copy()).on(t,n),i.on=o}}var Ao=Hn.prototype.constructor;function Ro(e){return function(){this.style.removeProperty(e)}}function Mo(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Fo(e,t,n){var r,o;function a(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&Mo(e,a,n)),r}return a._value=t,a}function Lo(e){return function(t){this.textContent=e.call(this,t)}}function Bo(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Lo(r)),t}return r._value=e,r}var qo=0;function zo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Uo(){return++qo}var Ho=Hn.prototype;zo.prototype={constructor:zo,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Mt(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var c,l,u=r[i],s=u.length,f=a[i]=new Array(s),d=0;d<s;++d)(c=u[d])&&(l=e.call(c,c.__data__,d,u))&&("__data__"in c&&(l.__data__=c.__data__),f[d]=l,lo(f[d],t,n,d,f,fo(c,n)));return new zo(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Bt(e));for(var r=this._groups,o=r.length,a=[],i=[],c=0;c<o;++c)for(var l,u=r[c],s=u.length,f=0;f<s;++f)if(l=u[f]){for(var d,p=e.call(l,l.__data__,f,u),b=fo(l,n),h=0,m=p.length;h<m;++h)(d=p[h])&&lo(d,t,n,h,p,b);a.push(p),i.push(l)}return new zo(a,i,t,n)},selectChild:Ho.selectChild,selectChildren:Ho.selectChildren,filter:function(e){"function"!=typeof e&&(e=qt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],c=i.length,l=r[o]=[],u=0;u<c;++u)(a=i[u])&&e.call(a,a.__data__,u,i)&&l.push(a);return new zo(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),c=0;c<a;++c)for(var l,u=t[c],s=n[c],f=u.length,d=i[c]=new Array(f),p=0;p<f;++p)(l=u[p]||s[p])&&(d[p]=l);for(;c<r;++c)i[c]=t[c];return new zo(i,this._parents,this._name,this._id)},selection:function(){return new Ao(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Uo(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i,c=r[a],l=c.length,u=0;u<l;++u)if(i=c[u]){var s=fo(i,t);lo(i,e,n,u,c,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new zo(r,this._parents,e,n)},call:Ho.call,nodes:Ho.nodes,node:Ho.node,size:Ho.size,empty:Ho.empty,each:Ho.each,on:function(e,t){var n=this._id;return arguments.length<2?fo(this.node(),n).on.on(e):this.each(Io(n,e,t))},attr:function(e,t){var n=Tt(e),r="transform"===n?Br:yo;return this.attrTween(e,"function"==typeof t?(n.local?_o:jo)(n,r,mo(this,"attr."+e,t)):null==t?(n.local?go:vo)(n):(n.local?wo:Oo)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Tt(e);return this.tween(n,(r.local?xo:ko)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Lr:yo;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var a=fn(this,e),i=(this.style.removeProperty(e),fn(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}(e,r)).on("end.style."+e,Ro(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,a;return function(){var i=fn(this,e),c=n(this),l=c+"";return null==c&&(this.style.removeProperty(e),l=c=fn(this,e)),i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,c))}}(e,r,mo(this,"style."+e,t))).each(function(e,t){var n,r,o,a,i="style."+t,c="end."+i;return function(){var l=so(this,e),u=l.on,s=null==l.value[i]?a||(a=Ro(t)):void 0;u===n&&o===s||(r=(n=u).copy()).on(c,o=s),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,a=n+"";return function(){var i=fn(this,e);return i===a?null:i===r?o:o=t(r=i,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Fo(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(mo(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Bo(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=fo(this.node(),n).tween,a=0,i=o.length;a<i;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((null==t?bo:ho)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Co:Po)(t,e)):fo(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?No:To)(t,e)):fo(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(Do(t,e)):fo(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;so(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(a,i){var c={value:i},l={value:function(){0==--o&&a()}};n.each((function(){var n=so(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(c),t._.interrupt.push(c),t._.end.push(l)),n.on=t})),0===o&&a()}))},[Symbol.iterator]:Ho[Symbol.iterator]};var Vo={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Yo(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Hn.prototype.interrupt=function(e){return this.each((function(){po(this,e)}))},Hn.prototype.transition=function(e){var t,n;e instanceof zo?(t=e._id,e=e._name):(t=Uo(),(n=Vo).time=Zr(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i,c=r[a],l=c.length,u=0;u<l;++u)(i=c[u])&&lo(i,e,t,u,c,n||Yo(i,t));return new zo(r,this._parents,e,t)};var Ko=e=>()=>e;function Xo(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function $o(e,t,n){this.k=e,this.x=t,this.y=n}$o.prototype={constructor:$o,scale:function(e){return 1===e?this:new $o(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new $o(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Go=new $o(1,0,0);function Wo(e){e.stopImmediatePropagation()}function Qo(e){e.preventDefault(),e.stopImmediatePropagation()}function Zo(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Jo(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function ea(){return this.__zoom||Go}function ta(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function na(){return navigator.maxTouchPoints||"ontouchstart"in this}function ra(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}var oa,aa,ia,ca,la,ua;!function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(oa||(oa={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(aa||(aa={})),function(e){e.Lines="lines",e.Dots="dots"}(ia||(ia={})),function(e){e.Strict="strict",e.Loose="loose"}(ca||(ca={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep"}(la||(la={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(ua||(ua={}));var sa=function(e){return{x:e.x,y:e.y,zoom:e.k}},fa=function(e){return e.target.closest(".nowheel")},da=function(e){var t,n,r=e.onMove,i=e.onMoveStart,c=e.onMoveEnd,l=e.zoomOnScroll,u=void 0===l||l,s=e.zoomOnPinch,f=void 0===s||s,d=e.panOnScroll,p=void 0!==d&&d,b=e.panOnScrollSpeed,h=void 0===b?.5:b,m=e.panOnScrollMode,y=void 0===m?ua.Free:m,v=e.zoomOnDoubleClick,g=void 0===v||v,O=e.selectionKeyPressed,w=e.elementsSelectable,j=e.paneMoveable,_=void 0===j||j,E=e.defaultPosition,S=void 0===E?[0,0]:E,x=e.defaultZoom,k=void 0===x?1:x,C=e.translateExtent,P=e.zoomActivationKeyCode,N=e.preventScrolling,T=void 0===N||N,D=e.children,I=Object(o.useRef)(null),A=Object(o.useRef)({x:0,y:0,zoom:0}),R=Ge(),M=$e((function(e){return e.d3Zoom})),F=$e((function(e){return e.d3Selection})),L=$e((function(e){return e.d3ZoomHandler})),B=Xe((function(e){return e.initD3Zoom})),q=Xe((function(e){return e.updateTransform})),z=ot(P);return t=I,n=Xe((function(e){return e.updateSize})),Object(o.useEffect)((function(){var e,r=function(){if(t.current){var e=tt(t.current);0!==e.height&&0!==e.width||console.warn("The React Flow parent container needs a width and a height to render the graph."),n(e)}};return r(),window.onresize=r,t.current&&(e=new ResizeObserver((function(){return r()}))).observe(t.current),function(){window.onresize=null,e&&t.current&&e.unobserve(t.current)}}),[]),Object(o.useEffect)((function(){if(I.current){var e=R.getState(),t=void 0!==C?C:e.translateExtent,n=function(){var e,t,n,r=Zo,o=Jo,a=ra,i=ta,c=na,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],s=250,f=Hr,d=Et("start","zoom","end"),p=0,b=10;function h(e){e.property("__zoom",ea).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",E).filter(c).on("touchstart.zoom",S).on("touchmove.zoom",x).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new $o(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new $o(e.k,r,o)}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function g(e,t,n,r){e.on("start.zoom",(function(){O(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){O(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,a=arguments,i=O(e,a).event(r),c=o.apply(e,a),l=null==n?v(c):"function"==typeof n?n.apply(e,a):n,u=Math.max(c[1][0]-c[0][0],c[1][1]-c[0][1]),s=e.__zoom,d="function"==typeof t?t.apply(e,a):t,p=f(s.invert(l).concat(u/s.k),d.invert(l).concat(u/d.k));return function(e){if(1===e)e=d;else{var t=p(e),n=u/t[2];e=new $o(n,l[0]-t[0]*n,l[1]-t[1]*n)}i.zoom(null,e)}}))}function O(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function j(e,...t){if(r.apply(this,arguments)){var n=O(this,t).event(e),o=this.__zoom,c=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,i.apply(this,arguments)))),s=Yn(e);if(n.wheel)n.mouse[0][0]===s[0]&&n.mouse[0][1]===s[1]||(n.mouse[1]=o.invert(n.mouse[0]=s)),clearTimeout(n.wheel);else{if(o.k===c)return;n.mouse=[s,o.invert(s)],po(this),n.start()}Qo(e),n.wheel=setTimeout(f,150),n.zoom("mouse",a(y(m(o,c),n.mouse[0],n.mouse[1]),n.extent,u))}function f(){n.wheel=null,n.end()}}function _(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,i=O(this,t,!0).event(e),c=Vn(e.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",b,!0),l=Yn(e,o),s=e.clientX,f=e.clientY;$n(e.view),Wo(e),i.mouse=[l,this.__zoom.invert(l)],po(this),i.start()}function d(e){if(Qo(e),!i.moved){var t=e.clientX-s,n=e.clientY-f;i.moved=t*t+n*n>p}i.event(e).zoom("mouse",a(y(i.that.__zoom,i.mouse[0]=Yn(e,o),i.mouse[1]),i.extent,u))}function b(e){c.on("mousemove.zoom mouseup.zoom",null),Gn(e.view,i.moved),Qo(e),i.event(e).end()}}function E(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,i=Yn(e.changedTouches?e.changedTouches[0]:e,this),c=n.invert(i),l=n.k*(e.shiftKey?.5:2),f=a(y(m(n,l),i,c),o.apply(this,t),u);Qo(e),s>0?Vn(this).transition().duration(s).call(g,f,i,e):Vn(this).call(h.transform,f,i,e)}}function S(n,...o){if(r.apply(this,arguments)){var a,i,c,l,u=n.touches,s=u.length,f=O(this,o,n.changedTouches.length===s).event(n);for(Wo(n),i=0;i<s;++i)l=[l=Yn(c=u[i],this),this.__zoom.invert(l),c.identifier],f.touch0?f.touch1||f.touch0[2]===l[2]||(f.touch1=l,f.taps=0):(f.touch0=l,a=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(f.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),500)),po(this),f.start())}}function x(e,...t){if(this.__zooming){var n,r,o,i,c=O(this,t).event(e),l=e.changedTouches,s=l.length;for(Qo(e),n=0;n<s;++n)o=Yn(r=l[n],this),c.touch0&&c.touch0[2]===r.identifier?c.touch0[0]=o:c.touch1&&c.touch1[2]===r.identifier&&(c.touch1[0]=o);if(r=c.that.__zoom,c.touch1){var f=c.touch0[0],d=c.touch0[1],p=c.touch1[0],b=c.touch1[1],h=(h=p[0]-f[0])*h+(h=p[1]-f[1])*h,v=(v=b[0]-d[0])*v+(v=b[1]-d[1])*v;r=m(r,Math.sqrt(h/v)),o=[(f[0]+p[0])/2,(f[1]+p[1])/2],i=[(d[0]+b[0])/2,(d[1]+b[1])/2]}else{if(!c.touch0)return;o=c.touch0[0],i=c.touch0[1]}c.zoom("touch",a(y(r,o,i),c.extent,u))}}function k(e,...r){if(this.__zooming){var o,a,i=O(this,r).event(e),c=e.changedTouches,l=c.length;for(Wo(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),o=0;o<l;++o)a=c[o],i.touch0&&i.touch0[2]===a.identifier?delete i.touch0:i.touch1&&i.touch1[2]===a.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps&&(a=Yn(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<b)){var u=Vn(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return h.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",ea),e!==o?g(e,t,n,r):o.interrupt().each((function(){O(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},h.scaleBy=function(e,t,n,r){h.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n,r)},h.scaleTo=function(e,t,n,r){h.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,i=null==n?v(e):"function"==typeof n?n.apply(this,arguments):n,c=r.invert(i),l="function"==typeof t?t.apply(this,arguments):t;return a(y(m(r,l),i,c),e,u)}),n,r)},h.translateBy=function(e,t,n,r){h.transform(e,(function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),u)}),null,r)},h.translateTo=function(e,t,n,r,i){h.transform(e,(function(){var e=o.apply(this,arguments),i=this.__zoom,c=null==r?v(e):"function"==typeof r?r.apply(this,arguments):r;return a(Go.translate(c[0],c[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,u)}),r,i)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Vn(this.that).datum();d.call(e,this.that,new Xo(e,{sourceEvent:this.sourceEvent,target:h,type:e,transform:this.that.__zoom,dispatch:d}),t)}},h.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:Ko(+e),h):i},h.filter=function(e){return arguments.length?(r="function"==typeof e?e:Ko(!!e),h):r},h.touchable=function(e){return arguments.length?(c="function"==typeof e?e:Ko(!!e),h):c},h.extent=function(e){return arguments.length?(o="function"==typeof e?e:Ko([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),h):o},h.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],h):[l[0],l[1]]},h.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],h):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},h.constrain=function(e){return arguments.length?(a=e,h):a},h.duration=function(e){return arguments.length?(s=+e,h):s},h.interpolate=function(e){return arguments.length?(f=e,h):f},h.on=function(){var e=d.on.apply(d,arguments);return e===d?h:e},h.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,h):Math.sqrt(p)},h.tapDistance=function(e){return arguments.length?(b=+e,h):b},h}().scaleExtent([e.minZoom,e.maxZoom]).translateExtent(t),r=Vn(I.current).call(n),o=nt(S[0],t[0][0],t[1][0]),a=nt(S[1],t[0][1],t[1][1]),i=nt(k,e.minZoom,e.maxZoom),c=Go.translate(o,a).scale(i);n.transform(r,c),B({d3Zoom:n,d3Selection:r,d3ZoomHandler:r.on("wheel.zoom"),transform:[o,a,i]})}}),[]),Object(o.useEffect)((function(){F&&M&&(p&&!z?F.on("wheel",(function(e){if(fa(e))return!1;e.preventDefault(),e.stopImmediatePropagation();var t=F.property("__zoom").k||1;if(e.ctrlKey&&f){var n=Yn(e),r=-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*10,o=t*Math.pow(2,r);M.scaleTo(F,o,n)}else{var a=1===e.deltaMode?20:1,i=y===ua.Vertical?0:e.deltaX*a,c=y===ua.Horizontal?0:e.deltaY*a;M.translateBy(F,-i/t*h,-c/t*h)}})).on("wheel.zoom",null):void 0!==L&&F.on("wheel",(function(e){if(!T||fa(e))return null;e.preventDefault()})).on("wheel.zoom",L))}),[p,y,F,M,L,z,f,T]),Object(o.useEffect)((function(){M&&(O?M.on("zoom",null):M.on("zoom",(function(e){if(q([e.transform.x,e.transform.y,e.transform.k]),r){var t=sa(e.transform);r(t)}})))}),[O,M,q,r]),Object(o.useEffect)((function(){M&&(i?M.on("start",(function(e){var t=sa(e.transform);A.current=t,i(t)})):M.on("start",null))}),[M,i]),Object(o.useEffect)((function(){M&&(c?M.on("end",(function(e){if(function(e,t){return e.x!==t.x||e.y!==t.y||e.zoom!==t.k}(A.current,e.transform)){var t=sa(e.transform);A.current=t,c(t)}})):M.on("end",null))}),[M,c]),Object(o.useEffect)((function(){M&&M.filter((function(e){var t=z||u,n=f&&e.ctrlKey;return!!(_||t||p||g||f)&&(!O&&(!(!g&&"dblclick"===e.type)&&((!fa(e)||"wheel"!==e.type)&&((!e.target.closest(".react-flow__node")&&!e.target.closest(".react-flow__edge")||"wheel"===e.type)&&((!e.target.closest(".react-flow__nodesselection")||"wheel"===e.type)&&(!(!f&&e.ctrlKey&&"wheel"===e.type)&&(!!(t||p||n||"wheel"!==e.type)&&(!!(_||"mousedown"!==e.type&&"touchstart"!==e.type)&&!(e.ctrlKey&&"wheel"!==e.type||e.button)))))))))}))}),[M,u,f,p,g,_,O,w,z]),a.a.createElement("div",{className:"react-flow__renderer react-flow__zoompane",ref:I},D)};function pa(e){var t=e.target.closest(".react-flow");if(t){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}}var ba=function(){var e=$e((function(e){return e.userSelectionRect}));return e.draw?a.a.createElement("div",{className:"react-flow__selection",style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")}}):null},ha=Object(o.memo)((function(e){var t=e.selectionKeyPressed,n=$e((function(e){return e.selectionActive})),r=$e((function(e){return e.elementsSelectable})),o=Xe((function(e){return e.setUserSelection})),i=Xe((function(e){return e.updateUserSelection})),c=Xe((function(e){return e.unsetUserSelection})),l=Xe((function(e){return e.unsetNodesSelection}));if(!r||!(n||t))return null;return a.a.createElement("div",{className:"react-flow__selectionpane",onMouseDown:function(e){var t=pa(e);t&&o(t)},onMouseMove:function(e){if(t&&n){var r=pa(e);r&&i(r)}},onMouseUp:function(){return c()},onMouseLeave:function(){c(),l()}},a.a.createElement(ba,null))})),ma={exports:{}},ya={};function va(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=va(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var ga=g(Object.freeze({__proto__:null,default:function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=va(e))&&(r&&(r+=" "),r+=t);return r}})),Oa={},wa={};Object.defineProperty(wa,"__esModule",{value:!0}),wa.findInArray=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},wa.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},wa.isNum=function(e){return"number"==typeof e&&!isNaN(e)},wa.int=function(e){return parseInt(e,10)},wa.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))};var ja={};Object.defineProperty(ja,"__esModule",{value:!0}),ja.getPrefix=Ea,ja.browserPrefixToKey=Sa,ja.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},ja.default=void 0;var _a=["Moz","Webkit","O","ms"];function Ea(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var r=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!r)return"";if(n in r)return"";for(var o=0;o<_a.length;o++)if(Sa(n,_a[o])in r)return _a[o];return""}function Sa(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}var xa=Ea();function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}ja.default=xa,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.matchesSelector=Ra,Oa.matchesSelectorAndParentsTo=function(e,t,n){var r=e;do{if(Ra(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},Oa.addEvent=function(e,t,n,r){if(!e)return;var o=Da({capture:!0},r);e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},Oa.removeEvent=function(e,t,n,r){if(!e)return;var o=Da({capture:!0},r);e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},Oa.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Ca.int)(n.borderTopWidth),t+=(0,Ca.int)(n.borderBottomWidth)},Oa.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Ca.int)(n.borderLeftWidth),t+=(0,Ca.int)(n.borderRightWidth)},Oa.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Ca.int)(n.paddingTop),t-=(0,Ca.int)(n.paddingBottom)},Oa.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Ca.int)(n.paddingLeft),t-=(0,Ca.int)(n.paddingRight)},Oa.offsetXYFromParent=function(e,t,n){var r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=(e.clientX+t.scrollLeft-r.left)/n,a=(e.clientY+t.scrollTop-r.top)/n;return{x:o,y:a}},Oa.createCSSTransform=function(e,t){var n=Ma(e,t,"px");return Ia({},(0,Pa.browserPrefixToKey)("transform",Pa.default),n)},Oa.createSVGTransform=function(e,t){return Ma(e,t,"")},Oa.getTranslation=Ma,Oa.getTouch=function(e,t){return e.targetTouches&&(0,Ca.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,Ca.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},Oa.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},Oa.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&Fa(e.body,"react-draggable-transparent-selection")},Oa.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&La(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}},Oa.addClassName=Fa,Oa.removeClassName=La;var Ca=wa,Pa=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==ka(e)&&"function"!=typeof e)return{default:e};var n=Na(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(ja);function Na(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Na=function(e){return e?n:t})(e)}function Ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ta(Object(n),!0).forEach((function(t){Ia(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ta(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Aa="";function Ra(e,t){return Aa||(Aa=(0,Ca.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,Ca.isFunction)(e[t])}))),!!(0,Ca.isFunction)(e[Aa])&&e[Aa](t)}function Ma(e,t,n){var r=e.x,o=e.y,a="translate(".concat(r).concat(n,",").concat(o).concat(n,")");if(t){var i="".concat("string"==typeof t.x?t.x:t.x+n),c="".concat("string"==typeof t.y?t.y:t.y+n);a="translate(".concat(i,", ").concat(c,")")+a}return a}function Fa(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function La(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(r);var o=Ua(e);if("string"==typeof r){var a,i=o.ownerDocument,c=i.defaultView;if(!((a="parent"===r?o.parentNode:i.querySelector(r))instanceof c.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var l=a,u=c.getComputedStyle(o),s=c.getComputedStyle(l);r={left:-o.offsetLeft+(0,qa.int)(s.paddingLeft)+(0,qa.int)(u.marginLeft),top:-o.offsetTop+(0,qa.int)(s.paddingTop)+(0,qa.int)(u.marginTop),right:(0,za.innerWidth)(l)-(0,za.outerWidth)(o)-o.offsetLeft+(0,qa.int)(s.paddingRight)-(0,qa.int)(u.marginRight),bottom:(0,za.innerHeight)(l)-(0,za.outerHeight)(o)-o.offsetTop+(0,qa.int)(s.paddingBottom)-(0,qa.int)(u.marginBottom)}}(0,qa.isNum)(r.right)&&(t=Math.min(t,r.right));(0,qa.isNum)(r.bottom)&&(n=Math.min(n,r.bottom));(0,qa.isNum)(r.left)&&(t=Math.max(t,r.left));(0,qa.isNum)(r.top)&&(n=Math.max(n,r.top));return[t,n]},Ba.snapToGrid=function(e,t,n){var r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]},Ba.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},Ba.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},Ba.getControlPosition=function(e,t,n){var r="number"==typeof t?(0,za.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var o=Ua(n),a=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,za.offsetXYFromParent)(r||e,a,n.props.scale)},Ba.createCoreData=function(e,t,n){var r=e.state,o=!(0,qa.isNum)(r.lastX),a=Ua(e);return o?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}},Ba.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}};var qa=wa,za=Oa;function Ua(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Ha={},Va={};function Ya(e){return(Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Va,"__esModule",{value:!0}),Va.default=function(){},Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.default=void 0;var Ka=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Ya(e)&&"function"!=typeof e)return{default:e};var n=ei(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(a.a),Xa=Ja(O.exports),$a=Ja(c.a),Ga=Oa,Wa=Ba,Qa=wa,Za=Ja(Va);function Ja(e){return e&&e.__esModule?e:{default:e}}function ei(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ei=function(e){return e?n:t})(e)}function ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ni(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ri(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ai(e,t){return(ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ui(e);if(t){var o=ui(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ci(this,n)}}function ci(e,t){if(t&&("object"===Ya(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return li(e)}function li(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fi={start:"touchstart",move:"touchmove",stop:"touchend"},di={start:"mousedown",move:"mousemove",stop:"mouseup"},pi=di,bi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ai(e,t)}(a,e);var t,n,r,o=ii(a);function a(){var e;ri(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return si(li(e=o.call.apply(o,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),si(li(e),"mounted",!1),si(li(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,Ga.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,Ga.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var o=(0,Ga.getTouchIdentifier)(t);e.setState({touchIdentifier:o});var a=(0,Wa.getControlPosition)(t,o,li(e));if(null!=a){var i=a.x,c=a.y,l=(0,Wa.createCoreData)(li(e),i,c);(0,Za.default)("DraggableCore: handleDragStart: %j",l),(0,Za.default)("calling",e.props.onStart),!1!==e.props.onStart(t,l)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,Ga.addUserSelectStyles)(r),e.setState({dragging:!0,lastX:i,lastY:c}),(0,Ga.addEvent)(r,pi.move,e.handleDrag),(0,Ga.addEvent)(r,pi.stop,e.handleDragStop))}}})),si(li(e),"handleDrag",(function(t){var n=(0,Wa.getControlPosition)(t,e.state.touchIdentifier,li(e));if(null!=n){var r=n.x,o=n.y;if(Array.isArray(e.props.grid)){var a=r-e.state.lastX,i=o-e.state.lastY,c=ti((0,Wa.snapToGrid)(e.props.grid,a,i),2);if(a=c[0],i=c[1],!a&&!i)return;r=e.state.lastX+a,o=e.state.lastY+i}var l=(0,Wa.createCoreData)(li(e),r,o);if((0,Za.default)("DraggableCore: handleDrag: %j",l),!1!==e.props.onDrag(t,l)&&!1!==e.mounted)e.setState({lastX:r,lastY:o});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var u=document.createEvent("MouseEvents");u.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(u)}}})),si(li(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,Wa.getControlPosition)(t,e.state.touchIdentifier,li(e));if(null!=n){var r=n.x,o=n.y,a=(0,Wa.createCoreData)(li(e),r,o);if(!1===e.props.onStop(t,a)||!1===e.mounted)return!1;var i=e.findDOMNode();i&&e.props.enableUserSelectHack&&(0,Ga.removeUserSelectStyles)(i.ownerDocument),(0,Za.default)("DraggableCore: handleDragStop: %j",a),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),i&&((0,Za.default)("DraggableCore: Removing handlers"),(0,Ga.removeEvent)(i.ownerDocument,pi.move,e.handleDrag),(0,Ga.removeEvent)(i.ownerDocument,pi.stop,e.handleDragStop))}}})),si(li(e),"onMouseDown",(function(t){return pi=di,e.handleDragStart(t)})),si(li(e),"onMouseUp",(function(t){return pi=di,e.handleDragStop(t)})),si(li(e),"onTouchStart",(function(t){return pi=fi,e.handleDragStart(t)})),si(li(e),"onTouchEnd",(function(t){return pi=fi,e.handleDragStop(t)})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,Ga.addEvent)(e,fi.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,Ga.removeEvent)(t,di.move,this.handleDrag),(0,Ga.removeEvent)(t,fi.move,this.handleDrag),(0,Ga.removeEvent)(t,di.stop,this.handleDragStop),(0,Ga.removeEvent)(t,fi.stop,this.handleDragStop),(0,Ga.removeEvent)(e,fi.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Ga.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:$a.default.findDOMNode(this)}},{key:"render",value:function(){return Ka.cloneElement(Ka.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&oi(t.prototype,n),r&&oi(t,r),a}(Ka.Component);Ha.default=bi,si(bi,"displayName","DraggableCore"),si(bi,"propTypes",{allowAnyClick:Xa.default.bool,disabled:Xa.default.bool,enableUserSelectHack:Xa.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Xa.default.arrayOf(Xa.default.number),handle:Xa.default.string,cancel:Xa.default.string,nodeRef:Xa.default.object,onStart:Xa.default.func,onDrag:Xa.default.func,onStop:Xa.default.func,onMouseDown:Xa.default.func,scale:Xa.default.number,className:Qa.dontSetMe,style:Qa.dontSetMe,transform:Qa.dontSetMe}),si(bi,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return f.default}}),e.default=void 0;var n=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=h(n);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(a.a),r=b(O.exports),o=b(c.a),i=b(ga),l=Oa,u=Ba,s=wa,f=b(Ha),d=b(Va),p=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function b(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(s,e);var t,r,a,c=S(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),P(k(t=c.call(this,e)),"onDragStart",(function(e,n){if((0,d.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,u.createDraggableData)(k(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),P(k(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",n);var r=(0,u.createDraggableData)(k(t),n),o={x:r.x,y:r.y};if(t.props.bounds){var a=o.x,i=o.y;o.x+=t.state.slackX,o.y+=t.state.slackY;var c=w((0,u.getBoundPosition)(k(t),o.x,o.y),2),l=c[0],s=c[1];o.x=l,o.y=s,o.slackX=t.state.slackX+(a-o.x),o.slackY=t.state.slackY+(i-o.y),r.x=o.x,r.y=o.y,r.deltaX=o.x-t.state.x,r.deltaY=o.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(o)})),P(k(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,u.createDraggableData)(k(t),n)))return!1;(0,d.default)("Draggable: onDragStop: %j",n);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var o=t.props.position,a=o.x,i=o.y;r.x=a,r.y=i}t.setState(r)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:g({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=s,a=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,r=t.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:g({},n)})}}],(r=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:o.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var r=t.children,o=t.defaultPosition,a=t.defaultClassName,c=t.defaultClassNameDragging,s=t.defaultClassNameDragged,d=t.position,b=t.positionOffset;t.scale;var h=y(t,p),v={},O=null,w=!Boolean(d)||this.state.dragging,j=d||o,_={x:(0,u.canDragX)(this)&&w?this.state.x:j.x,y:(0,u.canDragY)(this)&&w?this.state.y:j.y};this.state.isElementSVG?O=(0,l.createSVGTransform)(_,b):v=(0,l.createCSSTransform)(_,b);var E=(0,i.default)(r.props.className||"",a,(P(e={},c,this.state.dragging),P(e,s,this.state.dragged),e));return n.createElement(f.default,m({},h,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(r),{className:E,style:g(g({},r.props.style),v),transform:O}))}}])&&_(t.prototype,r),a&&_(t,a),s}(n.Component);e.default=N,P(N,"displayName","Draggable"),P(N,"propTypes",g(g({},f.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe})),P(N,"defaultProps",g(g({},f.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(ya);var hi=ya.default,mi=ya.DraggableCore;ma.exports=hi,ma.exports.default=hi;var yi=ma.exports.DraggableCore=mi,vi=ma.exports;function gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wi=function(e){var t=e.onSelectionDragStart,n=e.onSelectionDrag,r=e.onSelectionDragStop,i=e.onSelectionContextMenu,c=Je($e((function(e){return e.transform})),3),l=c[0],u=c[1],s=c[2],f=$e((function(e){return e.selectedNodesBbox})),d=$e((function(e){return e.selectionActive})),p=$e((function(e){return e.selectedElements})),b=$e((function(e){return e.snapToGrid})),h=$e((function(e){return e.snapGrid})),m=$e((function(e){return e.nodes})),y=Xe((function(e){return e.updateNodePosDiff})),v=Object(o.useRef)(null),g=Object(o.useMemo)((function(){return b?h:[1,1]}),[b,h]),O=Object(o.useMemo)((function(){return p?p.filter(lt).map((function(e){var t=m.find((function(t){return t.id===e.id}));return Oi(Oi({},t),{},{position:null==t?void 0:t.__rf.position})})):[]}),[p,m]),w=Object(o.useMemo)((function(){return{transform:"translate(".concat(l,"px,").concat(u,"px) scale(").concat(s,")")}}),[l,u,s]),j=Object(o.useMemo)((function(){return{width:f.width,height:f.height,top:f.y,left:f.x}}),[f]),_=Object(o.useCallback)((function(e){null==t||t(e,O)}),[t,O]),E=Object(o.useCallback)((function(e,t){n&&n(e,O),y({diff:{x:t.deltaX,y:t.deltaY},isDragging:!0})}),[n,O,y]),S=Object(o.useCallback)((function(e){y({isDragging:!1}),null==r||r(e,O)}),[O,r]),x=Object(o.useCallback)((function(e){var t=p?p.filter(lt).map((function(e){return m.find((function(t){return t.id===e.id}))})):[];null==i||i(e,t)}),[i]);return!p||d?null:a.a.createElement("div",{className:"react-flow__nodesselection",style:w},a.a.createElement(vi,{scale:s,grid:g,onStart:function(e){return _(e)},onDrag:function(e,t){return E(e,t)},onStop:function(e){return S(e)},nodeRef:v,enableUserSelectHack:!1},a.a.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:x,style:j})))},ji=function(e){var t=e.children,n=e.onPaneClick,r=e.onPaneContextMenu,i=e.onPaneScroll,c=e.onElementsRemove,l=e.deleteKeyCode,u=e.onMove,s=e.onMoveStart,f=e.onMoveEnd,d=e.selectionKeyCode,p=e.multiSelectionKeyCode,b=e.zoomActivationKeyCode,h=e.elementsSelectable,m=e.zoomOnScroll,y=e.zoomOnPinch,v=e.panOnScroll,g=e.panOnScrollSpeed,O=e.panOnScrollMode,w=e.zoomOnDoubleClick,j=e.paneMoveable,_=e.defaultPosition,E=e.defaultZoom,S=e.translateExtent,x=e.preventScrolling,k=e.onSelectionDragStart,C=e.onSelectionDrag,P=e.onSelectionDragStop,N=e.onSelectionContextMenu,T=Xe((function(e){return e.unsetNodesSelection})),D=Xe((function(e){return e.resetSelectedElements})),I=$e((function(e){return e.nodesSelectionActive})),A=ot(d);!function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=e.onElementsRemove,a=Ge(),i=Xe((function(e){return e.unsetNodesSelection})),c=Xe((function(e){return e.setMultiSelectionActive})),l=Xe((function(e){return e.resetSelectedElements})),u=ot(t),s=ot(n);Object(o.useEffect)((function(){var e=a.getState(),t=e.edges,n=e.selectedElements;if(r&&u&&n){var o=n.filter(lt),c=vt(o,t),s=[].concat(Ze(n),Ze(c)).reduce((function(e,t){return e.set(t.id,t)}),new Map);r(Array.from(s.values())),i(),l()}}),[u]),Object(o.useEffect)((function(){c(s)}),[s])}({onElementsRemove:c,deleteKeyCode:l,multiSelectionKeyCode:p});var R=Object(o.useCallback)((function(e){null==n||n(e),T(),D()}),[n]),M=Object(o.useCallback)((function(e){null==r||r(e)}),[r]),F=Object(o.useCallback)((function(e){null==i||i(e)}),[i]);return a.a.createElement(da,{onMove:u,onMoveStart:s,onMoveEnd:f,selectionKeyPressed:A,elementsSelectable:h,zoomOnScroll:m,zoomOnPinch:y,panOnScroll:v,panOnScrollSpeed:g,panOnScrollMode:O,zoomOnDoubleClick:w,paneMoveable:j,defaultPosition:_,defaultZoom:E,translateExtent:S,zoomActivationKeyCode:b,preventScrolling:x},t,a.a.createElement(ha,{selectionKeyPressed:A}),I&&a.a.createElement(wi,{onSelectionDragStart:k,onSelectionDrag:C,onSelectionDragStop:P,onSelectionContextMenu:N}),a.a.createElement("div",{className:"react-flow__pane",onClick:R,onContextMenu:M,onWheel:F}))};ji.displayName="FlowRenderer";var _i=Object(o.memo)(ji),Ei=function(e){var t=$e((function(e){return e.transform})),n=$e((function(e){return e.selectedElements})),r=$e((function(e){return e.nodesDraggable})),i=$e((function(e){return e.nodesConnectable})),c=$e((function(e){return e.elementsSelectable})),l=$e((function(e){return e.width})),u=$e((function(e){return e.height})),s=$e((function(e){return e.nodes})),f=Xe((function(e){return e.updateNodeDimensions})),d=e.onlyRenderVisibleElements?yt(s,{x:0,y:0,width:l,height:u},t,!0):s,p=Object(o.useMemo)((function(){return{transform:"translate(".concat(t[0],"px,").concat(t[1],"px) scale(").concat(t[2],")")}}),[t[0],t[1],t[2]]),b=Object(o.useMemo)((function(){return"undefined"==typeof ResizeObserver?null:new ResizeObserver((function(e){var t=e.map((function(e){return{id:e.target.getAttribute("data-id"),nodeElement:e.target}}));f(t)}))}),[]);return a.a.createElement("div",{className:"react-flow__nodes",style:p},d.map((function(o){var l=o.type||"default",u=e.nodeTypes[l]||e.nodeTypes.default;e.nodeTypes[l]||console.warn('Node type "'.concat(l,'" not found. Using fallback type "default".'));var s=!!(o.draggable||r&&void 0===o.draggable),f=!!(o.selectable||c&&void 0===o.selectable),d=!!(o.connectable||i&&void 0===o.connectable);return a.a.createElement(u,{key:o.id,id:o.id,className:o.className,style:o.style,type:l,data:o.data,sourcePosition:o.sourcePosition,targetPosition:o.targetPosition,isHidden:o.isHidden,xPos:o.__rf.position.x,yPos:o.__rf.position.y,isDragging:o.__rf.isDragging,isInitialized:null!==o.__rf.width&&null!==o.__rf.height,snapGrid:e.snapGrid,snapToGrid:e.snapToGrid,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onElementClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onNodeDoubleClick:e.onNodeDoubleClick,onNodeDragStart:e.onNodeDragStart,onNodeDrag:e.onNodeDrag,onNodeDragStop:e.onNodeDragStop,scale:t[2],selected:(null==n?void 0:n.some((function(e){return e.id===o.id})))||!1,isDraggable:s,isSelectable:f,isConnectable:d,resizeObserver:b,dragHandle:o.dragHandle})})))};Ei.displayName="NodeRenderer";var Si=Object(o.memo)(Ei),xi=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ci=function(e){var t=e.x,n=e.y,r=e.label,i=e.labelStyle,c=void 0===i?{}:i,f=e.labelShowBg,d=void 0===f||f,p=e.labelBgStyle,b=void 0===p?{}:p,h=e.labelBgPadding,m=void 0===h?[2,4]:h,y=e.labelBgBorderRadius,v=void 0===y?2:y,g=e.children,O=e.className,w=u(e,xi),j=Object(o.useRef)(null),_=Je(Object(o.useState)({x:0,y:0,width:0,height:0}),2),E=_[0],S=_[1],x=s(["react-flow__edge-textwrapper",O]);return Object(o.useEffect)((function(){if(j.current){var e=j.current.getBBox();S({x:e.x,y:e.y,width:e.width,height:e.height})}}),[r]),void 0!==r&&r?a.a.createElement("g",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({transform:"translate(".concat(t-E.width/2," ").concat(n-E.height/2,")"),className:x},w),d&&a.a.createElement("rect",{width:E.width+2*m[0],x:-m[0],y:-m[1],height:E.height+2*m[1],className:"react-flow__edge-textbg",style:b,rx:v,ry:v}),a.a.createElement("text",{className:"react-flow__edge-text",y:E.height/2,dy:"0.3em",ref:j,style:c},r),g):null},Pi=Object(o.memo)(Ci),Ni=function(e,t){return void 0!==t&&t?"url(#".concat(t,")"):void 0!==e?"url(#react-flow__".concat(e,")"):"none"},Ti=[oa.Left,oa.Right],Di=function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=void 0===a?oa.Bottom:a,c=e.targetPosition,l=void 0===c?oa.Top:c,u=Ti.includes(i),s=Ti.includes(l);if(u&&!s||s&&!u){var f=u?Math.abs(r-t):0,d=t>r?t-f:t+f,p=u?0:Math.abs(o-n);return[d,n<o?n+p:n-p,f,p]}var b=Math.abs(r-t)/2,h=r<t?r+b:r-b,m=Math.abs(o-n)/2;return[h,o<n?o+m:o-m,b,m]};function Ii(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?oa.Bottom:r,a=e.targetX,i=e.targetY,c=e.targetPosition,l=void 0===c?oa.Top:c,u=e.centerX,s=e.centerY,f=Je(Di({sourceX:t,sourceY:n,targetX:a,targetY:i}),2),d=f[0],p=f[1],b=[oa.Left,oa.Right],h=void 0!==u?u:d,m=void 0!==s?s:p,y="M".concat(t,",").concat(n," C").concat(t,",").concat(m," ").concat(a,",").concat(m," ").concat(a,",").concat(i);return b.includes(o)&&b.includes(l)?y="M".concat(t,",").concat(n," C").concat(h,",").concat(n," ").concat(h,",").concat(i," ").concat(a,",").concat(i):b.includes(l)?y="M".concat(t,",").concat(n," Q").concat(t,",").concat(i," ").concat(a,",").concat(i):b.includes(o)&&(y="M".concat(t,",").concat(n," Q").concat(a,",").concat(n," ").concat(a,",").concat(i)),y}var Ai=Object(o.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.sourcePosition,c=void 0===i?oa.Bottom:i,l=e.targetPosition,u=void 0===l?oa.Top:l,s=e.label,f=e.labelStyle,d=e.labelShowBg,p=e.labelBgStyle,b=e.labelBgPadding,h=e.labelBgBorderRadius,m=e.style,y=e.arrowHeadType,v=e.markerEndId,g=Je(Di({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:c,targetPosition:u}),2),O=g[0],w=g[1],j=Ii({sourceX:t,sourceY:n,sourcePosition:c,targetX:r,targetY:o,targetPosition:u}),_=s?a.a.createElement(Pi,{x:O,y:w,label:s,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:b,labelBgBorderRadius:h}):null,E=Ni(y,v);return a.a.createElement(a.a.Fragment,null,a.a.createElement("path",{style:m,d:j,className:"react-flow__edge-path",markerEnd:E}),_)})),Ri=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},Mi=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},Fi=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},Li=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},Bi=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)},qi=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},zi=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},Ui=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)};function Hi(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?oa.Bottom:r,a=e.targetX,i=e.targetY,c=e.targetPosition,l=void 0===c?oa.Top:c,u=e.borderRadius,s=void 0===u?5:u,f=e.centerX,d=e.centerY,p=Je(Di({sourceX:t,sourceY:n,targetX:a,targetY:i}),4),b=p[0],h=p[1],m=p[2],y=p[3],v=Math.min(s,Math.abs(a-t)),g=Math.min(s,Math.abs(i-n)),O=Math.min(v,g,m,y),w=[oa.Left,oa.Right],j=void 0!==f?f:b,_=void 0!==d?d:h,E=null,S=null;return t<=a?(E=n<=i?Ri(t,_,O):qi(t,_,O),S=n<=i?Ui(a,_,O):Li(a,_,O)):(E=n<i?Fi(t,_,O):zi(t,_,O),S=n<i?Bi(a,_,O):Mi(a,_,O)),w.includes(o)&&w.includes(l)?t<=a?(E=n<=i?Ui(j,n,O):Li(j,n,O),S=n<=i?Ri(j,i,O):qi(j,i,O)):(o===oa.Right&&l===oa.Left||o===oa.Left&&l===oa.Right||o===oa.Left&&l===oa.Left)&&(E=n<=i?Bi(j,n,O):Mi(j,n,O),S=n<=i?Fi(j,i,O):zi(j,i,O)):w.includes(o)&&!w.includes(l)?(E=t<=a?n<=i?Ui(a,n,O):Li(a,n,O):n<=i?Bi(a,n,O):Mi(a,n,O),S=""):!w.includes(o)&&w.includes(l)&&(E=t<=a?n<=i?Ri(t,i,O):qi(t,i,O):n<=i?Fi(t,i,O):zi(t,i,O),S=""),"M ".concat(t,",").concat(n).concat(E).concat(S,"L ").concat(a,",").concat(i)}var Vi=Object(o.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.label,c=e.labelStyle,l=e.labelShowBg,u=e.labelBgStyle,s=e.labelBgPadding,f=e.labelBgBorderRadius,d=e.style,p=e.sourcePosition,b=void 0===p?oa.Bottom:p,h=e.targetPosition,m=void 0===h?oa.Top:h,y=e.arrowHeadType,v=e.markerEndId,g=e.borderRadius,O=void 0===g?5:g,w=Je(Di({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:b,targetPosition:m}),2),j=w[0],_=w[1],E=Hi({sourceX:t,sourceY:n,sourcePosition:b,targetX:r,targetY:o,targetPosition:m,borderRadius:O}),S=Ni(y,v),x=i?a.a.createElement(Pi,{x:j,y:_,label:i,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:s,labelBgBorderRadius:f}):null;return a.a.createElement(a.a.Fragment,null,a.a.createElement("path",{style:d,className:"react-flow__edge-path",d:E,markerEnd:S}),x)})),Yi=function(e){var t=e.connectionNodeId,n=e.connectionHandleId,r=e.connectionHandleType,i=e.connectionLineStyle,c=e.connectionPositionX,l=e.connectionPositionY,u=e.connectionLineType,s=void 0===u?la.Bezier:u,f=e.nodes,d=void 0===f?[]:f,p=e.transform,b=e.isConnectable,h=e.CustomConnectionLineComponent,m=Je(Object(o.useState)(null),2),y=m[0],v=m[1],g=t,O=n;if(Object(o.useEffect)((function(){var e=d.find((function(e){return e.id===g}))||null;v(e)}),[]),!y||!b)return null;var w=function(e,t,n){var r="source"===n?"target":"source",o=t.__rf.handleBounds[n]||t.__rf.handleBounds[r];return e?o.find((function(t){return t.id===e})):o[0]}(O,y,r),j=w?w.x+w.width/2:y.__rf.width/2,_=w?w.y+w.height/2:y.__rf.height,E=y.__rf.position.x+j,S=y.__rf.position.y+_,x=(c-p[0])/p[2],k=(l-p[1])/p[2],C=(null==w?void 0:w.position)===oa.Left||(null==w?void 0:w.position)===oa.Right?oa.Left:oa.Top;if(h)return a.a.createElement("g",{className:"react-flow__connection"},a.a.createElement(h,{sourceX:E,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:C,connectionLineType:s,connectionLineStyle:i,sourceNode:y,sourceHandle:w}));var P="";return P=s===la.Bezier?Ii({sourceX:E,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:C}):s===la.Step?Hi({sourceX:E,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:C,borderRadius:0}):s===la.SmoothStep?Hi({sourceX:E,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:C}):"M".concat(E,",").concat(S," ").concat(x,",").concat(k),a.a.createElement("g",{className:"react-flow__connection"},a.a.createElement("path",{d:P,className:"react-flow__connection-path",style:i}))},Ki=function(e){var t=e.id,n=e.children;return a.a.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"12.5",markerHeight:"12.5",viewBox:"-10 -10 20 20",orient:"auto",refX:"0",refY:"0"},n)},Xi=function(e){var t=e.color;return a.a.createElement("defs",null,a.a.createElement(Ki,{id:"react-flow__arrowclosed"},a.a.createElement("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",fill:t,points:"-5,-4 0,0 -5,4 -5,-4"})),a.a.createElement(Ki,{id:"react-flow__arrow"},a.a.createElement("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",points:"-5,-4 0,0 -5,4"})))};function $i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Xi.displayName="MarkerDefinitions";var Wi=Object(o.memo)((function(e){return a.a.createElement(Vi,Gi(Gi({},e),{},{borderRadius:0}))})),Qi=Object(o.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.label,c=e.labelStyle,l=e.labelShowBg,u=e.labelBgStyle,s=e.labelBgPadding,f=e.labelBgBorderRadius,d=e.style,p=e.arrowHeadType,b=e.markerEndId,h=Math.abs(o-n)/2,m=o<n?o+h:o-h,y=Math.abs(r-t)/2,v=r<t?r+y:r-y,g=Ni(p,b),O=i?a.a.createElement(Pi,{x:v,y:m,label:i,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:s,labelBgBorderRadius:f}):null;return a.a.createElement(a.a.Fragment,null,a.a.createElement("path",{style:d,className:"react-flow__edge-path",d:"M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o),markerEnd:g}),O)}));function Zi(e,t,n,r,o,a,i){var c=i.elementFromPoint(e.clientX,e.clientY),l=(null==c?void 0:c.classList.contains("target"))||!1,u=(null==c?void 0:c.classList.contains("source"))||!1,s={elementBelow:c,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(c&&(l||u)&&(s.isHoveringHandle=!0,t!==ca.Strict||(n&&u||!n&&l))){var f=c.getAttribute("data-nodeid"),d=c.getAttribute("data-handleid"),p=n?{source:f,sourceHandle:d,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:f,targetHandle:d};s.connection=p,s.isValid=a(p)}return s}function Ji(e){null==e||e.classList.remove("react-flow__handle-valid"),null==e||e.classList.remove("react-flow__handle-connecting")}function ec(e,t,n,r,o,a,i,c,l,u,s,f,d,p){var b,h,m,y=e.target.closest(".react-flow"),v=(b=e.target,(null===(h=b.getRootNode)||void 0===h?void 0:h.call(b))||(null===(m=window)||void 0===m?void 0:m.document));if(v){var g=v.elementFromPoint(e.clientX,e.clientY),O=null==g?void 0:g.classList.contains("target"),w=null==g?void 0:g.classList.contains("source");if(y&&(O||w||u)){var j,_=u||(O?"target":"source"),E=y.getBoundingClientRect();o({x:e.clientX-E.left,y:e.clientY-E.top}),r({connectionNodeId:n,connectionHandleId:t,connectionHandleType:_}),null==f||f(e,{nodeId:n,handleId:t,handleType:_}),v.addEventListener("mousemove",S),v.addEventListener("mouseup",(function e(o){var f=Zi(o,l,i,n,t,c,v),b=f.connection,h=f.isValid;null==d||d(o),h&&(null==a||a(b)),null==p||p(o),u&&s&&s(o),Ji(j),r({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),v.removeEventListener("mousemove",S),v.removeEventListener("mouseup",e)}))}}function S(e){o({x:e.clientX-E.left,y:e.clientY-E.top});var r=Zi(e,l,i,n,t,c,v),a=r.connection,u=r.elementBelow,s=r.isValid;if(!r.isHoveringHandle)return Ji(j);!(a.source===a.target)&&u&&(j=u,u.classList.add("react-flow__handle-connecting"),u.classList.toggle("react-flow__handle-valid",s))}}var tc=function(e,t,n){return n===oa.Left?e-t:n===oa.Right?e+t:e},nc=function(e,t,n){return n===oa.Top?e-t:n===oa.Bottom?e+t:e},rc=function(e){var t=e.className,n=e.position,r=e.centerX,o=e.centerY,i=e.radius,c=void 0===i?10:i;return a.a.createElement("circle",{className:s(["react-flow__edgeupdater",t]),cx:tc(r,c,n),cy:nc(o,c,n),r:c,stroke:"transparent",fill:"transparent"})},oc=function(e){var t=function(t){var n=t.id,r=t.className,i=t.type,c=t.data,l=t.onClick,u=t.onEdgeDoubleClick,f=t.selected,d=t.animated,p=t.label,b=t.labelStyle,h=t.labelShowBg,m=t.labelBgStyle,y=t.labelBgPadding,v=t.labelBgBorderRadius,g=t.style,O=t.arrowHeadType,w=t.source,j=t.target,_=t.sourceX,E=t.sourceY,S=t.targetX,x=t.targetY,k=t.sourcePosition,C=t.targetPosition,P=t.elementsSelectable,N=t.markerEndId,T=t.isHidden,D=t.sourceHandleId,I=t.targetHandleId,A=t.handleEdgeUpdate,R=t.onConnectEdge,M=t.onContextMenu,F=t.onMouseEnter,L=t.onMouseMove,B=t.onMouseLeave,q=t.edgeUpdaterRadius,z=t.onEdgeUpdateStart,U=t.onEdgeUpdateEnd,H=Xe((function(e){return e.addSelectedElements})),V=Xe((function(e){return e.setConnectionNodeId})),Y=Xe((function(e){return e.unsetNodesSelection})),K=Xe((function(e){return e.setConnectionPosition})),X=$e((function(e){return e.connectionMode})),$=Je(Object(o.useState)(!1),2),G=$[0],W=$[1],Q=!P&&!l,Z=s(["react-flow__edge","react-flow__edge-".concat(i),r,{selected:f,animated:d,inactive:Q,updating:G}]),J=Object(o.useMemo)((function(){var e={id:n,source:w,target:j,type:i};return D&&(e.sourceHandle=D),I&&(e.targetHandle=I),void 0!==c&&(e.data=c),e}),[n,w,j,i,D,I,c]),ee=Object(o.useCallback)((function(e){P&&(Y(),H(J)),null==l||l(e,J)}),[P,J,l]),te=Object(o.useCallback)((function(e){null==u||u(e,J)}),[J,u]),ne=Object(o.useCallback)((function(e){null==M||M(e,J)}),[J,M]),re=Object(o.useCallback)((function(e){null==F||F(e,J)}),[J,M]),oe=Object(o.useCallback)((function(e){null==L||L(e,J)}),[J,M]),ae=Object(o.useCallback)((function(e){null==B||B(e,J)}),[J,M]),ie=Object(o.useCallback)((function(e,t){var n=t?j:w,r=t?I:D,o=t;null==z||z(e,J),ec(e,r,n,V,K,R,o,(function(){return!0}),X,t?"target":"source",U?function(e){return U(e,J)}:void 0)}),[n,w,j,i,D,I,V,K,J,R]),ce=Object(o.useCallback)((function(e){ie(e,!0)}),[n,w,D,ie]),le=Object(o.useCallback)((function(e){ie(e,!1)}),[n,j,I,ie]),ue=Object(o.useCallback)((function(){return W(!0)}),[W]),se=Object(o.useCallback)((function(){return W(!1)}),[W]);return T?null:a.a.createElement("g",{className:Z,onClick:ee,onDoubleClick:te,onContextMenu:ne,onMouseEnter:re,onMouseMove:oe,onMouseLeave:ae},a.a.createElement(e,{id:n,source:w,target:j,selected:f,animated:d,label:p,labelStyle:b,labelShowBg:h,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,data:c,style:g,arrowHeadType:O,sourceX:_,sourceY:E,targetX:S,targetY:x,sourcePosition:k,targetPosition:C,markerEndId:N,sourceHandleId:D,targetHandleId:I}),A&&a.a.createElement("g",{onMouseDown:ce,onMouseEnter:ue,onMouseOut:se},a.a.createElement(rc,{position:k,centerX:_,centerY:E,radius:q})),A&&a.a.createElement("g",{onMouseDown:le,onMouseEnter:ue,onMouseOut:se},a.a.createElement(rc,{position:C,centerX:S,centerY:x,radius:q})))};return t.displayName="EdgeWrapper",Object(o.memo)(t)};function ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ac(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ac(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=((null==n?void 0:n.x)||0)+t.__rf.position.x,o=((null==n?void 0:n.y)||0)+t.__rf.position.y,a=(null==n?void 0:n.width)||t.__rf.width,i=(null==n?void 0:n.height)||t.__rf.height;switch(e){case oa.Top:return{x:r+a/2,y:o};case oa.Right:return{x:r+a,y:o+i/2};case oa.Bottom:return{x:r+a/2,y:o+i};case oa.Left:return{x:r,y:o+i/2}}}function lc(e,t){if(!e)return null;var n=null;return 1!==e.length&&t?t&&(n=e.find((function(e){return e.id===t}))):n=e[0],void 0===n?null:n}var uc=function(e){var t=e.edge,n=e.props,r=e.nodes,i=e.selectedElements,c=e.elementsSelectable,l=e.transform,u=e.width,s=e.height,f=e.onlyRenderVisibleElements,d=e.connectionMode,p=t.sourceHandle||null,b=t.targetHandle||null,h=function(e,t){return t.reduce((function(t,n){return n.id===e.source&&(t.sourceNode=n),n.id===e.target&&(t.targetNode=n),t}),{sourceNode:null,targetNode:null})}(t,r),m=h.sourceNode,y=h.targetNode,v=Object(o.useCallback)((function(e){var r;null===(r=n.onEdgeUpdate)||void 0===r||r.call(n,t,e)}),[t,n.onEdgeUpdate]);if(!m)return console.warn("couldn't create edge for source id: ".concat(t.source,"; edge id: ").concat(t.id)),null;if(!y)return console.warn("couldn't create edge for target id: ".concat(t.target,"; edge id: ").concat(t.id)),null;if(!m.__rf.width||!y.__rf.width)return null;var g=t.type||"default",O=n.edgeTypes[g]||n.edgeTypes.default,w=y.__rf.handleBounds,j=d===ca.Strict?w.target:w.target||w.source,_=lc(m.__rf.handleBounds.source,p),E=lc(j,b),S=_?_.position:oa.Bottom,x=E?E.position:oa.Top;if(!_)return console.warn("couldn't create edge for source handle id: ".concat(p,"; edge id: ").concat(t.id)),null;if(!E)return console.warn("couldn't create edge for target handle id: ".concat(b,"; edge id: ").concat(t.id)),null;var k=function(e,t,n,r,o,a){var i=cc(n,e,t),c=cc(a,r,o);return{sourceX:i.x,sourceY:i.y,targetX:c.x,targetY:c.y}}(m,_,S,y,E,x),C=k.sourceX,P=k.sourceY,N=k.targetX,T=k.targetY;if(!(!f||function(e){var t=e.sourcePos,n=e.targetPos,r=e.width,o=e.height,a=e.transform,i={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x,n.x),y2:Math.max(t.y,n.y)};i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);var c=bt({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:r/a[2],height:o/a[2]}),l=Math.max(0,Math.min(c.x2,i.x2)-Math.max(c.x,i.x)),u=Math.max(0,Math.min(c.y2,i.y2)-Math.max(c.y,i.y));return Math.ceil(l*u)>0}({sourcePos:{x:C,y:P},targetPos:{x:N,y:T},width:u,height:s,transform:l})))return null;var D=(null==i?void 0:i.some((function(e){return ct(e)&&e.id===t.id})))||!1;return a.a.createElement(O,{key:t.id,id:t.id,className:t.className,type:t.type,data:t.data,onClick:n.onElementClick,selected:D,animated:t.animated,label:t.label,labelStyle:t.labelStyle,labelShowBg:t.labelShowBg,labelBgStyle:t.labelBgStyle,labelBgPadding:t.labelBgPadding,labelBgBorderRadius:t.labelBgBorderRadius,style:t.style,arrowHeadType:t.arrowHeadType,source:t.source,target:t.target,sourceHandleId:p,targetHandleId:b,sourceX:C,sourceY:P,targetX:N,targetY:T,sourcePosition:S,targetPosition:x,elementsSelectable:c,markerEndId:n.markerEndId,isHidden:t.isHidden,onConnectEdge:v,handleEdgeUpdate:void 0!==n.onEdgeUpdate,onContextMenu:n.onEdgeContextMenu,onMouseEnter:n.onEdgeMouseEnter,onMouseMove:n.onEdgeMouseMove,onMouseLeave:n.onEdgeMouseLeave,edgeUpdaterRadius:n.edgeUpdaterRadius,onEdgeDoubleClick:n.onEdgeDoubleClick,onEdgeUpdateStart:n.onEdgeUpdateStart,onEdgeUpdateEnd:n.onEdgeUpdateEnd})},sc=function(e){var t=$e((function(e){return e.transform})),n=$e((function(e){return e.nodes})),r=$e((function(e){return e.edges})),o=$e((function(e){return e.connectionNodeId})),i=$e((function(e){return e.connectionHandleId})),c=$e((function(e){return e.connectionHandleType})),l=$e((function(e){return e.connectionPosition})),u=$e((function(e){return e.selectedElements})),s=$e((function(e){return e.nodesConnectable})),f=$e((function(e){return e.elementsSelectable})),d=$e((function(e){return e.width})),p=$e((function(e){return e.height}));if(!d)return null;var b=e.connectionLineType,h=e.arrowHeadColor,m=e.connectionLineStyle,y=e.connectionLineComponent,v=e.onlyRenderVisibleElements,g="translate(".concat(t[0],",").concat(t[1],") scale(").concat(t[2],")"),O=o&&c;return a.a.createElement("svg",{width:d,height:p,className:"react-flow__edges"},a.a.createElement(Xi,{color:h}),a.a.createElement("g",{transform:g},r.map((function(r){return a.a.createElement(uc,{key:r.id,edge:r,props:e,nodes:n,selectedElements:u,elementsSelectable:f,transform:t,width:d,height:p,onlyRenderVisibleElements:v})})),O&&a.a.createElement(Yi,{nodes:n,connectionNodeId:o,connectionHandleId:i,connectionHandleType:c,connectionPositionX:l.x,connectionPositionY:l.y,transform:t,connectionLineStyle:m,connectionLineType:b,isConnectable:s,CustomConnectionLineComponent:y})))};sc.displayName="EdgeRenderer";var fc=Object(o.memo)(sc),dc={zoomIn:function(){},zoomOut:function(){},zoomTo:function(e){},transform:function(e){},fitView:function(){},setCenter:function(e,t){},fitBounds:function(e){},project:function(e){return e},initialized:!1},pc=function(){var e=Ge(),t=$e((function(e){return e.d3Zoom})),n=$e((function(e){return e.d3Selection}));return Object(o.useMemo)((function(){return n&&t?{zoomIn:function(){return t.scaleBy(n,1.2)},zoomOut:function(){return t.scaleBy(n,1/1.2)},zoomTo:function(e){return t.scaleTo(n,e)},transform:function(e){var r=Go.translate(e.x,e.y).scale(e.zoom);t.transform(n,r)},fitView:function(){var r,o,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{padding:.1,includeHiddenNodes:!1},c=e.getState(),l=c.nodes,u=c.width,s=c.height,f=c.minZoom,d=c.maxZoom;if(l.length){var p=mt(i.includeHiddenNodes?l:l.filter((function(e){return!e.isHidden}))),b=jt(p,u,s,null!==(r=i.minZoom)&&void 0!==r?r:f,null!==(o=i.maxZoom)&&void 0!==o?o:d,null!==(a=i.padding)&&void 0!==a?a:.1),h=Je(b,3),m=h[0],y=h[1],v=h[2],g=Go.translate(m,y).scale(v);t.transform(n,g)}},setCenter:function(r,o,a){var i=e.getState(),c=i.width,l=i.height,u=i.maxZoom,s=void 0!==a?a:u,f=c/2-r*s,d=l/2-o*s,p=Go.translate(f,d).scale(s);t.transform(n,p)},fitBounds:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,a=e.getState(),i=a.width,c=a.height,l=a.minZoom,u=a.maxZoom,s=jt(r,i,c,l,u,o),f=Je(s,3),d=f[0],p=f[1],b=f[2],h=Go.translate(d,p).scale(b);t.transform(n,h)},project:function(t){var n=e.getState(),r=n.transform,o=n.snapToGrid,a=n.snapGrid;return ut(t,r,o,a)},initialized:!0}:dc}),[t,n])},bc=function(e){var t=e.nodeTypes,n=e.edgeTypes,r=e.onMove,i=e.onMoveStart,c=e.onMoveEnd,l=e.onLoad,u=e.onElementClick,s=e.onNodeDoubleClick,f=e.onEdgeDoubleClick,d=e.onNodeMouseEnter,p=e.onNodeMouseMove,b=e.onNodeMouseLeave,h=e.onNodeContextMenu,m=e.onNodeDragStart,y=e.onNodeDrag,v=e.onNodeDragStop,g=e.onSelectionDragStart,O=e.onSelectionDrag,w=e.onSelectionDragStop,j=e.onSelectionContextMenu,_=e.connectionMode,E=e.connectionLineType,S=e.connectionLineStyle,x=e.connectionLineComponent,k=e.selectionKeyCode,C=e.multiSelectionKeyCode,P=e.zoomActivationKeyCode,N=e.onElementsRemove,T=e.deleteKeyCode,D=e.onConnect,I=e.onConnectStart,A=e.onConnectStop,R=e.onConnectEnd,M=e.snapToGrid,F=e.snapGrid,L=e.onlyRenderVisibleElements,B=e.nodesDraggable,q=e.nodesConnectable,z=e.elementsSelectable,U=e.selectNodesOnDrag,H=e.minZoom,V=e.maxZoom,Y=e.defaultZoom,K=e.defaultPosition,X=e.translateExtent,$=e.preventScrolling,G=e.nodeExtent,W=e.arrowHeadColor,Q=e.markerEndId,Z=e.zoomOnScroll,J=e.zoomOnPinch,ee=e.panOnScroll,te=e.panOnScrollSpeed,ne=e.panOnScrollMode,re=e.zoomOnDoubleClick,oe=e.paneMoveable,ae=e.onPaneClick,ie=e.onPaneScroll,ce=e.onPaneContextMenu,le=e.onEdgeUpdate,ue=e.onEdgeContextMenu,se=e.onEdgeMouseEnter,fe=e.onEdgeMouseMove,de=e.onEdgeMouseLeave,pe=e.edgeUpdaterRadius,be=e.onEdgeUpdateStart,he=e.onEdgeUpdateEnd,me=Object(o.useRef)(!1),ye=Xe((function(e){return e.setOnConnect})),ve=Xe((function(e){return e.setOnConnectStart})),ge=Xe((function(e){return e.setOnConnectStop})),Oe=Xe((function(e){return e.setOnConnectEnd})),we=Xe((function(e){return e.setSnapGrid})),je=Xe((function(e){return e.setSnapToGrid})),_e=Xe((function(e){return e.setNodesDraggable})),Ee=Xe((function(e){return e.setNodesConnectable})),Se=Xe((function(e){return e.setElementsSelectable})),xe=Xe((function(e){return e.setMinZoom})),ke=Xe((function(e){return e.setMaxZoom})),Ce=Xe((function(e){return e.setTranslateExtent})),Pe=Xe((function(e){return e.setNodeExtent})),Ne=Xe((function(e){return e.setConnectionMode})),Te=Ge(),De=pc(),Ie=De.zoomIn,Ae=De.zoomOut,Re=De.zoomTo,Me=De.transform,Fe=De.fitView,Le=De.initialized;return Object(o.useEffect)((function(){!me.current&&Le&&(l&&l({fitView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{padding:.1};return Fe(e)},zoomIn:Ie,zoomOut:Ae,zoomTo:Re,setTransform:Me,project:st(Te),getElements:Ot(Te),toObject:wt(Te)}),me.current=!0)}),[l,Ie,Ae,Re,Me,Fe,Le]),Object(o.useEffect)((function(){D&&ye(D)}),[D]),Object(o.useEffect)((function(){I&&ve(I)}),[I]),Object(o.useEffect)((function(){A&&ge(A)}),[A]),Object(o.useEffect)((function(){R&&Oe(R)}),[R]),Object(o.useEffect)((function(){void 0!==M&&je(M)}),[M]),Object(o.useEffect)((function(){void 0!==F&&we(F)}),[F]),Object(o.useEffect)((function(){void 0!==B&&_e(B)}),[B]),Object(o.useEffect)((function(){void 0!==q&&Ee(q)}),[q]),Object(o.useEffect)((function(){void 0!==z&&Se(z)}),[z]),Object(o.useEffect)((function(){void 0!==H&&xe(H)}),[H]),Object(o.useEffect)((function(){void 0!==V&&ke(V)}),[V]),Object(o.useEffect)((function(){void 0!==X&&Ce(X)}),[X]),Object(o.useEffect)((function(){void 0!==G&&Pe(G)}),[G]),Object(o.useEffect)((function(){void 0!==_&&Ne(_)}),[_]),a.a.createElement(_i,{onPaneClick:ae,onPaneContextMenu:ce,onPaneScroll:ie,onElementsRemove:N,deleteKeyCode:T,selectionKeyCode:k,multiSelectionKeyCode:C,zoomActivationKeyCode:P,elementsSelectable:z,onMove:r,onMoveStart:i,onMoveEnd:c,zoomOnScroll:Z,zoomOnPinch:J,zoomOnDoubleClick:re,panOnScroll:ee,panOnScrollSpeed:te,panOnScrollMode:ne,paneMoveable:oe,defaultPosition:K,defaultZoom:Y,translateExtent:X,onSelectionDragStart:g,onSelectionDrag:O,onSelectionDragStop:w,onSelectionContextMenu:j,preventScrolling:$},a.a.createElement(Si,{nodeTypes:t,onElementClick:u,onNodeDoubleClick:s,onNodeMouseEnter:d,onNodeMouseMove:p,onNodeMouseLeave:b,onNodeContextMenu:h,onNodeDragStop:v,onNodeDrag:y,onNodeDragStart:m,selectNodesOnDrag:U,snapToGrid:M,snapGrid:F,onlyRenderVisibleElements:L}),a.a.createElement(fc,{edgeTypes:n,onElementClick:u,onEdgeDoubleClick:f,connectionLineType:E,connectionLineStyle:S,connectionLineComponent:x,connectionMode:_,arrowHeadColor:W,markerEndId:Q,onEdgeUpdate:le,onlyRenderVisibleElements:L,onEdgeContextMenu:ue,onEdgeMouseEnter:se,onEdgeMouseMove:fe,onEdgeMouseLeave:de,onEdgeUpdateStart:be,onEdgeUpdateEnd:he,edgeUpdaterRadius:pe}))};bc.displayName="GraphView";var hc=Object(o.memo)(bc),mc=function(e){var t=e.elements,n=Xe((function(e){return e.setElements}));return Object(o.useEffect)((function(){n(t)}),[t]),null},yc=Object(o.createContext)(null),vc=yc.Provider;yc.Consumer;var gc=["type","position","isValidConnection","isConnectable","id","onConnect","children","className"];function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wc=function(){return!0},jc=Object(o.forwardRef)((function(e,t){var n=e.type,r=void 0===n?"source":n,i=e.position,c=void 0===i?oa.Top:i,f=e.isValidConnection,d=void 0===f?wc:f,p=e.isConnectable,b=void 0===p||p,h=e.id,m=e.onConnect,y=e.children,v=e.className,g=u(e,gc),O=Object(o.useContext)(yc),w=Xe((function(e){return e.setConnectionPosition})),j=Xe((function(e){return e.setConnectionNodeId})),_=$e((function(e){return e.onConnect})),E=$e((function(e){return e.onConnectStart})),S=$e((function(e){return e.onConnectStop})),x=$e((function(e){return e.onConnectEnd})),k=$e((function(e){return e.connectionMode})),C=h||null,P="target"===r,N=Object(o.useCallback)((function(e){null==_||_(e),null==m||m(e)}),[_,m]),T=Object(o.useCallback)((function(e){ec(e,C,O,j,w,N,P,d,k,void 0,void 0,E,S,x)}),[C,O,j,w,N,P,d,k,E,S,x]),D=s(["react-flow__handle","react-flow__handle-".concat(c),"nodrag",v,{source:!P,target:P,connectable:b}]);return a.a.createElement("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"data-handleid":C,"data-nodeid":O,"data-handlepos":c,className:D,onMouseDown:T,ref:t},g),y)}));jc.displayName="Handle";var _c=Object(o.memo)(jc),Ec=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,o=void 0===r?oa.Top:r,i=e.sourcePosition,c=void 0===i?oa.Bottom:i;return a.a.createElement(a.a.Fragment,null,a.a.createElement(_c,{type:"target",position:o,isConnectable:n}),t.label,a.a.createElement(_c,{type:"source",position:c,isConnectable:n}))};Ec.displayName="DefaultNode";var Sc=Object(o.memo)(Ec),xc=function(e){var t=e.data,n=e.isConnectable,r=e.sourcePosition,o=void 0===r?oa.Bottom:r;return a.a.createElement(a.a.Fragment,null,t.label,a.a.createElement(_c,{type:"source",position:o,isConnectable:n}))};xc.displayName="InputNode";var kc=Object(o.memo)(xc),Cc=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,o=void 0===r?oa.Top:r;return a.a.createElement(a.a.Fragment,null,a.a.createElement(_c,{type:"target",position:o,isConnectable:n}),t.label)};Cc.displayName="OutputNode";var Pc=Object(o.memo)(Cc);function Nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Tc=function(e){var t=function(t){var n=t.id,r=t.type,i=t.data,c=t.scale,u=t.xPos,f=t.yPos,d=t.selected,p=t.onClick,b=t.onMouseEnter,h=t.onMouseMove,m=t.onMouseLeave,y=t.onContextMenu,v=t.onNodeDoubleClick,g=t.onNodeDragStart,O=t.onNodeDrag,w=t.onNodeDragStop,j=t.style,_=t.className,E=t.isDraggable,S=t.isSelectable,x=t.isConnectable,k=t.selectNodesOnDrag,C=t.sourcePosition,P=t.targetPosition,N=t.isHidden,T=t.isInitialized,D=t.snapToGrid,I=t.snapGrid,A=t.isDragging,R=t.resizeObserver,M=t.dragHandle,F=Xe((function(e){return e.updateNodeDimensions})),L=Xe((function(e){return e.addSelectedElements})),B=Xe((function(e){return e.updateNodePosDiff})),q=Xe((function(e){return e.unsetNodesSelection})),z=Object(o.useRef)(null),U=Object(o.useMemo)((function(){return{id:n,type:r,position:{x:u,y:f},data:i}}),[n,r,u,f,i]),H=Object(o.useMemo)((function(){return D?I:[1,1]}),[D,I]),V=Object(o.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nc(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({zIndex:d?10:3,transform:"translate(".concat(u,"px,").concat(f,"px)"),pointerEvents:S||E||p||b||h||m?"all":"none",opacity:T?1:0},j)}),[d,u,f,S,E,p,T,j,b,h,m]),Y=Object(o.useMemo)((function(){if(b&&!A)return function(e){return b(e,U)}}),[b,A,U]),K=Object(o.useMemo)((function(){if(h&&!A)return function(e){return h(e,U)}}),[h,A,U]),X=Object(o.useMemo)((function(){if(m&&!A)return function(e){return m(e,U)}}),[m,A,U]),$=Object(o.useMemo)((function(){if(y)return function(e){return y(e,U)}}),[y,U]),G=Object(o.useCallback)((function(e){E||(S&&(q(),d||L(U)),null==p||p(e,U))}),[S,d,E,p,U]),W=Object(o.useCallback)((function(e){null==g||g(e,U),k&&S?(q(),d||L(U)):k||d||!S||(q(),L([]))}),[U,d,k,S,g]),Q=Object(o.useCallback)((function(e,t){O&&(U.position.x+=t.deltaX,U.position.y+=t.deltaY,O(e,U)),B({id:n,diff:{x:t.deltaX,y:t.deltaY},isDragging:!0})}),[n,U,O]),Z=Object(o.useCallback)((function(e){if(!A)return!S||k||d||L(U),void(null==p||p(e,U));B({id:U.id,isDragging:!1}),null==w||w(e,U)}),[U,S,k,p,w,A,d]),J=Object(o.useCallback)((function(e){null==v||v(e,U)}),[U,v]);if(Object(o.useLayoutEffect)((function(){z.current&&!N&&F([{id:n,nodeElement:z.current,forceUpdate:!0}])}),[n,N,C,P]),Object(o.useEffect)((function(){if(z.current){var e=z.current;return null==R||R.observe(e),function(){return null==R?void 0:R.unobserve(e)}}}),[]),N)return null;var ee=s(["react-flow__node","react-flow__node-".concat(r),_,{selected:d,selectable:S}]);return a.a.createElement(yi,{onStart:W,onDrag:Q,onStop:Z,scale:c,disabled:!E,cancel:".nodrag",nodeRef:z,grid:H,enableUserSelectHack:!1,handle:M},a.a.createElement("div",{className:ee,ref:z,style:V,onMouseEnter:Y,onMouseMove:K,onMouseLeave:X,onContextMenu:$,onClick:G,onDoubleClick:J,"data-id":n},a.a.createElement(vc,{value:n},a.a.createElement(e,{id:n,data:i,type:r,xPos:u,yPos:f,selected:d,isConnectable:x,sourcePosition:C,targetPosition:P,isDragging:A,dragHandle:M}))))};return t.displayName="NodeWrapper",Object(o.memo)(t)};function Dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dc(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ac=function(e){var t=e.onSelectionChange,n=$e((function(e){return e.selectedElements}));return Object(o.useEffect)((function(){t(n)}),[n]),null},Rc=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;0!=o--;){var i=a[o];if(!e(t[i],n[i]))return!1}return!0}return t!=t&&n!=n};function Mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Fc=function(e,t){var n=e.getBoundingClientRect();return{source:Lc(".source",e,n,t),target:Lc(".target",e,n,t)}},Lc=function(e,t,n,r){var o=t.querySelectorAll(e);return o&&o.length?Array.from(o).map((function(e){var t=e.getBoundingClientRect(),o=tt(e);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mc(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-n.left)/r,y:(t.top-n.top)/r},o)})):null};function Bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bc(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ELEMENTS":var n=t.payload,r={nextNodes:[],nextEdges:[]},o=n.reduce((function(t,n){if(lt(n)){var r=e.nodes.find((function(e){return e.id===n.id}));if(r){var o=qc(qc({},r),n);r.position.x===n.position.x&&r.position.y===n.position.y||(o.__rf.position=n.position),void 0!==n.type&&n.type!==r.type&&(o.__rf.width=null),t.nextNodes.push(o)}else t.nextNodes.push(ft(n,e.nodeExtent))}else if(ct(n)){var a=e.edges.find((function(e){return e.id===n.id}));a?t.nextEdges.push(qc(qc({},a),n)):t.nextEdges.push(dt(n))}return t}),r),a=o.nextNodes,i=o.nextEdges;return qc(qc({},e),{},{nodes:a,edges:i});case"UPDATE_NODE_DIMENSIONS":var c=e.nodes.map((function(n){var r=t.payload.find((function(e){return e.id===n.id}));if(r){var o=tt(r.nodeElement);if(o.width&&o.height&&(n.__rf.width!==o.width||n.__rf.height!==o.height||r.forceUpdate)){var a=Fc(r.nodeElement,e.transform[2]);return qc(qc({},n),{},{__rf:qc(qc(qc({},n.__rf),o),{},{handleBounds:a})})}}return n}));return qc(qc({},e),{},{nodes:c});case"UPDATE_NODE_POS":var l=t.payload,u=l.id,s=l.pos,f=s;if(e.snapToGrid){var d=Je(e.snapGrid,2),p=d[0],b=d[1];f={x:p*Math.round(s.x/p),y:b*Math.round(s.y/b)}}var h=e.nodes.map((function(e){return e.id===u?qc(qc({},e),{},{__rf:qc(qc({},e.__rf),{},{position:f})}):e}));return qc(qc({},e),{},{nodes:h});case"UPDATE_NODE_POS_DIFF":var m=t.payload,y=m.id,v=m.diff,g=m.isDragging,O=e.nodes.map((function(t){var n;if(y===t.id||null!==(n=e.selectedElements)&&void 0!==n&&n.find((function(e){return e.id===t.id}))){var r=qc(qc({},t),{},{__rf:qc(qc({},t.__rf),{},{isDragging:g})});return v&&(r.__rf.position={x:t.__rf.position.x+v.x,y:t.__rf.position.y+v.y}),r}return t}));return qc(qc({},e),{},{nodes:O});case"SET_USER_SELECTION":var w=t.payload;return qc(qc({},e),{},{selectionActive:!0,userSelectionRect:{width:0,height:0,startX:w.x,startY:w.y,x:w.x,y:w.y,draw:!0}});case"UPDATE_USER_SELECTION":var j,_,E=t.payload,S=null!==(j=e.userSelectionRect.startX)&&void 0!==j?j:0,x=null!==(_=e.userSelectionRect.startY)&&void 0!==_?_:0,k=qc(qc({},e.userSelectionRect),{},{x:E.x<S?E.x:e.userSelectionRect.x,y:E.y<x?E.y:e.userSelectionRect.y,width:Math.abs(E.x-S),height:Math.abs(E.y-x)}),C=yt(e.nodes,k,e.transform,!1,!0),P=vt(C,e.edges),N=[].concat(Ze(C),Ze(P)),T=!Rc(N,e.selectedElements),D=T?{selectedElements:N.length>0?N:null}:{};return qc(qc(qc({},e),D),{},{userSelectionRect:k});case"UNSET_USER_SELECTION":var I,A=null===(I=e.selectedElements)||void 0===I?void 0:I.filter((function(e){return lt(e)&&e.__rf})),R=qc(qc({},e),{},{selectionActive:!1,userSelectionRect:qc(qc({},e.userSelectionRect),{},{draw:!1})});if(A&&0!==A.length){var M=mt(A);R.selectedNodesBbox=M,R.nodesSelectionActive=!0}else R.selectedElements=null,R.nodesSelectionActive=!1;return R;case"SET_SELECTED_ELEMENTS":var F=t.payload,L=Array.isArray(F)?F:[F],B=!Rc(L,e.selectedElements),q=B?L:e.selectedElements;return qc(qc({},e),{},{selectedElements:q});case"ADD_SELECTED_ELEMENTS":var z=e.multiSelectionActive,U=e.selectedElements,H=t.payload,V=Array.isArray(H)?H:[H],Y=V;z&&(Y=U?[].concat(Ze(U),Ze(V)):V);var K=!Rc(Y,e.selectedElements),X=K?Y:e.selectedElements;return qc(qc({},e),{},{selectedElements:X});case"INIT_D3ZOOM":var $=t.payload,G=$.d3Zoom,W=$.d3Selection,Q=$.d3ZoomHandler,Z=$.transform;return qc(qc({},e),{},{d3Zoom:G,d3Selection:W,d3ZoomHandler:Q,transform:Z});case"SET_MINZOOM":var J,ee=t.payload;return null===(J=e.d3Zoom)||void 0===J||J.scaleExtent([ee,e.maxZoom]),qc(qc({},e),{},{minZoom:ee});case"SET_MAXZOOM":var te,ne=t.payload;return null===(te=e.d3Zoom)||void 0===te||te.scaleExtent([e.minZoom,ne]),qc(qc({},e),{},{maxZoom:ne});case"SET_TRANSLATEEXTENT":var re,oe=t.payload;return null===(re=e.d3Zoom)||void 0===re||re.translateExtent(oe),qc(qc({},e),{},{translateExtent:oe});case"SET_NODE_EXTENT":var ae=t.payload;return qc(qc({},e),{},{nodeExtent:ae,nodes:e.nodes.map((function(e){return qc(qc({},e),{},{__rf:qc(qc({},e.__rf),{},{position:rt(e.__rf.position,ae)})})}))});case"SET_ON_CONNECT":case"SET_ON_CONNECT_START":case"SET_ON_CONNECT_STOP":case"SET_ON_CONNECT_END":case"RESET_SELECTED_ELEMENTS":case"UNSET_NODES_SELECTION":case"UPDATE_TRANSFORM":case"UPDATE_SIZE":case"SET_CONNECTION_POSITION":case"SET_CONNECTION_NODEID":case"SET_SNAPTOGRID":case"SET_SNAPGRID":case"SET_INTERACTIVE":case"SET_NODES_DRAGGABLE":case"SET_NODES_CONNECTABLE":case"SET_ELEMENTS_SELECTABLE":case"SET_MULTI_SELECTION_ACTIVE":case"SET_CONNECTION_MODE":return qc(qc({},e),t.payload);default:return e}}function Uc(e){return m(zc,e)}var Hc={width:0,height:0,transform:[0,0,1],nodes:[],edges:[],selectedElements:null,selectedNodesBbox:{x:0,y:0,width:0,height:0},d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodesSelectionActive:!1,selectionActive:!1,userSelectionRect:{startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:ca.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,multiSelectionActive:!1,reactFlowVersion:"9.6.11"},Vc=Uc(Hc),Yc=function(e){var t=e.children,n=Object(o.useContext)(Q);return Object(o.useMemo)((function(){var e,t;return null==n||null===(e=n.store)||void 0===e||null===(t=e.getState())||void 0===t?void 0:t.reactFlowVersion}),[n])?a.a.createElement(a.a.Fragment,null,t):a.a.createElement(re,{store:Vc},t)};function Kc(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}Yc.displayName="ReactFlowWrapper";Kc(".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__pane,.react-flow__renderer,.react-flow__selectionpane{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow__edges,.react-flow__selection{left:0;position:absolute;top:0}.react-flow__edges{pointer-events:none;z-index:2}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{height:100%;pointer-events:none;width:100%;z-index:3}.react-flow__node,.react-flow__nodes{position:absolute;transform-origin:0 0}.react-flow__node{pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{height:100%;left:0;pointer-events:none;position:absolute;top:0;transform-origin:left top;width:100%;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__background{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__controls{bottom:10px;left:10px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:10px;position:absolute;right:10px;z-index:5}");Kc(".react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output{border-radius:3px;border-style:solid;border-width:1px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-input{background:#fff;border-color:#0041d0}.react-flow__node-input.selected,.react-flow__node-input.selected:hover{box-shadow:0 0 0 .5px #0041d0}.react-flow__node-input .react-flow__handle{background:#0041d0}.react-flow__node-default{background:#fff;border-color:#1a192b}.react-flow__node-default.selected,.react-flow__node-default.selected:hover{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle{background:#1a192b}.react-flow__node-output{background:#fff;border-color:#ff0072}.react-flow__node-output.selected,.react-flow__node-output.selected:hover{box-shadow:0 0 0 .5px #ff0072}.react-flow__node-output .react-flow__handle{background:#ff0072}.react-flow__nodesselection-rect{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;position:absolute;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}");var Xc=["elements","className","nodeTypes","edgeTypes","onElementClick","onLoad","onMove","onMoveStart","onMoveEnd","onElementsRemove","onConnect","onConnectStart","onConnectStop","onConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","arrowHeadColor","markerEndId","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","paneMoveable","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","nodeTypesId","edgeTypesId"];function $c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wc={input:kc,default:Sc,output:Pc},Qc={default:Ai,straight:Qi,step:Wi,smoothstep:Vi},Zc=Object(o.forwardRef)((function(e,t){var n=e.elements,r=void 0===n?[]:n,i=e.className,c=e.nodeTypes,l=void 0===c?Wc:c,f=e.edgeTypes,d=void 0===f?Qc:f,p=e.onElementClick,b=e.onLoad,h=e.onMove,m=e.onMoveStart,y=e.onMoveEnd,v=e.onElementsRemove,g=e.onConnect,O=e.onConnectStart,w=e.onConnectStop,j=e.onConnectEnd,_=e.onNodeMouseEnter,E=e.onNodeMouseMove,S=e.onNodeMouseLeave,x=e.onNodeContextMenu,k=e.onNodeDoubleClick,C=e.onNodeDragStart,P=e.onNodeDrag,N=e.onNodeDragStop,T=e.onSelectionChange,D=e.onSelectionDragStart,I=e.onSelectionDrag,A=e.onSelectionDragStop,R=e.onSelectionContextMenu,M=e.connectionMode,F=void 0===M?ca.Strict:M,L=e.connectionLineType,B=void 0===L?la.Bezier:L,q=e.connectionLineStyle,z=e.connectionLineComponent,U=e.deleteKeyCode,H=void 0===U?"Backspace":U,V=e.selectionKeyCode,Y=void 0===V?"Shift":V,K=e.multiSelectionKeyCode,X=void 0===K?"Meta":K,$=e.zoomActivationKeyCode,G=void 0===$?"Meta":$,W=e.snapToGrid,Q=void 0!==W&&W,Z=e.snapGrid,J=void 0===Z?[15,15]:Z,ee=e.onlyRenderVisibleElements,te=void 0!==ee&&ee,ne=e.selectNodesOnDrag,re=void 0===ne||ne,oe=e.nodesDraggable,ae=e.nodesConnectable,ie=e.elementsSelectable,ce=e.minZoom,le=e.maxZoom,ue=e.defaultZoom,se=void 0===ue?1:ue,fe=e.defaultPosition,de=void 0===fe?[0,0]:fe,pe=e.translateExtent,be=e.preventScrolling,he=void 0===be||be,me=e.nodeExtent,ye=e.arrowHeadColor,ve=void 0===ye?"#b1b1b7":ye,ge=e.markerEndId,Oe=e.zoomOnScroll,we=void 0===Oe||Oe,je=e.zoomOnPinch,_e=void 0===je||je,Ee=e.panOnScroll,Se=void 0!==Ee&&Ee,xe=e.panOnScrollSpeed,ke=void 0===xe?.5:xe,Ce=e.panOnScrollMode,Pe=void 0===Ce?ua.Free:Ce,Ne=e.zoomOnDoubleClick,Te=void 0===Ne||Ne,De=e.paneMoveable,Ie=void 0===De||De,Ae=e.onPaneClick,Re=e.onPaneScroll,Me=e.onPaneContextMenu,Fe=e.children,Le=e.onEdgeUpdate,Be=e.onEdgeContextMenu,qe=e.onEdgeDoubleClick,ze=e.onEdgeMouseEnter,Ue=e.onEdgeMouseMove,He=e.onEdgeMouseLeave,Ve=e.onEdgeUpdateStart,Ye=e.onEdgeUpdateEnd,Ke=e.edgeUpdaterRadius,Xe=void 0===Ke?10:Ke,$e=e.nodeTypesId,Ge=void 0===$e?"1":$e,We=e.edgeTypesId,Qe=void 0===We?"1":We,Ze=u(e,Xc),Je=Object(o.useMemo)((function(){return function(e){var t={input:Tc(e.input||kc),default:Tc(e.default||Sc),output:Tc(e.output||Pc)},n=Object.keys(e).filter((function(e){return!["input","default","output"].includes(e)})).reduce((function(t,n){return t[n]=Tc(e[n]||Sc),t}),{});return Ic(Ic({},t),n)}(l)}),[Ge]),et=Object(o.useMemo)((function(){return function(e){var t={default:oc(e.default||Ai),straight:oc(e.bezier||Qi),step:oc(e.step||Wi),smoothstep:oc(e.step||Vi)},n=Object.keys(e).filter((function(e){return!["default","bezier"].includes(e)})).reduce((function(t,n){return t[n]=oc(e[n]||Ai),t}),{});return ic(ic({},t),n)}(d)}),[Qe]),tt=s(["react-flow",i]);return a.a.createElement("div",Gc(Gc({},Ze),{},{ref:t,className:tt}),a.a.createElement(Yc,null,a.a.createElement(hc,{onLoad:b,onMove:h,onMoveStart:m,onMoveEnd:y,onElementClick:p,onNodeMouseEnter:_,onNodeMouseMove:E,onNodeMouseLeave:S,onNodeContextMenu:x,onNodeDoubleClick:k,onNodeDragStart:C,onNodeDrag:P,onNodeDragStop:N,nodeTypes:Je,edgeTypes:et,connectionMode:F,connectionLineType:B,connectionLineStyle:q,connectionLineComponent:z,selectionKeyCode:Y,onElementsRemove:v,deleteKeyCode:H,multiSelectionKeyCode:X,zoomActivationKeyCode:G,onConnect:g,onConnectStart:O,onConnectStop:w,onConnectEnd:j,snapToGrid:Q,snapGrid:J,onlyRenderVisibleElements:te,nodesDraggable:oe,nodesConnectable:ae,elementsSelectable:ie,selectNodesOnDrag:re,minZoom:ce,maxZoom:le,defaultZoom:se,defaultPosition:de,translateExtent:pe,preventScrolling:he,nodeExtent:me,arrowHeadColor:ve,markerEndId:ge,zoomOnScroll:we,zoomOnPinch:_e,zoomOnDoubleClick:Te,panOnScroll:Se,panOnScrollSpeed:ke,panOnScrollMode:Pe,paneMoveable:Ie,onPaneClick:Ae,onPaneScroll:Re,onPaneContextMenu:Me,onSelectionDragStart:D,onSelectionDrag:I,onSelectionDragStop:A,onSelectionContextMenu:R,onEdgeUpdate:Le,onEdgeContextMenu:Be,onEdgeDoubleClick:qe,onEdgeMouseEnter:ze,onEdgeMouseMove:Ue,onEdgeMouseLeave:He,onEdgeUpdateStart:Ve,onEdgeUpdateEnd:Ye,edgeUpdaterRadius:Xe}),a.a.createElement(mc,{elements:r}),T&&a.a.createElement(Ac,{onSelectionChange:T}),Fe))}));Zc.displayName="ReactFlow";var Jc=function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=e.style,c=e.color,l=e.strokeColor,u=e.strokeWidth,f=e.className,d=e.borderRadius,p=e.shapeRendering,b=i||{},h=b.background,m=b.backgroundColor,y=c||h||m;return a.a.createElement("rect",{className:s(["react-flow__minimap-node",f]),x:t,y:n,rx:d,ry:d,width:r,height:o,fill:y,stroke:l,strokeWidth:u,shapeRendering:p})};Jc.displayName="MiniMapNode";var el=Object(o.memo)(Jc),tl=function(e){var t,n=e.style,r=e.className,o=e.nodeStrokeColor,i=void 0===o?"#555":o,c=e.nodeColor,l=void 0===c?"#fff":c,u=e.nodeClassName,f=void 0===u?"":u,d=e.nodeBorderRadius,p=void 0===d?5:d,b=e.nodeStrokeWidth,h=void 0===b?2:b,m=e.maskColor,y=void 0===m?"rgb(240, 242, 243, 0.7)":m,v=$e((function(e){return e.width})),g=$e((function(e){return e.height})),O=Je($e((function(e){return e.transform})),3),w=O[0],j=O[1],_=O[2],E=$e((function(e){return e.nodes})),S=s(["react-flow__minimap",r]),x=(null==n?void 0:n.width)||200,k=(null==n?void 0:n.height)||150,C=l instanceof Function?l:function(){return l},P=i instanceof Function?i:function(){return i},N=f instanceof Function?f:function(){return f},T=E&&E.length,D=mt(E),I={x:-w/_,y:-j/_,width:v/_,height:g/_},A=T?(t=I,ht(pt(bt(D),bt(t)))):I,R=A.width/x,M=A.height/k,F=Math.max(R,M),L=F*x,B=F*k,q=5*F,z=A.x-(L-A.width)/2-q,U=A.y-(B-A.height)/2-q,H=L+2*q,V=B+2*q,Y="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return a.a.createElement("svg",{width:x,height:k,viewBox:"".concat(z," ").concat(U," ").concat(H," ").concat(V),style:n,className:S},E.filter((function(e){return!e.isHidden})).map((function(e){return a.a.createElement(el,{key:e.id,x:e.__rf.position.x,y:e.__rf.position.y,width:e.__rf.width,height:e.__rf.height,style:e.style,className:N(e),color:C(e),borderRadius:p,strokeColor:P(e),strokeWidth:h,shapeRendering:Y})})),a.a.createElement("path",{className:"react-flow__minimap-mask",d:"M".concat(z-q,",").concat(U-q,"h").concat(H+2*q,"v").concat(V+2*q,"h").concat(-H-2*q,"z\n        M").concat(I.x,",").concat(I.y,"h").concat(I.width,"v").concat(I.height,"h").concat(-I.width,"z"),fill:y,fillRule:"evenodd"}))};tl.displayName="MiniMap";var nl,rl,ol,al,il;function cl(){return(cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ll(e){return o.createElement("svg",cl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e),nl||(nl=o.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})))}function ul(){return(ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sl(e){return o.createElement("svg",ul({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},e),rl||(rl=o.createElement("path",{d:"M0 0h32v4.2H0z"})))}function fl(){return(fl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dl(e){return o.createElement("svg",fl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},e),ol||(ol=o.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 01-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})))}function pl(){return(pl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bl(e){return o.createElement("svg",pl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},e),al||(al=o.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})))}function hl(){return(hl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ml(e){return o.createElement("svg",hl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},e),il||(il=o.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})))}var yl=["children","className"];function vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var gl=function(e){var t=e.children,n=e.className,r=u(e,yl);return a.a.createElement("button",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"button",className:s(["react-flow__controls-button",n])},r),t)},Ol=function(e){var t=e.style,n=e.showZoom,r=void 0===n||n,i=e.showFitView,c=void 0===i||i,l=e.showInteractive,u=void 0===l||l,f=e.fitViewParams,d=e.onZoomIn,p=e.onZoomOut,b=e.onFitView,h=e.onInteractiveChange,m=e.className,y=e.children,v=Je(Object(o.useState)(!1),2),g=v[0],O=v[1],w=Xe((function(e){return e.setInteractive})),j=pc(),_=j.zoomIn,E=j.zoomOut,S=j.fitView,x=$e((function(e){return e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable})),k=s(["react-flow__controls",m]),C=Object(o.useCallback)((function(){null==_||_(),null==d||d()}),[_,d]),P=Object(o.useCallback)((function(){null==E||E(),null==p||p()}),[E,p]),N=Object(o.useCallback)((function(){null==S||S(f),null==b||b()}),[S,f,b]),T=Object(o.useCallback)((function(){null==w||w(!x),null==h||h(!x)}),[x,w,h]);return Object(o.useEffect)((function(){O(!0)}),[]),g?a.a.createElement("div",{className:k,style:t},r&&a.a.createElement(a.a.Fragment,null,a.a.createElement(gl,{onClick:C,className:"react-flow__controls-zoomin"},a.a.createElement(ll,null)),a.a.createElement(gl,{onClick:P,className:"react-flow__controls-zoomout"},a.a.createElement(sl,null))),c&&a.a.createElement(gl,{className:"react-flow__controls-fitview",onClick:N},a.a.createElement(dl,null)),u&&a.a.createElement(gl,{className:"react-flow__controls-interactive",onClick:T},x?a.a.createElement(ml,null):a.a.createElement(bl,null)),y):null};Ol.displayName="Controls";var wl,jl=Object(o.memo)(Ol);function _l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function El(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_l(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sl=(l(wl={},ia.Dots,"#81818a"),l(wl,ia.Lines,"#eee"),wl),xl=function(e){var t=e.variant,n=void 0===t?ia.Dots:t,r=e.gap,i=void 0===r?15:r,c=e.size,l=void 0===c?.4:c,u=e.color,f=e.style,d=e.className,p=Je($e((function(e){return e.transform})),3),b=p[0],h=p[1],m=p[2],y=Object(o.useMemo)((function(){return"pattern-".concat(Math.floor(1e5*Math.random()))}),[]),v=s(["react-flow__background",d]),g=i*m,O=b%g,w=h%g,j=n===ia.Lines,_=u||Sl[n],E=j?function(e,t,n){return a.a.createElement("path",{stroke:n,strokeWidth:t,d:"M".concat(e/2," 0 V").concat(e," M0 ").concat(e/2," H").concat(e)})}(g,l,_):function(e,t){return a.a.createElement("circle",{cx:e,cy:e,r:e,fill:t})}(l*m,_);return a.a.createElement("svg",{className:v,style:El(El({},f),{},{width:"100%",height:"100%"})},a.a.createElement("pattern",{id:y,x:O,y:w,width:g,height:g,patternUnits:"userSpaceOnUse"},E),a.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(y,")")}))};xl.displayName="Background";var kl=Object(o.memo)(xl),Cl=function(e){var t=e.children,n=Object(o.useMemo)((function(){return Uc(Hc)}),[]);return a.a.createElement(re,{store:n},t)};Cl.displayName="ReactFlowProvider";var Pl=n(124),Nl=n(2),Tl=n(7),Dl=n.n(Tl),Il=n(1),Al=n(9),Rl=n(3),Ml=n(27),Fl=["getStateProp"];function Ll(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Bl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bl(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(n),!0).forEach((function(t){Ul(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ul(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hl(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Vl=function(){var e=Object(Ml.a)("funnelCanvas"),t=e.getStateProp;return zl(zl({},Hl(e,Fl)),{},{nodeElements:t("nodes"),isLoading:t("isLoading"),getNodeById:function(e){var n,r={},o=Ll(t("nodes"));try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.id==e){r=a;break}}}catch(e){o.e(e)}finally{o.f()}return r},getSteps:function(){return t("nodes")},getNodeElements:function(){return t("nodes")},getFunnelId:function(){return t("funnelId")},getStepsList:function(){return t("stepsList")},getFunnelData:function(){return t("funnelData")},isLoadingAnalytics:t("analyticsLoading"),isAnalyticsLoaded:t("analyticsLoaded")})},Yl=n(88),Kl=n(42),Xl=n(53),$l=n(34),Gl=n(5),Wl=n(10),Ql=n.n(Wl),Zl=n(40),Jl=n(30),eu=n(14),tu=n(16),nu=n(80);function ru(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ou(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ou(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ou(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var au=function(e){var t=e.isSuccess,n=void 0===t||t,o=e.onRequestClose,a=e.stepName,i=e.onConfirm,c=e.isLoading,l=e.error,u=e.modalTitle,s=void 0===u?"":u,f=e.isParentOffer,d=void 0!==f&&f,p=e.onBackupChange,b=ru(Object(r.useState)(!0),2),h=b[0],m=b[1],y=Object(r.createElement)(nu.a,{type:"checkbox",checked:h,onChange:function(e){m(e),p(e)},label:Object(Il.__)("Download this complete funnel before deletion.","funnel-builder"),className:"bwf-mt-16"});return Object(r.createElement)(Al.Modal,{isDismissible:!0,title:!1===n?Object(Il.__)("Failed","funnel-builder"):""!==s?s:Object(Il.__)("Delete Step","funnel-builder"),onRequestClose:function(){c||o()},className:"bwf-admin-modal bwf-admin-modal-small",shouldCloseOnClickOutside:!c},n?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},d?Object(r.createElement)(r.Fragment,null,a?Object(r.createElement)(r.Fragment,null,Object(Il.__)("You are about to delete parent offer ","funnel-builder"),Object(r.createElement)("strong",null,a),Object(Il.__)(". The path of dependent offers would need an update.","funnel-builder")):Object(Il.__)("You are about to delete step. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")):Object(r.createElement)(r.Fragment,null,a?Object(r.createElement)(r.Fragment,null,Object(Il.__)("You are about to delete ","funnel-builder"),Object(r.createElement)("strong",null,Object($l.decodeEntities)(a)),Object(Il.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")):Object(Il.__)("You are about to delete step. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")),y),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(tu.a,{onClick:function(){c||o()},className:"bwf-modal-cancel-btn",disabled:c},Object(Il.__)("Cancel","funnel-builder")),Object(r.createElement)(tu.a,{isBusy:c,disabled:c,onClick:i,className:Dl()({"is-danger":!d,"is-primary":d})},d?Object(Il.__)("Update Path to Delete","funnel-builder"):Object(Il.__)("Delete","funnel-builder")))):!c&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},l?l.hasOwnProperty("message")?l.message:l:"")),!c&&!1===n&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-modal-action".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(tu.a,{className:"bwf-modal-confirm-btn",isPrimary:!0,onClick:o},Object(Il.__)("OK","funnel-builder")))))},iu=n(341),cu=n(63),lu=n(23),uu=n(342);function su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?su(Object(n),!0).forEach((function(t){du(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function du(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pu(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function bu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mu={landing:Object(Il.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(Il.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(Il.__)("Add Upsell Page","funnel-builder"),optin:Object(Il.__)("Add Optin Page","funnel-builder"),optin_ty:Object(Il.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(Il.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(Il.__)("Add Order Bump","funnel-builder"),offer:Object(Il.__)("Add Offer","funnel-builder")},yu=function(e){e.title;var t=e.type,n=e.funnelId,o=e.stepID,a=e.parent_id,i=e.mainIndex,c=e.stepIndex,l=e.subIndex,u=Object(lu.b)().isProFeatureLocked,s=Object(lu.b)("ul").isProFeatureLocked,f=bu(Object(r.useState)(!1),2),d=f[0],p=f[1],b=bu(Object(r.useState)(!1),2),h=b[0],m=b[1],y=bu(Object(r.useState)({}),2),v=y[0],g=y[1],O=Vl().getStepsList,w=Object(Yl.a)(),j=w.setStepList,_=w.duplicateStepNode,E=O(),S=Object(Rl.ib)(),x=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,u,s,f,d,b,h,y,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=v.length>0&&void 0!==v[0]?v[0]:{},u=r.copyFrom,s=void 0===u?{}:u,f=r.title,d=void 0===f?"":f,(b=s&&s.hasOwnProperty("key")?s.key:0)<1&&(b=s&&s.hasOwnProperty("id")?s.id:0),h="",y={inherit_from:b,title:d,type:t,canvas:{mode:"sibling",insert_after:o}},e.t0=t,e.next="wc_order_bump"===e.t0?9:11;break;case 9:return h=S?Object(Rl.x)("/store-checkout/".concat(n,"/step/").concat(a,"/substeps/")):Object(Rl.x)("/funnels/".concat(n,"/steps/").concat(a,"/substeps/")),e.abrupt("break",13);case 11:return h=Object(Rl.x)("/funnels/".concat(n,"/steps")),e.abrupt("break",13);case 13:return e.prev=13,m(!0),e.next=17,Ql()({method:"POST",path:h,data:y}).then((function(e){if(e.hasOwnProperty("status")&&e.status&&e.hasOwnProperty("data")&&!Object(Nl.isEmpty)(e.data)){var n=Object(Nl.cloneDeep)(E),r=e.data,o=r.groups,a=void 0===o?[]:o,u=r.steps_list,s=void 0===u?{}:u;n=fu(fu({},n),s),j(n),_(t,i,c,l,a[0]),p(!1),m(!1)}}));case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(13),console.log(e.t1),m(!1);case 23:case"end":return e.stop()}}),e,null,[[13,19]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){pu(a,r,o,i,c,"next",e)}function c(e){pu(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-add-horizontal-wrap",onClick:function(){"wc_order_bump"===t&&u?g({bump:!0}):"wc_upsells"!==t&&"offer"!==t||!s?p(!0):g({status:!0})}},Object(r.createElement)(cu.a,{toolTipText:mu.hasOwnProperty(t)?mu[t]:Object(Il.__)("Add Step","funnel-builder")},Object(r.createElement)(Gl.a,{icon:"dashed-plus"}))),d&&Object(r.createElement)(Al.Modal,{title:mu.hasOwnProperty(t)?mu[t]:Object(Il.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return p(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(iu.a,{step:{type:t,parent_id:a,title:Object(Rl.qb)(t),is_substep:["wc_order_bump","offer"].includes(t)},requestCreateStep:x,onRequestClose:function(){return p(!1)},isBusy:h})),v.status&&Object(r.createElement)(Xl.a,{isOpen:v.status,onRequestClose:function(){return g({status:!1})},modalContent:v,type:v.type}),v.bump&&Object(r.createElement)(uu.a,{isOpen:v.bump,onRequestClose:function(){return g({status:!1})}}))},vu=n(420),gu=n(387),Ou=n(65),wu=n(55),ju=n(74),_u=n(261);function Eu(e){return function(e){if(Array.isArray(e))return Tu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(n),!0).forEach((function(t){ku(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ku(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cu(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Pu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||Nu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nu(e,t){if(e){if("string"==typeof e)return Tu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tu(e,t):void 0}}function Tu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Du=function(e){var t=e.setIsOpen,n=void 0===t?function(){}:t,o=e.offerId,a=void 0===o?"":o,i=e.stepGroupData,c=void 0===i?{}:i,l=e.stepList,u=void 0===l?{}:l,s=e.onUpdateDynamicOffer,f=void 0===s?function(){}:s,d=e.orphanNode,p=void 0!==d&&d,b=Pu(Object(r.useState)(!1),2),h=b[0],m=b[1],y=Pu(Object(r.useState)(""),2),v=y[0],g=y[1],O=c.id,w=c.substeps,j=void 0===w?[]:w,_=Pu(Object(r.useState)({}),2),E=_[0],S=_[1],x=Object(r.useMemo)((function(){var e=[];return j.forEach((function(t){var n=t.id,r=void 0===n?"":n;if(""!==r&&u.hasOwnProperty(r)){var o=u[r].title,a=void 0===o?"":o;e.push({key:parseInt(r)>0?parseInt(r):r,label:a})}})),e}),[j]),k=Object(r.useMemo)((function(){var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Nu(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(j);try{for(n.s();!(e=n.n()).done;){var r=e.value.id,o=void 0===r?"":r;""!==o&&u.hasOwnProperty(o)&&t.push(parseInt(o))}}catch(e){n.e(e)}finally{n.f()}return t.push(0),t}),[j]);Object(r.useEffect)((function(){var e;e={},j.forEach((function(t,n){var r=t.id,o=void 0===r?"":r;if(""!==o&&o!=a){var i=u[o],c=i.accept,l=void 0===c?"":c,s=i.reject,f=void 0===s?"":s;e[o]={accept:""===l||""!==a&&parseInt(l)==a||!k.includes(parseInt(l))?"":parseInt(l),reject:""===f||""!==a&&parseInt(f)==a||!k.includes(parseInt(f))?"":parseInt(f)}}})),S(e)}),[j]);var C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],o=[];return x.map((function(n,a){a>t&&n.key!=e&&(n.label=Object($l.decodeEntities)(n.label),r.push(n),o.push(n.key))})),n?o:r},P=function(){var e=[];if(Object.keys(E).map((function(t){""!==E[t].accept&&""!==E[t].reject||e.push(t)})),e.length>0){var t=e.map((function(e){if(u.hasOwnProperty(e)&&u[e].hasOwnProperty("title"))return u[e].title}));return g(Object(Il.__)("Please set the path of following offer:","funnel-builder")+" "+t.join(", ")),!1}return g(""),!0},N=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==P()){e.next=2;break}return e.abrupt("return");case 2:return m(!0),t={path:E},a&&!p&&(t=xu(xu({},t),{},{delete:!0,offer_id:a})),e.prev=5,e.next=8,Ql()({path:Object(Rl.x)("/funnel-upsell/".concat(O,"/dynamic-path")),method:"POST",data:t}).then((function(e){e.hasOwnProperty("success")&&e.success&&e.hasOwnProperty("data")&&!Object(Nl.isEmpty)(e.data)?f(e.data):g(Object(Il.__)("Unable to update the offer path.","funnel-builder")),m(!1)}));case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(5),g(Object(Il.__)("Error encountered while making API call.","funnel-builder")),m(!1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Cu(a,r,o,i,c,"next",e)}function c(e){Cu(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(Al.Modal,{className:"bwf-admin-modal bwf-admin-modal-medium bwf-dynamic-offer-path-modal bwf-admin-modal-no-header",onRequestClose:function(){return n(!1)},isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between bwf-mb-16"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(Il.__)("Dynamic Offer Path","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-btn-small is-primary components-button",onClick:function(){return N()}},Object(r.createElement)("span",{style:xu({},h&&{visibility:"hidden"})},a&&!p?Object(Il.__)("Update & Delete","funnel-builder"):Object(Il.__)("Update","funnel-builder")),h&&Object(r.createElement)(Kl.a,{color:"#ffffff",style:{position:"absolute"}})),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(Il.__)("Close","funnel-builder"),onClick:function(){return n(!1)}},Object(r.createElement)(Gl.a,{icon:"close",height:24,width:24})))),Object(r.createElement)("div",{className:"bwf-dynamic-path-modal-content"},v?Object(r.createElement)("div",{className:"bwf-dynamic-error"},v):Object(r.createElement)("div",{className:"bwf-desc"},Object(Il.__)("You can set the offer path and redirect users to the acceptance/rejection of an offer","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-wrapper"},j.map((function(e,t){var n=e.id,o=void 0===n?"":n;if(""!==o&&o!=a){var i=u[o].title,c=void 0===i?"":i;return Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item",key:t},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-header"},Object($l.decodeEntities)(c)),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-wrap"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-label"},Object(Il.__)("On Acceptance","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-val"},Object(r.createElement)(_u.b,{options:[{key:"",label:Object(Il.__)("Select","funnel-builder"),getOptionList:C}].concat(Eu(C(o,t-1)),[{key:0,label:Object(Il.__)("Thankyou Page","funnel-builder")}]),selected:E.hasOwnProperty(o)?E[o].accept:"",onChange:function(e){var t=Object(Nl.cloneDeep)(E);t[o].accept=e,S(t)},className:E.hasOwnProperty(o)&&""!==E[o].accept?"":"rule-error"}))),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-label"},Object(Il.__)("On Reject","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-val"},Object(r.createElement)(_u.b,{options:[{key:"",label:Object(Il.__)("Select","funnel-builder")}].concat(Eu(C(o,t-1)),[{key:0,label:Object(Il.__)("Thankyou Page","funnel-builder")}]),selected:E.hasOwnProperty(o)?E[o].reject:"",onChange:function(e){var t=Object(Nl.cloneDeep)(E);t[o].reject=e,S(t)},className:E.hasOwnProperty(o)&&""!==E[o].reject?"":"rule-error"})))))}})))))},Iu=n(86),Au=n(87),Ru={1:Object(Il.__)("A/B Test Draft","funnel-builder"),2:Object(Il.__)("A/B Test Running","funnel-builder"),3:Object(Il.__)("A/B Test Paused","funnel-builder")},Mu={1:"warning",2:"success",3:"default"},Fu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Mu[e]:Ru[e]},Lu=n(21),Bu=n(135),qu=n(54),zu=n(134),Uu=n(125),Hu=n(44);function Vu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vu(Object(n),!0).forEach((function(t){Ku(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ku(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xu(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function $u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wu={status:!0,feature:Object(Il.__)("One Click Upsell","funnel-builder"),proLink:Object(Rl.S)(["Canvas","One","Click","Upsell","Upgrade","Modal"])},Qu=function(e){var t=e.setIsOpenModal,n=e.allowedSteps,o=void 0===n?[]:n,a=e.defaultType,i=void 0===a?"":a,c=(e.parentStep,e.mainIndex),l=void 0===c?"":c,u=e.addNodeData,s=void 0===u?{}:u,f=e.newStep,d=void 0!==f&&f,p=e.replaceCurrentStep,b=void 0!==p&&p,h=e.currentParentType,m=e.hasCheckout,y=Object(lu.b)("ul").isProFeatureLocked,v=$u(Object(r.useState)(i),2),g=v[0],O=v[1],w=$u(Object(r.useState)(!1),2),j=w[0],_=w[1],E=$u(Object(r.useState)(null),2),S=E[0],x=E[1],k=Vl(),C=k.getFunnelId,P=k.getStepsList,N=Object(Yl.a)(),T=N.addNewStepGroup,D=N.setStepList,I=N.replaceCurrentStepData,A=N.replaceCurrentSubStepData,R=N.setUpsellStepNode,M=C(),F=P(),L=Object(Rl.ib)(),B=$u(Object(r.useState)({}),2),q=B[0],z=B[1],U=s.prevFirstParent,H=void 0===U?"":U,V=s.lastIteratedStep,Y=void 0===V?"":V,K=s.mainIndex,X=void 0===K?"":K,$=s.stepIndex,G=void 0===$?"":$,W=(s.newUpsell,s.upsellEndAddLast),Q=void 0!==W&&W;Object(r.useLayoutEffect)((function(){var e=""==i&&1==o.length?o[0]:i;return"offer"!==e&&"wc_order_bump"!==e||O(e),function(){O("")}}),[]);var Z={landing:Object(Il.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(Il.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(Il.__)("Add Upsell Page","funnel-builder"),optin:Object(Il.__)("Add Optin Page","funnel-builder"),optin_ty:Object(Il.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(Il.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(Il.__)("Add Order Bump","funnel-builder"),offer:Object(Il.__)("Add Offer","funnel-builder")},J=[{key:"landing",label:Object(Il.__)("Sales","funnel-builder")},{key:"wc_checkout",label:Object(Il.__)("Checkout","funnel-builder")},{key:"wc_upsells",label:Object(Il.__)("One Click Upsell Offer","funnel-builder")},{key:"wc_thankyou",label:Object(Il.__)("Thankyou","funnel-builder")},{key:"optin",label:Object(Il.__)("Optin","funnel-builder")},{key:"optin_ty",label:Object(Il.__)("Optin Confirmation","funnel-builder")}],ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];switch(g){case"optin":t={type:"optin",steps:[e]};break;case"optin_ty":t={type:"optin_ty",steps:[e]};break;case"wc_thankyou":t={type:"wc_thankyou",steps:[e]};break;case"landing":t={type:"landing",steps:[e]};break;case"wc_checkout":t=b?e:{type:"wc_checkout",steps:[e]};break;case"wc_order_bump":t=e;break;case"wc_upsells":t={type:"wc_upsells",steps:[e]}}return t},te=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,r,o,a,i,c,u,s,f,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p.length>0&&void 0!==p[0]?p[0]:{},r=n.copyFrom,o=void 0===r?{}:r,a=n.title,i=void 0===a?"":a,(c=o&&o.hasOwnProperty("key")?o.key:0)<1&&(c=o&&o.hasOwnProperty("id")?o.id:0),u={inherit_from:c,title:i,type:g,funnel_id:M,canvas:{mode:"start_group",insert_after:Y}},"offer"===g&&(u.canvas={empty:!1,position:Q?"end":""}),"wc_order_bump"===g&&(u.canvas.mode="sibling"),d&&(u.canvas.insert_after=""),s="",e.t0=g,e.next="wc_order_bump"===e.t0?12:"offer"===e.t0?14:16;break;case 12:return s=L?Object(Rl.x)("/store-checkout/".concat(M,"/step/").concat(H,"/substeps/")):Object(Rl.x)("/funnels/".concat(M,"/steps/").concat(H,"/substeps/")),e.abrupt("break",18);case 14:return s=Object(Rl.x)("/funnel-upsell/".concat(H,"/offers/")),e.abrupt("break",18);case 16:return s=Object(Rl.x)("/funnels/".concat(M,"/steps/")),e.abrupt("break",18);case 18:return e.prev=18,_(!0),e.next=22,Ql()({method:"POST",path:s,data:u}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(Nl.isEmpty)(e.data)){var n,r=Object(Nl.cloneDeep)(F),o=e.data,a=o.groups,i=void 0===a?[]:a,c=o.steps_list,u=void 0===c?{}:c;r=Yu(Yu({},r),u),n=i[0],D(r),"offer"===g?R(X,G,n):"wc_order_bump"===g?A(X,G,0,n):b?I(X,G,g,n):T(l,ee(n)),t(!1)}t(!1)}else{var s;x({add_err:null!==(s=null==e?void 0:e.msg)&&void 0!==s?s:null==e?void 0:e.message})}_(!1)}));case 22:e.next=29;break;case 24:e.prev=24,e.t1=e.catch(18),console.log(e.t1),_(!1),x({add_err:null!==(f=null===e.t1||void 0===e.t1?void 0:e.t1.msg)&&void 0!==f?f:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 29:case"end":return e.stop()}}),e,null,[[18,24]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xu(a,r,o,i,c,"next",e)}function c(e){Xu(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),ne=function(e,t){var n=!(Object(Nl.isEmpty)(o)||o.includes(e.key)||"wc_upsells"===e.key&&y);return Object(r.createElement)("div",{key:t},Object(r.createElement)(tu.a,{isSecondary:!0,style:{width:"100%"},onClick:function(){n||("wc_upsells"===e.key&&y?z(Wu):O(e.key))},className:Dl()({disabled:n})},Object(r.createElement)("span",{className:"bwf-type-select-icons",key:"bwf-icon"+e.key+"-"+t,"data-type":e.key},Object(r.createElement)(Gl.a,{icon:"".concat(e.key,"-flow")})),Object(r.createElement)("span",{className:"bwf-type-select-label",key:"bwf-label"+e.key+"-"+t},e.label),"wc_upsells"===e.key&&y&&Object(r.createElement)(Lu.b,null)))},re=function(e){var t,n,r;if(Object(Rl.ib)()&&["landing","optin","optin_ty"].includes(e))return Object(Il.sprintf)(Object(Il.__)("%s Page is not available in Store Checkout","funnel-builder"),null===(r=J.find((function(t){return t.key===e})))||void 0===r?void 0:r.label);switch(e){case"landing":case"optin":return Object(Il.sprintf)(Object(Il.__)("%s Page is not available after %s Step","funnel-builder"),null===(t=J.find((function(t){return t.key===e})))||void 0===t?void 0:t.label,null===(n=J.find((function(e){return e.key===h})))||void 0===n?void 0:n.label);case"wc_checkout":return m?Object(Il.__)("A Checkout Step is already created, click plus icon next to checkout","funnel-builder"):Object(Il.__)("Checkout will be available after Sales Step","funnel-builder");case"wc_upsells":return Object(Il.__)("One Click Upsell will be available after Checkout Step","funnel-builder");case"optin_ty":return Object(Il.__)("Optin Confirmation will be available after Optin Step","funnel-builder");case"wc_thankyou":return Object(Il.__)("Thank you will be available after One Click Upsell or Checkout Step","funnel-builder")}};return Object(r.createElement)(r.Fragment,null," ",""===g?Object(r.createElement)(r.Fragment,null,q.status?Object(r.createElement)(Xl.a,{isOpen:q.status,onRequestClose:function(){return z({status:!1})},modalContent:q,type:q.type}):Object(r.createElement)(Hu.a,{onFocusOutside:function(){return t(!1)},position:"bottom center",placement:"bottom-start",className:"bwf-step-type-select-modal",onClick:function(e){return e.stopPropagation()}},Object(r.createElement)("div",{className:"bwf-title-wrap",key:"bwf-step-header-1"},Object(r.createElement)("div",{className:"bwf-title bwf_w_full"},Object(Il.__)("Add Step","funnel-builder")),Object(r.createElement)("div",{className:"bwf-cross bwf-cursor-pointer",onClick:function(){return t(!1)}},Object(r.createElement)(Gl.a,{icon:"cross",size:20})," ")),Object(r.createElement)("div",{className:"bwf-step-type-wrapper",key:"bwf-step-wrap-2"},J.map((function(e,t){return Object(Nl.isEmpty)(o)||o.includes(e.key)||"wc_upsells"===e.key&&y?ne(e,t):Object(r.createElement)(cu.a,{key:t,toolTipText:re(e.key),noInlineStyle:!0,size:150},ne(e,t))}))))):Object(r.createElement)(Al.Modal,{title:Z.hasOwnProperty(g)?Z[g]:Object(Il.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){t(!1),x(null)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(iu.a,{step:{type:g,title:Object(Rl.qb)(g),parent_id:H,is_substep:["wc_order_bump","offer"].includes(g)},requestCreateStep:te,onRequestClose:function(){return t(!1)},isBusy:j,errors:S})))},Zu=n(57),Ju=n(29);function es(e){return function(e){if(Array.isArray(e))return ls(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(n),!0).forEach((function(t){rs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function os(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function as(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){os(a,r,o,i,c,"next",e)}function c(e){os(a,r,o,i,c,"throw",e)}i(void 0)}))}}function is(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||cs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cs(e,t){if(e){if("string"==typeof e)return ls(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ls(e,t):void 0}}function ls(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var us=window.wffn.is_ab_experiment,ss={status:!0,title:Object(Il.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(Il.__)("Increased Conversion Rates","funnel-builder"),Object(Il.__)("Greater Return on Ad Spend","funnel-builder"),Object(Il.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(Rl.R)()+"AB-testing.png",proLink:Object(Rl.S)(["Canvas","AB_Test","Upgrade","Modal"])},fs=function(e){var t,n=Object(lu.b)("ul").isProFeatureLocked,o=Object(lu.b)().isProFeatureLocked,a=Object(eu.i)(),i=Object(lu.c)().showSnackbar,c=e.data,l=void 0===c?{}:c,u=e.id,s=void 0===u?"":u,f=l.id,d=l.sub_title,p=l.stats,b=l.type,h=void 0===b?"":b,m=(l.tabs,l.control),y=void 0===m?null:m,v=l.edit_link,g=void 0===v?"":v,O=l.parent_id,w=void 0===O?"":O,j=l.links,_=void 0===j?[]:j,E=l.tags,S=void 0===E?["has_rules","end","draft","ab_test"]:E,x=l.mainIndex,k=void 0===x?"":x,C=l.stepIndex,P=void 0===C?"":C,N=l.subIndex,T=void 0===N?"":N,D=l.upsellEnd,I=void 0!==D&&D,A=l._data,R=void 0===A?{}:A,M=l.bwfSourceEdgeType,F=void 0===M?[]:M,L=l.upsellId,B=void 0===L?"":L,q=l.orphanNode,z=void 0!==q&&q,U=l.experiment_status,H=is(Object(r.useState)(!1),2),V=H[0],Y=H[1],K=is(Object(r.useState)(!1),2),X=K[0],$=K[1],G=is(Object(r.useState)(!1),2),W=G[0],Q=G[1],Z=is(Object(r.useState)(!1),2),J=Z[0],ee=Z[1],te=is(Object(r.useState)({}),2),ne=te[0],re=te[1],oe=is(Object(r.useState)(!1),2),ae=oe[0],ie=oe[1],ce=is(Object(r.useState)({}),2),le=ce[0],ue=ce[1],se=R.title,fe=void 0===se?"":se,de=R.status,pe=void 0===de?0:de,be=R.view_link,he=is(Object(r.useState)(!1),2),me=he[0],ye=he[1],ve=is(Object(r.useState)(!1),2),ge=ve[0],Oe=ve[1],we=Vl(),je=we.getFunnelId,_e=we.getStepsList,Ee=we.getNodeElements,Se=we.isLoadingAnalytics,xe=we.getFunnelData,ke=Object(Zl.a)().setPreviousStep,Ce=is(Object(r.useState)(!1),2),Pe=Ce[0],Ne=Ce[1],Te=is(Object(r.useState)(!1),2),De=Te[0],Ie=Te[1],Ae=is(Object(r.useState)(""),2),Re=Ae[0],Me=Ae[1],Fe=is(Object(r.useState)(!1),2),Le=Fe[0],Be=Fe[1],qe=is(Object(r.useState)(!1),2),ze=qe[0],Ue=qe[1],He=is(Object(r.useState)(!1),2),Ve=He[0],Ye=He[1],Ke=is(Object(r.useState)(!1),2),Xe=Ke[0],$e=Ke[1],Ge=is(Object(r.useState)(!1),2),We=Ge[0],Qe=Ge[1],Ze=is(Object(r.useState)({}),2),Je=Ze[0],et=Ze[1],tt=Object(Yl.a)(),nt=tt.deleteStepNode,rt=tt.updateStepTitle,ot=tt.setStepList,at=tt.setUpsellStepNode,it=tt.setCanvasSingleStepListData,ct=Object(Rl.ib)(),lt=je(),ut=_e(),st=Ee(),ft=Object(Jl.a)().setStepTitle,dt=Object(Iu.a)().setExperimentStatus,pt=Object(Zu.a)().setStepHeaderData,bt=Object(r.useRef)(!0),ht=null===(t=xe())||void 0===t?void 0:t.title,mt=function(e,t){if(Q(!0),(e=e.trim())===fe&&(null==R?void 0:R.post_name)===t)$(!1),Q(!1);else{var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');Ql()({path:Object(Rl.x)("/funnel-".concat(h,"/save-state/").concat(f,"?funnel_id=").concat(lt)),data:JSON.parse(n),method:"POST"}).then((function(n){if(!n.success)throw new Error(n.msg);rt(f,e,t),$(!1),Q(!1)})).catch((function(e){console.log(e.message?e.message:e)}))}},yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(Il.__)("We're downloading funnel before deletion","funnel-builder");et({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"},Object(Il.__)("Please wait","funnel-builder")),Object(r.createElement)("div",{className:"bwf-text-light"},e))})},vt=function(){var e=as(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yt(),t="",t=Object(Rl.ib)()?Object(Rl.x)("/store-checkout/export/?ids=".concat(lt)):Object(Rl.x)("/funnels/export/?ids=".concat(lt)),e.prev=3,e.next=6,Ql()({path:t,method:"GET"});case 6:n=e.sent,Array.isArray(n)&&Object(Rl.q)(n,"FunnelKit-"+ht),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(3),e.t0;case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){Pe&&(bt.current=!0)}),[Pe]);var gt,Ot,wt,jt=function(){var e=as(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ie(!0),t="",e.t0=h,e.next="wc_order_bump"===e.t0?5:"offer"===e.t0?7:9;break;case 5:return t=ct?Object(Rl.x)("/store-checkout/".concat(lt,"/step/").concat(w,"/substeps/").concat(f)):Object(Rl.x)("/funnels/".concat(lt,"/steps/").concat(w,"/substeps/").concat(f)),e.abrupt("break",11);case 7:return t=Object(Rl.x)("/funnel-upsell/".concat(f,"/offers")),e.abrupt("break",11);case 9:return t=ct?Object(Rl.x)("/store-checkout/".concat(lt,"/step/").concat(f)):Object(Rl.x)("/funnels/".concat(lt,"/steps/").concat(f)),e.abrupt("break",11);case 11:if(e.prev=11,!bt.current){e.next=15;break}return e.next=15,vt();case 15:return e.next=17,Ql()({path:t,method:"DELETE",data:{type:h,parent_id:w}}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if("offer"===h){var t=Object(Nl.cloneDeep)(ut),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,c=void 0===a?{}:a;t=ns(ns({},t),c),ot(t),at(k,P,o[0])}else if(Object(Rl.ib)()&&e.hasOwnProperty("groups")&&!Object(Nl.isEmpty)(e.groups)&&e.hasOwnProperty("steps_list")&&!Object(Nl.isEmpty)(e.steps_list)){var l=Object(Nl.cloneDeep)(ut),u=e.groups,s=void 0===u?[]:u,f=e.steps_list,d=void 0===f?{}:f;l=ns(ns({},l),d),ot(l),at(k,P,s[0],"wc_native")}else nt(k,P,T);Ne(!1)}else Me(e);i(Object(Il.__)("Step deleted successfully","funnel-builder")),Ie(!1),et({status:!1})}));case 17:e.next=26;break;case 19:e.prev=19,e.t1=e.catch(11),Me(e.t1),Ie(!1),i(e.t1.message),et({status:!1}),console.log(e.t1);case 26:case"end":return e.stop()}}),e,null,[[11,19]])})));return function(){return e.apply(this,arguments)}}(),_t=Object(Rl.z)(),Et=function(){return Object(Rl.Y)(lt,h,f,f,!0)},St=function(){var e=as(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,c,l,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.copyFrom,r=void 0===n?{}:n,o=t.title,a=void 0===o?"":o,(i=r&&r.hasOwnProperty("key")?r.key:0)<1&&(i=r&&r.hasOwnProperty("id")?r.id:0),c={inherit_from:i,title:a,type:"offer",funnel_id:lt,canvas:{empty:!1,position:"before",offer_id:f}},l=Object(Rl.x)("/funnel-upsell/".concat(B,"/offers/")),e.prev=6,ee(!0),e.next=10,Ql()({method:"POST",path:l,data:c}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(Nl.isEmpty)(e.data)){var t=Object(Nl.cloneDeep)(ut),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,i=void 0===a?{}:a;t=ns(ns({},t),i),ot(t),at(k,P,o[0]),ye(!1)}ye(!1)}ee(!1)}));case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0),ee(!1);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(){return e.apply(this,arguments)}}(),xt=Object(r.useMemo)((function(){return!!("offer"!==h||f&&ut.hasOwnProperty(f))}),[ut]),kt=Object(r.useCallback)((function(){return st[k].steps[P]}),[st]),Ct=Object(r.useMemo)((function(){var e=0;return"offer"===h&&st.hasOwnProperty(k)&&st[k].hasOwnProperty("steps")&&st[k].steps.hasOwnProperty(P)&&st[k].steps[P].hasOwnProperty("substeps")&&!Object(Nl.isEmpty)(st[k].steps[P].substeps)&&(e=st[k].steps[P].substeps.length),e}),[st]),Pt=function(){return Object(r.createElement)("div",{className:"bwf-node-not-exists-wrap"},Object(r.createElement)("div",{className:"bwf-node-not-exists-header"},Object(Il.__)("This offer is not visible to the customers","funnel-builder")),Object(r.createElement)("div",{className:"bwf-node-not-exists-content"},Object(Il.__)("Because it's tied to the rejection of another offer that you've deleted. To display this offer, set its dynamic offer path.","funnel-builder")),Object(r.createElement)("div",{className:"bwf-node-not-exists-btn",onClick:function(){return Oe(!0)}},Object(r.createElement)(Gl.a,{icon:"dynamic-offer-path",width:25,height:24}),Object(r.createElement)("span",{className:"bwf-node-not-exists-btn-text"},Object(Il.__)("Set Dynamic Offer Path","funnel-builder"))))},Nt=function(){s&&(us&&!o?(dt(U),ft(Object($l.decodeEntities)(fe)+Object(Il.__)(" A/B Test","funnel-builder")),ke("canvas"),Object(eu.k)({},Object(Rl.ib)()?"/store-checkout/experiments/".concat(f):"/funnels/".concat(lt,"/experiments/").concat(f))):ue(ss))},Tt="wc_upsells"!==h?[{title:Object(Il.__)("A/B Test","funnel-builder"),type:"ab_test",link:Object(Rl.ib)()?Object(Rl.K)("/store-checkout/experiments/".concat(f)):Object(Rl.K)("/funnels/".concat(lt,"/experiments/").concat(f))}]:[],Dt=function(e){Be(!0);var t="";switch(h){case"wc_bump":t="/funnel-bump/save-state/".concat(f,"?funnel_id=").concat(lt);break;case"offer":t="/funnel-offer/save-state/".concat(f,"?funnel_id=").concat(lt);break;default:t="/funnel-".concat(h,"/save-state/").concat(f,"?funnel_id=").concat(lt)}Ql()({path:Object(Rl.x)(t),method:"POST",data:{status:!Number(pe),canvas:!0}}).then((function(e){e.success?(it(f,e.step_list),Be(!1),ie(!1),Ue(!1),re({}),i(Object(Il.__)("Changes Saved","funnel-builder"))):(Be(!1),Ue(!1),ie(!1))})).catch((function(e){console.log(e),i("Status Updation Failed")}))},It=Object(r.createElement)(Ju.a,{h:18,w:36}),At=Object(r.useMemo)((function(){return"offer"===h&&(z||F.includes("bwf-orphan"))}),[F,z]);return Object(r.createElement)("div",{className:Dl()("bwf-node-wrapper"),"step-id":s},Object(r.createElement)(_c,{type:"target",position:"top",isConnectable:!1,className:"bwf-target",style:"offer"===h&&!F.includes("bwf-default")&&xt?{opacity:0}:{}}),xt?Object(r.createElement)("div",{className:Dl()("bwf-inner-wrapper "+"node-type-".concat(h),{"is-orphan":!1}),onClick:function(){At&&Qe(!We)},onMouseEnter:function(e){e.currentTarget.classList.contains("bwf-inner-wrapper")&&!e.target.closest(".bwf-add-horizontal-wrap")&&Y(!0)},onMouseLeave:function(e){var t;null===(t=e.target.querySelector(".bwf-ellipsis-menu__toggle.is-opened"))||void 0===t||t.click(),Y(!1)}},"offer"===h&&!z&&(!F.includes("bwf-default")||!F.includes("bwf-orphan"))&&Object(r.createElement)("div",{className:"bwf-offer-add",onClick:function(){n?ue({status:!0}):ye(!0)}},Object(r.createElement)(Gl.a,{icon:"plus-circle",size:24,color:"#fff"})),I?"":Object(r.createElement)("div",{className:"bwf-node-hover","data-status":V?"hover":"notHover"},Object(r.createElement)("span",{className:"bwf-options"},!Object(Nl.isEmpty)(_)&&[].concat(es(_),Tt).map((function(e,t){var n=e.link,o=e.type;return["edit_link","preview","ab_test"].includes(o)?Object(r.createElement)(cu.a,{toolTipText:"edit_link"===o?Object(Il.__)("Edit","funnel-builder"):"ab_test"===o?Object(Il.__)("A/B Test","funnel-builder"):Object(Il.__)("Preview","funnel-builder"),key:t,iconSize:24,position:"bottom center",size:"auto"},Object(r.createElement)("a",{href:"edit_link"===o?Et():Object($l.decodeEntities)(n),onClick:function(e){e.preventDefault(),ke("canvas"),"edit_link"===o?(pt(Object(Rl.Z)(h),f,"offer"===h?f:"",{title:fe,view_link:be,status:1===Number(pe)}),Object(eu.d)().push(Et())):"ab_test"===o?Nt():window.open(Object($l.decodeEntities)(n),"_blank","noreferrer")}},Object(r.createElement)(Gl.a,{icon:"edit_link"===o?"edit":"ab_test"===o?"a/b":"view",size:"24"}))):null})),Object(r.createElement)(ju.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ou.a,{isClickable:!0,onInvoke:function(){t(),$(!0)}},Object(r.createElement)(wu.a,{justify:"flex-start"},Object(r.createElement)(wu.c,null,Object(Il.__)("Rename","funnel-builder")))),"wc_upsells"===h&&Object(r.createElement)(Ou.a,{isClickable:!0,onInvoke:function(){t(),Oe(!0)}},Object(r.createElement)(wu.a,{justify:"flex-start"},Object(r.createElement)(wu.c,null,Object(Il.__)("Dynamic Offer Path","funnel-builder")))),!(pe&&1===parseInt(pe))&&Object(r.createElement)(Ou.a,{isClickable:!0,onInvoke:function(){t(),function(){try{re({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(Il.__)("Please wait! Publishing ".concat(Object($l.decodeEntities)(fe)),"funnel-builder")))}),Dt()}catch(e){console.log(Object(Il.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(wu.a,{justify:"flex-start"},Object(r.createElement)(wu.c,null,Object(Il.__)("Publish","funnel-builder")))),["1",1].includes(pe)&&Object(r.createElement)(Ou.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(U)?Ue(!0):ie(!0)}},Object(r.createElement)(wu.a,{justify:"flex-start"},Object(r.createElement)(wu.c,null,Object(Il.__)("Draft","funnel-builder")))),Object(r.createElement)(Ou.a,{isClickable:!0,onInvoke:function(){t(),Ne(!0)},className:"bwf-ellipsis-menu__item-delete"},Object(r.createElement)(wu.a,{justify:"flex-start"},Object(r.createElement)(wu.c,null,Object(Il.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:"bwf-node-brick is-step-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(Gl.a,{size:36,icon:h?"".concat(h,"-flow"):"optin-flow"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("span",null,"wc_upsells"===h?Object(Il.__)("One Click Upsell","funnel-builder"):Object(Rl.qb)(h)),Object(r.createElement)("span",null,Object($l.decodeEntities)(d)),Object(r.createElement)("span",{title:Object($l.decodeEntities)(fe)},Object($l.decodeEntities)(fe))),Object(r.createElement)("div",{className:"bwf-node-action"},null!==y&&Object(r.createElement)("span",{className:"bwf-variant-tag","data-tag":!0===y?"original":""},!0===y?Object(Il.__)("Original","funnel-builder"):Object(Il.__)("Variant","funnel-builder")),""!==g&&Object(r.createElement)("div",{onClick:function(){return window.open(Et(),"_blank","noreferrer")}},Object(r.createElement)(Gl.a,{icon:"edit"})))),"offer"!==h&&!I&&Object(r.createElement)(yu,{type:h,title:fe,mainIndex:k,stepIndex:P,subIndex:T,funnelId:lt,stepID:f,parent_id:w}),(Object(Nl.size)(S)>0||At||!(pe&&1===parseInt(pe))||!Object(Nl.isEmpty)(U)&&"4"!==U)&&Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g8 bwf-flex-wrap"},Object.keys(S).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_bump"===e?o?$e(!0):Ye(!0):(ke("canvas"),Object(eu.k)({},S[e].edit,a))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+S[e].label_class},S[e].label))})),At&&Object(r.createElement)("div",{className:"bwf-st-c-badge-small bwf-st-c-badge-red bwf-display-flex bwf-cursor-pointer",style:{position:"relative"},onClick:function(){return Qe((function(e){return!e}))}},Object(r.createElement)(Gl.a,{icon:"step-warning",size:12,color:"#E15334"}),Object(Il.__)("Not Visible","funnel-builder"),We&&Object(r.createElement)("div",{className:"bwf-orphan-offer-wrap"},Pt())),!I&&!Object(Nl.isEmpty)(U)&&"4"!==U&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){Nt()}},Object(r.createElement)(Lu.c,{content:(gt=U,wt="warning"===(Ot=Fu(gt,!0))?"#B68F40":"success"===Ot?"#09B29C":"default"===Ot?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Au.a,{fill:wt}),Object(r.createElement)("span",{className:"".concat(void 0!==wt?"bwf-mr-4":"")},Fu(gt)))),type:Fu(U,!0)})),!I&&!(pe&&1===parseInt(pe))&&Object(r.createElement)("div",{className:"bwf--tag bwf-cursor-default is-warning"},Object(Il.__)("Draft","funnel-builder"))),!Object(Nl.isEmpty)(p)&&"wc_upsells"!==h&&Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf_w_full bwf-position-relative"},Object(r.createElement)("div",{className:"bwf-node-data-desc"},Se?It:Object(r.createElement)("span",null,!o&&p.hasOwnProperty("views")&&null!=p.views?p.views:"0"),Object(r.createElement)("span",null,Object(Il.__)("Views","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-node-data-desc"},Se?It:Object(r.createElement)("span",null,!o&&p.hasOwnProperty("conversions")&&null!=p.conversions?"".concat(p.conversions):"-"),Object(r.createElement)("span",null,"landing"===h?Object(Il.__)("Clicks","funnel-builder"):Object(Il.__)("Conversion","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-node-data-desc"},Se?It:Object(r.createElement)("span",null,!o&&p.hasOwnProperty("revenue")&&null!=p.revenue?_t.formatAmount(p.revenue):"-"),Object(r.createElement)("span",null,Object(Il.__)("Revenue","funnel-builder"))),o&&Object(r.createElement)(Uu.b,{hideContent:!0,modalContent:{feature:Object(Il.__)("Step Analytics","funnel-builder"),proLink:Object(Rl.S)(["Canvas","Step","Analytics","Upgrade","Modal"])}}))):Object(r.createElement)("div",{className:"bwf-inner-wrapper bwf-offer-node-not-exists"},Pt()),me&&Object(r.createElement)(Al.Modal,{title:Object(Il.__)("Add Offer","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return ye(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(iu.a,{step:{type:"offer",upsellId:B,is_substep:!0},requestCreateStep:St,onRequestClose:function(){return ye(!1)},isBusy:J})),X&&("wc_upsells"==h?Object(r.createElement)(vu.a,{renameTitle:"Edit Details",title:Object($l.decodeEntities)(fe),onclose:function(){return $(!1)},updateTitle:function(e){return mt(e)},isLoading:W}):Object(r.createElement)(gu.a,{pageUrl:null==R?void 0:R.view_link,pageUrlSlug:null==R?void 0:R.post_name,renameTitle:"Step",title:Object($l.decodeEntities)(fe),onclose:function(){return $(!1)},updateDetail:function(e,t){return mt(e,t)},isLoading:W})),Object(r.createElement)(_c,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source"}),Je.status?Object(r.createElement)(qu.a,{isOpen:Je.status,content:Je.content,isLoading:Je.loading,onRequestClose:function(){return et({status:!1})}}):Pe&&Object(r.createElement)(au,{onRequestClose:function(){Me(""),Ne(!1)},onConfirm:function(){"offer"===h&&Ct>1?Oe(!0):jt()},isLoading:De,stepName:fe,isSuccess:!Re,modalTitle:"offer"===h?Object(Il.__)("Delete Offer?","funnel-builder"):"",isParentOffer:"offer"===h&&Ct>1,onBackupChange:function(e){bt.current=e}}),ge&&Object(r.createElement)(Du,{setIsOpen:Oe,offerId:"offer"===h&&!z&&f?f:"",stepData:l,stepList:ut,stepGroupData:kt(),onUpdateDynamicOffer:function(e){var t=e.groups,n=void 0===t?[]:t,r=e.steps_list,o=void 0===r?{}:r,a=Object(Nl.cloneDeep)(ut);a=ns(ns({},a),o),ot(a),at(k,P,n[0]),Oe(!1)},orphanNode:z}),ze&&Object(r.createElement)(Bu.a,{isPublishLoading:Le,onAction:function(){Dt()},onclose:function(){return Ue(!1)}}),ae&&Object(r.createElement)(zu.a,{isPublishLoading:Le,onAction:function(){return Dt()},onclose:function(){return ie(!1)}}),Object(r.createElement)(qu.a,{className:Dl()("bwf-admin-modal-squeezy",ne.className),confirmText:ne.confirmText,confirmButtonText:ne.buttonConfirm,cancelButtonText:ne.buttonCancel,onConfirm:ne.onConfirm,isLoading:ne.loading,successMessage:ne.success,errorMessage:ne.error,content:ne.content,onRequestClose:function(){return re({status:!1})},modalTitle:ne.modalTitle,isOpen:ne.status,closeIcon:ne.closeIcon}),le.status&&Object(r.createElement)(Xl.a,{isOpen:le.status,onRequestClose:function(){return ue({status:!1})},modalContent:le,type:le.type}),Ve&&Object(r.createElement)(Qu,{setIsOpenModal:function(){return Ye(!1)},defaultType:"wc_order_bump",parentStep:s,addNodeData:l}),Xe&&Object(r.createElement)(uu.a,{isOpen:Xe,onRequestClose:function(){return $e(!1)}}))},ds=function(e){e.data,e.selected;return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-end"},Object(r.createElement)(_c,{type:"target",position:"top",style:{opacity:0},isConnectable:!1,className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-content-item"},"End")))},ps=function(){return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-start"},Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-content-item"},Object(Il.__)("Funnel Start","funnel-builder"))),Object(r.createElement)(_c,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source",style:{opacity:0}}))},bs=function(e){var t=e.id;return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-merger-node","step-id":t},Object(r.createElement)(_c,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)(_c,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))};function hs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ms(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ms(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ys=function(e){var t=Object(lu.b)("ul").isProFeatureLocked,n=e.data,o=void 0===n?{}:n,a=e.id,i=void 0===a?"":a,c=hs(Object(r.useState)(!1),2),l=c[0],u=c[1],s=hs(Object(r.useState)(!1),2),f=s[0],d=s[1],p=o.allowedSteps,b=void 0===p?[]:p,h=o.mainIndex,m=void 0===h?"":h,y=o.currentParentType,v=o.hasCheckout,g=1===(null==b?void 0:b.length)&&b[0];return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-add-node"},Object(r.createElement)(_c,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-add-node-content",onClick:function(){"offer"===g&&t?d({status:!0}):u(!0)}},Object(r.createElement)(cu.a,{toolTipText:Object(Il.__)("Add Step","funnel-builder")},Object(r.createElement)(Gl.a,{icon:"plus-circle",size:24,color:"#fff"})))),Object(r.createElement)(_c,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}),l&&Object(r.createElement)("div",{className:"bwf-step-select-wrap"},Object(r.createElement)(Qu,{setIsOpenModal:u,allowedSteps:b,parentStep:i,mainIndex:m,addNodeData:o,currentParentType:y,hasCheckout:v})),f.status&&Object(r.createElement)(Xl.a,{isOpen:f.status,onRequestClose:function(){return d({status:!1})},modalContent:f,type:f.type}))},vs=n(19);function gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(n),!0).forEach((function(t){ws(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ws(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function js(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function _s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Es(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Es(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Es(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ss={landing:Object(Il.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(Il.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(Il.__)("Add Upsell Page","funnel-builder"),optin:Object(Il.__)("Add Optin Page","funnel-builder"),optin_ty:Object(Il.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(Il.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(Il.__)("Add Order Bump","funnel-builder"),offer:Object(Il.__)("Add Offer","funnel-builder")},xs={status:!0,title:Object(Il.__)("Add Offer","funnel-builder"),proLink:Object(Rl.S)(["Canvas","Add","Offer","Upgrade","Modal"])},ks=function(e){var t=e.data,n=void 0===t?{}:t,o=(e.id,n.title),a=void 0===o?"Add":o,i=n.type,c=void 0===i?"":i,l=n.icon,u=void 0===l?"":l,s=n.prevFirstParent,f=void 0===s?"":s,d=n.mainIndex,p=void 0===d?"":d,b=n.stepIndex,h=void 0===b?"":b,m=Object(lu.b)().isProFeatureLocked,y=Object(lu.b)("ul").isProFeatureLocked,v=_s(Object(r.useState)(!1),2),g=v[0],O=v[1],w=_s(Object(r.useState)(!1),2),j=w[0],_=w[1],E=Vl(),S=E.getStepsList,x=E.getFunnelId,k=S(),C=Object(Rl.ib)(),P=x(),N=_s(Object(r.useState)({}),2),T=N[0],D=N[1],I=Object(Yl.a)(),A=I.setStepList,R=I.replaceCurrentSubStepData,M=I.setUpsellStepNode,F=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,l,u,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.copyFrom,r=void 0===n?{}:n,o=t.title,a=void 0===o?"":o,(i=r&&r.hasOwnProperty("key")?r.key:0)<1&&(i=r&&r.hasOwnProperty("id")?r.id:0),l={inherit_from:i,title:a,type:c,funnel_id:P,canvas:{mode:"start_group",insert_after:f}},"offer"===c&&(l.canvas={empty:!0,position:"",upsell:f}),"wc_order_bump"===c&&(l.canvas.mode="sibling"),u="",e.t0=c,e.next="wc_order_bump"===e.t0?11:"offer"===e.t0?13:15;break;case 11:return u=C?Object(Rl.x)("/store-checkout/".concat(P,"/step/").concat(f,"/substeps/")):Object(Rl.x)("/funnels/".concat(P,"/steps/").concat(f,"/substeps/")),e.abrupt("break",17);case 13:return u=Object(Rl.x)("/funnel-upsell/".concat(f,"/offers/")),e.abrupt("break",17);case 15:return u=Object(Rl.x)("/funnels/".concat(P,"/steps/")),e.abrupt("break",17);case 17:return e.prev=17,_(!0),e.next=21,Ql()({method:"POST",path:u,data:l}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(Nl.isEmpty)(e.data)){var t=Object(Nl.cloneDeep)(k),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,i=void 0===a?{}:a;switch(t=Os(Os({},t),i),A(t),c){case"wc_order_bump":R(p,h,0,o[0]);break;case"offer":M(p,h,o[0])}O(!1)}O(!1)}_(!1)}));case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(17),console.log(e.t1),_(!1);case 27:case"end":return e.stop()}}),e,null,[[17,23]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){js(a,r,o,i,c,"next",e)}function c(e){js(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-button-node"},Object(r.createElement)(_c,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-btn-node-content",onClick:function(){"wc_order_bump"===c&&m?D({bump:!0}):"offer"===c&&y?D(xs):O(!0)}},u&&Object(r.createElement)(Gl.a,{icon:u,size:"24",color:vs.TEXT_COLOR_2}),Object($l.decodeEntities)(a),"wc_order_bump"===c&&m&&Object(r.createElement)(Lu.b,null))),g&&Object(r.createElement)(Al.Modal,{title:Ss.hasOwnProperty(c)?Ss[c]:Object(Il.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return O(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(iu.a,{step:{type:c,prevFirstParent:f,is_substep:["wc_order_bump","offer"].includes(c)},requestCreateStep:F,onRequestClose:function(){return O(!1)},isBusy:j})),Object(r.createElement)(_c,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}),T.bump&&Object(r.createElement)(uu.a,{isOpen:T.bump,onRequestClose:function(){return D({status:!1})}}),T.status&&Object(r.createElement)(Xl.a,{isOpen:T.status,onRequestClose:function(){return D({status:!1})},modalContent:T,type:T.type}))};function Cs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ps(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ps(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(!1),n=Cs(t,2),o=n[0],a=n[1],i=e.data||{},c=i.emptyNodeLabel,l=void 0===c?Object(Il.__)("Create New Step","funnel-builder"):c,u=i.allowedSteps,s=void 0===u?["optin","landing","wc_checkout"]:u,f=i.replaceCurrentStep,d=void 0!==f&&f;return Object(r.createElement)("div",{className:Dl()("bwf-node-wrapper is-empty-node-wrapper")},Object(r.createElement)(_c,{type:"target",position:"top",isConnectable:!1,style:{opacity:0},className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-inner-wrapper",onClick:function(){return a(!0)}},Object(r.createElement)("div",{className:"bwf-node-brick is-empty-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(Gl.a,{icon:"page",size:"24"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-label"},l)))),Object(r.createElement)(_c,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0},className:"bwf-source"}),o&&Object(r.createElement)("div",{className:"bwf-step-select-wrap"},Object(r.createElement)(Qu,{setIsOpenModal:a,allowedSteps:s,replaceCurrentStep:d,addNodeData:i})))},Ts=function(e){var t=e.data,n=void 0===t?{}:t,o=(e.selected,n.title),a=(n.sub_title,n.type);return Object(r.createElement)("div",{className:Dl()("bwf-node-wrapper bwf-condition",["bwf-condition-".concat(a)])},Object(r.createElement)(_c,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:Dl()("bwf-node-content")},Object($l.decodeEntities)(o)),Object(r.createElement)(_c,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))};function Ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ds(Object(n),!0).forEach((function(t){As(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function As(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rs(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Ms(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ls={status:!0,title:Object(Il.__)("Add Offer","funnel-builder"),proLink:Object(Rl.S)(["Canvas","Add","Offer","Upgrade","Modal"])},Bs=function(e){var t=Object(lu.b)("ul").isExpired,n=e.id,o=e.sourceX,a=e.sourceY,i=e.targetX,c=e.targetY,l=e.sourcePosition,u=e.targetPosition,s=e.style,f=void 0===s?{}:s,d=e.data,p=void 0===d?{}:d,b=e.arrowHeadType,h=e.markerEndId,m=Ii({sourceX:o,sourceY:a,sourcePosition:l,targetX:i,targetY:c,targetPosition:u}),y=Ni(b,h),v=Ms(Di({sourceX:o,sourceY:a,targetX:i,targetY:c}),2),g=v[0],O=v[1],w=Object(Yl.a)(),j=w.setStepList,_=w.setUpsellStepNode,E=Ms(Object(r.useState)(!1),2),S=E[0],x=E[1],k=Ms(Object(r.useState)({}),2),C=k[0],P=k[1],N=p.offer,T=void 0===N?"":N,D=p.branch,I=void 0===D?"":D,A=p.upsellId,R=void 0===A?"":A,M=p.mainIndex,F=void 0===M?"":M,L=p.stepIndex,B=void 0===L?"":L,q=Vl(),z=q.getFunnelId,U=q.getStepsList,H=Ms(Object(r.useState)(!1),2),V=H[0],Y=H[1],K=z(),X=U(),$=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,c,l,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.copyFrom,r=void 0===n?{}:n,o=t.title,a=void 0===o?"":o,(i=r&&r.hasOwnProperty("key")?r.key:0)<1&&(i=r&&r.hasOwnProperty("id")?r.id:0),c={inherit_from:i,title:a,type:"offer",funnel_id:K,canvas:{empty:!1,position:I,offer_id:T}},l=Object(Rl.x)("/funnel-upsell/".concat(R,"/offers/")),e.prev=6,x(!0),e.next=10,Ql()({method:"POST",path:l,data:c}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(Nl.isEmpty)(e.data)){var t=Object(Nl.cloneDeep)(X),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,i=void 0===a?{}:a;t=Is(Is({},t),i),j(t),_(F,B,o[0]),Y(!1)}Y(!1)}x(!1)}));case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0),x(!1);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Rs(a,r,o,i,c,"next",e)}function c(e){Rs(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("path",{id:n,style:f,className:"react-flow__edge-path",d:m,markerEnd:y}),Object(r.createElement)("foreignObject",{width:24,height:24,style:{borderRadius:"50%",overflow:"visible",position:"relative"},x:g-12,y:O-12,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml"},Object(r.createElement)("div",{className:"wffn-node-add",onClick:function(){t?P(Ls):Y(!0)}},Object(r.createElement)(cu.a,{toolTipText:Object(Il.__)("Add Offer","funnel-builder")},Object(r.createElement)(Gl.a,{icon:"dashed-plus",size:28})))),V&&Object(r.createElement)(Al.Modal,{title:Object(Il.__)("Add Offer","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return Y(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(iu.a,{step:{type:"offer",upsellId:R,is_substep:!0},requestCreateStep:$,onRequestClose:function(){return Y(!1)},isBusy:S})),C.status&&Object(r.createElement)(Xl.a,{isOpen:C.status,onRequestClose:function(){return P({status:!1})},modalContent:C,type:C.type}))},qs=function(e){var t=e.id,n=e.sourceX,o=e.sourceY,a=e.targetX,i=e.targetY,c=e.sourcePosition,l=e.targetPosition,u=e.style,s=void 0===u?{}:u,f=e.arrowHeadType,d=e.markerEndId,p=Ii({sourceX:n,sourceY:o,sourcePosition:c,targetX:a,targetY:i,targetPosition:l}),b=Ni(f,d);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("path",{id:t,style:s,className:"react-flow__edge-path",d:p,markerEnd:b}))};n(643),n(644);var zs=n(82),Us=n(13),Hs=n.n(Us),Vs=(n(380),n(645),n(15)),Ys=n.n(Vs),Ks=n(140),Xs=n.n(Ks),$s=n(452),Gs=n.n($s),Ws=n(295),Qs=n.n(Ws),Zs=n(83),Js=n(330),ef=n(22);function tf(e){var t="";return function e(n){if(Object(Nl.isString)(n)||Object(Nl.isNumber)(n))t+=n;else if(Object(Nl.isArray)(n))n.forEach(e);else if(n&&n.props){var r=n.props.children;Object(Nl.isArray)(r)?r.forEach(e):e(r)}}(e),t}function nf(e){return(nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function of(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function af(e,t){return(af=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sf(e);if(t){var o=sf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return lf(this,n)}}function lf(e,t){if(t&&("object"===nf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return uf(e)}function uf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sf(e){return(sf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ff=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&af(e,t)}(i,e);var t,n,o,a=cf(i);function i(e){var t,n=e.filter,r=e.config,o=e.onFilterChange;rf(this,i),t=a.apply(this,arguments);var c=r.input.options;return t.state={options:c},t.updateOptions=t.updateOptions.bind(uf(t)),!c&&r.input.getOptions&&r.input.getOptions().then(t.updateOptions).then((function(e){if(!n.value){var t=Object(eu.c)(r,e);o(n.key,"value",t)}})),t}return t=i,(n=[{key:"updateOptions",value:function(e){return this.setState({options:e}),e}},{key:"getScreenReaderText",value:function(e,t){if(""===e.value)return"";var n=Object(Nl.find)(t.rules,{value:e.rule})||{},o=Object(Nl.find)(t.input.options,{value:e.value})||{};return tf(Qs()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,o.label),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.onFilterChange,i=e.isEnglish,c=this.state.options,l=o.key,u=o.rule,s=o.value,f=n.labels,d=n.rules,p=Qs()({mixedString:f.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(Al.SelectControl,{className:Dl()(t,"bwf-filters-advanced-rule"),options:d,value:u,onChange:Object(Nl.partial)(a,l,"rule"),"aria-label":f.rule}),filter:c?Object(r.createElement)(Al.SelectControl,{className:Dl()(t,"bwf-filters-advanced-input"),options:c,value:s,onChange:Object(Nl.partial)(a,o.key,"value"),"aria-label":f.filter}):Object(r.createElement)(Kl.a,{size:"xl"})}}),b=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},f.add||""),Object(r.createElement)("div",{className:Dl()("bwf-filters-advanced-fieldset",{"is-english":i})},p),b&&Object(r.createElement)("span",{className:"screen-reader-text"},b))}}])&&of(t.prototype,n),o&&of(t,o),i}(r.Component);ff.propTypes={config:Ys.a.shape({labels:Ys.a.shape({rule:Ys.a.string,title:Ys.a.string,filter:Ys.a.string}),rules:Ys.a.arrayOf(Ys.a.object),input:Ys.a.object}).isRequired,filter:Ys.a.shape({key:Ys.a.string,rule:Ys.a.string,value:Ys.a.string}).isRequired,onFilterChange:Ys.a.func.isRequired};var df=ff,pf=n(386);function bf(e){return(bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hf(Object(n),!0).forEach((function(t){yf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Of(e,t){return(Of=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ef(e);if(t){var o=Ef(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jf(this,n)}}function jf(e,t){if(t&&("object"===bf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _f(e)}function _f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ef(e){return(Ef=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Of(e,t)}(i,e);var t,n,o,a=wf(i);function i(e){var t,n=e.filter,r=e.config,o=e.query;return vf(this,i),(t=a.apply(this,arguments)).onSearchChange=t.onSearchChange.bind(_f(t)),t.state={selected:[]},t.updateLabels=t.updateLabels.bind(_f(t)),n.value.length&&r.input.getLabels(n.value,o).then((function(e){var n=e.map((function(e){return mf({key:e.id},e)}));t.updateLabels(n)})),t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.config,r=t.filter,o=t.query,a=e.filter;if(r.value.length&&!Object(Nl.isEqual)(a,r)){var i=this.state.selected.map((function(e){return e.key}));Object(eu.e)(r.value).every((function(e){return!i.includes(e)}))&&n.input.getLabels(r.value,o).then(this.updateLabels)}}},{key:"updateLabels",value:function(e){var t=this.state.selected.map((function(e){return e.key})),n=e.map((function(e){return e.key}));Object(Nl.isEqual)(n.sort(),t.sort())||this.setState({selected:e})}},{key:"onSearchChange",value:function(e){this.setState({selected:e});var t=this.props,n=t.filter,r=t.onFilterChange,o=e.map((function(e){return e.key})).join(",");r(n.key,"value",o)}},{key:"getScreenReaderText",value:function(e,t){var n=this.state.selected;if(0===n.length)return"";var o=Object(Nl.find)(t.rules,{value:e.rule})||{},a=n.map((function(e){return e.label})).join(", ");return tf(Qs()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,a),rule:Object(r.createElement)(r.Fragment,null,o.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.onFilterChange,i=e.isEnglish,c=this.state.selected,l=o.key,u=o.rule,s=n.input,f=n.labels,d=n.rules,p=Qs()({mixedString:f.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(Al.SelectControl,{className:Dl()(t,"bwf-filters-advanced-rule"),options:d,value:u,onChange:Object(Nl.partial)(a,l,"rule"),"aria-label":f.rule}),filter:Object(r.createElement)(pf.a,{className:Dl()(t,"bwf-filters-advanced-input"),onChange:this.onSearchChange,type:s.type,placeholder:f.placeholder,selected:c,inlineTags:!0,"aria-label":f.filter})}}),b=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},f.add||""),Object(r.createElement)("div",{className:Dl()("bwf-filters-advanced-fieldset",{"is-english":i})},p),b&&Object(r.createElement)("span",{className:"screen-reader-text"},b))}}])&&gf(t.prototype,n),o&&gf(t,o),i}(r.Component);Sf.propTypes={config:Ys.a.shape({labels:Ys.a.shape({placeholder:Ys.a.string,rule:Ys.a.string,title:Ys.a.string}),rules:Ys.a.arrayOf(Ys.a.object),input:Ys.a.object}).isRequired,filter:Ys.a.shape({key:Ys.a.string,rule:Ys.a.string,value:Ys.a.string}).isRequired,onFilterChange:Ys.a.func.isRequired,query:Ys.a.object};var xf=Sf,kf=n(504);function Cf(e){return(Cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Df(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function If(e,t){return(If=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Af(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mf(e);if(t){var o=Mf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rf(this,n)}}function Rf(e,t){if(t&&("object"===Cf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Mf(e){return(Mf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ff=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&If(e,t)}(i,e);var t,n,o,a=Af(i);function i(){return Tf(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"getBetweenString",value:function(){return Object(Il._x)("{{rangeStart /}}{{span}} and {{/span}}{{rangeEnd /}}","Numerical range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var n=this.props.currency,o=Object(Nl.find)(t.rules,{value:e.rule})||{},a=Pf(Object(Nl.isArray)(e.value)?e.value:[e.value],2),i=a[0],c=a[1];if(!i||"between"===o.value&&!c)return"";if("currency"===Object(Nl.get)(t,["input","type"],"number")){var l=Xs()(n).formatAmount;i=l(i),c=l(c)}var u=i;return"between"===o.value&&(u=Qs()({mixedString:this.getBetweenString(),components:{rangeStart:Object(r.createElement)(r.Fragment,null,i),rangeEnd:Object(r.createElement)(r.Fragment,null,c),span:Object(r.createElement)(r.Fragment,null)}})),tf(Qs()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,u),rule:Object(r.createElement)(r.Fragment,null,o.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"getFormControl",value:function(e){var t=e.type,n=e.value,o=e.label,a=e.onChange,i=e.currencySymbol,c=e.symbolPosition;return"currency"===t?0===c.indexOf("right")?Object(r.createElement)(kf.a,{suffix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a}):Object(r.createElement)(kf.a,{prefix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a}):Object(r.createElement)(Al.TextControl,{className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a})}},{key:"getFilterInputs",value:function(){var e=this.props,t=e.config,n=e.filter,r=e.onFilterChange,o=e.currency,a=o.symbol,i=o.symbolPosition;if("between"===n.rule)return this.getRangeInput();var c=Object(Nl.get)(t,["input","type"],"number"),l=Pf(Object(Nl.isArray)(n.value)?n.value:[n.value],2),u=l[0],s=l[1];Boolean(s)&&r(n.key,"value",u||s);var f="";
/* translators: Sentence fragment, "maximum amount" refers to a numeric value the field must be less than. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
return f="lessthan"===n.rule?Object(Il._x)("%(field)s maximum amount","maximum value input","funnel-builder"):Object(Il._x)("%(field)s minimum amount","minimum value input","funnel-builder"),this.getFormControl({type:c,value:u||s,label:Object(Il.sprintf)(f,{field:Object(Nl.get)(t,["labels","add"])}),onChange:Object(Nl.partial)(r,n.key,"value"),currencySymbol:a,symbolPosition:i})}},{key:"getRangeInput",value:function(){var e=this.props,t=e.config,n=e.filter,o=e.onFilterChange,a=e.currency,i=a.symbol,c=a.symbolPosition,l=Object(Nl.get)(t,["input","type"],"number"),u=Pf(Object(Nl.isArray)(n.value)?n.value:[n.value],2),s=u[0],f=u[1];return Qs()({mixedString:this.getBetweenString(),components:{rangeStart:this.getFormControl({type:l,value:s||"",label:Object(Il.sprintf)(
/* translators: Sentence fragment, "range start" refers to the first of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(Il.__)("%(field)s range start","funnel-builder"),{field:Object(Nl.get)(t,["labels","add"])}),onChange:function(e){o(n.key,"value",[e,f])},currencySymbol:i,symbolPosition:c}),rangeEnd:this.getFormControl({type:l,value:f||"",label:Object(Il.sprintf)(
/* translators: Sentence fragment, "range end" refers to the second of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(Il.__)("%(field)s range end","funnel-builder"),{field:Object(Nl.get)(t,["labels","add"])}),onChange:function(e){o(n.key,"value",[s,e])},currencySymbol:i,symbolPosition:c}),span:Object(r.createElement)("span",{className:"separator"})}})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.onFilterChange,i=e.isEnglish,c=o.key,l=o.rule,u=n.labels,s=n.rules,f=Qs()({mixedString:u.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(Al.SelectControl,{className:Dl()(t,"bwf-filters-advanced-rule"),options:s,value:l,onChange:Object(Nl.partial)(a,c,"rule"),"aria-label":u.rule}),filter:Object(r.createElement)("div",{className:Dl()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===l})},this.getFilterInputs())}}),d=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},u.add||""),Object(r.createElement)("div",{className:Dl()("bwf-filters-advanced-fieldset",{"is-english":i})},f),d&&Object(r.createElement)("span",{className:"screen-reader-text"},d))}}])&&Df(t.prototype,n),o&&Df(t,o),i}(r.Component),Lf=n(290);function Bf(e){return(Bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Uf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yf(e,t){return(Yf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gf(e);if(t){var o=Gf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xf(this,n)}}function Xf(e,t){if(t&&("object"===Bf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $f(e)}function $f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gf(e){return(Gf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wf=Object(Il.__)("MMM D, YYYY","funnel-builder"),Qf=Object(Il.__)("MM/DD/YYYY","funnel-builder"),Zf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yf(e,t)}(i,e);var t,n,o,a=Kf(i);function i(e){var t,n=e.filter;Hf(this,i),t=a.apply(this,arguments);var r=Array.isArray(n.value)?n.value:[null,n.value],o=zf(r,2),c=o[0],l=o[1],u=c?Object(zs.i)(zs.h,c):null,s=l?Object(zs.i)(zs.h,l):null;return t.state={before:s,beforeText:s?s.format(Qf):"",beforeError:null,after:u,afterText:u?u.format(Qf):"",afterError:null},t.onSingleDateChange=t.onSingleDateChange.bind($f(t)),t.onRangeDateChange=t.onRangeDateChange.bind($f(t)),t.onRuleChange=t.onRuleChange.bind($f(t)),t}return t=i,(n=[{key:"getBetweenString",value:function(){return Object(Il._x)("{{after /}}{{span}} and {{/span}}{{before /}}","Date range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var n=Object(Nl.find)(t.rules,{value:e.rule})||{},o=this.state,a=o.before,i=o.after;if(!a||"between"===n.value&&!i)return"";var c=a.format(Wf);return"between"===n.value&&(c=Qs()({mixedString:this.getBetweenString(),components:{after:Object(r.createElement)(r.Fragment,null,i.format(Wf)),before:Object(r.createElement)(r.Fragment,null,a.format(Wf)),span:Object(r.createElement)(r.Fragment,null)}})),tf(Qs()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,c),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"onSingleDateChange",value:function(e){var t=e.date,n=e.text,r=e.error,o=this.props,a=o.filter,i=o.onFilterChange;this.setState({before:t,beforeText:n,beforeError:r}),t&&i(a.key,"value",t.format(zs.h))}},{key:"onRangeDateChange",value:function(e,t){var n,r=t.date,o=t.text,a=t.error,i=this.props,c=i.filter,l=i.onFilterChange;if(this.setState((qf(n={},e,r),qf(n,e+"Text",o),qf(n,e+"Error",a),n)),r){var u=this.state,s=u.before,f=u.after,d=null,p=null;"after"===e&&(d=r.format(zs.h),p=s?s.format(zs.h):null),"before"===e&&(d=f?f.format(zs.h):null,p=r.format(zs.h)),d&&p&&l(c.key,"value",[d,p])}}},{key:"isFutureDate",value:function(e){return Hs()().isBefore(Hs()(e),"day")}},{key:"getFilterInputs",value:function(){var e=this.props.filter,t=this.state,n=t.before,o=t.beforeText,a=t.beforeError,i=t.after,c=t.afterText,l=t.afterError;return"between"===e.rule?Qs()({mixedString:this.getBetweenString(),components:{after:Object(r.createElement)(Lf.b,{date:i,text:c,error:l,onUpdate:Object(Nl.partial)(this.onRangeDateChange,"after"),dateFormat:Qf,isInvalidDate:this.isFutureDate}),before:Object(r.createElement)(Lf.b,{date:n,text:o,error:a,onUpdate:Object(Nl.partial)(this.onRangeDateChange,"before"),dateFormat:Qf,isInvalidDate:this.isFutureDate}),span:Object(r.createElement)("span",{className:"separator"})}}):Object(r.createElement)(Lf.b,{date:n,text:o,error:a,onUpdate:this.onSingleDateChange,dateFormat:Qf,isInvalidDate:this.isFutureDate})}},{key:"onRuleChange",value:function(e){var t=this.props,n=t.onFilterChange,r=t.filter,o=t.updateFilter,a=this.state.before;"between"===r.rule&&"between"!==e?o({key:r.key,rule:e,value:a?a.format(zs.h):void 0}):n(r.key,"rule",e)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.isEnglish,i=o.rule,c=n.labels,l=n.rules,u=this.getScreenReaderText(o,n),s=Qs()({mixedString:c.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(Al.SelectControl,{className:Dl()(t,"bwf-filters-advanced-rule"),options:l,value:i,onChange:this.onRuleChange,"aria-label":c.rule}),filter:Object(r.createElement)("div",{className:Dl()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===i})},this.getFilterInputs())}});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},c.add||""),Object(r.createElement)("div",{className:Dl()("bwf-filters-advanced-fieldset",{"is-english":a})},s),u&&Object(r.createElement)("span",{className:"screen-reader-text"},u))}}])&&Vf(t.prototype,n),o&&Vf(t,o),i}(r.Component),Jf=n(314);function ed(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return td(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return td(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function td(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nd=function(e){var t=e.className,n=e.config,o=e.filter,a=e.isEnglish,i=e.onFilterChange,c=o.key,l=o.rule,u=o.value,s=n.labels,f=n.rules,d=ed(Object(r.useState)([]),2),p=d[0],b=d[1];Object(r.useEffect)((function(){Ql()({path:"/wc/v3/products/attributes"}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(b)}),[]);var h=ed(Object(r.useState)(Array.isArray(u)?u[0]:""),2),m=h[0],y=h[1];Object(r.useEffect)((function(){Array.isArray(u)&&y(u[0])}),[u]);var v=ed(Object(r.useState)([]),2),g=v[0],O=v[1];Object(r.useEffect)((function(){m&&(O([]),Ql()({path:"/wc/v3/products/attributes/".concat(m,"/terms")}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(O))}),[m]);var w=ed(Object(r.useState)(Array.isArray(u)&&u[1]||""),2),j=w[0],_=w[1],E=function(e){var t=e.attributes,n=e.attributeTerms,o=e.config,a=e.filter,i=e.selectedAttribute,c=e.selectedAttributeTerm;if(0===t.length||0===n.length||""===i||""===c)return"";var l=Array.isArray(o.rules)&&o.rules.find((function(e){return e.value===a.rule}))||{},u=t.find((function(e){return e.key===i})).label,s=n.find((function(e){return e.key===c})).label,f=Qs()({
/* translators: Sentence fragment describing a product attribute match. Example: "Color Is Not Blue" - attribute = Color, equals = Is Not, value = Blue */
mixedString:Object(Il.__)("{{attribute /}} {{equals /}} {{value /}}","funnel-builder"),components:{attribute:Object(r.createElement)(r.Fragment,null,u),equals:Object(r.createElement)(r.Fragment,null,l.label),value:Object(r.createElement)(r.Fragment,null,s)}});return tf(Qs()({mixedString:o.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,f),rule:Object(r.createElement)(r.Fragment,null),title:Object(r.createElement)(r.Fragment,null)}}))}({attributes:p,attributeTerms:g,config:n,filter:o,selectedAttribute:m,selectedAttributeTerm:j});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},s.add||""),Object(r.createElement)("div",{className:Dl()("bwf-filters-advanced-fieldset",{"is-english":a})},Qs()({mixedString:s.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(Al.SelectControl,{className:Dl()(t,"bwf-filters-advanced-rule"),options:f,value:l,onChange:Object(Nl.partial)(i,c,"rule"),"aria-label":s.rule}),filter:Object(r.createElement)("div",{className:Dl()(t,"bwf-filters-advanced-attribute-fieldset")},p.length>0?Object(r.createElement)(Jf.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(Il.__)("Attribute name","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:p,selected:m,onChange:function(e){"string"!=typeof e&&(e=""),y(e),_(""),i(c,"value",[e])}}):Object(r.createElement)(Kl.a,{size:"xl"}),p.length>0&&""!==m&&(g.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"bwf-filters-advanced-attribute-field-separator"},"="),Object(r.createElement)(Jf.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(Il.__)("Attribute value","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:g,selected:j,onChange:function(e){"string"!=typeof e&&(e=""),_(e),i(c,"value",[m,e])}})):Object(r.createElement)(Kl.a,{size:"xl"})))}})),E&&Object(r.createElement)("span",{className:"screen-reader-text"},E))};nd.propTypes={config:Ys.a.shape({labels:Ys.a.shape({rule:Ys.a.string,title:Ys.a.string,filter:Ys.a.string}),rules:Ys.a.arrayOf(Ys.a.object),input:Ys.a.object}).isRequired,filter:Ys.a.shape({key:Ys.a.string,rule:Ys.a.string,value:Ys.a.arrayOf(Ys.a.oneOfType([Ys.a.string,Ys.a.number]))}).isRequired,onFilterChange:Ys.a.func.isRequired};var rd=nd,od=(n(646),n(262));function ad(e){return(ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?id(Object(n),!0).forEach((function(t){sd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ld(e){return function(e){if(Array.isArray(e))return ud(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ud(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ud(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pd(e,t){return(pd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yd(e);if(t){var o=yd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hd(this,n)}}function hd(e,t){if(t&&("object"===ad(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return md(e)}function md(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yd(e){return(yd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vd=[{value:"all",label:Object(Il.__)("All","funnel-builder")},{value:"any",label:Object(Il.__)("Any","funnel-builder")}],gd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pd(e,t)}(i,e);var t,n,o,a=bd(i);function i(e){var t,n=e.query,o=e.config;return fd(this,i),(t=a.apply(this,arguments)).state={match:n.match||"all",activeFilters:Object(eu.b)(n,o.filters)},t.filterListRef=Object(r.createRef)(),t.onMatchChange=t.onMatchChange.bind(md(t)),t.onFilterChange=t.onFilterChange.bind(md(t)),t.getAvailableFilterKeys=t.getAvailableFilterKeys.bind(md(t)),t.addFilter=t.addFilter.bind(md(t)),t.removeFilter=t.removeFilter.bind(md(t)),t.clearFilters=t.clearFilters.bind(md(t)),t.getUpdateHref=t.getUpdateHref.bind(md(t)),t.updateFilter=t.updateFilter.bind(md(t)),t.onFilter=t.onFilter.bind(md(t)),t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.config,r=t.query,o=e.query;Object(Nl.isEqual)(o,r)||this.setState({activeFilters:Object(eu.b)(r,n.filters)})}},{key:"onMatchChange",value:function(e){var t=this.props.onAdvancedFilterAction;this.setState({match:e}),t("match",{match:e})}},{key:"onFilterChange",value:function(e,t,n){var r=this.state.activeFilters.map((function(r){return e===r.key?Object.assign({},r,sd({},t,n)):r}));this.setState({activeFilters:r})}},{key:"updateFilter",value:function(e){var t=this.state.activeFilters.map((function(t){return e.key===t.key?e:t}));this.setState({activeFilters:t})}},{key:"removeFilter",value:function(e){var t=this.props.onAdvancedFilterAction,n=ld(this.state.activeFilters),r=Object(Nl.findIndex)(n,(function(t){return t.key===e}));t("remove",n[r]),n.splice(r,1),this.setState({activeFilters:n}),0===n.length&&Object(eu.d)().push(this.getUpdateHref([]))}},{key:"getTitle",value:function(){var e=this.state.match,t=this.props.config;return Qs()({mixedString:t.title,components:{select:Object(r.createElement)(Al.SelectControl,{className:"bwf-filters-advanced-title-select",options:vd,value:e,onChange:this.onMatchChange,"aria-label":Object(Il.__)("Choose to apply any or all filters","funnel-builder")})}})}},{key:"getAvailableFilterKeys",value:function(){var e=this.props.config,t=this.state.activeFilters.map((function(e){return e.key}));return Object(Nl.difference)(Object.keys(e.filters),t)}},{key:"addFilter",value:function(e,t){var n=this,r=this.props,o=r.onAdvancedFilterAction,a=r.config.filters[e],i={key:e};Array.isArray(a.rules)&&a.rules.length&&(i.rule=a.rules[0].value),a.input&&a.input.options&&(i.value=Object(eu.c)(a,a.input.options)),a.input&&"Search"===a.input.component&&(i.value=""),this.setState((function(e){return{activeFilters:[].concat(ld(e.activeFilters),[i])}})),o("add",i),t(),setTimeout((function(){n.filterListRef.current.querySelector("li:last-of-type fieldset").focus()}))}},{key:"clearFilters",value:function(){(0,this.props.onAdvancedFilterAction)("clear_all"),this.setState({activeFilters:[],match:"all"})}},{key:"getUpdateHref",value:function(e,t){var n=this.props,r=n.path,o=n.query,a=n.config,i=Object(eu.j)(e,o,a.filters),c="all"===t?void 0:t;return Object(eu.f)(cd(cd({},i),{},{match:c}),r,o)}},{key:"isEnglish",value:function(){return/en[-|_]/.test(this.props.siteLocale)}},{key:"onFilter",value:function(){var e=this.props,t=e.onAdvancedFilterAction,n=e.query,r=e.config,o=this.state,a=o.activeFilters,i=o.match;t("filter",cd(cd({},Object(eu.j)(a,n,r.filters)),{},{match:i}))}},{key:"orderFilters",value:function(e,t){var n=window.location.search,r=n.indexOf(e.key),o=n.indexOf(t.key);return-1===r||-1===o?0:r-o}},{key:"render",value:function(){var e=this,t=this.props,n=t.config,o=t.query,a=t.currency,i=this.state,c=i.activeFilters,l=i.match,u=this.getAvailableFilterKeys(),s=this.getUpdateHref(c,l),f="admin.php"+window.location.search===s||0===c.length,d=this.isEnglish();return Object(r.createElement)(Js.a,{className:"bwf-filters-advanced bwf-analytics-card",title:this.getTitle()},Object(r.createElement)("ul",{className:"bwf-filters-advanced-list",ref:this.filterListRef},c.sort(this.orderFilters).map((function(t){var i=t.key,c=n.filters[i],l=c.input,u=c.labels;return Object(r.createElement)("li",{className:"bwf-filters-advanced-list-item",key:i},"SelectControl"===l.component&&Object(r.createElement)(df,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[i],onFilterChange:e.onFilterChange,isEnglish:d}),"Search"===l.component&&Object(r.createElement)(xf,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[i],onFilterChange:e.onFilterChange,isEnglish:d,query:o}),"Number"===l.component&&Object(r.createElement)(Ff,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[i],onFilterChange:e.onFilterChange,isEnglish:d,query:o,currency:a}),"Currency"===l.component&&Object(r.createElement)(Ff,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:cd(cd({},n.filters[i]),{input:{type:"currency",component:"Currency"}}),onFilterChange:e.onFilterChange,isEnglish:d,query:o,currency:a}),"Date"===l.component&&Object(r.createElement)(Zf,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[i],onFilterChange:e.onFilterChange,isEnglish:d,query:o,updateFilter:e.updateFilter}),"ProductAttribute"===l.component&&Object(r.createElement)(rd,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[i],onFilterChange:e.onFilterChange,isEnglish:d,query:o,updateFilter:e.updateFilter}),Object(r.createElement)(Al.Button,{className:Dl()("bwf-filters-advanced-line-item","bwf-filters-advanced-remove"),label:u.remove,onClick:Object(Nl.partial)(e.removeFilter,i)},Object(r.createElement)(Gs.a,{icon:"cross-small"})))}))),u.length>0&&Object(r.createElement)("div",{className:"bwf-filters-advanced-add-filter"},Object(r.createElement)(Zs.a,{className:"bwf-filters-advanced-add-filter-dropdown",position:"bottom center",renderToggle:function(e){var t=e.isOpen,n=e.onToggle;return Object(r.createElement)(Al.Button,{className:"bwf-filters-advanced-add-button",onClick:n,"aria-expanded":t},Object(r.createElement)(Gs.a,{icon:"add-outline"}),Object(Il.__)("Add a Filter","funnel-builder"))},renderContent:function(t){var o=t.onClose;return Object(r.createElement)("ul",{className:"bwf-filters-advanced-add-dropdown"},u.map((function(t){return Object(r.createElement)("li",{key:t},Object(r.createElement)(Al.Button,{onClick:Object(Nl.partial)(e.addFilter,t,o)},n.filters[t].labels.add))})))}})),Object(r.createElement)("div",{className:"bwf-filters-advanced-controls"},f&&Object(r.createElement)(Al.Button,{isPrimary:!0,disabled:!0,className:"bwf-no-ripple"},Object(Il.__)("Filter","funnel-builder")),!f&&Object(r.createElement)(ef.a,{className:"components-button is-primary is-button",type:"bwf-crm",href:s,onClick:this.onFilter},Object(Il.__)("Filter","funnel-builder")),c.length>0&&Object(r.createElement)(ef.a,{type:"bwf-crm",href:this.getUpdateHref([]),onClick:this.clearFilters},Object(Il.__)("Clear all filters","funnel-builder"))))}}])&&dd(t.prototype,n),o&&dd(t,o),i}(r.Component);gd.propTypes={config:Ys.a.shape({title:Ys.a.string,filters:Ys.a.objectOf(Ys.a.shape({labels:Ys.a.shape({add:Ys.a.string,remove:Ys.a.string,rule:Ys.a.string,title:Ys.a.string,filter:Ys.a.string}),rules:Ys.a.arrayOf(Ys.a.object),input:Ys.a.object}))}).isRequired,path:Ys.a.string.isRequired,query:Ys.a.object,onAdvancedFilterAction:Ys.a.func,siteLocale:Ys.a.string,currency:Ys.a.object.isRequired};var Od=Object(od.a)(gd,{query:{},onAdvancedFilterAction:function(){},siteLocale:"en_US"}),wd=function(e){var t=e.className,n=e.count,o=e.children,a=e.disabled,i=e.helpText,c=e.onClick;return!a&&n<2?Object(r.createElement)(Al.Tooltip,{text:i},Object(r.createElement)("span",{className:t},Object(r.createElement)(Al.Button,{className:"bwf-compare-button",disabled:!0,isSecondary:!0},o))):Object(r.createElement)(Al.Button,{className:Dl()("bwf-compare-button",t),onClick:c,disabled:a,isSecondary:!0},o)};wd.propTypes={className:Ys.a.string,count:Ys.a.number.isRequired,children:Ys.a.node.isRequired,helpText:Ys.a.string.isRequired,onClick:Ys.a.func.isRequired,disabled:Ys.a.bool};var jd=wd;function _d(e){return(_d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ed(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kd(e,t){return(kd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Td(e);if(t){var o=Td(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pd(this,n)}}function Pd(e,t){if(t&&("object"===_d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nd(e)}function Nd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Td(e){return(Td=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kd(e,t)}(i,e);var t,n,o,a=Cd(i);function i(e){var t,n=e.getLabels,r=e.param,o=e.query;return Sd(this,i),(t=a.apply(this,arguments)).state={selected:[]},t.clearQuery=t.clearQuery.bind(Nd(t)),t.updateQuery=t.updateQuery.bind(Nd(t)),t.updateLabels=t.updateLabels.bind(Nd(t)),o[r]&&n(o[r],o).then(t.updateLabels),t}return t=i,(n=[{key:"componentDidUpdate",value:function(e,t){var n=e.param,r=e.query,o=t.selected,a=this.props,i=a.getLabels,c=a.param,l=a.query,u=this.state.selected;if(n!==c||o.length>0&&0===u.length)this.clearQuery();else{var s=Object(eu.e)(r[c]),f=Object(eu.e)(l[c]);Object(Nl.isEqual)(s.sort(),f.sort())||i(l[c],l).then(this.updateLabels)}}},{key:"clearQuery",value:function(){var e=this.props,t=e.param,n=e.path,r=e.query;this.setState({selected:[]}),Object(eu.k)(Ed({},t,void 0),n,r)}},{key:"updateLabels",value:function(e){this.setState({selected:e})}},{key:"updateQuery",value:function(){var e=this.props,t=e.param,n=e.path,r=e.query,o=this.state.selected.map((function(e){return e.key}));Object(eu.k)(Ed({},t,o.join(",")),n,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.labels,o=t.type,a=this.state.selected;return Object(r.createElement)(Js.a,{title:n.title,className:"bwf-filters-compare bwf-analytics-card"},Object(r.createElement)("div",{className:"bwf-filters-compare-body"},Object(r.createElement)(pf.a,{type:o,selected:a,placeholder:n.placeholder,onChange:function(t){e.setState({selected:t})}})),Object(r.createElement)("div",{className:"bwf-filters-compare-footer"},Object(r.createElement)(jd,{count:a.length,helpText:n.helpText,onClick:this.updateQuery},n.update),a.length>0&&Object(r.createElement)(Al.Button,{isLink:!0,onClick:this.clearQuery},Object(Il.__)("Clear all","funnel-builder"))))}}])&&xd(t.prototype,n),o&&xd(t,o),i}(r.Component);Dd.propTypes={getLabels:Ys.a.func.isRequired,labels:Ys.a.shape({placeholder:Ys.a.string,title:Ys.a.string,update:Ys.a.string}),param:Ys.a.string.isRequired,path:Ys.a.string.isRequired,query:Ys.a.object,type:Ys.a.string.isRequired};var Id=Object(od.a)(Dd,{labels:{},query:{}});n(360),n(647);function Ad(e){return(Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Md(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ld(e,t){return(Ld=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zd(e);if(t){var o=zd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qd(this,n)}}function qd(e,t){if(t&&("object"===Ad(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zd(e){return(zd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ud=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ld(e,t)}(i,e);var t,n,o,a=Bd(i);function i(){return Md(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.options,o=e.selected,a=e.onSelect,i=e.name,c=e.legend;return Object(r.createElement)("fieldset",{className:"bwf-segment-selection"},Object(r.createElement)("legend",{className:"screen-reader-text"},c),Object(r.createElement)("div",{className:Dl()(t,"bwf-segment-selection-container")},n.map((function(e){var t=e.value,n=e.label;if(!t||!n)return null;var c=Object(Nl.uniqueId)("".concat(t,"_"));return Object(r.createElement)("div",{className:"bwf-segment-selection-item",key:t},Object(r.createElement)("input",{className:"bwf-segment-selection-input",type:"radio",name:i,id:c,checked:o===t,onChange:Object(Nl.partial)(a,Rd({},i,t))}),Object(r.createElement)("label",{htmlFor:c},Object(r.createElement)("span",{className:"bwf-segment-selection-label"},n)))}))))}}])&&Fd(t.prototype,n),o&&Fd(t,o),i}(r.Component);Ud.propTypes={className:Ys.a.string,options:Ys.a.arrayOf(Ys.a.shape({value:Ys.a.string.isRequired,label:Ys.a.string.isRequired})).isRequired,selected:Ys.a.string,onSelect:Ys.a.func.isRequired,name:Ys.a.string.isRequired,legend:Ys.a.string.isRequired};var Hd=Ud;function Vd(e){return(Vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xd(e,t){return(Xd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wd(e);if(t){var o=Wd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gd(this,n)}}function Gd(e,t){if(t&&("object"===Vd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Wd(e){return(Wd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xd(e,t)}(i,e);var t,n,o,a=$d(i);function i(){return Yd(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.compare;return Object(r.createElement)(Hd,{options:Jd,selected:n,onSelect:t,name:"compare",legend:Object(Il.__)("compare to","funnel-builder")})}}])&&Kd(t.prototype,n),o&&Kd(t,o),i}(r.Component);Qd.propTypes={onSelect:Ys.a.func.isRequired,compare:Ys.a.string};var Zd=Qd,Jd=[{value:"previous_period",label:Object(Il.__)("Previous Period","funnel-builder")},{value:"previous_year",label:Object(Il.__)("Previous Year","funnel-builder")}],ep=(Object(Il.__)("Invalid date","funnel-builder"),Object(Il.__)("Select a date in the past","funnel-builder"),Object(Il.__)("Start date must be before end date","funnel-builder"),Object(Il.__)("Start date must be before end date","funnel-builder"),n(304),n(305),n(413)),tp=n(175),np=(n(269),n(288)),rp=n(322);function op(e){return(op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ap(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ip(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cp(e,t){return(cp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fp(e);if(t){var o=fp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return up(this,n)}}function up(e,t){if(t&&("object"===op(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sp(e)}function sp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fp(e){return(fp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dp=function(){return"rtl"===document.documentElement.dir},pp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cp(e,t)}(i,e);var t,n,o,a=lp(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onDatesChange=t.onDatesChange.bind(sp(t)),t.onFocusChange=t.onFocusChange.bind(sp(t)),t.onInputChange=t.onInputChange.bind(sp(t)),t.nodeRef=Object(r.createRef)(),t.keepFocusInside=t.keepFocusInside.bind(sp(t)),t}return t=i,(n=[{key:"keepFocusInside",value:function(e,t){if(this.nodeRef.current){var n=this.props.losesFocusTo;if("container"!==e||!t.target||!t.target.classList.contains("DayPickerNavigation_button")&&!t.target.classList.contains("CalendarDay")||t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay"))){if("onPrevMonthClick"===e||"onNextMonthClick"===e){var r=this.nodeRef.current.querySelector(".DayPickerNavigation_button");r&&r.focus()}}else{if(t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay")))return;if(t.relatedTarget&&n&&n.contains(t.relatedTarget))return;var o=this.nodeRef.current.querySelector(".DayPicker_focusRegion");o&&o.focus()}}}},{key:"onDatesChange",value:function(e){var t=e.startDate,n=e.endDate,r=this.props,o=r.onUpdate,a=r.shortDateFormat;o({after:t,before:n,afterText:t?t.format(a):"",beforeText:n?n.format(a):"",afterError:null,beforeError:null})}},{key:"onFocusChange",value:function(e){this.props.onUpdate({focusedInput:e||"startDate"})}},{key:"onInputChange",value:function(e,t){var n,r=t.target.value,o=this.props,a=o.after,i=o.before,c=o.shortDateFormat,l=Object(zs.j)(e,r,i,a,c),u=l.date,s=l.error;this.props.onUpdate((ap(n={},e,u),ap(n,e+"Text",r),ap(n,e+"Error",r.length>0?s:null),n))}},{key:"setTnitialVisibleMonth",value:function(e,t){return function(){var n=t||Hs()();return e?n.clone().subtract(1,"month"):n}}},{key:"render",value:function(){var e=this,t=this.props,n=t.after,o=t.before,a=t.focusedInput,i=t.afterText,c=t.beforeText,l=t.afterError,u=t.beforeError,s=t.shortDateFormat,f=t.isViewportMobile,d=t.isViewportSmall,p=t.isInvalidDate,b=f&&!d;return Object(r.createElement)("div",{className:Dl()("bwf-calendar",{"is-mobile":f})},Object(r.createElement)("div",{className:"bwf-calendar-inputs"},Object(r.createElement)(np.a,{value:i,onChange:Object(Nl.partial)(this.onInputChange,"after"),dateFormat:s,label:Object(Il.__)("Start Date","funnel-builder"),error:l,describedBy:Object(Il.sprintf)(Object(Il.__)("Date input describing a selected date range's start date in format %s","funnel-builder"),s),onFocus:function(){return e.onFocusChange("startDate")}}),Object(r.createElement)("div",{className:"bwf-calendar-inputs-to"},Object(Il.__)("to","funnel-builder")),Object(r.createElement)(np.a,{value:c,onChange:Object(Nl.partial)(this.onInputChange,"before"),dateFormat:s,label:Object(Il.__)("End Date","funnel-builder"),error:u,describedBy:Object(Il.sprintf)(Object(Il.__)("Date input describing a selected date range's end date in format %s","funnel-builder"),s),onFocus:function(){return e.onFocusChange("endDate")}})),Object(r.createElement)("div",{className:"bwf-calendar-react-dates",ref:this.nodeRef,onBlur:Object(Nl.partial)(this.keepFocusInside,"container"),tabIndex:-1},Object(r.createElement)(ep.DayPickerRangeController,{onNextMonthClick:Object(Nl.partial)(this.keepFocusInside,"onNextMonthClick"),onPrevMonthClick:Object(Nl.partial)(this.keepFocusInside,"onPrevMonthClick"),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:a,startDate:n,endDate:o,orientation:"horizontal",numberOfMonths:b?2:1,isOutsideRange:function(e){return p&&p(e.toDate())},minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:dp(),initialVisibleMonth:this.setTnitialVisibleMonth(b,o),phrases:rp.a}),Object(r.createElement)(ep.DayPickerRangeController,{onNextMonthClick:Object(Nl.partial)(this.keepFocusInside,"onNextMonthClick"),onPrevMonthClick:Object(Nl.partial)(this.keepFocusInside,"onPrevMonthClick"),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:a,startDate:n,endDate:o,orientation:"horizontal",numberOfMonths:b?2:1,isOutsideRange:function(e){return p&&p(e.toDate())},minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:dp(),initialVisibleMonth:this.setTnitialVisibleMonth(b,o),phrases:rp.a})))}}])&&ip(t.prototype,n),o&&ip(t,o),i}(r.Component);pp.propTypes={after:Ys.a.object,afterError:Ys.a.string,afterText:Ys.a.string,before:Ys.a.object,beforeError:Ys.a.string,beforeText:Ys.a.string,focusedInput:Ys.a.string,isInvalidDate:Ys.a.func,onUpdate:Ys.a.func.isRequired,shortDateFormat:Ys.a.string.isRequired,losesFocusTo:Ys.a.instanceOf(Element)};var bp=Object(tp.withViewportMatch)({isViewportMobile:"< medium",isViewportSmall:"< small"})(pp),hp=n(273);function mp(e){return(mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gp(e,t){return(gp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Op(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jp(e);if(t){var o=jp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wp(this,n)}}function wp(e,t){if(t&&("object"===mp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function jp(e){return(jp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gp(e,t)}(i,e);var t,n,o,a=Op(i);function i(){return yp(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.period;return Object(r.createElement)(Hd,{options:Object(Nl.filter)(Sp,(function(e){return"custom"!==e.value})),selected:n,onSelect:t,name:"period",legend:Object(Il.__)("select a preset period","funnel-builder")})}}])&&vp(t.prototype,n),o&&vp(t,o),i}(r.Component);_p.propTypes={onSelect:Ys.a.func.isRequired,period:Ys.a.string};var Ep=_p,Sp=[{value:"today",label:Object(Il.__)("Today","funnel-builder")},{value:"yesterday",label:Object(Il.__)("Yesterday","funnel-builder")},{value:"week",label:Object(Il.__)("Week to Date","funnel-builder")},{value:"last_week",label:Object(Il.__)("Last Week","funnel-builder")},{value:"month",label:Object(Il.__)("Month to Date","funnel-builder")},{value:"last_month",label:Object(Il.__)("Last Month","funnel-builder")},{value:"quarter",label:Object(Il.__)("Quarter to Date","funnel-builder")},{value:"last_quarter",label:Object(Il.__)("Last Quarter","funnel-builder")},{value:"year",label:Object(Il.__)("Year to Date","funnel-builder")},{value:"last_year",label:Object(Il.__)("Last Year","funnel-builder")},{value:"custom",label:Object(Il.__)("Custom","funnel-builder")}];function xp(e){return(xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cp(e,t){return(Cp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dp(e);if(t){var o=Dp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Np(this,n)}}function Np(e,t){if(t&&("object"===xp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tp(e)}function Tp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dp(e){return(Dp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ip=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cp(e,t)}(i,e);var t,n,o,a=Pp(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this)).onTabSelect=e.onTabSelect.bind(Tp(e)),e.controlsRef=Object(r.createRef)(),e}return t=i,(n=[{key:"onTabSelect",value:function(e){var t=this.props,n=t.onUpdate,r=t.period;"period"===e&&"custom"===r&&n({period:"today"})}},{key:"isFutureDate",value:function(e){return Hs()().isBefore(Hs()(e),"day")}},{key:"render",value:function(){var e=this,t=this.props,n=t.period,o=t.compare,a=t.hideCompare,i=t.after,c=t.before,l=t.onUpdate,u=t.onClose,s=t.onSelect,f=t.isValidSelection,d=t.resetCustomValues,p=t.focusedInput,b=t.afterText,h=t.beforeText,m=t.afterError,y=t.beforeError,v=t.shortDateFormat,g=t.disablePresets;return Object(r.createElement)("div",null,Object(r.createElement)(hp.a,{className:"screen-reader-text",tabIndex:"0"},Object(Il.__)("Select date range and comparison","funnel-builder")),Object(r.createElement)(hp.b,{component:!1},Object(r.createElement)(hp.a,{className:"bwf-filters-date-text"},Object(Il.__)("select a date range","funnel-builder")),Object(r.createElement)(Al.TabPanel,{tabs:[{name:"period",title:Object(Il.__)("Presets","funnel-builder"),className:"bwf-filters-date-tab"},{name:"custom",title:Object(Il.__)("Custom","funnel-builder"),className:"bwf-filters-date-tab"}],className:"bwf-filters-date-tabs",activeClass:"is-active",initialTabName:"custom"===n||g?"custom":"period",onSelect:this.onTabSelect},(function(t){return Object(r.createElement)(r.Fragment,null,"period"===t.name&&Object(r.createElement)(Ep,{onSelect:l,period:n}),"custom"===t.name&&Object(r.createElement)(bp,{after:i,before:c,onUpdate:l,isInvalidDate:e.isFutureDate,focusedInput:p,afterText:b,beforeText:h,afterError:m,beforeError:y,shortDateFormat:v,losesFocusTo:e.controlsRef.current}),Object(r.createElement)("div",{className:Dl()("bwf-filters-date-content-controls",{"is-custom":"custom"===t.name}),ref:e.controlsRef},!a&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(hp.a,{className:"bwf-filters-date-text"},Object(Il.__)("compare to","funnel-builder")),Object(r.createElement)(Zd,{onSelect:l,compare:o})),Object(r.createElement)("div",{className:Dl()("bwf-filters-date-button-group",{"bwf-has-reset-filter":"custom"===t.name})},"custom"===t.name&&Object(r.createElement)(Al.Button,{className:"bwf-filters-date-button bwf-modal-cancel-btn bwf-no-ripple",onClick:d,disabled:!(i||c)},Object(Il.__)("Reset","funnel-builder")),f(t.name)?Object(r.createElement)(Al.Button,{className:"bwf-filters-date-button",onClick:s(t.name,u),isPrimary:!0},Object(Il.__)("Update","funnel-builder")):Object(r.createElement)(Al.Button,{className:"bwf-filters-date-button bwf-no-ripple",isPrimary:!0,disabled:!0},Object(Il.__)("Update","funnel-builder")))))}))))}}])&&kp(t.prototype,n),o&&kp(t,o),i}(r.Component);Ip.propTypes={period:Ys.a.string.isRequired,compare:Ys.a.string.isRequired,onUpdate:Ys.a.func.isRequired,onClose:Ys.a.func.isRequired,onSelect:Ys.a.func.isRequired,resetCustomValues:Ys.a.func.isRequired,focusedInput:Ys.a.string,afterText:Ys.a.string,beforeText:Ys.a.string,afterError:Ys.a.string,beforeError:Ys.a.string,shortDateFormat:Ys.a.string.isRequired};var Ap=Ip,Rp=n(326);n(648);function Mp(e){return(Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lp(e,t){return(Lp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Up(e);if(t){var o=Up(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qp(this,n)}}function qp(e,t){if(t&&("object"===Mp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zp(e)}function zp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Up(e){return(Up=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lp(e,t)}(i,e);var t,n,o,a=Bp(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state=t.getResetState(),t.update=t.update.bind(zp(t)),t.onSelect=t.onSelect.bind(zp(t)),t.isValidSelection=t.isValidSelection.bind(zp(t)),t.resetCustomValues=t.resetCustomValues.bind(zp(t)),t}return t=i,(n=[{key:"formatDate",value:function(e,t){return e&&e._isAMomentObject&&"function"==typeof e.format?e.format(t):""}},{key:"getResetState",value:function(){var e=this.props.dateQuery,t=e.period,n=e.compare,r=e.before,o=e.after;return{period:t,compare:n,before:r,after:o,focusedInput:"startDate",afterText:this.formatDate(o,Object(Rl.X)()),beforeText:this.formatDate(r,Object(Rl.X)()),afterError:null,beforeError:null}}},{key:"update",value:function(e){this.setState(e)}},{key:"onSelect",value:function(e,t){var n=this,r=this.props,o=r.isoDateFormat,a=r.onRangeSelect;return function(r){var i=n.state,c=i.period,l=i.compare,u=i.after,s=i.before,f={period:"custom"===e?"custom":c,compare:l};"custom"===e?(f.after=n.formatDate(u,o),f.before=n.formatDate(s,o)):(f.after=void 0,f.before=void 0),a(f),t(r)}}},{key:"getButtonLabel",value:function(){var e=this.props.dateQuery,t=e.primaryDate,n=e.secondaryDate,r=["".concat(t.label," (").concat(t.range,")")];return this.props.hideCompare||r.push("".concat(Object(Il.__)("vs.","funnel-builder")," ").concat(n.label," (").concat(n.range,")")),r}},{key:"isValidSelection",value:function(e){var t=this.state,n=t.compare,r=t.after,o=t.before;return"custom"!==e||n&&r&&o}},{key:"resetCustomValues",value:function(){this.setState({after:null,before:null,focusedInput:"startDate",afterText:"",beforeText:"",afterError:null,beforeError:null})}},{key:"render",value:function(){var e=this,t=this.state,n=t.period,o=t.compare,a=t.after,i=t.before,c=t.focusedInput,l=t.afterText,u=t.beforeText,s=t.afterError,f=t.beforeError,d=this.props.disablePresets,p=void 0!==d&&d;return Object(r.createElement)("div",{className:Dl()("bwf-filters-filter",{"bwf-presets-disable":p})},Object(r.createElement)(Zs.a,{contentClassName:"bwf-filters-date-content",position:"bottom",expandOnMobile:!0,renderToggle:function(t){var n=t.isOpen,o=t.onToggle;return Object(r.createElement)(Rp.a,{onClick:o,isOpen:n,labels:e.getButtonLabel()})},renderContent:function(t){var d=t.onClose;return Object(r.createElement)(Ap,{period:n,compare:o,hideCompare:e.props.hideCompare,after:a,before:i,onUpdate:e.update,onClose:d,onSelect:e.onSelect,isValidSelection:e.isValidSelection,resetCustomValues:e.resetCustomValues,focusedInput:c,afterText:l,beforeText:u,afterError:s,beforeError:f,shortDateFormat:Rl.c,disablePresets:p})}}))}}])&&Fp(t.prototype,n),o&&Fp(t,o),i}(r.Component);Hp.propTypes={onRangeSelect:Ys.a.func.isRequired,dateQuery:Ys.a.shape({period:Ys.a.string.isRequired,compare:Ys.a.string.isRequired,before:Ys.a.object,after:Ys.a.object,primaryDate:Ys.a.shape({label:Ys.a.string.isRequired,range:Ys.a.string.isRequired}).isRequired,secondaryDate:Ys.a.shape({label:Ys.a.string.isRequired,range:Ys.a.string.isRequired}).isRequired}).isRequired};var Vp=Hp,Yp=n(249),Kp=n(590),Xp=n(50),$p=Object(r.createElement)(Xp.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(r.createElement)(Xp.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),Gp=n(260),Wp=n(172);n(649);function Qp(e){return(Qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zp(){return(Zp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eb(e,t){return(eb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ob(e);if(t){var o=ob(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nb(this,n)}}function nb(e,t){if(t&&("object"===Qp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rb(e)}function rb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ob(e){return(ob=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ab=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eb(e,t)}(i,e);var t,n,o,a=tb(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this)).state={animate:null},e.container=Object(r.createRef)(),e.onExited=e.onExited.bind(rb(e)),e}return t=i,(n=[{key:"onExited",value:function(){var e=this.props.onExited;e&&e(this.container.current)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.animationKey,o=e.animate,a=Dl()("bwf-slide-animation",o&&"animate-".concat(o));return Object(r.createElement)("div",{className:a,ref:this.container},Object(r.createElement)(Gp.a,null,Object(r.createElement)(Wp.a,Zp({timeout:200,classNames:"slide",key:n},this.props,{onExited:this.onExited}),(function(e){return t({status:e})}))))}}])&&Jp(t.prototype,n),o&&Jp(t,o),i}(r.Component);ab.propTypes={children:Ys.a.func.isRequired,animationKey:Ys.a.any.isRequired,animate:Ys.a.oneOf([null,"left","right"]),onExited:Ys.a.func};var ib=ab;n(650);function cb(e){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ub(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lb(Object(n),!0).forEach((function(t){sb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fb(e){return function(e){if(Array.isArray(e))return db(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return db(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return db(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function db(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bb(e,t){return(bb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vb(e);if(t){var o=vb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mb(this,n)}}function mb(e,t){if(t&&("object"===cb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yb(e)}function yb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vb(e){return(vb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bb(e,t)}(i,e);var t,n,o,a=hb(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=(t=a.call(this,e)).getFilter();if(t.state={nav:n.path||[],animate:null,selectedTag:null},t.selectSubFilter=t.selectSubFilter.bind(yb(t)),t.getVisibleFilters=t.getVisibleFilters.bind(yb(t)),t.updateSelectedTag=t.updateSelectedTag.bind(yb(t)),t.onTagChange=t.onTagChange.bind(yb(t)),t.onContentMount=t.onContentMount.bind(yb(t)),t.goBack=t.goBack.bind(yb(t)),n.settings&&n.settings.getLabels){var r=t.props.query,o=n.settings,c=o.param;(0,o.getLabels)(r[c],r).then(t.updateSelectedTag)}return t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t=e.query,n=this.props,r=n.query,o=n.config;if(t[o.param]!==r[[o.param]]){var a=this.getFilter();if(a&&"Search"===a.component){this.setState({nav:a.path||[]});var i=a.settings,c=i.param;(0,i.getLabels)(r[c],r).then(this.updateSelectedTag)}}}},{key:"updateSelectedTag",value:function(e){this.setState({selectedTag:e[0]})}},{key:"getFilter",value:function(e){var t=this.props,n=t.config,r=t.query,o=Object(eu.a)(n.filters);return e=e||r[n.param]||n.defaultValue||"all",Object(Nl.find)(o,{value:e})||{}}},{key:"getButtonLabel",value:function(e){if("Search"===e.component){var t=this.state.selectedTag;return[t&&t.label,Object(Nl.get)(e,"settings.labels.button")]}return e?[e.label]:[]}},{key:"getVisibleFilters",value:function(e,t){if(0===t.length)return e;var n=t[0],r=Object(Nl.find)(e,{value:n});return this.getVisibleFilters(r&&r.subFilters,t.slice(1))}},{key:"selectSubFilter",value:function(e){this.setState((function(t){return{nav:[].concat(fb(t.nav),[e]),animate:"left"}}))}},{key:"goBack",value:function(){this.setState((function(e){return{nav:e.nav.slice(0,-1),animate:"right"}}))}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props,r=n.path,o=n.query,a=n.config,i=n.onFilterSelect,c=Object(eu.h)(o),l=ub(sb({},a.param,(a.defaultValue||"all")===e?void 0:e),t);a.staticParams.forEach((function(e){l[e]=o[e]})),Object(eu.k)(l,r,c),i(l)}},{key:"onTagChange",value:function(e,t,n,r){var o=Object(Nl.last)(r),a=e.value,i=e.settings.param;o?(this.update(a,sb({},i,o.key)),t()):this.update(n.defaultValue||"all"),this.updateSelectedTag([o])}},{key:"renderButton",value:function(e,t,n){var o=this;if(e.component){var a=e.settings,i=a.type,c=a.labels,l=this.getFilter().value===e.value?this.state.selectedTag:null;return Object(r.createElement)(pf.a,{className:"bwf-filters-filter-search",type:i,placeholder:c.placeholder,selected:l?[l]:[],onChange:Object(Nl.partial)(this.onTagChange,e,t,n),inlineTags:!0,staticResults:!0})}var u=Object(Nl.partial)(this.selectSubFilter,e.value),s=this.getFilter(),f=s.value===e.value||s.path&&Object(Nl.includes)(s.path,e.value);return Object(r.createElement)(Al.Button,{className:"bwf-filters-filter-button",onClick:function(n){f?t(n):e.subFilters?u(n):function(n){t(n),o.update(e.value,e.query||{}),o.setState({selectedTag:null})}(n)}},e.label)}},{key:"onContentMount",value:function(e){var t=this.state.nav,n=t.length&&this.getFilter(t[t.length-1])?1:0,r=Yp.focus.tabbable.find(e)[n];setTimeout((function(){r.focus()}),0)}},{key:"render",value:function(){var e=this,t=this.props.config,n=this.state,o=n.nav,a=n.animate,i=this.getVisibleFilters(t.filters,o),c=!!o.length&&this.getFilter(o[o.length-1]),l=this.getFilter();return Object(r.createElement)("div",{className:"bwf-filters-filter"},t.label&&Object(r.createElement)("span",{className:"bwf-filters-label"},t.label,":"),Object(r.createElement)(Zs.a,{contentClassName:"bwf-filters-filter-content",position:"bottom",expandOnMobile:!0,headerTitle:Object(Il.__)("filter report to show:","funnel-builder"),renderToggle:function(t){var n=t.isOpen,o=t.onToggle;return Object(r.createElement)(Rp.a,{onClick:o,isOpen:n,labels:e.getButtonLabel(l)})},renderContent:function(n){var u=n.onClose;return Object(r.createElement)(ib,{animationKey:o,animate:a,onExited:e.onContentMount},(function(){return Object(r.createElement)("ul",{className:"bwf-filters-filter-content-list"},c&&Object(r.createElement)("li",{className:"bwf-filters-filter-content-list-item"},Object(r.createElement)(Al.Button,{className:"bwf-filters-filter-button",onClick:e.goBack},Object(r.createElement)(Kp.a,{icon:$p}),c.label)),i.map((function(n){return Object(r.createElement)("li",{key:n.value,className:Dl()("bwf-filters-filter-content-list-item",{"is-selected":l.value===n.value||l.path&&Object(Nl.includes)(l.path,n.value)})},e.renderButton(n,u,t))})))}))}}))}}])&&pb(t.prototype,n),o&&pb(t,o),i}(r.Component);gb.propTypes={config:Ys.a.shape({label:Ys.a.string,staticParams:Ys.a.array.isRequired,param:Ys.a.string.isRequired,defaultValue:Ys.a.string,showFilters:Ys.a.func.isRequired,filters:Ys.a.arrayOf(Ys.a.shape({chartMode:Ys.a.oneOf(["item-comparison","time-comparison"]),component:Ys.a.string,label:Ys.a.string,path:Ys.a.string,subFilters:Ys.a.array,value:Ys.a.string.isRequired}))}).isRequired,path:Ys.a.string.isRequired,query:Ys.a.object,onFilterSelect:Ys.a.func};var Ob=Object(od.a)(gb,{query:{},onFilterSelect:function(){}});n(651);function wb(e){return(wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jb(){return(jb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eb(e,t){return(Eb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Cb(e);if(t){var o=Cb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xb(this,n)}}function xb(e,t){if(t&&("object"===wb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kb(e)}function kb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cb(e){return(Cb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eb(e,t)}(i,e);var t,n,o,a=Sb(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this)).renderCard=e.renderCard.bind(kb(e)),e.onRangeSelect=e.onRangeSelect.bind(kb(e)),e}return t=i,(n=[{key:"renderCard",value:function(e){var t=this.props,n=t.siteLocale,o=t.advancedFilters,a=t.query,i=t.path,c=t.onAdvancedFilterAction,l=t.currency,u=e.filters,s=e.param;if(!a[s])return null;if(0===a[s].indexOf("compare")){var f=Object(Nl.find)(u,{value:a[s]});if(!f)return null;var d=f.settings,p=void 0===d?{}:d;return Object(r.createElement)("div",{key:s,className:"bwf-filters-advanced-filters"},Object(r.createElement)(Id,jb({path:i,query:a},p)))}return"advanced"===a[s]?Object(r.createElement)("div",{key:s,className:"bwf-filters-advanced-filters"},Object(r.createElement)(Od,{siteLocale:n,currency:l,config:o,path:i,query:a,onAdvancedFilterAction:c})):void 0}},{key:"onRangeSelect",value:function(e){var t=this.props,n=t.query,r=t.path,o=t.onDateSelect,a=t.updateQuery,i=void 0===a||a;e.after&&(e.after=Hs()(Object(zs.a)(Hs()(e.after),"start")).format("YYYY-MM-DD HH:mm:ss")),e.before&&(Hs()(Hs()().format("YYYY-MM-DD")).isSame(e.before)?e.before=Hs()(Object(zs.a)(Hs()(e.before),"now")).format("YYYY-MM-DD HH:mm:ss"):e.before=Hs()(Object(zs.a)(Hs()(e.before),"end")).format("YYYY-MM-DD HH:mm:ss")),i&&Object(eu.k)(e,r,n),o(e)}},{key:"getDateQuery",value:function(e){var t=Object(zs.e)(e),n=t.period,r=t.compare,o=t.before,a=t.after,i=Object(zs.d)(e);return{period:n,compare:r,before:o,after:a,primaryDate:i.primary,secondaryDate:i.secondary}}},{key:"render",value:function(){var e=this.props,t=e.dateQuery,n=e.filters,o=e.query,a=e.path,i=e.showDatePicker,c=e.onFilterSelect,l=e.isoDateFormat,u=e.hideCompare;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(hp.a,{className:"screen-reader-text"},Object(Il.__)("Filters","funnel-builder")),Object(r.createElement)(hp.b,{component:"div",className:"bwf-filters"},Object(r.createElement)("div",{className:"bwf-filters-basic-filters"},i&&Object(r.createElement)(Vp,{key:JSON.stringify(o),dateQuery:t||this.getDateQuery(o),onRangeSelect:this.onRangeSelect,isoDateFormat:l,hideCompare:u}),n.map((function(e){return e.showFilters(o)?Object(r.createElement)(Ob,{key:e.param,config:e,query:o,path:a,onFilterSelect:c}):null}))),n.map(this.renderCard)))}}])&&_b(t.prototype,n),o&&_b(t,o),i}(r.Component);Pb.propTypes={siteLocale:Ys.a.string,advancedFilters:Ys.a.object,filters:Ys.a.array,path:Ys.a.string.isRequired,query:Ys.a.object,showDatePicker:Ys.a.bool,onDateSelect:Ys.a.func,onFilterSelect:Ys.a.func,onAdvancedFilterAction:Ys.a.func,currency:Ys.a.object,dateQuery:Ys.a.shape({period:Ys.a.string.isRequired,compare:Ys.a.string.isRequired,before:Ys.a.object,after:Ys.a.object,primaryDate:Ys.a.shape({label:Ys.a.string.isRequired,range:Ys.a.string.isRequired}).isRequired,secondaryDate:Ys.a.shape({label:Ys.a.string.isRequired,range:Ys.a.string.isRequired})}),hideCompare:Ys.a.bool,isoDateFormat:Ys.a.string};var Nb={siteLocale:"en_US",advancedFilters:{},filters:[],query:{},showDatePicker:!0,onDateSelect:function(){},currency:Xs()().getCurrencyConfig(),hideCompare:!1};Object(od.a)(Pb,Nb),n(25);n(293),n(652);n(270);n(653);n(654);n(655);var Tb=function(e){var t=e.data,n=void 0===t?{}:t,o=(e.selected,n.title),a=n.sub_title,i=n.type,c=void 0===i?"":i;return Object(r.createElement)("div",{className:Dl()("bwf-node-wrapper bwf-section-node")},Object(r.createElement)(_c,{type:"target",position:"top",isConnectable:!1,className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-brick is-section-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(Gl.a,{size:36,icon:c.includes("landing")?"landing-flow":c.includes("bump")?"wc_order_bump-flow":c.includes("checkout")?"wc_checkout-flow":c.includes("offer")?"offer-flow":c.includes("upsell")?"upsells-flow":c.includes("wc_thankyou")?"wc_thankyou-flow":c.includes("optin_ty")?"optin_ty-flow":"optin-flow"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object($l.decodeEntities)(a)),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object($l.decodeEntities)(o))))),Object(r.createElement)(_c,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source"}))},Db=n(656),Ib=n.n(Db),Ab=["sourceEdgeType"];function Rb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rb(Object(n),!0).forEach((function(t){Fb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lb(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Bb(e){return function(e){if(Array.isArray(e))return qb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return qb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qb(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.id,o=void 0===r?"":r,a=e.data,i=void 0===a?{}:a,c=n.hasOwnProperty("maparr")&&n.maparr.hasOwnProperty(o)?n.maparr[o]:[],l=1==c.length?c[0]:0,u=0!=l&&n.hasOwnProperty("source")&&n.source.hasOwnProperty(l)?n.source[l]:[],s=i.type,f=void 0===s?"":s,d=0;switch(e.type){case"step":d=122;var p=i._data,b=void 0===p?{}:p,h=i.tags,m=void 0===h?[]:h,y=i.experiment_status,v=void 0===y?"":y,g=b.status,O=void 0===g?"":g;Object(Nl.isEmpty)(m)&&O&&1===parseInt(O)&&(Object(Nl.isEmpty)(v)||"4"===v)||(d+=42),["wc_upsells"].includes(f)&&(d-=58);break;case"rule":d=110;break;case"condition":d=115;break;case"conditional-alter":var w=Object(Nl.flatten)(e.data.sidebarValues).length,j=w-1;d=w?32*w+29*j+100:150;break;case"addNode":d=24;break;case"btnNode":d=45;break;case"sectionNode":d=90;break;case"start":d=30;break;case"end":d=25;break;case"merger":d=0;break;default:d=95}return c.length>2&&(d+=10*c.length),u.length>2&&(d+=20*u.length),d+t},Ub=function(e){if(!e||!e.type)return 325;switch(e.type){case"rule":return 75;case"step":default:return 325}},Hb=function(e){var t=new Ib.a.graphlib.Graph;t.setDefaultEdgeLabel((function(){return{}})),t.setGraph({rankdir:"TB",ranksep:80,nodesep:100});var n=function(e){var t=[],n=[],r=[];return e.map((function(e){if(e.hasOwnProperty("source")&&e.hasOwnProperty("target")){t.hasOwnProperty(e.source)?t[e.source].includes(e.target)||(t[e.source]=[e.target].concat(Bb(t[e.source]))):t[e.source]=[e.target],n.hasOwnProperty(e.target)?n[e.target].includes(e.source)||(n[e.target]=[e.source].concat(Bb(n[e.target]))):n[e.target]=[e.source];var o=e.type?e.type:"default";r.hasOwnProperty(e.target)?r[e.target].includes(e.type)||(r[e.target]=[o].concat(Bb(r[e.target]))):r[e.target]=[o]}})),{source:n,maparr:t,sourceEdgeType:r}}(e),r=n.sourceEdgeType,o=void 0===r?{}:r,a=Lb(n,Ab);return e.forEach((function(e){lt(e)?t.setNode(e.id,{width:325,height:zb(e,0,a)}):t.setEdge(e.source,e.target)})),Ib.a.layout(t),e.map((function(e){if(lt(e)){var n=t.node(e.id);e.targetPosition="top",e.sourcePosition="bottom";var r=zb(e,"condition"===e.type?50:100);e.position={x:n.x-Ub(e)/2+Math.random()/1e3,y:n.y-r/2};var a={};a=o.hasOwnProperty(e.id)?{bwfSourceEdgeType:o[e.id],orphanNode:!1}:{orphanNode:!0},e.data=Mb(Mb({},e.data),a)}else e.type;return e}))};function Vb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||Xb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yb(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Xb(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Kb(e){return function(e){if(Array.isArray(e))return $b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xb(e,t){if(e){if("string"==typeof e)return $b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$b(e,t):void 0}}function $b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gb(Object(n),!0).forEach((function(t){Qb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zb(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Jb(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Zb(a,r,o,i,c,"next",e)}function c(e){Zb(a,r,o,i,c,"throw",e)}i(void 0)}))}}var eh={expired:{label:Object(Il.__)("License Expired","funnel-builder"),label_class:"bwf-st-c-badge-red"}},th=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o={},a={},i=function e(n,i,c,l,u,s){var f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";return new Promise(function(){var b=Jb(regeneratorRuntime.mark((function b(h){var m,y,v,g,O,w,j,_,E,S,x,k,C,P,N,T,D,I,A,R,M,F,L,B,q,z,U,H,V,Y,K;return regeneratorRuntime.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:if(m=[],v="node-".concat(y=i,"-offer-").concat(n),++y,a[v]=p,g="node-".concat(n,"-accept"),O="node-".concat(n,"-reject"),m.push({type:"step",id:v,data:Wb(Wb({},t[n]),{},{type:"offer",upsellId:d,mainIndex:l,stepIndex:u},r&&{tags:Wb({},eh)})},{type:"condition",id:g,data:{type:"success",title:"Accept"}},{id:"edge-id-".concat(n,"-accept-").concat(l,"-").concat(u,"-").concat(s),source:v,target:g},{type:"condition",id:O,data:{type:"error",title:"Reject"}},{id:"edge-id-".concat(n,"-reject-").concat(l,"-").concat(u,"-").concat(s),source:v,target:O}),w=t&&t[n]&&t[n].hasOwnProperty("accept")&&!["","automatic","terminate"].includes(t[n].accept)&&parseInt(t[n].accept)!==parseInt(n)?t[n].accept:"",j=t&&t[n]&&t[n].hasOwnProperty("reject")&&!["","automatic","terminate"].includes(t[n].reject)&&parseInt(t[n].reject)!==parseInt(n)?t[n].reject:"",""!==w||""!==j){b.next=16;break}_=c,m.push({id:"edge-id-".concat(n,"-afteraccept-").concat(l,"-").concat(u,"-").concat(s),source:"node-".concat(n,"-accept"),type:"bwf-default",target:_,data:{offer:n,branch:"accept",upsellId:d,mainIndex:l,stepIndex:u}}),m.push({id:"edge-id-".concat(n,"-afterreject-").concat(l,"-").concat(u,"-").concat(s),source:"node-".concat(n,"-reject"),type:"bwf-default",target:_,data:{offer:n,branch:"reject",upsellId:d,mainIndex:l,stepIndex:u}}),b.next=87;break;case 16:if(""===w||""===j||w!=j||0==w){b.next=42;break}if(E="node-offer-".concat(n,"-merger"),m.push({type:"merger",id:E,data:{offerCommon:!0,offerId:n,upsellId:d,mainIndex:l,stepIndex:u}}),m.push({id:"edge-id-".concat(n,"-afteraccept-").concat(l,"-").concat(u,"-").concat(s),source:"node-".concat(n,"-accept"),type:"bwf-default",target:E,data:{offer:n,branch:"accept",upsellId:d,mainIndex:l,stepIndex:u}}),m.push({id:"edge-id-".concat(n,"-afterreject-").concat(l,"-").concat(u,"-").concat(s),source:"node-".concat(n,"-reject"),type:"bwf-default",target:E,data:{offer:n,branch:"reject",upsellId:d,mainIndex:l,stepIndex:u}}),!o||!o.hasOwnProperty(w)){b.next=26;break}m.push({id:"edge-".concat(g,"-").concat(o[w],"-offeredge"),source:E,target:o[w]}),a.hasOwnProperty(o[w])&&delete a[o[w]],b.next=40;break;case 26:return b.next=28,e(parseInt(t[n].accept),y,c,l,u,s,f,d,p);case 28:S=b.sent,x=S.offerNode,k=void 0===x?[]:x,C=S.newNodeCount,P=void 0===C?0:C,N=S.offerSource,T=void 0===N?"":N,Object(Nl.isEmpty)(k)||m.push.apply(m,Kb(Object(Nl.cloneDeep)(k))),o[n]=v,m.push({id:"edge-id-".concat(n,"-after-accept-").concat(t[n].accept,"-").concat(l,"-").concat(u,"-").concat(s),source:E,target:T}),a.hasOwnProperty(T)&&delete a[T],P>0&&(y=P);case 40:b.next=87;break;case 42:if(D=c,""!=w&&0!=w){b.next=47;break}m.push({id:"edge-id-".concat(n,"-afteraccept-").concat(l,"-").concat(u,"-").concat(s),source:"node-".concat(n,"-accept"),type:"bwf-default",target:f,data:{offer:n,branch:"accept",upsellId:d,mainIndex:l,stepIndex:u}}),b.next=65;break;case 47:if(!o||!o.hasOwnProperty(t[n].accept)){b.next=52;break}m.push({id:"edge-".concat(g,"-").concat(o[t[n].accept],"-offeredge"),source:g,target:o[t[n].accept],type:"bwf-default",data:{offer:n,branch:"accept",upsellId:d,mainIndex:l,stepIndex:u}}),a.hasOwnProperty(o[t[n].accept])&&delete a[o[t[n].accept]],b.next=65;break;case 52:return b.next=54,e(parseInt(t[n].accept),y,D,l,u,s,f,d,p);case 54:I=b.sent,A=I.offerNode,R=void 0===A?[]:A,M=I.newNodeCount,F=void 0===M?0:M,L=I.offerSource,B=void 0===L?"":L,Object(Nl.isEmpty)(R)||m.push.apply(m,Kb(Object(Nl.cloneDeep)(R))),m.push({id:"edge-id-".concat(n,"-after-accept-").concat(t[n].accept,"-").concat(l,"-").concat(u,"-").concat(s),source:g,target:B,type:"bwf-default",data:{offer:n,branch:"accept",upsellId:d,mainIndex:l,stepIndex:u}}),a.hasOwnProperty(B)&&delete a[B],F>0&&(y=F);case 65:if(""!=j&&0!=j){b.next=69;break}m.push({id:"edge-id-".concat(n,"-afterreject-").concat(l,"-").concat(u,"-").concat(s),source:"node-".concat(n,"-reject"),type:"bwf-default",target:f,data:{offer:n,branch:"reject",upsellId:d,mainIndex:l,stepIndex:u}}),b.next=87;break;case 69:if(!o.hasOwnProperty(t[n].reject)){b.next=74;break}m.push({id:"edge-".concat(O,"-").concat(o[t[n].reject],"-offeredge"),source:O,target:o[t[n].reject],type:"bwf-default",data:{offer:n,branch:"reject",upsellId:d,mainIndex:l,stepIndex:u}}),a.hasOwnProperty(o[t[n].reject])&&delete a[o[t[n].reject]],b.next=87;break;case 74:return b.next=76,e(parseInt(t[n].reject),y,D,l,u,s,f,d,p);case 76:q=b.sent,z=q.offerNode,U=void 0===z?[]:z,H=q.newNodeCount,V=void 0===H?0:H,Y=q.offerSource,K=void 0===Y?"":Y,Object(Nl.isEmpty)(U)||m.push.apply(m,Kb(Object(Nl.cloneDeep)(U))),m.push({id:"edge-id-".concat(n,"-after-reject-").concat(t[n].reject,"-").concat(l,"-").concat(u,"-").concat(s),source:O,target:K,type:"bwf-default",data:{offer:n,branch:"reject",upsellId:d,mainIndex:l,stepIndex:u}}),a.hasOwnProperty(K)&&delete a[K],V>0&&(y=V);case 87:o[n]=v,h({offerNode:m,newNodeCount:y,offerSource:v});case 89:case"end":return b.stop()}}),b)})));return function(e){return b.apply(this,arguments)}}())},c=function(){var e=Jb(regeneratorRuntime.mark((function e(c){var l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=[],!Object(Nl.isEmpty)(c)){e.next=5;break}l=[{type:"start",id:"start"},{type:"emptyNode",id:"fb-empty"},{id:"edge-id-2",source:"start",target:"fb-empty"},{id:"edge-id-1",source:"fb-empty",target:"end"},{type:"end",id:"end"}],e.next=6;break;case 5:return e.delegateYield(regeneratorRuntime.mark((function e(){var u,s,f,d,p,b,h,m,y,v,g,O,w,j,_,E,S,x,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u="start",s=1,f=!1,l=[{type:"start",id:"start"}],d=Object(Rl.ib)()?"start":"node-".concat(s),u=d,++s,p=!1,b=!1,h=!1,m=Yb(c);try{for(m.s();!(y=m.n()).done;)"wc_upsells"===(v=y.value).type&&(p=!0),"wc_checkout"===v.type&&(b=!0),"wc_thankyou"===v.type&&(h=!0)}catch(e){m.e(e)}finally{m.f()}g=Yb(c.entries()),e.prev=13,w=regeneratorRuntime.mark((function e(){var c,d,m,y,v,g,w,j,_,E,S,x,k,C,P,N,T,D,I,A,R,M,F,L,B,q,z,U,H,V,Y,K,X,$,G,W,Q,Z,J,ee,te,ne,re,oe,ae,ie,ce,le,ue,se,fe,de,pe,be,he,me;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Vb(O.value,2),d=c[0],m=c[1],y=m.type,v=void 0===y?"":y,g=m.steps,w=void 0===g?[]:g,j="start",e.t0=v,e.next="optin"===e.t0||"optin_ty"===e.t0||"wc_thankyou"===e.t0||"landing"===e.t0?6:"wc_native"===e.t0||"wc_checkout"===e.t0?8:"wc_upsells"===e.t0?10:88;break;case 6:if(!Object(Nl.isEmpty)(w)){_="node-".concat(s),"wc_thankyou"===v?(f=!0,_="end"):++s,E="",S="",x=Yb(w.entries());try{for(x.s();!(k=x.n()).done;)C=Vb(k.value,2),P=C[0],N=C[1],T=N.id,E=D=void 0===T?"":T,j=D,0==P&&(S=D),I="node-".concat(s),l.push({type:"step",id:I,data:Wb(Wb({},t[D]),{},{mainIndex:d,stepIndex:P,subIndex:""})},{id:"edge-".concat(u,"-").concat(I),source:u,target:I},{id:"edge-".concat(I,"-").concat(_),source:I,target:_}),++s}catch(e){x.e(e)}finally{x.f()}"wc_thankyou"!==v&&(A=["optin","landing"],"optin"===v&&A.push("optin_ty"),b||A.push("wc_checkout"),l.push({type:"addNode",id:_,data:{mainIndex:d,lastParentId:E,prevFirstParent:S,currentParentType:v,lastIteratedStep:j,allowedSteps:A,hasCheckout:b}})),u=_}return e.abrupt("break",88);case 8:return Object(Nl.isEmpty)(w)||(R="node-".concat(s),M="",++s,F="",w.map((function(e,r){var o=e.id,a=void 0===o?"":o,i=e.substeps,c=void 0===i?[]:i;M=a,j=a,0===r&&(F=a);var f="node-".concat(s);++s,Object(Nl.isEmpty)(c)?(t[a].tags.hasOwnProperty("no_bump")||(t[a].tags.no_bump={label:Object(Il.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}),l.push({type:"wc_native"===v?"emptyNode":"step",id:f,data:Wb(Wb({},t[a]),{},{mainIndex:d,stepIndex:r,subIndex:"",emptyNodeLabel:"wc_native"===v?"Add Checkout":"",allowedSteps:"wc_native"===v?["wc_checkout"]:[],replaceCurrentStep:!0,prevFirstParent:M,type:v})},{id:"edge-".concat(u,"-").concat(f),source:u,target:f},{type:"btnNode",id:"bump-".concat(f),data:{title:"Add Order Bump",type:"wc_order_bump",icon:"order-bump",prevFirstParent:M,mainIndex:d,stepIndex:r}},{id:"edge-".concat(f,"-bump-").concat(f),source:f,target:"bump-".concat(f)},{id:"edge-bump-".concat(f,"-").concat(R),source:"bump-".concat(f),target:R})):(delete t[a].tags.no_bump,l.push({type:"wc_native"===v?"emptyNode":"step",id:f,data:Wb(Wb({},t[a]),{},{mainIndex:d,stepIndex:r,prevFirstParent:M,emptyNodeLabel:"wc_native"===v?"Add Checkout":"",allowedSteps:"wc_native"===v?["wc_checkout"]:[],replaceCurrentStep:!0})},{id:"edge-".concat(u,"-").concat(f),source:u,target:f}),c.map((function(e,o){var a=e.id,i=void 0===a?"":a,c=(e.tags,"node-".concat(s));++s,l.push({type:"step",id:c,data:Wb(Wb({},t[i]),{},{mainIndex:d,stepIndex:r,subIndex:o,parent_id:M},n&&{tags:Wb({},eh)})},{id:"edge-".concat(f,"-").concat(c),source:f,target:c},{id:"edge-".concat(c,"-").concat(R),source:c,target:R})})))})),L=[],p||L.push("wc_upsells"),p||h||L.push("wc_thankyou"),l.push({type:0===L.length?"merger":"addNode",id:R,data:{mainIndex:d,lastParentId:M,currentParentType:v,prevFirstParent:F,lastIteratedStep:j,allowedSteps:L,newUpsell:!0}}),u=R),e.abrupt("break",88);case 10:if(Object(Nl.isEmpty)(w)){e.next=87;break}B="",q="node-".concat(s),++s,z=Yb(w.entries()),e.prev=15,z.s();case 17:if((U=z.n()).done){e.next=77;break}if(H=Vb(U.value,2),V=H[0],Y=H[1],K=Y.id,X=void 0===K?"":K,$=Y.substeps,G=void 0===$?[]:$,B=parseInt(X),j=X,W="node-".concat(s,"-upsell-start-").concat(V),++s,Q=Wb({},t[parseInt(X)]),(Q=Wb(Wb({},Q),{},{mainIndex:d,stepIndex:V})).hasOwnProperty("tags")?Q.tags=Wb(Wb({start:{label:Object(Il.__)("Start","funnel-builder"),label_class:"bwf-st-c-badge-green"}},r&&eh),Q.tags):Q.tags=Wb({start:{label:Object(Il.__)("Start","funnel-builder"),label_class:"bwf-st-c-badge-green"}},r&&eh),l.push({type:"step",id:W,data:Wb({},Q)},{id:"edge-".concat(u,"-").concat(W),source:u,target:W}),++s,Z="node-".concat(s,"-upsell-end-").concat(V),++s,!Object(Nl.isEmpty)(G)){e.next=38;break}J="node-".concat(s),++s,l.push({type:"btnNode",id:J,data:{title:"Add Offer",type:"offer",mainIndex:d,stepIndex:0,icon:"offer-flow",prevFirstParent:B}},{id:"edge-".concat(W,"-").concat(J),source:W,target:J},{id:"edge-".concat(J,"-").concat(Z),source:J,target:Z}),l.push({type:"step",id:Z,data:Wb(Wb({},t[parseInt(X)]),{},{upsellEnd:!0,mainIndex:d,tags:Wb({end:{label:"End",label_class:"bwf-st-c-badge-red"}},r&&eh)})},{id:"edge-".concat(Z,"-").concat(q),source:Z,target:q}),e.next=75;break;case 38:ee=Yb(G.entries()),e.prev=39,ee.s();case 41:if((te=ee.n()).done){e.next=64;break}if(ne=Vb(te.value,2),re=ne[0],oe=ne[1],ae=oe.id,ie=void 0===ae?"":ae,ce="",!o||!o.hasOwnProperty(parseInt(ie))){e.next=49;break}ce=o[parseInt(ie)],e.next=61;break;case 49:return e.next=51,i(parseInt(ie),s,Z,d,V,re,Z,B,W);case 51:le=e.sent,ue=le.offerNode,se=void 0===ue?[]:ue,fe=le.newNodeCount,de=void 0===fe?0:fe,pe=le.offerSource,be=void 0===pe?"":pe,Object(Nl.isEmpty)(se)||(he=l).push.apply(he,Kb(Object(Nl.cloneDeep)(se))),de>0&&(s=de),0==parseInt(re)&&(ce=be);case 61:0==parseInt(re)&&""!=ce&&(l.push({id:"edge-".concat(W,"-").concat(ce,"-offeredge"),source:W,target:ce}),a.hasOwnProperty(ce)&&delete a[ce]);case 62:e.next=41;break;case 64:e.next=69;break;case 66:e.prev=66,e.t1=e.catch(39),ee.e(e.t1);case 69:return e.prev=69,ee.f(),e.finish(69);case 72:me="node-".concat(s,"-upsell-end-node-").concat(V),s++,l.push({type:"addNode",id:Z,data:{upsellAfterId:parseInt(X),upsellEndAddLast:!0,mainIndex:d,stepIndex:V,prevFirstParent:B,allowedSteps:["offer"]}},{id:"edge-".concat(me,"-").concat(q),source:Z,target:me},{type:"step",id:me,data:Wb(Wb({},t[parseInt(X)]),{},{upsellEnd:!0,mainIndex:d,tags:Wb({end:{label:"End",label_class:"bwf-st-c-badge-red"}},r&&eh)})},{id:"edge-".concat(me,"-").concat(q,"-2"),source:me,target:q});case 75:e.next=17;break;case 77:e.next=82;break;case 79:e.prev=79,e.t2=e.catch(15),z.e(e.t2);case 82:return e.prev=82,z.f(),e.finish(82);case 85:l.push({type:h?"merger":"addNode",id:q,data:{mainIndex:d,lastParentId:B,currentParentType:v,allowedSteps:["wc_thankyou"],lastIteratedStep:j}}),u=q;case 87:return e.abrupt("break",88);case 88:case"end":return e.stop()}}),e,null,[[15,79,82,85],[39,66,69,72]])})),g.s();case 16:if((O=g.n()).done){e.next=20;break}return e.delegateYield(w(),"t0",18);case 18:e.next=16;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(13),g.e(e.t1);case 25:return e.prev=25,g.f(),e.finish(25);case 28:if(u==d?(l.push({type:"emptyNode",id:"fb-empty"},{id:"edge-id-2",source:"start",target:"fb-empty"}),u="fb-empty"):Object(Rl.ib)()?l.push({id:"edge-start-node-".concat(s),source:"start",target:d}):(j=["optin","landing"],b||j.push("wc_checkout"),l.push({type:"addNode",id:d,data:{mainIndex:"start",allowedSteps:j,prevFirstParent:"start",lastIteratedStep:"start"}},{id:"edge-start-node-".concat(s),source:"start",target:d})),f?l.push({type:"end",id:"end"}):l.push({id:"edge-".concat(u,"-end"),source:u,target:"end"},{type:"end",id:"end"}),!Object(Nl.isEmpty)(a))for(_=Object.keys(a),E=0,S=_;E<S.length;E++)x=S[E],k=a[x],l.push({id:"edge-orphan-node-".concat(s),source:k,target:x,animated:!0,type:"bwf-orphan",data:{bwfSourceEdgeType:"yes"}}),s++;case 31:case"end":return e.stop()}}),e,null,[[13,22,25,28]])}))(),"t0",6);case 6:return e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c(e)};function nh(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function rh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ah=function(e){var t=e.fullScreen,n=e.setCanvasFullScreen,o=(e.showExperiment,e.funnelId,pc().setCenter),a=Ge(),i=Vl(),c=i.isLoading,l=i.getNodeElements,u=void 0===l?[]:l,s=i.getStepsList,f=rh(Object(r.useState)([]),2),d=f[0],p=f[1],b=rh(Object(r.useState)(!1),2),h=b[0],m=b[1],y=Object(r.useRef)(),v=rh(Object(r.useState)(!1),2),g=v[0],O=v[1],w=u(),j=s(),_=Object(lu.b)().isExpired,E=Object(lu.b)("ul").isExpired,S=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,th(t,j,_,E);case 2:n=e.sent,p(Hb(n));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){nh(a,r,o,i,c,"next",e)}function c(e){nh(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),x=Object(Jl.a)().resetFunnel;Object(r.useEffect)((function(){c||(S(w),O(!0)),g&&x()}),[w,j]);var k=Xe((function(e){return e.setSelectedElements})),C={"bwf-default":Bs,"bwf-orphan":qs},P={start:ps,step:fs,end:ds,emptyNode:Ns,btnNode:ks,addNode:ys,sectionNode:Tb,merger:bs,condition:Ts};return Object(r.useEffect)((function(){Object(Nl.isNull)(document.querySelector("#bwf-funnel-canvas-wrap"))||(y.current=document.querySelector("#bwf-funnel-canvas-wrap").getBoundingClientRect())})),Object(r.useEffect)((function(){if(!h){var e=0,t=0,n=a.getState().nodes;if(n.length&&y.current){var r=n[0];r.hasOwnProperty("__rf")?(e=r.__rf.position.x+140,t=r.__rf.position.y):(e=r.position.x+140,t=r.position.y),t=parseFloat(t)+.4*parseFloat(y.current.height),m(!0),o(e,t,1)}}}),[d,h]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Zc,{defaultZoom:1,minZoom:.5,maxZoom:4,nodeTypes:P,nodesConnectable:!1,nodesDraggable:!1,elements:d,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,edgeTypes:C},Object(r.createElement)(jl,{showInteractive:!1},Object(r.createElement)(gl,{onClick:function(){n(!t),document.body.style.overflow=t?"":"hidden",k([])}},t?Object(r.createElement)("span",{style:{fontSize:"15px",marginTop:"6px"},className:"dashicons dashicons-fullscreen-exit-alt"}):Object(r.createElement)("span",{style:{fontSize:"15px",marginTop:"6px"},className:"dashicons dashicons-fullscreen-alt"}))),Object(r.createElement)(kl,null)))};function ih(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ch(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ch(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ch(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(Pl.useParams)().id,n=e.funnelId,o=void 0===n?t:n,a=e.funnelTitle,i=Vl(),c=i.isLoading,l=i.getNodeElements,u=i.getFunnelId,s=i.getFunnelData,f=i.isAnalyticsLoaded,d=Object(Yl.a)(),p=d.fetchNodes,b=d.setLoading,h=d.fetchAnalytics,m=Object(Jl.a)(),y=m.setFunnelTitle,v=m.setFunnelLoading,g=ih(Object(r.useState)(!1),2),O=g[0],w=(g[1],ih(Object(r.useState)(!1),2)),j=w[0],_=w[1],E=ih(Object(r.useState)(!1),2),S=E[0],x=E[1],k=u(),C=l(),P=s();Object(Rl.l)(Object(Il.__)("Funnel Canvas #","funnel-builder")+o),Object(r.useEffect)((function(){!c&&P.hasOwnProperty("title")&&(y(P.title),v(!1),f||Object(Nl.isEmpty)(C)||h(o))}),[c]),Object(r.useEffect)((function(){return(parseInt(k)!==parseInt(o)||Object(Nl.isEmpty)(C))&&(b(!0),p(o,O)),function(){document.body.style.overflow=""}}),[O]);return Object(r.createElement)("div",{id:"bwf-funnel-canvas-wrap",className:Dl()({"full-screen":S})},S&&Object(r.createElement)("div",{className:"bwf-flow-header-wrap"},Object(r.createElement)("div",{className:"bwf-funnel-flow-header"},Object(Rl.ib)()&&Object(r.createElement)("div",{className:"bwf-canvas-funnel-title"},a),!Object(Nl.isEmpty)(C)&&!1)),c?Object(r.createElement)(Kl.a,{size:"xxl",style:{margin:"100px auto"}}):Object(r.createElement)(Cl,null,Object(r.createElement)(ah,{setCanvasFullScreen:function(){x(!S)},fullScreen:S,showExperiment:O,funnelId:o})),!Object(Rl.hb)()&&Object(r.createElement)(Xl.a,{isOpen:j,onRequestClose:function(){return _(!1)},modalContent:{title:Object(Il.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(Il.__)("Increased Conversion Rates","funnel-builder"),Object(Il.__)("Greater Return on Ad Spend","funnel-builder"),Object(Il.__)("Reduced Bounce Rates","funnel-builder")]},proLink:Object(Rl.S)(["Canvas","Experiment"])}}))}}])]);