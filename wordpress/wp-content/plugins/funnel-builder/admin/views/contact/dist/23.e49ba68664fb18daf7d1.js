(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{435:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(124),c=n(2),u=n(1),l=n(351),i=n(271),p=n(81),a=n(3),s=n(14),f=function(e){var t=Object(r.useRef)(!0),n=Object(i.a)(),o=n.getTemplates,u=n.getActiveBuilder,l=n.getActiveGroup,p=Object(c.isEmpty)(o()),a=l(),s=u();Object(r.useEffect)((function(){var n,r;t.current||!e.current||p||(r=null===(n=e.current)||void 0===n?void 0:n.getClientRects()[0].top)&&e.current&&r<252.86&&window.scrollTo(0,60)}),[p,a,s]),Object(r.useEffect)((function(){t.current&&!Object(c.isEmpty)(s)&&(window.scrollTo(0,0),t.current=!1)}),[s])},d=n(23),b=n(285);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=Object(d.b)("ul").isProFeatureLocked,n=Object(i.a)(),m=n.getTemplates,g=n.getBuilders,h=(n.getFilters,n.getDefaultBuilder),w=n.templateLoading,y=n.getActiveBuilder,O=n.getActiveSubFilter,_=n.getActiveGroup,j=n.getCurrentTemplate,k=Object(p.a)().setActiveGroup,C=e.onImportComplete,P=e.isStoreCheckout,E=void 0!==P&&P,S=e.scratchConfirmModalData,T=e.storeCheckoutId,D=e.isStoreChekoutExists,F=void 0!==D&&D,A=e.templateListNotice,I=e.showImportNotice,B=e.urlDependency,N=void 0===B||B,x=e.showEditors,z=void 0===x||x,G=e.showTemplatesNav,L=void 0===G||G,R=e.showBuildFromScratch,J=void 0===R||R,M=e.showSelectedTemplates,U=void 0!==M&&M,Y=e.previewCustomizeEnabled,q=void 0!==Y&&Y,H=e.hideTabs,K=void 0===H?[]:H,Q=Object(s.i)().importType,V=m(),W=g(),X=JSON.parse(JSON.stringify(W)),Z=h(),$=y(),ee=w(),te=O(),ne=j(),re=Object(o.useParams)(),oe=re.id,ce=void 0===oe?0:oe,ue=re.filter,le=void 0===ue?"funnel":ue,ie=re.builder,pe=re.templateId,ae=re.step,se=Object(r.useRef)();f(!Object(a.ib)()&&se);var fe,de=N?pe:ne.id,be=N?ae:ne.activeStep,me=E&&T?T:ce,ve=_(),ge=me||E||!N?ve:le,he={funnel:Object(u.__)("All","funnel-builder"),wc_checkout:Object(u.__)("Checkout","funnel-builder"),landing:Object(u.__)("Sales Funnels","funnel-builder"),optin:Object(u.__)("Lead Funnels","funnel-builder")};((me||F||K.includes("wc_checkout"))&&delete he.wc_checkout,F&&(he.upsell&&delete he.upsell,me||(he.wc_checkout=Object(u.__)("Checkout","funnel-builder"))),!t||me||K.includes("upsell")||(he.upsell=Object(u.__)("One Click Upsell","funnel-builder")),X&&X.wc_checkout&&X.wc_checkout.customizer&&delete X.wc_checkout.customizer,"funnel"===Q)&&(null===(fe=X[ge])||void 0===fe||delete fe.wp_editor);Object(r.useEffect)((function(){return function(){k("funnel")}}),[]);var we=function(){var e=ie||Z;return Object(c.isEmpty)($)||(e=$),X&&X[ge]&&!X[ge][e]&&(e=X[ge][Z]?Z:"elementor"),e},ye=["1","2","3","inline","popup"],Oe=function(e,t){return("wc_checkout"===t||"optin"===t)&&te&&ye.includes(te)?V[t][$][e].group_type[te]:e},_e={landing:"sp",optin:"op",optin_ty:"op-confirmed",wc_checkout:"checkouts",upsell:"offer",wc_thankyou:"order-confirmed"},je=function(e,t,n){var r=_e.hasOwnProperty(e)?_e[e]:"";return"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},ke=Object(a.ib)()?"/store-checkout":me?"/funnels/".concat(me):"/templates";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l.a,{filters:b.e,templates:V,activeBuilder:we(),templateCards:function(){if(Object(c.isEmpty)(V)||Object(c.isEmpty)([ge]))return{};var e,t=we(),n={};if("upsell"===ge)n=null===(e=V[ge])||void 0===e?void 0:e[t];else if("funnel"===ge){var r=V[ge][t];for(var o in r){var u,l=r[o];if(r[o].hasOwnProperty("group")||U&&!U.includes(l.name))if(!(l.group.includes("sales")||l.group.includes("optin")||null!==(u=r[o])&&void 0!==u&&u.build_from_scratch))continue;n[o]=r[o]}}else for(var i in V.funnel[t]){var p=V.funnel[t][i];(!U||U&&U.includes(p.name))&&("landing"===ge&&p.group.includes("sales")||"optin"===ge&&p.group.includes("optin")||"wc_checkout"===ge&&p.group.includes("wc_checkout"))&&(n[i]=p)}return n}(),editors:X,defaultBuilder:Z,isTemplateLoading:ee,activeTemplateGroup:ge,templateGroup:he,previewData:function(){if(Object(c.isEmpty)(V)||!de)return{};var e={success:!0},t=[],n=[];try{var r=we();if("upsell"===ge){t=[];var o=r;for(var l in"oxy"===o&&(o="oxygen"),"customizer"===o&&(o="elementor"),V[ge][r]){var i=V[ge][r][l];if(!i.build_from_scratch){var p={};p.id=l,p.funnel=l,p.slug=l,p.name=i.name,p.thumbnail=i.thumbnail,p.template=de,p.pro=i.pro,p.preview="https://templates-".concat(o,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/"),p.group_type={},p.type="upsell",t.push(p),n.push({id:l,preview:"https://templates-".concat(o,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/")})}}e.activeTemplate={id:de,thumbnail:de,preview:"https://templates-".concat(o,".funnelswp.com/offer/").concat(V[ge][r][de].prevslug,"/"),slug:de,prevId:de,name:V[ge][r][de].name,pro:V[ge][r][de].pro,tempPro:V[ge][r][de].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var a="funnel";switch(ge){case"optin":a="optin";break;case"landing":a="sales";break;case"wc_checkout":a="checkout"}var s=V.funnel[r][de];t=s.steps?s.steps.map((function(e){var t=V[e.type][r][Oe(e.slug,e.type)];if(void 0===t)throw new Error("Step template not found with slug "+Oe(e.slug,e.type));var o="";switch(e.type){case"landing":o=Object(u.__)("Sales Page","funnel-builder");break;case"wc_checkout":o=Object(u.__)("Checkout Page","funnel-builder");break;case"upsell":o=Object(u.__)("One Click Upsell","funnel-builder");break;case"wc_thankyou":o=Object(u.__)("Thank You Page","funnel-builder");break;case"optin":o=Object(u.__)("Optin Page","funnel-builder");break;case"optin_ty":o=Object(u.__)("Optin Confirmation Page","funnel-builder")}t.group_type?Object.values(t.group_type).forEach((function(t){var o=V[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(o.prevslug),preview:je(e.type,o,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:je(e.type,t,r)});return{id:"".concat(e.type,"-").concat(de),slug:Oe(e.slug,e.type),funnel:de,step:e.type,name:o,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:a,group_type:t.group_type||{},preview:je(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var f=s?s.steps.filter((function(e){return e.type===be})):[],d=V[f[0].type][r][Oe(f[0].slug,f[0].type)];e.activeTemplate={thumbnail:"".concat(be,"-").concat(de),prevId:"".concat(be,"-").concat(d.prevslug),preview:je(f[0].type,d,r),slug:de,name:V.funnel[r][de].name,pro:V.funnel[r][de].pro,tempPro:V.funnel[r][de].pro,group:"funnel",filters:!!d.group_type&&Object.keys(d.group_type),type:be,funnelGroup:s.group,filter:"wc_checkout"===be?d.no_steps:d.group?d.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:me,onImportComplete:C,templateFilterCheck:function(e){return!me||"funnel"===Q||!1===te||!1===te||!(!me||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===te?"optin":te):te===e.group)},activeFilter:te,isStoreCheckout:E,parentRoute:ke,showTemplatesNav:L,showBuildFromScratch:!!J&&("funnel"!==Q||E&&!me),funnelTitleModalData:v({},E&&{title:Object(u.__)("Store Checkout","funnel-builder")}),scratchConfirmModalData:S,importApiPrefix:E?"store-checkout":"funnels",templateListNotice:A,showImportNotice:I,urlDependency:N,showEditors:z,previewCustomizeEnabled:q,listRef:se}))}}}]);