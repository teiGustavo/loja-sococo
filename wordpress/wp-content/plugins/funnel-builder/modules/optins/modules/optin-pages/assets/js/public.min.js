"use strict";function _typeof(n){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}!function(l){({init:function(){var n=this;l(document).ready(function(){n.renderForm(),n.handleSubmit(),n.renderPBPopUps(),n.attachCloseBtn(),n.initPhoneFlag()}),l(document).on("wffn_reload_popups",function(){n.renderPBPopUps()}),l(document).on("wffn_reload_phone_field",function(){n.initPhoneFlag()})},initPhoneFlag:function(){var n={initialCountry:window.wfffOptinVars.op_flag_country,separateDialCode:!0,geoIpLookup:function(e){l.get("https://ipinfo.io",function(){},"jsonp").always(function(n){n=n&&n.country?n.country:"us";e(n)})}};void 0!==window.wfffOptinVars.onlyCountries&&0<window.wfffOptinVars.onlyCountries.length&&(n.onlyCountries=window.wfffOptinVars.onlyCountries);var e,t=document.querySelectorAll(".phone_flag_code input[type='tel']");for(e in t)"object"===_typeof(t[e])&&void 0!==window.intlTelInput&&window.intlTelInput(t[e],n)},attachCloseBtn:function(){jQuery(document).on("click",".bwf_pp_close",function(n){n.preventDefault(),jQuery(".bwf_pp_overlay").removeClass("show_popup_form"),jQuery("body").css("overflow","")})},renderPBPopUps:function(){jQuery(".wfop_pb_widget_wrap").each(function(){var e=this;jQuery(this).find(".bwf-custom-button a").click(function(n){n.preventDefault(),jQuery(e).find(".bwf_pp_overlay").addClass("show_popup_form"),jQuery("body").css("overflow","hidden")})})},renderForm:function(){0<jQuery(".bwf_pp_overlay").length&&jQuery('a[href*="wfop-popup=yes"]').on("click",function(n){n.preventDefault(),jQuery(".bwf_pp_overlay").addClass("show_popup_form")})},DoValidation:function(f){var r=!0;return jQuery(f).find(".wfop_required").each(function(){var n,e=jQuery(this),t=null,a=window.wfffOptinVars.op_valid_text,o=window.wfffOptinVars.op_valid_email;""===jQuery.trim(e.val())?t=a:"checkbox"===e.attr("type")?e.prop("checked")||(t=a):"radio"===e.attr("type")&&(n=e.attr("name"),0===jQuery(f).find("input:radio[name="+n+"]:checked").length&&(t=a));a=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);""!==jQuery.trim(e.val())&&"wfop_optin_email"===e.attr("name")&&(jQuery.trim(e.val()).match(a)||(t=o)),null!==t&&(e.parents(".bwfac_form_sec").addClass("bwfac_error"),0===e.parents(".bwfac_form_sec").find(".error").length&&e.parents(".bwfac_form_sec").append('<span class="error">'+t+"</span>"),r=!1)}),jQuery(f).find(".wfop_phone_validation .wffn-optin-input").each(function(){var n,e=jQuery(this),t=null,a=window.wfffOptinVars.op_valid_phone;""!==jQuery.trim(e.val())&&"wfop_optin_phone"===e.attr("name")&&void 0!==window.intlTelInputGlobals&&((n=window.intlTelInputGlobals.getInstance(e.get(0))).isValidNumber()||(t=Array.isArray(a)?a[n.getValidationError()]:a)),null!==t&&(e.parents(".bwfac_form_sec").addClass("bwfac_error"),0===e.parents(".bwfac_form_sec").find(".error").length&&e.parents(".bwfac_form_sec").append('<span class="error">'+t+"</span>"),r=!1)}),window.wffnFormValid=r,jQuery(document).trigger("wffn_custom_optin_form_validate",[f,r]),window.wffnFormValid},setUpClick:function(i){var u=this;jQuery(i).find("#wffn_custom_optin_submit").on("click",function(n){var e=!0;jQuery(this).removeAttr("disabled");var t=jQuery(this),a=i;jQuery(a).find(".bwfac_form_sec").removeClass("bwfac_error"),jQuery(a).find(".bwfac_form_sec .error").remove();var o,f=jQuery(a).find("input[name=optin_is_admin]").val(),r=jQuery(a).find("input[name=optin_is_ajax]").val(),a=jQuery(a).find("input[name=optin_is_preview]").val();(f||r||a)&&(e=!1),e=u.DoValidation(i),n.preventDefault(),e?(jQuery(this).attr("disabled","disabled"),e=jQuery(this).attr("data-subitting-text"),jQuery(i).find("button.wfop_submit_btn .bwf_heading").html(e),void 0!==window.intlTelInputGlobals&&void 0!==jQuery(i).find('input[name="wfop_optin_phone"]').get(0)&&(o=window.intlTelInputGlobals.getInstance(jQuery(i).find('input[name="wfop_optin_phone"]').get(0)).getSelectedCountryData(),jQuery(i).find('input[name="wfop_optin_phone_dialcode"]').eq(0).val("+"+o.dialCode),jQuery(i).find('input[name="wfop_optin_phone_countrycode"]').eq(0).val(o.iso2)),t.parents(".wffn-custom-optin-from").addClass("wffn-form-overlay"),u.handleLeadEvent(),o="",void 0!==window.wffnPublicVars&&Object.hasOwnProperty.call(window.wffnfunnelData,"hash")&&(o=window.wffnfunnelData.hash),jQuery.ajax({url:window.wffnfunnelVars.ajaxUrl+"?action=wffn_submit_custom_optin_form&lead_event_id="+wffnfunnelVars.op_lead_tracking.fb.event_ID+"&wffn-si="+o,data:jQuery(i).serialize(),dataType:"json",type:"post"}).always(function(n){if(t.parents(".wffn-custom-optin-from").addClass("wffn-form-overlay"),Object.prototype.hasOwnProperty.call(n,"mapped")){for(var e in n.mapped)jQuery(".wfop_integration_form input[name='"+e+"']").val(n.mapped[e]);jQuery(".wfop_integration_form").trigger("submit")}else Object.prototype.hasOwnProperty.call(n,"next_url")&&""!==n.next_url&&(window.location.href=n.next_url)})):console.log("form validation failed")})},handleSubmit:function(){var n=this;jQuery("form.wffn-custom-optin-from").each(function(){n.setUpClick(this)})},handleLeadEvent:function(){var n,e,t,a,o,f,r,i,u,p;1==wffnfunnelVars.op_should_render&&("object"===_typeof(wffnfunnelVars.op_lead_tracking.fb.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.fb.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.fb.fb_pixels&&("undefined"==typeof fbq&&(t=window,n=document,t.fbq||(e=t.fbq=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},t._fbq||(t._fbq=e),(e.push=e).loaded=!0,e.version="2.0",e.queue=[],(t=n.createElement("script")).async=!0,t.src="https://connect.facebook.net/en_US/fbevents.js",(o=n.getElementsByTagName("script")[0]).parentNode.insertBefore(t,o)),o=wffnfunnelVars.op_lead_tracking.fb.fb_pixels.split(","),l(o).each(function(n,e){fbq("init",e)})),o="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent({}):{},fbq("track","Lead",o,{eventID:wffnfunnelVars.op_lead_tracking.fb.event_ID})),"object"===_typeof(wffnfunnelVars.op_lead_tracking.pint.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.pint.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.pint.pixels&&(window.pintrk||(window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))},(f=window.pintrk).queue=[],f.version="3.0",(o=document.createElement("script")).async=!0,o.src="https://s.pinimg.com/ct/core.js",(f=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,f)),f=wffnfunnelVars.op_lead_tracking.pint.pixels.split(","),a="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent({}):{},l(f).each(function(n,e){pintrk("load",e,{np:"woofunnels"}),pintrk("track","Lead",a)})),"undefined"!=typeof gtag&&"object"===_typeof(wffnfunnelVars.op_lead_tracking.ga.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.ga.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.ga.ids&&(i=wffnfunnelVars.op_lead_tracking.ga.ids.split(","),r="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent({}):{},l(i).each(function(n,e){r.send_to=e,gtag("event","Lead",r)})),"undefined"!=typeof gtag&&"object"===_typeof(wffnfunnelVars.op_lead_tracking.gad.enable)&&"yes"===wffnfunnelVars.op_lead_tracking.gad.enable[0]&&!1!==wffnfunnelVars.op_lead_tracking.gad.ids&&(i=wffnfunnelVars.op_lead_tracking.gad.ids.split(","),u=[],"string"==typeof wffnfunnelVars.op_lead_tracking.gad.labels&&(u=wffnfunnelVars.op_lead_tracking.gad.labels.split(",")),p="undefined"!=typeof wffnAddTrafficParamsToEvent?wffnAddTrafficParamsToEvent({}):{},l(i).each(function(n,e){void 0!==u[n]&&""!==u[n]?p.send_to=e+"/"+u[n]:p.send_to=e,gtag("event","Lead",p)})))}}).init()}(jQuery);